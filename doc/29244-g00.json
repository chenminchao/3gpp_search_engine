[{"key": "Scope", "numbering": "1", "title_level": 0, "desc": "1\tScope\nThe present document specifies the Packet Forwarding Control Protocol (PFCP) used on the interface between the control plane and the user plane function. \nPFCP shall be used over:\n-the Sxa, Sxb, Sxc and the combined Sxa/Sxb reference points specified in 3GPP TS 23.214 [2].\n- the Sxa' and Sxb' reference points specified in 3GPP TS 33.107 [20]. In the rest of this specification, no difference is made between Sxa and Sxa', or between Sxb and Sxb'. The Sxa' and Sxb' reference points reuse the protocol specified for the Sxa and Sxb reference points, but comply in addition with the security requirements specified in clause 8 of 3GPP 33.107 [20]. \n\tthe N4 interface specified in 3GPP TS 23.501 [28] and 3GPP TS 23.502 [29].\nIn this specification the term CP function applies to control plane nodes such as SGW-C, PGW-C, TDF-C and SMF.\nIn this specification the term UP function applies to control plane nodes such as SGW-U, PGW-U, TDF-U and UPF.\nThe prefix PFCP in message and procedure names is used to indicate that messages and procedures are common and used on Sx and N4 reference point. A PFCP session refers to both Sx and/or N4 sessions. PFCP association are describing procedures to establish associations between EPC nodes (SGW-C/PGW-C/TDF-C and SGW-U/PGW-U/TDF-U) and also between 5G nodes (SMF and UPF).\nIn the related stage 2 specifications the prefix Sx and N4 is used for these common procedures realised by PFCP\nClauses or paragraphs that only apply to EPC or 5GC are indicated by the label \"for EPC\" or \"for 5GC\".\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "References", "numbering": "2", "title_level": 0, "desc": "2\tReferences\nThe following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 23.214: \"Architecture enhancements for control and user plane separation of EPC nodes; Stage 2\".\n[3]\t3GPP TS 29.281: \"General Packet Radio System (GPRS) Tunnelling Protocol User Plane (GTPv1-U)\".\n[4]\tIETF RFC 768: \"User Datagram Protocol\".\n[5]\tIETF RFC 791: \"Internet Protocol\".\n[6]\tIETF RFC 2460: \"Internet Protocol, Version 6 (IPv6) Specification\". \n[7]\t3GPP TS 23.203: \"Policy and charging control architecture; Stage 2\".\n[8]\t3GPP TS 29.212: \"Policy and Charging Control (PCC); Reference points\".\n[9]\t3GPP TS 29.274: \"3GPP Evolved Packet System. Evolved GPRS Tunnelling Protocol for EPS (GTPv2)\".\n[10]\t3GPP TS 36.413: \"Evolved Universal Terrestrial Radio Access Network (E-UTRAN); S1 Application Protocol (S1AP)\".\n[11]\t3GPP TS 29.213: \"Policy and Charging Control signalling flows and Quality of Service (QoS) parameter mapping\".\n[12]\tIETF RFC 5905: \"Network Time Protocol Version 4: Protocol and Algorithms Specification\".\n[13]\tIETF RFC 2474: \"Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers\".\n[14]\t3GPP TS 23.401: \"General Packet Radio Service (GPRS) enhancements for Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access\".\n[15]\t3GPP TS 22.153: \"Multimedia Priority Service\".\n[16]\tIETF RFC 4006: \"Diameter Credit Control Application\".\n[17]\t3GPP TS 32.251: \"Telecommunication management; Charging management; Packet Switched (PS) domain charging\".\n[18]\t3GPP TS 32.299: \"Telecommunication management; Charging management; Diameter charging application\".\n[19]\t3GPP TS 23.060: \"General Packet Radio Service (GPRS); Service description; Stage 2\".\n[20]\t3GPP TS 33.107: \"3G security; Lawful interception architecture and functions\".\n[21]\t3GPP TS 29.251: \"Gw and Gwn reference points for sponsored data connectivity\".\n[22]\tIETF RFC 2474, \"Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers\".\n[23]\tIETF RFC 7230: \"Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing\".\n[24]\t3GPP TS 23.007: \"Restoration procedures\".\n[25]\t3GPP TS 29.303: \"Domain Name System Procedures; Stage 3\"\n[26]\tIETF RFC 5905: \"Network Time Protocol Version 4: Protocol and Algorithms Specification\".\n[27]\tIETF RFC 1035: \"Domain Names - Implementation and Specification\".\n[28]\t3GPP TS 23.501:\"System Architecture for the 5G System\"\n[29]\t3GPP TS 23.502:\"Procedures for the 5G System\"\n[30]\tIEEE 802.1Q: \"Virtual Bridged Local Area Networks\"\n[31]\tIEEE 802.3: \"IEEE Standard for Ethernet\"\n[32]\tIETF RFC 826: \"An Ethernet Address Resolution Protocol or Converting Network Protocol Addresses\".\n[33]\tIETF RFC 4861: \"Neighbor Discovery for IP version 6 (IPv6)\". .\n[34]\t3GPP TS 38.415: \"NG-RAN; PDU Session User Plane Protocol\".\n[35]\t3GPP TS 32.422: \"Telecommunication management; Subscriber and equipment trace; Trace control and configuration management\".\n[36]\tIETF RFC 4282: \"The Network Access Identifier\".\n[37]\tIETF RFC 2865: \"Remote Authentication Dial In User Service (RADIUS)\".\n[38]\tIETF RFC 3162: \"RADIUS and IPv6\".\n[39]\t3GPP TS 29.061: \"Interworking between the Public Land Mobile Network (PLMN) supporting packet based services and Packet Data Networks (PDN)\".\n[40]\t3GPP TS 23.527: \"5G System; Restoration procedures\".\n[41]\t3GPP TS 29.512: \"5G System; Session Management Policy Control Service; Stage 3\".\n[42]\t3GPP TS 38.300: \"NR; NR and NG-RAN Overall Description; Stage 2\".\n[43]\t3GPP TS 29.510: \"5G System; Network Function Repository Services; Stage 3\".\n[44]\t3GPP TS 23.503:\"Policy and Charging Control Framework for the 5G System\".\n[45]\t3GPP TS 32.255: \"Telecommunication management; Charging management; 5G data connectivity domain charging; Stage 2\".\n[46]\t3GPP TS 29.512: \"Session Management Policy Control Service, Stage 3\".\n[47]\t3GPP TS 33.127: \"Security; Lawful Interception (LI) architecture and functions\".\n[48]\t3GPP TS 23.003: \"Numbering, addressing and identification\".\n[49]\t3GPP TS 29.561: \"5G System; Interworking between 5G Network and external Data Networks; Stage 3\".\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Definitions, symbols and abbreviations", "numbering": "3", "title_level": 0, "desc": "3\tDefinitions, symbols and abbreviations\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Protocol Stack", "numbering": "4", "title_level": 0, "desc": "4\tProtocol Stack\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Introduction", "numbering": "4.1", "title_level": 1, "desc": "4.1\tIntroduction\nThe protocol stack for the control plane over the Sxa, Sxb, Sxc and combined Sxa/Sxb reference points shall be as depicted in Figure 4.1-1. Clauses 4.2 and 4.3 further specify the related UDP and IP requirements.\n\n\nFigure 4.1-1: Control Plane stack over Sxa, Sxb, Sxc and combined Sxa/Sxb and N4\nThe protocol stack for the user plane over the Sxa, Sxb and N4reference points (see clause 5.3) shall be as depicted in Figure 4.1-2. 3GPP TS 29.281 [3] further specifies the related GTP-U, UDP and IP requirements. Both IPv4 and IPv6 shall be supported.\n\n\nFigure 4.1-2: User Plane stack over Sxa, Sxb, combined Sxa/Sxb and N4\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "UDP Header and Port Numbers", "numbering": "4.2", "title_level": 1, "desc": "4.2\tUDP Header and Port Numbers\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "4.2.1", "title_level": 2, "desc": "4.2.1\tGeneral\nA User Datagram Protocol (UDP) compliant with IETF RFC 768 [4] shall be used.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Request Message", "numbering": "4.2.2", "title_level": 2, "desc": "4.2.2\tRequest Message\nThe UDP Destination Port number for a Request message shall be 8805. It is the registered port number for PFCP. \nThe UDP Source Port for a Request message is a locally allocated port number at the sending entity.\nNOTE:\tThe locally allocated source port number can be reused for multiple Request messages.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Response Message", "numbering": "4.2.3", "title_level": 2, "desc": "4.2.3\tResponse Message\nThe UDP Destination Port value of a Response message shall be the value of the UDP Source Port of the corresponding Request message.\nThe UDP Source Port of a Response message shall be the value from the UDP Destination Port of the corresponding message.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "IP Header and IP Addresses", "numbering": "4.3", "title_level": 1, "desc": "4.3\tIP Header and IP Addresses\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "4.3.1", "title_level": 2, "desc": "4.3.1\tGeneral\nIn this clause, \"IP\" refers either to IPv4 as defined by IETF RFC 791 [5] or IPv6 as defined by IETF RFC 2460 [6]. A PFCP entity shall support both IPv4 and IPv6.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Request Message", "numbering": "4.3.2", "title_level": 2, "desc": "4.3.2\tRequest Message\nThe IP Destination Address of a Request message shall be an IP address of the peer entity. \nDuring the establishment of an PFCP Session, the CP and the UP functions select and communicate to each other the IP Destination Address at which they expect to receive subsequent Request messages related to that PFCP Session. The CP and the UP functions may change this IP address subsequently during an PFCP Session Modification procedure.\nThe IP Source Address of a Request message shall be an IP address of the sending entity.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Response Message", "numbering": "4.3.3", "title_level": 2, "desc": "", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Layer", "numbering": "4.4", "title_level": 1, "desc": "", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Layer", "numbering": "4.5", "title_level": 1, "desc": "4.3.3\tResponse Message\nThe IP Destination Address of a Response message shall be copied from the IP Source Address of the corresponding Request message.\nThe IP Source Address of a Response message shall be copied from the IP destination address of the corresponding Request message.\n4.4\tLayer 2\nTypically Ethernet should be used as a Layer 2 protocol, but operators may use any other technology.\n4.5\tLayer 1\nOperators may use any appropriate Layer 1 technology.\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General description", "numbering": "5", "title_level": 0, "desc": "5\tGeneral description\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Introduction", "numbering": "5.1", "title_level": 1, "desc": "5.1\tIntroduction\nThe architecture reference model with Control and User Plane Separation of EPC nodes is described in clause 4.2 of 3GPP TS 23.214 [2]. \nThe architecture reference model with SMF and UPF of 5GC nodes is described in clause 4.2 of 3GPP TS 23.501 [28].\nThis clause specifies the high level principles of the PFCP protocol and describe how 3GPP functionalities are realised on the Sxa, Sxb, Sxc and N4 reference points, e.g. Packet Forwarding, Policy and Charging Control, Lawful Interception.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Packet Forwarding Model", "numbering": "5.2", "title_level": 1, "desc": "5.2\tPacket Forwarding Model\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "5.2.1", "title_level": 2, "desc": "5.2.1\tGeneral\nThe packet forwarding scenarios supported over the Sxa, Sxb and Sxc reference points are specified in 3GPP TS 23.214 [2]. \nThe packet forwarding scenarios supported over the N4 reference point are specified in 3GPP TS 23.501 [28] and 3GPP TS 23.502 [29].\nThe CP function controls the packet processing in the UP function by establishing, modifying or deleting PFCP Session contexts and by provisioning (i.e. adding, modifying or deleting) PDRs, FARs, QERs, URRs, BAR and/or MAR or by activating/deactivating pre-defined PDRs, FARs, QERs, URRs, per PFCP session context, whereby an PFCP session context may correspond:\n-\tfor EPC, to an individual PDN connection, a TDF session, or a standalone session not tied to any PDN connection or TDF session used e.g. for forwarding Radius, Diameter or DHCP signalling between the PGW-C and the PDN. \n-\tfor 5GC, to an individual PDU session or a standalone PFCP session not tied to any PDU session.\nEach PDR shall contain a PDI, i.e. one or more match fields against which incoming packets are matched, and may be associated to the following rules providing the set of instructions to apply to packets matching the PDI:\n-\tone or more FARs, which contains instructions related to the processing of the packets as follows:\n-\tan Apply Action parameter, which indicates whether the UP function shall forward, duplicate, drop or buffer the packet with or without notifying the CP function about the arrival of a DL packet;\n-\tforwarding, buffering and/or duplicating parameters, which the UP function shall use if the Apply Action parameter requests the packets to be forwarded, buffered or duplicated respectively. These parameters may remain configured in the FAR regardless of the Apply Action parameter value, to minimize the changes to the FAR during the transitions of the UE between the idle and connected modes. The buffering parameters, when present, shall be provisioned in a BAR created at the PFCP session level and referenced by the FAR.\nNOTE 1:\tBuffering refers here to the buffering of the packet in the UP function. The UP function is instructed to forward DL packets to the CP function when applying buffering in the CP function. See clause 5.3.1.\n-\tzero, one or more QERs, which contains instructions related to the QoS enforcement of the traffic;\n-\tzero, one or more URRs, which contains instructions related to traffic measurement and reporting.\n-\tone MAR when the PDR is used for matching downlink traffic towards the UE, which contain instructions to apply ATSSS feature for a N4 session established for a MA PDU session. See clause 5.2.7.\nNOTE 2:\tA downlink PDR can be associated with two FARs for a N4 session established for a MA PDU session as a MAR contains two FARs for 3GPP and non-3GPP respectively.\nA FAR, a QER, a URR and a MAR shall only be associated to one or multiple PDRs of the same PFCP session context. \nThe QoS Enforcement Rule Correlation ID shall be assigned by the CP function to correlate QERs from multiple PFCP session contexts. For instance, the enforcement of APN-AMBR in the PGW-U shall be achieved by setting the same QoS Enforcement Rule Correlation ID to the QERs from different PFCP sessions associated with all the PDRs corresponding to the non-GBR bearers of all the UE's PDN connections to the same APN. The QERs that are associated to the same QoS Enforcement Rule Correlation ID in multiple PFCP sessions shall be provisioned, with the same QER contents, in each of these PFCP sessions. The QoS Enforcement Rule Correlation ID shall be only used to enforce the APN-AMBR when the UE is in EPC, it may be provided by the CP function over N4 to the UP function for a PDU session may move to EPC in a later stage.\nThe following principles shall apply for the provisioning of PDRs in the UP function:\n-\tThe CP function shall not provision more than one PDR with the same match fields in the PDI (i.e. with the same set of match fields and with the same value). The CP function may provision PDRs with the same value for a subset of the match fields of the PDI but not all; \n-\tdifferent PDRs of a same PFCP session may overlap, e.g. the CP function may provision two PDRs which differ by having one match field set to a specific value in one PDR and the same match field not included in the other PDR (thus matching any possible value); \n-\tdifferent PDRs of different PFCP sessions shall not overlap, i.e. there shall be at least one PDR in each PFCP session which differs by at least one different (and not wildcarded) match field in their PDI, such that any incoming user plane packet may only match PDRs of a single PFCP session; \nNOTE 2:\tIt is allowed for instance to provision in a PGW-U a same uplink PDR, matching any uplink traffic towards a particular application server's IP address, in two different PFCP sessions of two different UEs, as long as each PFCP session is also provisioned with another uplink PDR set with the respective UE IP address and/or uplink F-TEIDu, which allows the PGW-U to identify the PFCP session to which the packet corresponds.\n-\tAs an exception to the previous principle, the CP function may provision a PDR with all match fields wildcarded (i.e. all match fields omitted in the PDI) in a separate PFCP session, to control how the UP function shall process packets unmatched by any PDRs of any other PFCP session. The CP function may provision the UP function to send these packets to the CP function or to drop them. The UP function shall grant the lowest precedence to this PDR.\nOn receipt of a user plane packet, the UP function shall perform a lookup of the provisioned PDRs and:\n-\tidentify first the PFCP session to which the packet corresponds; and\n-\tfind the first PDR matching the incoming packet, among all the PDRs provisioned for this PFCP session, starting with the PDRs with the highest precedence and continuing then with PDRs in decreasing order of precedence. Only the highest precedence PDR matching the packet shall be selected, i.e. the UP function shall stop the PDRs lookup once a matching PDR is found.\nA packet matches a PDR if all the match fields which are identified with different IE type in the PDI of the PDR are matching the corresponding packet header fields unless specified otherwise. If a match field is not included in the PDI, it shall be considered as matching all possible values in the header field of the packet. If the match field is present and does not include a mask, the match field shall be considered as matching the corresponding header field of the packet if it has the same value. If the match field is present and includes a mask (e.g. IP address with a prefix mask), the match field shall be considered as matching the corresponding header field of the packet if it has the same value for the bits which are set in the mask. If a match field has multiple instances, i.e. there are several IEs with the same IE type, a packet matches this match field if any instance is matching the corresponding packet header field.\nThe match fields of the PDI shall correspond to outer and/or inner packet header fields, e.g. uplink bearer binding verification in the PGW-U may be achieved by configuring a PDR with the PDI containing the local GTP-U F-TEID (for outer IP packet matching) and the SDF filters of the data flows mapped to the bearer (for inner IP packet matching). \nNOTE 3:\tA DL PDR can be provisioned with a UE IP address together with a Framed-Route or a Framed-IPv6-Rotue either in the PDI IE or in the Create Traffic Endpoint IE; in such case, the PDR is matched if the packet matches either the UE IP address or the Framed-Route (Framed-IPv6-Route).\nWhen one or more pre-defined PDR(s) are activated for a given PDR (see clause 5.19), an incoming packet matches the PDR if it matches one of activated pre-defined PDR(s).\nThe UP function should drop packets unmatched by any PDRs.\nThe packet processing flow in the UP function is illustrated in Figure 5.2.1-1.\n\nFigure 5.2.1-1: Packet processing flow in the UP function\nAt the deletion of an PFCP session, the UP function shall delete the PFCP session context and all the associated non-preconfigured rules. \nNOTE 3:\tDeleting a QER in one PFCP session does not result in deleting another QER in another PFCP session even when these two QERs have the same QER ID and/or are associated with the same QER Correlation ID.\nA UP Function controlled by multiple CP functions shall handle Rule IDs from the different CP functions independently from each other.\nRule ID used for PDR, FAR, BAR, QER, URR or MAR is uniquely identifying a rule of the corresponding rule type within a session.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Packet Detection Rule Handling", "numbering": "5.2.1A", "title_level": 2, "desc": "5.2.1A\tPacket Detection Rule Handling \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "5.2.1A.1", "title_level": 3, "desc": "5.2.1A.1\tGeneral\nWhen provisioning a PDR in the UP function, the CP function shall provide the PDI with the following information: \n-\tthe source interface of the incoming packets;\n-\ta combination of the parameters, that incoming packets are requested to match, among: Local F-TEID, Network Instance, UE IP address, SDF Filter(s) and/or Application ID. For 5GC, the PDI may additionally contain one or more QFI(s) to detect traffic pertaining to specific QoS flow(s), Ethernet Packet Filter(s) and/or Ethernet PDU Session Information (see clause 5.13.1).\nThe requirements for provisioning an SDF filter in the PDI are specified in clauses 5.2.1A.2A and 5.2.1A.3.\nThe CP function may provision the parameters, that incoming packets are requested to match, in the UP function by: \n-\tproviding the parameters individually in each PDI of the PFCP session; or\n-\toptionally, if the PDI Optimization feature is supported by the UP function, by providing the parameters which may be common to multiple PDIs of a same PFCP session in a Traffic Endpoint IE and by referencing this Traffic Endpoint in the PDI(s) of the PFCP session. See clause 5.2.1A.2. A Traffic Endpoint may include a Local F-TEID, Network Instance, UE IP address and/or Ethernet PDU Session Information (see clause 5.13.1). \nNOTE:\tA Traffic Endpoint can correspond to a GTP-u endpoint, an SGi or an N6 endpoint.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PDI Optimization", "numbering": "5.2.1A.2", "title_level": 3, "desc": "5.2.1A.2\tPDI Optimization\nPDI Optimization is an optional feature which may be supported by the CP and UP Functions. This feature allows the CP function to optimize the signaling towards the UP function by creating the information that are common to multiple PDRs as a Traffic Endpoint with a Traffic Endpoint ID and then referring to this common information from multiple PDRs. The Traffic Endpoint ID shall be unique within an PFCP session. When a PDI refers to a Traffic Endpoint, the parameters that are in the Traffic Endpoint shall not be once again provided in the PDI. The CP function may update the Traffic Endpoint at any time. \nIf a Traffic Endpoint is updated, all the PDRs that refer to this Traffic Endpoint in the UP function shall use the updated information. \nIf F-TEID allocation is performed in the UP function, the UP function shall allocate and store the F-TEID associated to the Traffic Endpoint. When the UP function provides the allocated F-TEID to the CP function in the PFCP Session Establishment response or PFCP Session Modification response message, the CP function shall update the Traffic Endpoint information stored in the CP function with the received F-TEID. \nThe CP function should use a Traffic Endpoint ID created in a different PFCP message only after getting the confirmation from the UP function of the Traffic Endpoint ID creation. \nIf the CP function deletes a Traffic Endpoint, the UP Function shall delete all the PDRs that refer to this Traffic Endpoint. \nNOTE 1:\tThe requirements specified in clause 5.2.2.3.1 for reporting usage reports to the CP function also apply if the deletion of the Traffic Endpoint results in deleting the last PDR associated to a URR. \nNOTE2:\tFor EPC, the Remove Traffic Endpoint IE can be used to delete a bearer for which multiple PDRs exist (with the same Traffic Endpoint ID).\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Provisioning of SDF filters", "numbering": "5.2.1A.2A", "title_level": 3, "desc": "5.2.1A.2A\tProvisioning of SDF filters \nWhen provisioning an SDF Filter in a PDI, the CP function shall:\n-\tcopy the Flow Description if it is received from the PCRF (or PCF), in the corresponding PDI of a PDR regardless of whether the PDR is for matching uplink or downlink traffic; \nNOTE 1\tThe Flow Description received from the PCRF (or PCF) is set assuming downlink flows only, see clause 5.4.2 of 3GPP TS 29.212 [8]. The CP function uses the Flow-Direction AVP received from the PCRF (or PCF) to determine the actual direction and thus the source interface of the packet flows described in the Flow Description.\n-\tfor traffic from CP-function or SGi-LAN:\n-\tIf the traffic is intended to be forwarded to the UE, the CP function shall provision the Flow Description with IPFilterRule \"source\" parameters set to correspond to the CP function or SGi-LAN and the IPFilterRule \"destination\" parameters correspond to the UE;\n-\tIf the traffic is intended to be forwarded to the PDN, the CP function shall provision the Flow Description with IPFilterRule \"source\" parameters set to correspond to the CP function or SGi-LAN and the IPFilterRule \"destination\" parameters correspond to the PDN.\nThe UP function shall apply the SDF filter based on the Source Interface of the PDR as follows (see also clause 8.2.5):\n-\twhen the Source Interface is CORE, this indicates that the filter is for downlink data flow, so the UP function shall apply the Flow Description as is; \n-\twhen the Source Interface is ACCESS, this indicates that the filter is for uplink data flow, so the UP function shall swap the source and destination address/port in the Flow Description; \n-\twhen the Source Interface is CP-function or SGi-LAN, the UP function shall use the Flow Description as is.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Bidirectional SDF Filters", "numbering": "5.2.1A.3", "title_level": 3, "desc": "5.2.1A.3\tBidirectional SDF Filters\nThe CP function may provision bidirectional SDF Filters in the UP function (see clause 8.2.5), i.e. SDF Filters that may be associated to both uplink and downlink PDRs of a same PFCP/N4 session, as follows:\n-\twhen provisioning a bidirectional SDF Filter the first time for an PFCP/N4 session, the CP function shall provision the SDF filter definition together with a SDF Filter ID uniquely identifying the SDF Filter among all the SDF Filters provisioned for a given PFCP/N4 Session; \n-\tthe CP function may then provision a PDR for the same PFCP/N4 session but the opposite direction, by provisioning the SDF Filter ID in the SDF filter ID field of the PDI, without provisioning again the SDF filter definition; \n-\tthe UP function shall apply any modification of a bidirectional SDF Filter to all PDRs of the PFCP/N4 session making use of this SDF Filter; \n-\tupon deletion of a PDR making use of a bidirectional SDF Filter, the UP function shall still apply the SDF Filter for any other PDR making use of the SDF Filter.\nThe requirements specified for provisioning SDF filters in clause 5.2.1A.2A shall also apply when provisioning bidirectional SDF Filters.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Application detection with PFD", "numbering": "5.2.1A.4", "title_level": 3, "desc": "5.2.1A.4\tApplication detection with PFD\nThe detection information for a given application may be provisioned by the CP function to the UP function via PFD management procedure. See clause 6.2.5. \nThe PFDE (PFD Enhancement) feature may be optionally supported by the CP function and UP function. When the feature is supported in both the CP function and UP function, the CP function may provision a PFD Contents IE including a property (i.e. either flow description, or URL or Domain Name/Domain Name Protocol) with multiple values.\nNOTE 1:\tIt is assumed, when the PFDE feature is not supported, a PFD Contents can only include a property with one value.\nWhen the UP function attempts to detect the traffic pertaining to an application by using the application's PFDs (see clause 7.4.3.1 and 8.2.39), the UP function shall consider:\n-\tthe application is detected if the incoming traffic matches at least one PFD Contents; \n-\tone PFD Contents is matched if the incoming traffic matches every property contained in the corresponding PFD Contents IE; the incoming traffic matches one property (i.e. flow description, URL and Domain Name/Domain Name Protocol) if it matches at least one value of the property.\nNOTE 2:\tInterpretation of the Custom PFD Content is implementation specific.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Usage Reporting Rule Handling", "numbering": "5.2.2", "title_level": 2, "desc": "5.2.2\tUsage Reporting Rule Handling \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "5.2.2.1", "title_level": 3, "desc": "5.2.2.1\tGeneral\nThe CP function shall provision URR(s) for a PFCP session in a PFCP Session Establishment Request or a PFCP Session Modification Request to request the UP function to:\n-\tmeasure the network resources usage in terms of traffic data volume, duration (i.e. time) and/or events, according to the provisioned Measurement Method; and\n-\tsend a usage report to the CP function, when the measurement reaches a certain threshold, periodically or when detecting a certain event, according to the provisioned Reporting Triggers or when an immediate report is requested within an PFCP Session Modification Request.\nNOTE:\tThe UP function sends a usage report without performing network resources usage measurements when being requested to detect and report the the start of an SDF or application traffic.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Provisioning of Usage Reporting Rule in the UP function", "numbering": "5.2.2.2", "title_level": 3, "desc": "5.2.2.2\tProvisioning of Usage Reporting Rule in the UP function\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "5.2.2.2.1", "title_level": 4, "desc": "5.2.2.2.1\tGeneral\nWhen provisioning a URR, the CP function shall provide the reporting trigger(s) in the Reporting Triggers IE of the URR which shall cause the UP function to generate and send a Usage Report for this URR to the CP function. When adding or removing reporting trigger(s) to or from the URR, the CP function shall provide the new complete list of applicable reporting triggers in the Reporting Triggers IE in the PFCP Session Modification Request message.\nFor the volume-based measurement method, the CP function may provision:\n-\tthe Volume Threshold IE, to request the UP function to generate a usage report when the measured traffic reaches the threshold;\n-\tthe Volume Quota IE, to request the UP function to stop forwarding packets (or only allow forwarding of some limited user plane traffic, based on operator policy in the UP function) and, if no Volume Threshold is provisioned, to also generate a usage report, when the measured traffic reaches the quota;\n-\tthe Dropped DL Traffic Threshold IE, to request the UP function to generate a usage report when the downlink traffic that is being dropped reaches the threshold; and/or\nNOTE 1:\tFor EPC, the Dropped DL Traffic Threshold can be armed in a SGW-U for triggering the PGW Pause of Charging feature (see 3GPP TS 23.401 [14]). For 5GC, the Dropped DL Traffic Threshold can be armed in a UPF for triggering the SMF Pause of Charging feature (see 3GPP TS 23.502 [29]).\n-\ta Measurement Information with the 'Measurement Before QoS Enforcement' flag set to 1, to request the UP function to measure the traffic usage before any QoS enforcement.\nFor the time-based measurement method, the CP function may provision:\n-\ta Time Threshold IE, to request the UP function to generate a usage report when the measured traffic reaches the threshold; \n-\ta Time Quota, to request the UP function to stop forwarding packets (or only allow forwarding of some limited user plane traffic, based on operator policy in the UP function) and, if no Time Threshold is provisioned, to also generate a usage report, when the measured traffic reaches the quota; \n-\ta Measurement Information with the \"Immediate Start Time Metering\" flag set to 1, to request the UP function to start time metering immediately at receiving the flag; otherwise, the UP function shall start time metering when the first packet is received; and/or\n-\tan Inactivity Detection Time, to request the UP function to suspend the time measurement when no packets are received during the provisioned Inactivity Detection Time. The time measurement shall then be resumed by the UP function when subsequent traffic is received. If an Inactivity Detection Time value of zero is provided, or if no Inactivity Detection Time has been provided by the CP function, the time measurement shall be performed continuously until a new non-zero Inactivity Detection Time is received or the time-based usage measurement is stopped. See Figure 5.2.2.2-1:\n\nFigure 5.2.2.2-1: IDT based charging\nNOTE 2:\tThe Inactivity Detection Time can be set to the Quota Consumption Timer if received. The Inactivity Detection Time is not used to control when the time metering starts.\n-\tFor EPC, a Time Quota Mechanism, including a Base Time Interval Type, which is either Continuous Time Period (CTP) or Discrete Time Period (DTP), and a Base Time Interval (BTI), to the UP function. See clause 6.5.7 in 3GPP TS 32.299[18].\n-\tFor CTP (Continuous Time Period), the time measurement starts from the time that traffic has occurred up to the first Base Time Interval (BTI) which contains no traffic. The time measurement shall include the last Base Time Interval, i.e. the one which contained no traffic. The time measurement resumes by the UP function when subsequent traffic is received. See Figure 5.2.2.2-2:\n\nFigure 5.2.2.2-2: CTP based charging\n-\tFor DTP (Descrete Time Period), the time measurement starts from the time that traffic has occurred up to the Base Time Interval end. The time measurement shall be resumed by the UP function when subsequent traffic is received. See Figure 5.2.2.2-3:\n\nFigure 5.2.2.2-3: DTP based charging\nWhen the time-based measurement method applies, and when the Envelope Reporting is required for EPC, the CP function shall request the UP function to report the usage by setting the reporting trigger to Envelope Closure in addition to other Reporting Trigger(s), in the Reporting Triggers IE. The CP function may indicate the UP function to report for just time, time and volume, time and events, or time and volume and number of events by setting Measurement Method accordingly. The CP function may set the Reduced Application Detection Information flag in the Measurement Information of the URR, when requesting the detection of start and stop of an application solely for the purpose of envelope reporting for EPC.\nThe CP function may provision a Volume Threshold, a Volume Quota, or both (and/or respectively a Time Threshold, a Time Quota, or both). \nWhen both a Volume (or Time) Threshold and a Volume (or Time) Quota are provisioned, the UP function shall send a usage report only when reaching the Volume (or Time) Threshold; when subsequently reaching the Volume (or Time) Quota, the UP function shall stop forwarding packets (or only allow forwarding of some limited user plane traffic, based on operator policy in the UP function) without sending a new usage report to the CP function.\nNOTE 3:\tFor online charging, the Volume Threshold (or Time Threshold) can be set in a PGW-U or TDF-U to the value of the granted volume (or time) quota minus the volume (or time) quota threshold, such as to get a usage report from the UP function when the volume (or time) based credit falls below the remaining quota thresholds provided by the OCS.\nNOTE 4:\tThe Volume Quota or Time Quota can be armed in a PGW-U or TDF-U for online charging to enable the traffic to be forwarded up to an intermediate or final quotas granted by the OCS. The CP function can provision both a Volume (or Time) Threshold and a Volume (or Time) Threshold to request the UP function to:\n-\tsend a usage report when the consumed resources reach the volume (or time) usage threshold provided by the OCS, and \n-\tto stop forwarding packets (or only allow forwarding of some limited user plane traffic, based on operator policy in the UP function), without sending a second usage report, when the granted volume (or time) quota is exhausted.\nFor event based measurement method, the CP function may provision:\n-\tthe Event Threshold IE, to request the UP function to generate a usage report when the number of events reaches the event threshold;\n-\tthe Event Quota IE, to request the UP function to stop forwarding packets applicable to the event (or only allow forwarding of some limited user plane traffic, based on operator policy in the UP function) and, if no Event threshold is provisioned, to also generate a usage report, when the number of events reaches the event quota;\nNOTE 5:\tAn event is preconfigured with one or more event detection logic in the UPF. Each event detection logic is associated with an Application ID. The CP function activates the detection and reporting of an event by provisioning PDR(s) with the PDI set to an Application ID and by provisioning a URR with an event threshold or event quota reporting trigger. The CP function identifies an event reported in a Usage Report by the URR ID.\nFor all the measurement methods (i.e. volume, time or event), the CP function may also provision:\n-\ta Quota Holding Time, to request the UP function to send a usage report and to also stop forwarding packets (or only allow forwarding of some limited user plane traffic, based on operator policy in the UP function) when no packets have been received for the duration indicated in this parameter;\nNOTE 6:\tA Quota Holding Time can be armed in a PGW-U or TDF-U for online charging to request the UP function to send a Usage Report when the Quota Holding Time provided by the OCS (see 3GPP TS 32.299 [18]) expires. The UP function can be instructed in the same Usage Reporting Rule with the Report Triggers  -  START to generate a new Usage Report upon receiving any subsequent packets associated with this URR.\n-\ta Monitoring Time IE and zero or more Additional Monitoring IEs, to request the UP function to measure the network resources usage before and after the monitoring time in separate counts and to re-apply the volume and/or time, and/or event thresholds at the monitoring time. The CP function may additionally provision a Subsequent Volume (or Time or Event) Threshold IE and/or a Subsequent Volume (or Time or Event) Quota IE, for a volume (or time or event) based measurement. When being provisioned with a Monitoring Time, the UP function shall:\n-\treset its usage thresholds at the monitoring time to the value provided in the Subsequent Volume (or Time or Event) Threshold IE, if provisioned in the URR, or to the remaining value of the Volume (or Time or Event) threshold used before the monitoring time (i.e. excluding the already accumulated volume or time usage); \n-\tshall indicate the usage up to the Monitoring time and usage after the Monitoring time in the first usage report after the Monitoring Time is reached;\n-\ta Measurement Period, indicating the period to generate periodic usage reports to the CP function. \nAction\" IE identifying the substitute FAR the UP function shall apply, for the traffic identified by the PDR to which the URR is associated, when exhausting any of these quotas. This FAR may require the UP function to drop the packets or redirect the traffic towards a redirect destination as specified in clause 5.4.7.\nNOTE 7:\tA PDR can be associated with multiple URRs. If one of these URRs requires the UP function to drop the user data packets, e.g. when the Quota has been exhausted, the other URRs associated to the PDR need also to stop their measurements, except for URRs including the Measurement Information with the 'Measurement Before QoS Enforcement' flag set to 1.\nThe CP function may request at any time the UP function to activate or deactivate a network resources usage measurement, using the Inactive Measurement flag of the Measurement Information IE of the URR. \nNOTE 8:\tThis can be used in a PGW-U for the PGW Pause of Charging procedure (see 3GPP TS 23.401 [14]).\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Credit pooling (for EPC)", "numbering": "5.2.2.2.2", "title_level": 4, "desc": "5.2.2.2.2\tCredit pooling (for EPC)\nFor EPC, when the Credit Pool feature is supported and the CP function (e.g. PGW-C) is instructed to handle a Credit Pool for a given Gy Session, the CP function shall create a URR for the Credit Pool, and in this URR, the CP function:\n-\tshall include one Aggregated URR ID IE per URR sharing the credit pool, including the URR ID of the URR sharing the credit pool and the associated Multiplier to measure the abstract service units the corresponding traffic consumes from the credit pool;\n-\tshall set the Time or Volume Threshold or Quota IE to the value calculated as specified in IETF RFC 4006 [16] according to the Measurement Method.\n            NOTE 1:\tThe value can be calculated using the following formula:\n            \tS = Q1*M1 + Q2*M2 + ... + Qn*Mn, \nwhere the S is the quota for the credit pool, Qn is the quota and Mn is the multiplier for each Rating Group (RG) which are provided via the Multiple Services Credit Control from the OCS. \nA URRn is defined for each of RG. \n            NOTE 2:\tWhen the Measurement Method is set to the combined volume/duration, the Time and Volume\tThreshold or Quota are calculated indepentently.\n-\tmay set the Reporting Trigger to reporting upon reaching a volume or time threshold or quota;\n-\tmay set the Measurement Method to the data volume, duration (i.e. time), combined volume/duration according to the Measurement Method set in the URRs in the Credit Pool.\n            NOTE 3:\tThe UP function is instructed to handle a Credit Pool when a G-S-U-Pool-Reference AVP is included within a Multiple Services Credit Control from the OCS. A Credit Pool is identified by the G-S-U-Pool-Identifier AVP. See clause 6.3.11, 6.4.3 and 6.4.4 of 3GPP TS 32.299 [18].\nIn addition, the CP function shall also include the Linked URR IE, set to the Credit Pool URR ID, in all the URRs which are sharing the credit pool (i.e. which are associatied with RGs sharing the Credit Pool). \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Reporting of Usage Report to the CP function", "numbering": "5.2.2.3", "title_level": 3, "desc": "5.2.2.3\tReporting of Usage Report to the CP function\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "5.2.2.3.1", "title_level": 4, "desc": "5.2.2.3.1\tGeneral\nWhen detecting that a provisioned reporting trigger occurs, the UP function shall generate a Usage Report for the related URR and send it to the CP function by initiating the PFCP Session Report procedure. \nWhen providing usage report information for a URR in a message, the UP function shall include the UR-SEQN (Usage Report Sequence Number) identifying the order in which a Usage Report is generated for the given URR. The UR-SEQN (Usage Report Sequence Number) shall be set to \"0\" for the first Usage Report and incremented for every subsequent Usage Report generated by the UP function for the URR. The UP function shall also indicate the trigger that causes the usage report to be generated in the Usage Report Trigger IE.\nUpon generating a usage report for a URR towards the CP function, the UP function shall:\n-\treset its ongoing measurement counts for the related URR (i.e. the UP function shall report in a usage report the network resources usage measurement since the last usage report for that URR);\n-\tre-apply all the thresholds (Volume/Time/Event Threshold) provisioned for the related URR, if the usage report was triggered due to one of  the thresholds being reached; and\n-\tcontinue to apply all the provisioned URR(s) and perform the related network resources usage measurement(s), until getting any further instruction from the CP function.\nWhen receiving a new threshold or quota from the CP function for a measurement that is already ongoing in the UP function, the UP function shall consider its ongoing measurements counts for the related URR against the new threshold or quota to determine when to send its next usage report to the CP function. At receiving a new quota with value set to zero, the UP function shall:\n-\tapply the FAR identified in the FAR ID for Quota Action IE if the CP function has provisioned it, otherwise the UP function shall stop forwarding packets (or only allow forwarding of some limited user plane traffic, based on operator policy in the UP function), and \n-\treport in a usage report the network resources usage measurement since the last usage report for that URR.\nNOTE 1:\tThe UP function determines when to send its next usage report to the CP function by deducting from the newly provisioned threshold or quota the traffic it has forwarded since its last usage report. As an example, if the UP function has forwarded 10 Mbytes of traffic since it last usage report to the CP function and the CP function provisions a new volume threshold or quota of 100 Mbytes, the UP function sends its next usage report upon forwarding an additional 90 Mbytes traffic. \nNOTE 2:\tWhen receiving a new threshold or quota from the CP function for a measurement that is already ongoing in the UP function and if the UP function has already generated the usage report but had not sent it, the UP function can send the usage report before performing the update of the URR.\nWhen reporting the network resources usage before and after a Monitoring Time, the UP function shall send two Usage Reports in the PFCP message (e.g. PFCP Session Report Request) for the same URR ID. Each Usage Report shall then include the Usage Information IE indicating whether the reported network resource usage was consumed before or after the Monitoring Time. Omission of this IE in a Usage Report indicates that no monitoring time has occurred. The UP function shall send Usage Reports soon after the occurrence of the Monitoring Time.\nNOTE 3:\tThe UP function needs to take care to smooth the signalling load towards the CP function if Usage Reports need to be generated for a large number of PFCP sessions after the occurrence of the Monitoring Time.\nFor the volume-based measurement method, the UP function shall report the traffic usage after any QoS enforcement. Additionally, if the CP function requested to measure the traffic usage before QoS enforcement, the UP function shall also report corresponding measurements, when measurements needs to be reported for the traffic usage after QoS enforcement, by sending two Usage Reports in the PFCP message (e.g. PFCP Session Report Request) for the same URR ID. Each Usage Report shall then include the Usage Information IE indicating whether the reported network resource usage corresponds to the traffic before or after QoS enforcement. Thresholds provisioned in a URR shall apply to the traffic usage after any QoS enforcement. \nFor the volume-based measurement method, the UP function shall include all the counters (Total, Uplink and Downlink) of the URR in the Volume Measurement IE in the Usage Report IE.\nA usage report triggered only due to the Dropped DL Traffic Threshold shall not contain any measurement information. \nWhen being instructed to remove a URR or the last PDR associated to a URR, the UP function shall include a Usage Report in the PFCP Session Modification Response or in an additional PFCP Session Report Request if there are non-null measurements to report for the URR, and shall reset its ongoing measurements for the URR that is removed, or dissociated from the last PDR.\nWhen being instructed to deactivate a network resources usage measurement via the Inactive Measurement flag of the Measurement Information IE of the URR, the UP function shall stop measuring the network resources usage (against the volume/time/event threshold/quota) and store the current measurement counts which will be resumed when the URR is activated again. The UP function shall not generate a usage report upon the deactivation of the URR and it shall send a usage report during the period when the URR is deactivated for the following scenarios:\n-\tif the Quota Holding Time is expired and if the reporting trigger QUHTI is set;\nNOTE 4:\tThe Quota Holding Time can have been started before the URR is deactivated or starts from the moment when the URR is deactivated since no quota will be consumed.\n-\tif it is the time for a periodic reporting and if the reporting trigger PERIO is set;\n-\tif it is required to send a usage report for this URR when a usage report is reported for a linked URR and if the reporting trigger LIUSA is set;\n-\tif it is required to send an immeditate report upon a query for the URR, or the URR is removed, dissociated from the last PDR.\nNOTE 5:\tMultiple usage reports can be required to be reported to the CP function when deleting a PDR that is the last one to be associated to multiple URRs.\nThe CP function may request the UP function, in an PFCP Session Modification Request, to report its ongoing network resources measurement for one or multiple URRs of the PFCP session. In this case, the UP function shall:\n-\tgenerate usage report(s) (based on the existing definition of any URR(s) included in the PFCP Session Modification Request message before any update) for the URR(s) being queried and for any associated linked usage reports (see clause 5.2.2.4) for which there are non-null measurements to report,\n-\tinclude them in the PFCP Session Modification Response or in additional PFCP Session Report Request messages; and \n-\tproceed as specified above upon generating a usage report for a URR towards the CP function, with the following additions: \n-\tif the PFCP Session Modification Request includes the Update URR IE (for the URR being queried) with a Volume or Time Threshold, the UP function shall re-apply the threshold received in the request; \n-\totherwise, if a threshold had been set for the URR that is queried, since the usage report is not triggered due to the threshold being reached, the UP function shall adjust the threshold by subtracting the time/volume reported in the usage report to determine when to generate the next report.\nNOTE 6:\tUpon reaching a threshold that was adjusted due to a URR query as specified above, the UP function re-applies then the threshold that was provisioned in the URR (i.e. not the value of the adjusted threshold). \nNOTE 7:\tThe CP function can query a URR without including a Volume or Time Threshold in the PFCP Session Modification Request e.g. when it needs to close a traffic volume/service container (see clause 5.2.3.10.3 of 3GPP TS 32.251 [17]). \nNOTE 8:\tThe CP function can query a URR including a Volume or Time Threshold in the PFCP Session Modification Request e.g. when it needs to close a CDR (see clause 5.2.3.10.3 of 3GPP TS 32.251 [17]). In such a case, the CP function can include the same threshold for the URR being queried in the Update URR IE in the PFCP Session Modification Request message to trigger the UP function to re-apply the threshold.\nNOTE 9:\tIt is up to the CP function to request the UP function to generate an immediate report (or not) as specified above when the CP function modifies a URR or any other rules of the PFCP session. As an exception, the UP function always generates an immediate report when being instructed to remove a URR.\nWhen additional PFCP Session Report Request messages need to be sent, the UP function shall indicate, either in the PFCP Session Modification Response or in one PFCP Session Report Request, how many usage reports will be sent in PFCP Session Report Request messages. If this is indicated in one PFCP Session Report Request, the PFCP Session Modification Response shall indicate that more reports will follow by setting the AURI flag of the Additional Usage Reports Information IE. Besides, if the PFCP Session Modification Request included the Query URR Reference IE, usage reports sent in response to the query in the PFCP Session Modification Response and/or additional PFCP Session Report Request messages shall include the Query URR Reference IE set to the same value as received in the PFCP Session Modification Request.\nWhen the reporting trigger \"Envelope Closure\" is set in the corresponding Usage Reporting Rule, the UP function shall generate a usage report with the measurement of the time and/or volume as instructed in the Measurement Method:\n-\twhen the Inactivity Detection Time (if included) is expired; \n-\twhen detecting no usage for the first Base Time Interval if the Base Time Interval Type in the Time Quota Mechanism is set to CTP; or\n-\tat the end of each of base time interval if the Base Time Interval Type in the Time Quota Mechanism is set to DTP. \nNOTE 10:\tEvents (e.g. application detection information) are reported individually and independently from the usage report sent for envelope closure.\nAt the PFCP session termination, the UP function shall indicate to the CP function, in the PFCP Session Deletion Response, the resources that have been consumed for each URR that was provisioned in the PFCP session since the last usage report (respective to each URR).\nUpon receiving the Usage Report from the UP function, the CP function may initiate PFCP Session Modification procedure as result of the communication with the PCRF or OCS, as described in clause 5.3 of 3GPP TS 23.214 [2], e.g. by: \n-\tmodifying the URR (e.g. changing the Volume/Time threshold, Volume/Time quota, disabling the usage monitoring);\n-\tcreating a new FAR (e.g. for redirect) and/or modifying the existing FAR; or\n-\tmodifying the QER (s) in the PFCP session.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Credit pooling", "numbering": "5.2.2.3.2", "title_level": 4, "desc": "5.2.2.3.2\tCredit pooling\nWhen a URR is received with at least one Aggregated URRs IE included, the UP function:\n-\tshall calculate the traffic usage of the URR by applying the Multiplier(s) and aggregating the traffic usage from all URRs indicated in the Aggregated URRs IE(s), as specified in IETF RFC 4006 [16]; \n            NOTE 1:\tThe usage of this URR is calculated using the following formula:\n            \tC1*M1 + C2*M2 + ... + Cn*Mn = U, \nwhere U is the usage counted by this URR, Cn is the usage counted by each aggregated URR (i.e. URR for each RG sharing the credit pool), and Mn is the multiplier for each aggregrated URR.\n-\tshall generate a report when the counted usage exceeds the threshold;\n-\tshall generate a report if the threshold is not provided, and stop packets forwarding (or only allow forwarding of some limited user plane traffic, based on operator policy in the UP function) for all Aggregated URRs when the counted usage exceeds the quota.\nNOTE 2:\tThe handling of the aggregated URR(s), e.g. generating a Usage Report upon the Reporting Trigger(s) is not impacted by handling of this URR for the Credit Pool.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Reporting of Linked Usage Reports to the CP function", "numbering": "5.2.2.4", "title_level": 3, "desc": "5.2.2.4\tReporting of Linked Usage Reports to the CP function\nThe CP function may instruct the UP function to generate a Usage Report for a URR \"X\" when a Usage Report is generated for another URR \"Y\", by:\n-\tprovisioning the URR \"X\" with the Reporting Triggers IE set to Linked Usage Reporting; and\n-\tincluding in the URR \"X\" the Linked URR ID IE set to the URR ID of the URR \"Y\".\nNOTE 1:\tThis can be used by the CP function e.g. to request the UP function to report a Usage Report for an SDF (i.e. URR \"X\") when the UP function reports a Usage Report for a bearer (i.e. URR \"Y\").\nNOTE 2:\tThis can be used by the CP function e.g. to request the UP function to report a Usage Report for a RG (i.e. URR \"X\") when the UP function reports a Usage Report for a credit pool to which this RG pertain (i.e. URR \"Y\").\nWhen a usage report is to be generated for the URR \"Y\", regardless of the condition which triggers the report, the UP function shall also send a Usage Report for the URR \"X\" with the accumulated usage information, and the Usage Report Trigger IE set to Linked Usage Reporting. \nNOTE 3:\tThis also applies e.g. when an immediate usage report is requested for the URR \"Y\"within a PFCP session Modification Request.\nThe URR \"Y\" may be linked to more URRs than just URR \"X\".\nA RG level URR may be linked to IP-CAN bearer level URR as well as IP-CAN Session level URR to enable the CP function to generate a CDR on the different level. In such case, a URR \"X\" may link to more URRs than just URR \"Y\".\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Forwarding Action Rule Handling", "numbering": "5.2.3", "title_level": 2, "desc": "5.2.3\tForwarding Action Rule Handling\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "5.2.3.1", "title_level": 3, "desc": "5.2.3.1\tGeneral\nThe CP function shall provision one and only one FAR for each PDR provisioned in an PFCP session. The FAR provides instructions to the UP function on how to process the packets matching the PDR.\nBy setting the appropriate flag(s) in the Apply Action IE in the FAR (see clause 8.2.26), the CP function may request the UP function to:\n-\tdrop the packets, by setting the DROP flag;\n-\tforward the packets, by setting the FORW flag and by provisioning the Forwarding Parameters providing instructions on how to forward the packets;\n-\tbuffer downlink packets by setting the BUFF flag and by optionally provisioning buffering parameters providing instructions on how to buffer the packets;\n-\tnotify the CP function about the arrival of a first DL packet being buffered, by setting the NOCP flag;\n-\tduplicate the packets, by setting the DUPL flag and by provisioning the Duplicating Parameters providing instructions on how to forward the duplicated packets.\nThe CP function may request the UP function to duplicate packets that are to be dropped, forwarded or buffered.\nThe CP function may provision one or more FAR(s) per PFCP session. Different FARs of a same PFCP session may be provisioned with a different Apply Action flags, e.g. to enable the forwarding of downlink data packets for some PDRs while requesting to buffer downlink data packets for other PDRs.\nNOTE 1:\tThis is necessary to establish or release a partial set of radio access bearers in UTRAN.\nWhen instructed to buffer and notify the CP function about the arrival of a DL packet, the UP function shall notify the CP function, when it receives a first downlink packet for a given FAR, by sending an PFCP Session Report Request including a Downlink Data Report IE identifying the PDR(s) for which downlink packets have been received.\nNOTE 2:\tReceipt of downlink packets on PDRs associated to different FARs can result in sending multiple PFCP Session Report Request messages for the same PFCP session.\nIf the UP function indicated support of Header Enrichment of UL traffic (see clause 8.2.25), the CP function may provide the UP function with header enrichment information for uplink traffic, by including one or more Header Enrichment IE(s) in the FAR. In this case, the UP function should use this information to enrich the header of the uplink traffic (e.g. HTTP header enrichment).\nNOTE 3:\tIt is not defined how to support SGi PtP tunnelling mechanisms other than based on UDP/IP encapsulation (such as PMIPv6/GRE, L2TP, GTP-C/U, see clause 4.3.17.8.3.3.3 of 3GPP TS 23.401 [14]) for Non-IP PDN connections.\nIf the UP function indicated support of PDI optimisation (see clause 8.2.25), the CP function may include in the forwarding parameters of the FAR the Linked Traffic Endpoint ID, if it is available, identifying the traffic Endpoint allocated for this PFCP session to receive the traffic in the reverse direction. \nNOTE 4:\tThis information can enable an SGW-U or PGW-U to correlate the UL and DL traffic (i.e. PDRs) sent over a same bearer. \nAssuming for instance an PFCP session provisioned in a PGW-U with: \n-\tan UL PDR 1 (for an S5/S8 bearer 1) with Source Interface \"Access\" associated to an UL Traffic Endpoint ID \"1\" (comprising the IP address, a local TEID and optionally a network instance),\n-\ta DL PDR 1 with Source Interface \"Core\", UE IP address and SDF 1, \nthe CP function sets the Linked Traffic Endpoint in the DL FAR 1 (associated to DL PDR 1) to the UL Traffic Endpoint \"1\", which allows the PGW-U to correlate the uplink and downlink PDRs for the same bearer (i.e. that UL PDR 1 associated to UL Traffic Endpoint \"1\", and DL PDR1 associated to DL FAR 1 with Linked Traffic Endpoint set to UL Traffic Endpoint \"1\", use the same S5/S8 bearer). \nNOTE 5:\tThe Linked Traffic Endpoint can possibly refer to a Traffic Endpoint in the reverse direction requested to be created  in the same PFCP request. \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Buffering Action Rule Handling", "numbering": "5.2.4", "title_level": 2, "desc": "5.2.4\tBuffering Action Rule Handling \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "5.2.4.1", "title_level": 3, "desc": "5.2.4.1\tGeneral\nA BAR provides instructions to control the buffering behaviour of the UP function for all the FARs of the PFCP session set with an Apply Action parameter requesting the packets to be buffered and associated to this BAR.\nThe CP function may create a BAR for an PFCP session and associate it to the FAR(s) of the PFCP session in an PFCP Session Establishment Request or an PFCP Session Modification Request to request the UP function to apply a specific buffering behaviour for packets requested to be buffered and associated to this BAR.\nThe CP function may modify the following buffering instructions provided in a BAR as follows:\n-\tthe Downlink Data Notification Delay in an PFCP Session Modification Request (for EPC); or\n-\tthe Downlink Data Notification Delay (for EPC), DL Buffering Duration and/or DL Buffering Suggested Packet Count in an PFCP Session Report Response message.\nNOTE:\tThe CP function needs to provision a (possibly empty) BAR and associate it to the FARs of the PFCP session when establishing or modifying the PFCP session to be able to modify the BAR in an PFCP Session Report Response.\nIf the UP Function has indicated support of the feature UL/DL Buffering Control (UDBC), the CP function may provide the Suggested Buffering Packet Count IE in a BAR which is created during a PFCP Session Establishment procedure or a PFCP Session Modification procedure, and the CP function may modify it in a subsequent PFCP Session Modification Request, and/or a PFCP Session Report Response message. The same BAR may be associated with all the FARs in a PFCP session to indicate that all Service Data Flows in the PFCP Session share the same buffer in the UP function for the PFCP Session.\nIn this release of the specification, at most one BAR may be created per PFCP session.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Provisioning of Buffering Action Rule in the UP function", "numbering": "5.2.4.2", "title_level": 3, "desc": "5.2.4.2\tProvisioning of Buffering Action Rule in the UP function\nThe CP function may provision the following buffering parameters in a BAR:\n-\tFor EPC, the Downlink Data Notification Delay IE, to request the UP function to delay the sending of an PFCP Session Report Request, between receiving a downlink data packet and notifying the CP function about it, if the UP function indicated support of the Downlink Data Notification Delay parameter (see clause 8.2.28);\n-\tthe DL Buffering Duration IE, to request the UP function to buffer the downlink data packet for an extended duration without sending any further notification to the CP function about the arrival of DL data packets, if the UP function indicated support of the DL Buffering Duration parameter (see clause 8.2.25);\n-\tthe DL Buffering Suggested Packet Count, to request the UP function to buffer the suggested number of downlink data packets, when extended buffering of downlink data packet is required in the UP function.\n-\tthe Suggested Buffering Packet Count IE if the UP Function has indicated support of the feature UDBC, to indicate the number of packets (including both uplink or downlink) that the CP function suggests to be buffered in the UP function, until it receives new instructions from the CP function, e.g. when the new Quota is granted.\nThe UP function shall stop applying the DL Buffering Duration and DL Buffering Suggested Packet Count parameters and shall delete these parameters from the BAR (without explicit request from the CP function) when extended buffering of downlink data packets ends in the UP function.\nNOTE:\tThe CP function will provide the DL Buffering Duration and DL Buffering Suggested Packet Count parameters again when re-invoking extended buffering of downlink data packets.\nThe UP function shall stop applying buffering when new instruction is received from the CP function. The buffered packets shall be either dropped or forwarded following the packet forwarding model specified in clause 5.2.1 and taking into consideration that the buffered Packets have been already processed earlier.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "QoS Enforcement Rule Handling", "numbering": "5.2.5", "title_level": 2, "desc": "5.2.5\tQoS Enforcement Rule Handling \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "5.2.5.1", "title_level": 3, "desc": "5.2.5.1\tGeneral\nThe CP function shall provision QER(s) for an PFCP session in an PFCP Session Establishment Request or an PFCP Session Modification Request to request the UP function to perform QoS enforcement of the user plane traffic.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Provisioning of QoS Enforcement Rule in the UP function", "numbering": "5.2.5.2", "title_level": 3, "desc": "5.2.5.2\tProvisioning of QoS Enforcement Rule in the UP function\nThe CP function may request the UP function to perform the following QoS enforcement actions in a QER:\n-\tGating Control, as specified in clause 5.4.3;\n-\tQoS Control, i.e. MBR, GBR or Packet Rate enforcement, as specified in clause 5.4.4;\n-\tDL flow level marking for application detection, as specified in clause 5.4.5;\n-\tSCI (Service Class Indicator) marking for service identification for improved radio utilisation for GERAN, as specified in clause 5.4.12;\n-\tfor 5GC reflective QoS for uplink traffic.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Combined SGW/PGW Architecture", "numbering": "5.2.6", "title_level": 2, "desc": "", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Multi-Access Rule Handling (for GC)", "numbering": "5.2.7", "title_level": 2, "desc": "5.2.6\tCombined SGW/PGW Architecture \nThe usage of a combined SGW/PGW remains possible in a deployment with separated control and user planes, see clause 4.2.2 of 3GPP TS 23.214 [2]. This is enabled by supporting a combined Sxa/Sxb interface with a common packet forwarding model, message and parameter structure for non-combined and combined cases.\nThe following additional requirements shall apply to a combined Sxa/Sxb interface between a combined SGW/PGW-C and a combined SGW/PGW-U:\n-\tall the functionalities specified for Sxa and Sxb shall be supported, possibly concurrently, over a combined Sxa/Sxb association;\n-\ta single PFCP session may be setup to support both the functionalities of an SGW-U and PGW-U;\n-\tthe CP function may provision PDRs, QERs, URRs, FARs (possibly with a buffering instruction) and BAR, possibly concurrently, for the same PFCP session;\n-\tthe CP function may provision concurrently parameters in a message or for the PFCP session that are applicable to Sxa and Sxb.\n5.2.7\tMulti-Access Rule Handling (for 5GC)\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "5.2.7.1", "title_level": 3, "desc": "5.2.7.1\tGeneral\nThe UP function (i.e. the UPF) shall support the Multi-Access Rule (MAR) if it supports the ATSSS feature. \nThe CP function (i.e. the SMF) shall provision one and only one MAR for every downlink PDR when the PDR is provisioned in a PFCP session if the PFCP session is established for a Multi-Access PDU session and if the UPF supports the ATSSS feature. \nThe MAR provides instructions to the UP function on how to forward the packets matching the PDR over 3GPP and non-3GPP accesses. See clauses 5.8.2.11.8 and 5.32.8 in 3GPP TS 23.501 [28]. \nIn a MAR, the CP function (i.e. the SMF) shall: \n-\tinstruct the UPF which traffic steering functionality to use, i.e. MPTCP or ATSSS-LL, using the Steering Functionality IE; \n-\tset the Steering Mode to instruct how the packets shall be distributed across 3GPP and non-3GPP accesses, e.g. Active-Standby, Smallest Delay, Load Balancing and Priority Based;\n-\tprovision access specific forwarding action information including:\n-\ta FAR ID which control the packets forwarding either to 3GPP access or non-3GPP access;\n-\ta Weight to indicate the proportion of traffic to be forwarded by the given FAR when the Steering Mode is set to \"Load Sharing\";\n-\ta Priority to indicate at which condition the traffic is to be forwarded by the given FAR when the Steering Mode is set to \"Active-Standby\" or \"Priority-Based\";\n-\ta list of URR IDs to enable the SMF to request separate usage report for different accesses;\nThe CP function may provision one or more MAR(s) (for different PDRs) per PFCP session. Different MARs of a same PFCP session may be provisioned with a different steering functionality together with a different steering mode, while different MARs of a same PFCP session may be associated with the same FAR(s). \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Data Forwarding between the CP and UP Functions", "numbering": "5.3", "title_level": 1, "desc": "5.3\tData Forwarding between the CP and UP Functions\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "5.3.1", "title_level": 2, "desc": "5.3.1\tGeneral\nForwarding of user plane data between the CP and UP functions may take place as part of the following scenarios (see 3GPP TS 23.214 [2] for EPC and 3GPP TS 23.501 [28] for 5GC).\nTable 5.3.1-1: Data forwarding scenarios between the CP and UP functions\n\nScenario description\nData forwarding direction\nFor EPC applicable to\nFor 5GC applicable to\n1\nForwarding of user-plane packets between the UE and the CP function. \nUP to CP function\nCP to UP function\nPGW\nUPF to SMF\nSMF to UPF\n2\nForwarding of packets between the CP function and the external PDN (over SGi) / DN (over N6). \nUP to CP function\nCP to UP function\nPGW\nUPF to SMF\nSMF to UPF\n3\nForwarding of packets subject to buffering in the CP function.\nUP to CP function\nCP to UP function\nSGW\nUPF to SMF\nSMF to UPF\n4\nForwarding of End Marker Packets constructed by the CP function to a downstream node.\nCP to UP function\nSGW, PGW\nSMF to UPF\n5\nForwarding of user data using Control Plane CIoT 5GS Optimisation\nUP to CP function\nCP to UP function\n-\nUPF to SMF\nSMF to UPF\n\nUser plane packets shall be forwarded between the CP and UP functions by encapsulating the user plane packets using GTP-U encapsulation (see 3GPP TS 29.281 [3]).\nFor forwarding data from the UP function to the CP function, the CP function shall provision PDR(s) per PFCP session context, with the PDI identifying the user plane traffic to forward to the CP function and with a FAR set with the Destination Interface \"CP function side\" and set to perform GTP-U encapsulation and to forward the packets to a GTP-u F-TEID uniquely assigned in the CP function per PFCP session and PDR. The CP function shall then identify the PDN connection and the bearer to which the forwarded data belongs by the F-TEID in the header of the encapsulating GTP-U packet.\nFor forwarding data from the CP function to the UP function, the CP function shall provision one or more PDR(s) per PFCP session context, with the PDI set with the Source Interface \"CP function side\" and identifying the GTP-u F-TEID uniquely assigned in the UP function per PDR, and with a FAR set to perform GTP-U decapsulation and to forward the packets to the intended destination. URRs and QERs may also be configured.\nFor EPC PFCP session contexts may correspond to individual PDN connections, TDF sessions, or standalone sessions not tied to any PDN connection or TDF session used e.g. for forwarding RADIUS, Diameter or DHCP signalling between the PGW-C and the PDN or for forwarding End Marker packets from the PGW-C or SGW-C to a downstream SGW-U or eNodeB.\nFor 5GC PFCP session contexts may correspond to individual PDU sessions or standalone sessions not tied to any PDU sessions used e.g. for forwarding RADIUS, Diameter or DHCP signalling between the SMF and the DN or for forwarding End Marker packets from the SMF to a downstream UPF or NG-RAN.\nFor EPC the CP function may establish one Sx-u tunnel per:\n-\tbearer of PDN connection e.g. for the data forwarding scenarios 1 and 3;\n-\tUP function or PDN e.g. for the data forwarding scenario 1, 2 and 4.\nFor 5GC the CP function may establish one N4-u tunnel per:\n-\tPDU session e.g. for the data forwarding scenarios 1, 3 and 5;\n-\tUP function or DN e.g. for the data forwarding scenario 1, 2 and 4.\nRequirements for forwarding packets subject to buffering in the CP function between the UP and CP functions (scenario 3) are further specified in clause 5.3.3.\nRequirements for sending End Marker packets (scenario 4) are further specified in clause 5.3.2.\nRequirements for forwarding user data using Control Plane CIoT 5GS Optimisation between the UP and CP functions (scenario 5) are further specified in clause 5.3.5.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Sending of End Marker Packets", "numbering": "5.3.2", "title_level": 2, "desc": "5.3.2\tSending of End Marker Packets \nThe construction of End Marker packets may either be done in the CP function or UP function, based on network configuration, as specified in clause 5.8 of 3GPP TS 23.214 [2] for EPC and in clause 5.8.2.9 of 3GPP TS 23.501 [28] for 5GC. The support of End Marker packets by the UP function is optional.\nIf the UP function indicated support of End Marker packets constructed in the UP function, the CP function shall request the UP function to construct and send End Marker packets by sending a Session Modification Request including FAR(s) with the new downstream F-TEID and with the SNDEM (Send End Marker Packets) flag set. \nFor End Marker packets constructed in the CP function, the CP function shall:\n-\testablish (once) one standalone PFCP session not tied to any PDN connection, per the UP function, for forwarding End Marker packets, and provision the UP function to perform one GTP-U decapsulation and to forward the resulting packets without any further change towards the destination IP address of these packets;\n-\tconstruct the GTP-U End Marker packets, with the destination IP address and TEID set according to the old F-TEID value, and with a source IP address set according to the UP function's F-TEID value (e.g. S1 or Iu SGW F-TEID or NG-u UPF F-TEID);\n-\tencapsulate the constructed GTP-U End Marker packets in GTP-U packets according to the principles specified in clause 5.3.1 for data forwarding between the CP function and the UP function, and send them towards the F-TEID assigned in the UP function for the above PFCP session, after receipt of the PFCP Session Modification Response indicating that the UP function has switched to a new F-TEID.\nUpon receipt of a PFCP Session Modification Request modifying the F-TEID in the Outer Header Creation of a FAR, the UP function shall send the Response message only after having switched to the new F-TEID.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Forwarding of Packets Subject to Buffering in the CP Function", "numbering": "5.3.3", "title_level": 2, "desc": "5.3.3\tForwarding of Packets Subject to Buffering in the CP Function\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "5.3.3.1", "title_level": 3, "desc": "5.3.3.1\tGeneral\nThe following requirements shall apply to the data forwarding scenario 3 of Table 5.3.1-1 in addition to the requirements specified in clause 5.3.1.\nThe CP function shall establish one Sx-u tunnel per bearer of a PDN connection / one N4-u tunnel per PDU session when applying the data forwarding scenario 3.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Forwarding of Packets from the UP Function to the CP Function", "numbering": "5.3.3.2", "title_level": 3, "desc": "5.3.3.2\tForwarding of Packets from the UP Function to the CP Function\nFor EPC, regardless of whether the downlink traffic received by the UP function consists of T-PDUs (i.e. user data packet, see 3GPP TS 29.281 [3]) for a combined SGW/PGW-U, or G-PDUs (i.e. T-PDU plus a GTP-U header) for a SGW-U, the downlink traffic shall be forwarded from the UP function to the CP function as G-PDUs with the GTP-U header set to the IP address and TEID uniquely assigned in the CP function for the Sx-u tunnel corresponding to the bearer of the PDN connection. \nNOTE 1:\tAn SGW-U receiving G-PDUs from an S5/S8 bearer forwards the same G-PDUs towards the SGW-C but with the IP address and TEID in the GTP-U header changed to the SGW-C IP address and TEID of the corresponding Sx-u tunnel.\nFor 5GC, regardless of whether the downlink traffic received by the UP function consists of T-PDUs (i.e. user data packet, see 3GPP TS 29.281 [3]) for an PSA-UPF, or G-PDUs (i.e. T-PDU plus a GTP-U header) for an I-UPF, the downlink traffic shall be forwarded from the UP function to the CP function as G-PDUs with the GTP-U header set to the IP address and TEID uniquely assigned in the CP function for the N4-u tunnel corresponding to the PDU session of the PDN connection. \nNOTE 2:\tAn I-UPF receiving G-PDUs from an N9 GTPU tunnel forwards the same G-PDUs towards the SMF but with the IP address and TEID in the GTP-U header changed to the SMF IP address and TEID of the corresponding N4-u tunnel.\nTo forward the user plane data to be buffered in the CP function from the UP function, the CP function shall provision:\n-\tfor EPC, a PDR per bearer of the PDN connection, matching the received downlink user plane packets and for a (non-combined) SGW-U, with the field Outer Header Removal Description in the Outer Header Removal IE set to \"0\" or \"1\" for IPv4 or IPv6 respectively;\n-\tfor 5GC, a PDR per PDU session, matching the received downlink user plane packets and for an I-UPF, with the field Outer Header Removal Description in the Outer Header Removal IE set to \"0\" or \"1\" for IPv4 or IPv6 respectively;\n-\ta FAR instructing the UP function to forward the received downlink data to the CP function, with the field Outer Header Creation Description in the Outer Header Creation set to \"0\" or \"1\". \nNOTE 3:\tThe PDR can be provisioned in the UP function before applying data forwarding to the CP function.\nFor EPC, G-PDUs sent from the UP function to the CP function over the Sx-u tunnel shall include any GTP-U extension header(s):\n-\tpossibly received by the UP function over the S5/S8 bearers and stored during the Outer Header Removal; \n-\tpossibly created by the UP function as part of a QER rule. \nFor 5GC, G-PDUs sent from the UP function to the CP function over the N4-u tunnel shall include any GTP-U extension header(s):\n-\tpossibly received by the UP function over the N9 PDU sessions and stored during the Outer Header Removal; \n-\tpossibly created by the UP function as part of a QER rule. \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Forwarding of Packets from the CP Function to the UP Function", "numbering": "5.3.3.3", "title_level": 3, "desc": "5.3.3.3\tForwarding of Packets from the CP Function to the UP Function\nLikewise, when subsequently sending the downlink traffic buffered in the CP function back to the UP function, the downlink traffic shall be forwarded:\n-\tfor EPC, over Sx-u as G-PDUs with the GTP-U header set to the IP address and TEID uniquely assigned in the UP function for the Sx-u tunnel set up for the corresponding bearer of the PDN connection.\n-\tfor 5GC, over N4-u as G-PDUs with the GTP-U header set to the IP address and TEID uniquely assigned in the UP function for the N4-u tunnel set up for the corresponding PDU session.\nG-PDUs sent over Sx-u / N4-u shall include GTP-U extension header(s) possibly received earlier from the UP function. \nTo forward the user plane data from the CP function to the UP function, the CP function shall provision:\n\ta PDR per bearer of the PDN connection (for EPC) or per PDU session (for 5GC), with an IP address and TEID uniquely assigned in the UP function for the Sx-u / N4-u tunnel, and with the field Outer Header Removal Description in the Outer Header Removal IE set to \"0\" or \"1\";\n-\ta FAR enabling the UP function to forward the received downlink data from the CP function towards the RAN, with the field Outer Header Creation Description in the Outer Header Creation set to \"0\" or \"1\".\nG-PDUs sent from the UP function towards the RAN shall include GTP-U extension header(s) possibly received from the CP function.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Data Forwarding between the CP and UP Functions with one PFCP-u Tunnel per UP Function or PDN", "numbering": "5.3.4", "title_level": 2, "desc": "5.3.4\tData Forwarding between the CP and UP Functions with one PFCP-u Tunnel per UP Function or PDN\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "5.3.4.1", "title_level": 3, "desc": "5.3.4.1\tGeneral\nThe following requirements shall apply to the data forwarding scenario 1 and 2 of Table 5.3.1-1, when establishing one PFCP-u tunnel per UP function or PDN, in addition to the requirements specified in clause 5.3.1.\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Forwarding of Packets from the UP Function to the CP Function", "numbering": "5.3.4.2", "title_level": 3, "desc": "5.3.4.2\tForwarding of Packets from the UP Function to the CP Function\nRegardless of whether the traffic received by the UP function consists of T-PDUs (i.e. user data packet, see 3GPP TS 29.281 [3]) from SGi / N6 or G-PDUs (i.e. T-PDU plus a GTP-U header) from the UE, the traffic shall be forwarded from the UP function to the CP function as G-PDUs with the GTP-U header set to the IP address and TEID uniquely assigned in the CP function for the PFCP-u tunnel corresponding to the UP function or PDN.\nTo forward the user plane data to from the UP function, the CP function shall provision:\n-\tfor supporting data forwarding scenario \"1\" as specified in clause 5.3.1, an additional PDR for a PFCP session established for a PDN connection or a PDU session which requires such data forwarding, matching the received user plane packets from uplink direction. The Outer Header Removal IE shall not be present if the complete G-PDU is required to be forwarded, otherwise the Outer Header Removal IE shall be present and set to \"0\" or \"1\" for IPv4 or IPv6 respectively;\n-\tfor supporting data forwarding scenario \"2\" as specified in clause 5.3.1, a PDR matching the received user plane packets from downlink direction; \n-\ta FAR instructing the UP function to forward the received data to the CP function, with the field Outer Header Creation Description in the Outer Header Creation set to \"0\" or \"1\" for IPv4 or IPv6 respectively, and the Outer GTP-U header set to the IP address and TEID uniquely assigned in the CP function for the Sx-u tunnel. \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Forwarding of Packets from the CP Function to the UP Function", "numbering": "5.3.4.3", "title_level": 3, "desc": "", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Forwarding of user data using Control Plane CIoT GS Optimisation (for GC)", "numbering": "5.3.5", "title_level": 2, "desc": "5.3.4.3\tForwarding of Packets from the CP Function to the UP Function\nWhen sending user plane data from the CP function, the traffic shall be forwarded over PFCP-u as:\n-\tT-PDUs encapsulated in GTP-U with the GTP-U header set to the IP address and TEID uniquely assigned in the UP function for the PFCP-u tunnel set up for the UP function or PDN or DN for traffic to be sent towards SGi or N6, or\n-\tG-PDUs encapsulated in GTP-U with the outer GTP-U header set to the IP address and TEID uniquely assigned in the UP function for the PFCP-u tunnel set up for the UP function and with the inner GTP-U header set to the F-TEID assigned by the downstreams GTP-U peer (e.g. SGW, I-UPF) to the bearer over which the data shall be sent.\nTo forward the user plane data from the CP function to the UP function, the CP function shall provision:\n\ta PDR per UP function, with an IP address and TEID uniquely assigned in the UP function for the PFCP-u tunnel, and with the field Outer Header Removal Description in the Outer Header Removal IE set to \"0\" or \"1\";\n-\ta FAR enabling the UP function to forward the received data from the CP function.\n5.3.5\tForwarding of user data using Control Plane CIoT 5GS Optimisation (for 5GC)\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "5.3.5.1", "title_level": 3, "desc": "5.3.5.1\tGeneral\nThe following requirements shall apply to the data forwarding scenario 5 of Table 5.3.1-1 in addition to the requirements specified in clause 5.3.1.\nThe CP function shall establish one one N4-u tunnel per PDU session when applying the data forwarding scenario 5.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Forwarding of Packets from the UP Function to the CP Function", "numbering": "5.3.5.2", "title_level": 3, "desc": "5.3.5.2\tForwarding of Packets from the UP Function to the CP Function\nRegardless of whether the downlink traffic received by the UP function consists of T-PDUs (i.e. user data packet, see 3GPP TS 29.281 [3]) from N6 or G-PDUs (i.e. T-PDU plus a GTP-U header) received from N9, the downlink traffic shall be forwarded from the UP function to the CP function as G-PDUs with the GTP-U header set to the IP address and TEID uniquely assigned in the CP function for the N4-u tunnel corresponding to the PDU session. \nNOTE:\tA UPF receiving G-PDUs from N9 forwards the G-PDUs towards the SMF but with the IP address and TEID in the GTP-U header changed to the SMF IP address and TEID of the corresponding N4-u tunnel.\nTo forward the user plane data from the UP function to the CP function, the CP function shall provision:\n-\ta PDR per PDU session, matching the received downlink user plane packets, and for traffic received from N9, with the field Outer Header Removal Description in the Outer Header Removal IE set to \"0\" or \"1\" for IPv4 or IPv6 respectively;\n-\ta FAR instructing the UP function to forward the received downlink data to the CP function, with the field Outer Header Creation Description in the Outer Header Creation set to perform GTP-U/UDP/IPv4 or GTP-U/UDP/IPv6 encapsulation. \nNOTE:\tThe PDR can be provisioned in the UP function before applying data forwarding to the CP function.\nG-PDUs sent from the UP function to the CP function over the N4-u tunnel shall include any GTP-U extension header(s):\n-\tpossibly received by the UP function over the N9 interface and stored during the Outer Header Removal;\n-\tpossibly created by the UP function as part of a QER rule. \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Forwarding of Packets from the CP Function to the UP Function", "numbering": "5.3.5.3", "title_level": 3, "desc": "5.3.5.3\tForwarding of Packets from the CP Function to the UP Function\nLikewise, when sending the uplink traffic received in the CP function to the UP function, the uplink traffic shall be forwarded over N4-u as G-PDUs with the GTP-U header set to the IP address and TEID uniquely assigned in the UP function for the N4-u tunnel set up for the corresponding PDU session.\nTo forward the user plane data from the CP function to the UP function, the CP function shall provision:\n\ta PDR per PDU session, with an IP address and TEID uniquely assigned in the UP function for the N4-u tunnel, and with the field Outer Header Removal Description in the Outer Header Removal IE set to \"0\" or \"1\";\n-\ta FAR enabling the UP function to forward the received uplink data from the CP function.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Policy and Charging Control", "numbering": "5.4", "title_level": 1, "desc": "5.4\tPolicy and Charging Control\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "5.4.1", "title_level": 2, "desc": "5.4.1\tGeneral\nThis clause describe how Policy and Charging Control requirements are supported over the Sxa, Sxb, Sxc and N4 reference points.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Service Detection and Bearer/QoS Flow Binding", "numbering": "5.4.2", "title_level": 2, "desc": "5.4.2\tService Detection and Bearer/QoS Flow Binding\nService detection refers to the process that identifies the packets belonging to a service data flow or application. For EPC, see clauses 6.2.2.2 and 6.8.1 of 3GPP TS 23.203 [7]. For 5GC, see clause 6.2.2.2 of 3GPP TS 23.503 [44].\nFor EPC, bearer binding is the procedure that associates service data flow(s) to an IP-CAN bearer deemed to transport the service data flow. UL bearer binding verification refers to the process of discarding uplink packets due to no matching service data flow template for the uplink direction. See clauses 6.1.1.4 and 6.2.2.2 of 3GPP TS 23.203 [7]. \nFor 5GC, QoS flow binding is the procedure that associates service data flow(s) to a QoS flow deemed to transport the service data flow. UL QoS flow binding verification refers to the process of discarding uplink packets due to no matching QoS flow for the uplink direction. See clause 6.1.3.2.4 of 3GPP TS 23.503 [44] and clause 5.7.1.7 of 3GPP TS 23.501 [28].\nService detection is controlled over the Sxa, Sxb, Sxc and N4 reference points by configuring Packet Detection Information in PDRs to match the intended service data flows or application. \nFor EPC, the mapping of DL traffic to bearers is achieved by configuring and associating FARs to the downlink PDRs, with FARs set to forward the packets to the appropriate downstream bearers (S5/S8 or S1/S12/S4/Iu).\nFor 5GC, the mapping of DL traffic to QoS flows is achieved by configuring QERs with QFI(s) for the QoS flow marking and associating FARs to the downlink PDRs, with FARs set to forward the packets to the appropriate downstream GTP-U tunnel (N9 or N3).\nFor EPC, uplink bearer binding verification is achieved by configuring Packet Detection Information in uplink PDRs containing the local F-TEID of the uplink bearer, the UE IP address (source IP address to match for the incoming packet), and the SDF filter(s) or the Application ID. As a result, uplink packets received on the uplink bearer but that do not match the SDF filter(s) or Application detection filter associated to the uplink PDRs are discarded.\nFor 5GC, uplink QoS flow binding verification (see clause 5.7.1.7 of 3GPP TS 23.501 [28]) is achieved by configuring Packet Detection Information in uplink PDRs containing the local F-TEID of the uplink PDU session, the UE IP address (source IP address to match for the incoming packet), the QFI of the QoS flow and the SDF filter(s) or the Application ID. As a result, uplink packets received on the uplink PDU session but that do not match the SDF filter(s) or Application detection filter and QFI associated to the uplink PDRs are discarded.\n            NOTE 1:\tFor PCC Rules that contain an application identifier (i.e. that refer to an application detection filter), uplink traffic can be received on other IP-CAN bearers than the one determined by the binding mechanism. The detection of the uplink part of the service data flow can be activated in parallel on other bearers with non-GBR QCI (e.g. the default bearer) in addition to the bearer where the PCC rule is bound to. See clauses 6.1.1.1 and 6.2.2.2 of 3GPP TS 23.203 [7]. Therefore the uplink PDRs for these bearers can be provisioned with the PDI containing this service data flow and the local F-TEID of the uplink bearer.\n            NOTE 2:\tTo avoid the PGW-U discarding packets due to no matching service data flow template, the operator can apply open PCC rules (with wildcarded SDF filters) to allow for the passage of packets that do not match any other candidate SDF template. Therefore an uplink PDR can be provisioned with the PDI containing only the local F-TEID of the uplink bearer.\n            NOTE 3:\tUplink bearer binding does not apply to Non-IP PDN connections.\n            NOTE 4:\tThe UPF can be provisioned with a PDR (with low precedence) which contains the CN tunnel info, QFI and filter information that can detect any unwanted/unauthorized traffic with this QFI so that such traffic can be dropped with or without being counted before.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Gating Control", "numbering": "5.4.3", "title_level": 2, "desc": "5.4.3\tGating Control\nGating control refers to the process within the user plane function (i.e. PGW-U and TDF-U for EPC, UPF for 5GC) of enabling or disabling the forwarding of IP packets, belonging to a service data flow or detected application's traffic, to pass through to the desired endpoint (for EPC see clause 4.3.2 of 3GPP TS 23.203 [7] and for 5GC see clause 4.3.3.1 of 3GPP TS 23.503 [44]).\nThe PGW-C and TDF-C (for EPC) and the SMF (for 5GC) controls the gating in the PGW-U and TDF-U (for EPC) and in the UPF (for 5GC) by creating PDR(s) for the service data flow(s) or application's traffic to be detected, and by associating a QER, including the Gate Status IE, to the PDRs.\nThe Gate Status IE indicates whether the service data flow or detected application traffic is allowed to be forwarded (the gate is open) or shall be discarded (the gate is closed) in the uplink and/or in downlink directions.\nThe PGW-U and TDF-U (for EPC) and the UPF (for 5GC) shall identify UL and DL flows by the Source Interface IE in the PDI of the PDRs or the Destination Interface IE in the FARs. The PGW-U and TDF-U (for EPC) and the UPF (for 5GC) shall apply UL and DL gating accordingly.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "QoS Control", "numbering": "5.4.4", "title_level": 2, "desc": "5.4.4\tQoS Control\nQoS control refers to the authorization and enforcement of the maximum QoS that is authorized:\n-\tfor EPC,\n-\tat the session level (APN-AMBR, TDF session UL and DL bitrates, or UL and DL Packet Rate of a PDN connection);\n-\tat the bearer level (GBR, MBR for GBR bearers);\n-\tat the service data flow (SDF) or application level.\n-\tfor 5GC,\n-\tat the session level (Session-AMBR or UL and DL Packet Rate of a PDU session)\n-\tat the QoS Flow level;\n-\tat the service data flow (SDF) or application level.\nSee clause 4.3.3 of 3GPP TS 23.203 [7] clause 4.5.5 of 3GPP TS 29.212 [8] and clause 4.7.7 of 3GPP TS 23.401 [14].\nThe CP function shall control the QoS enforcement in the UP function by:\n-\tcreating the necessary PDR(s) to represent the service data flow, application, QoS Flow (for 5GC), bearer or session, if not already existing;\n-\tcreating QERs for the QoS enforcement at session level, SDF/application level;\n-\tcreating QERs for the QoS enforcement of the aggregate of SDFs with the same GBR QCI;\n-\tcreating QERs for the QoS enforcement of the aggregate of SDFs with the same GBR QFI (for 5GC);\n-\tassociating the session level QER to all the PDRs defined for the session;\n-\tassociating the SDF or application QER to the PDRs associated to the SDF or application;\n-\tassociating the QER of the aggregate of SDFs to the PDRs associated to SDFs or applications that share the QER.\nThe same QER may be associated to UL and DL PDRs. The UP function shall identify the UL and DL flows by the Source Interface IE in the PDRs or the Destination Interface IE in the FARs. The UP function shall enforce the QoS for the UL or DL flows accordingly.\nThe CP function shall map the precedence of a PCC rule to the precedence of the PDRs associated to the corresponding service data flows. \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "DL Flow Level Marking for Application Detection", "numbering": "5.4.5", "title_level": 2, "desc": "5.4.5\tDL Flow Level Marking for Application Detection\nDL flow level marking is performed using DL DSCP marking. DL DSCP marking for application indication refers to the process in the TDF of marking detected downlink application traffic with a DSCP value received within an installed ADC rule matching this traffic. See Annex U of 3GPP TS 23.203 [7] and clauses 4.5.2.7 and 4b.5.14 of 3GPP TS 29.212 [8].\nDL DSCP marking for application indication is controlled by the TDF-C by associating a QER, including the ToS or Traffic Class within the DL Flow Level Marking IE, to the PDR matching the DL traffic to be marked. The TDF-U performs the DL DSCP marking for the detected DL traffic and sends the marked packet to the PGW-U.\nIf a tunnelling protocol is used between the TDF-U and the PGW-U, the DSCP value for service data flow detection shall be carried in the inner IP header.\nThe TDF-C may stop the DL DSCP marking for the application during the PFCP session by removing the related QER or removing the DL Flow Level Marking IE from the related QER, the TDF-U shall then stop such function consequently.\nPolicy and charging control in the downlink direction by the PCEF for an application detected by the TDF is performed by the PGW-C configuring a PDR with a PDI containing an SDF Filter with the corresponding DSCP value.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Usage Monitoring", "numbering": "5.4.6", "title_level": 2, "desc": "5.4.6\tUsage Monitoring\nUsage Monitoring Control refers to the process of monitoring the user plane traffic in the PGW-U, TDF-U or UPF for the accumulated usage of network resources per:\n-\tindividual or group of service data flows;\n-\tindividual or group of applications;\n-\tPDU session, possibly excluding an individual SDF or a group of service data flow(s) (for 5GC);\n-\tIP-CAN session, possibly excluding an individual SDF or a group of service data flow(s) (for EPC), and/or\n-\tTDF session, possibly excluding an individual application or a group of application(s) (for EPC).\nFor EPC, see clauses 4.4, 6.2.2.3 and 6.6 of 3GPP TS 23.203 [7] and clauses 4.5.16, 4.5.17, 4b.5.6, 4b.5.7 of 3GPP TS 29.212 [8].\nFor 5GC, see clauses 4.3.4 and 6.2.2.3 of 3GPP TS 23.503 [44] and clauses 4.2.2.10, 4.2.3.11, 4.2.4.10, 4.2.6.2.5, 4.2.6.5.3 of 3GPP TS 29.512 [41].\nUsage Monitoring Control is supported over the Sxb, Sxc and N4 reference points by activating in the UP function the reporting of usage information towards the CP function, as specified in clauses 5.3 and 7.8.4 of 3GPP TS 23.214 [2] and in clause 5.8.2.6.2 of 3GPP TS 23.501 [28]. \nThe CP function shall control the Usage Reporting in the UP function by: \n-\tcreating the necessary PDR(s) to represent the service data flow, application or session; \n-\tcreating a URR for each Monitoring key; and\n-\tassociating the URR to:\n-\tall the PDRs of the PFCP session, for usage monitoring at IP-CAN or TDF session level, possibly excluding the PDRs matching the SDFs or Applications excluded from the usage monitoring at session level; or\n-\tthe PDR(s) of the PFCP session associated to the individual or group of SDF(s) or Application(s), for usage monitoring at SDF or application level.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Traffic Redirection", "numbering": "5.4.7", "title_level": 2, "desc": "5.4.7\tTraffic Redirection\nTraffic Redirection refers to the process of redirecting uplink application traffic, in a PGW, TDF or UPF, towards a redirect destination, e.g. redirect some HTTP flows to a service provisioning page. For EPC, see clause 6.1.13 of 3GPP TS 23.203 [7] and clauses 4.5.2.6 and 4b.5.1.4 of 3GPP TS 29.212 [8]. For 5GC, see clause 6.1.3.12 of 3GPP TS 23.503 [44] and clause 4.2.6.2.4 of 3GPP TS 29.512 [46].\nThe redirect destination may be provided by the PCRF/PCF or be preconfigured in the CP function or in the UP function.\nFor EPC, the traffic redirection may be enforced in the CP function or in the UP function. For 5GC, the traffic redirection may be enforced in the UP function only. If the traffic that the UP function can support may be subject to traffic redirection, traffic redirection enforcement in the UP function shall be supported by the UP function. The UP function reports to the CP function whether it supports traffic redirection enforcement in the UP function via the UP Function Features IE (see clause 8.2.25).\nNOTE:\tA UP function that supports traffic not requiring traffic redirection does not need to support traffic redirection enforcement in the UP function. The CP function can select a UP function supporting traffic redirection enforcement in the UP function for users or services which may require traffic redirection.\nTo enforce the traffic redirection in the CP function, the CP function shall instruct the UP function to forward the applicable user traffic to the CP function, as specified in clause 5.3.1.\nTo enforce the traffic redirection in the UP function, the CP function shall:\n-\tcreate the necessary PDR(s) to represent the traffic to be redirected, if not already existing;\n-\tcreate a FAR with:\n-\tthe Redirect Information IE including the redirect destination, if the traffic needs to be redirected towards a redirect destination provided by the CP function; a redirect destination provided by the CP function shall prevail over a redirect destination preconfigured in the UP function; ;\n-\tFor HTTP traffic redirection, the Redirection Address Type shall be set to \"URL\" and the CP function shall set the Destination Interface IE in the FAR to \"Access\" (to forward the HTTP response message with a status code indicating redirect). For other types of traffic redirection, the Destination Interface IE in the FAR may be set to \"Core\". \nor\n-\tthe Forwarding Policy IE including the identifier of the forwarding policy to apply, if the traffic needs to be redirected towards a redirect destination preconfigured in the UP function;\n-\tassociate the FAR to the above PDRs of the PFCP session.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Traffic Steering", "numbering": "5.4.8", "title_level": 2, "desc": "5.4.8\tTraffic Steering\nTraffic Steering refers to the process of applying a specific (S)Gi-LAN traffic steering policy in the PCEF or TDF (or TSSF), or a specific N6-LAN traffic steering policy in the UPF (PDU Session Anchor), for the purpose of steering the subscriber's traffic to appropriate operator or 3rd party service functions (e.g. NAT, antimalware, parental control, DDoS protection) in the (S)Gi-LAN or N6-LAN, per service data flows level or applications level.\nApplication Function influencing traffic routing (see clause 5.6.7 of 3GPP TS 23.501 [28]) also uses traffic steering for the purpose of steering the subscriber's traffic over N6, e.g. to a local access to a Data Network.    \nThe UP function shall set the TRST feature flag in the UP Function Features IE if it supports Traffic Steering (see clause 8.2.25).\nTraffic Steering is supported over the Sxb, Sxc and N4 reference points by instructing the UP function to apply a specific Forwarding Policy, that is locally configured in the UP function and that can be used for the uplink, the downlink or for both directions. A Forwarding Policy is identified by a Forwarding Policy Identifier. Traffic steering is alternatively supported over the N4 reference point by instructing the UP function to route packets according to N6 routing information in the FAR (e.g. providing an IP address in the Outer Header Creation).  \nWhen so instructed, the UP function shall perform the necessary actions to enforce the forwarding policy referenced by the CP function, e.g. performing packet marking and routing the traffic towards the service functions within the (S)Gi-LAN or N6-LAN.\nSee 3GPP TS 23.203 [7], 3GPP TS 29.212 [8] and 3GPP TS 23.501 [28].\nThe CP function shall control Traffic Steering towards SGi-LAN, N6-LAN or N6 in the UP function by:\n-\tcreating the necessary PDRs to represent the service data flows or applications to be steered;\n-\tcreating a FAR with the Forwarding Policy IE including the Forwarding Policy Identifier set to the Traffic Steering Policy Identifier, or creating a FAR with a Outer Header Creation with the destination IP address; and\n-\tassociating the FAR to the above PDRs of the PFCP session.\nThe CP function shall control the processing of the traffic received from the (S)Gi-LAN or N6-LAN in the UP function as specified in the rest of this specification for traffic received from any other interface, but with PDR(s) including a PDI with the Source Interface indicating \"SGi-LAN/N6-LAN\". The UP function shall distinguish packets coming from (S)Gi-LAN/N6-LAN based on local configuration.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Provisioning of Predefined PCC/ADC Rules", "numbering": "5.4.9", "title_level": 2, "desc": "5.4.9\tProvisioning of Predefined PCC/ADC Rules\nA Predefined PCC rule is preconfigured in the PCEF, e.g. a PGW (for EPC) or SMF (for 5GC). Predefined PCC rules can be activated or deactivated by the PCRF/PCF at any time. The Predefined PCC rules may be grouped allowing the PCRF/PCF to dynamically activate a set of PCC rules.\nFor EPC a predefined ADC rule is preconfigured in the TDF. In the case of solicited reporting, the Predefined ADC rules can be activated or deactivated by the PCRF at any time. Predefined ADC rules within the TDF may be grouped allowing the PCRF to dynamically activate a set of ADC rules.\nFor the definition of PCC and ADC rules see clauses 4.3.1 and 4b.3.2 of 3GPP TS 29.212 [8] and clause 5.6.2.6 of 3GPP TS 29.512 [41].\nThe CP function may enforce an activated predefined PCC or ADC rule by the PCRF/PCF in the UP function by:\n-\tdetermining the service data filters or application IDs referred by the activated predefined PCC or ADC rule(s) and the corresponding QoS and charging control information respectively;\n-\tcreating the necessary PDR(s) to identify the service data flow(s), application(s) that the predefined PCC or ADC rule refer to, if not already existing; \n-\tcreating the necessary QER for the QoS enforcement at service data flow or application level accordingly;\n-\tcreating the necessary FAR if a new FAR needs to be created as result of Bearer binding (for EPC) or QoS flow binding (for 5GC) and QoS control for forwarding the detected service data flow or application traffic, or to redirect or to apply traffic steering control if included in the predefined PCC/ADC rule;\n-\tcreating the necessary URR(s) for each monitoring key, charging key, combination of Charging Key and Service ID, or combination of Charging Key, Sponsor ID and Application Service Provider Id if included in the predefined PCC or ADC rule; \nAnd then:\n-\tassociating the created URR(s) to the newly created PDR(s);\n-\tassociating the existing FAR or the new FAR to the newly created PDR(s);\nOptionally, the traffic handling policies common to many PFCP sessions (i.e. predefined PDR(s) / QER(s) / FAR(s) / URR(s)) may be configured in the UP function. The CP function may activate these traffic handling policies by including the Activate Predefined Rules IE within:\n-\tthe Create PDR IE in an PFCP Session Establishment Request; or\n-\tthe Update PDR IE in an PFCP Session Modification Request.\nFor traffic matching PDR(s) associated with the activated predefined rules, the UP function shall enforce the rules, e.g. for URR, the UP function shall generate Usage Report(s) and send it to the CP function and the CP function shall be able to handle the usage reports as described in clause 5.2.2.\nNOTE:\tThe URR IDs used in reports triggered by a predefined rule in UP function are also pre-configured at the CP function.\nFor deactivating predefined rules which are activated in the UP function, the CP function shall include the Deactivate Predefined Rules IE in the Update PDR IE in an PFCP Session Modification Request to inform the UP function to deactivate the corresponding predefined rules for the related PDR.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Charging", "numbering": "5.4.10", "title_level": 2, "desc": "5.4.10\tCharging\nFor EPC, the charging requirements for online and offline charging in the PS domain specified in 3GPP TS 32.251 [17] shall be preserved with a split SGW, PGW and TDF architecture.\nFor 5GC, the charging requirements for online and offline charging in the 5G data connectivity domain are specified in 3GPP TS 32.255 [45].\nCharging is supported by the CP function by activating in the UP function the measurement and reporting of the accumulated usage of network resources per:\n-\tfor EPC:\n-\tIP-CAN bearer, for an SGW;\n-\tIP-CAN bearer, IP-CAN session and/or individual or group of service data flows, for a PGW;\n-\tTDF session and/or individual or group of applications, for a TDF;\n-\tfor 5GC:\n-\tPDU session and/or individual or group of service data flows, for an SMF\n-\tQoS Flow, for an SMF.\nSee clauses 5.3 and 7.8.4 of 3GPP TS 23.214 [2].\nThe CP function shall control the usage measurement and reporting in the UP function by:\n-\tcreating the necessary PDR(s) to represent the service data flow, application, bearer or session, if not already existing;\n-\tcreating URR(s) for each Charging Key, combination of Charging Key and Service ID, or combination of Charging Key, Sponsor ID and Application Service Provider Id;\n-\tassociating the URR(s) to the relevant PDRs defined for the PFCP session, for usage reporting at IP-CAN bearer, IP-CAN session, TDF session, SDF or application level.\nFor online charging, the CP function shall provision the URR with the Volume (or Time) Quota, and with the Volume (or Time) Quota if a quota threshold was received from the OCS, as specified in clause 5.2.2.2. Besides, when the OCS provides a final quota and requests to redirect the traffic towards a redirect destination when exhausing this quota, the CP function shall redirect the traffic towards a redirect destination as specified in clause 5.4.7 upon being notified that the final quota has been reached; to permit HTTP traffic redirection, the UP function should have at least one HTTP packet, e.g. the UP function may store one packet when reaching the Volume (or Time) Quota. An example call flow is depicted in Annex C.2.1.1.\nTo avoid the risk of signalling storms between the CP and UP functions at times of tariff change, the CP function may include the Monitoring Time IE and zero or more Additional Monitoring IEs in the URR and set it to the time of tariff change to request the UP function to report separately the resource usage before and after the time of tariff change (see e.g. clause 6.3.7.1 of 3GPP TS 32.299 [18]).\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "(Un)solicited Application Reporting", "numbering": "5.4.11", "title_level": 2, "desc": "5.4.11\t(Un)solicited Application Reporting\nFor EPC, (un)solicited Application Reporting refers to the process of reporting the start or stop of applications by the TDF or PCEF. See 3GPP TS 23.203 [3] and 3GPP TS 29.212 [8].\nFor 5GC, solicited Application Reporting refers to the process of reporting the start or stop of applications by the SMF to the PCF. See 3GPP TS 23.503 [44] and 3GPP TS 29.512 [41]. Unsolicited application reporting is not applicable for 5GC.\nThe CP function shall instruct the UP function to detect and report applications by:\n-\tcreating the necessary PDR(s) to represent the applications to detect;\n-\tcreating a URR with the Reporting Trigger IE set to detect the start and/or stop of Traffic;\n-\tassociating the URR to the PDR.\nFor unsolicited application reporting, an PFCP session which is not linked to any specific TDF session may be established and the PDI in the PDR(s) does not contain any UE IP address.\nWhen detecting the start or stop of an application, the UP function shall then initiate the PFCP Session Report procedure and send a Usage Report with the Usage Report Trigger set to 'Start of Traffic' or 'Stop of Traffic'. The UP function shall also include the following information in the Usage Report:\n-\twhen reporting the start of an application:\n-\tthe Application ID;\n-\tthe Flow Information including the Flow Description and the Flow Direction, if the traffic flow information is deducible;\n-\tthe Application-Instance-Identifier, if the traffic flow information is deducible; and\n-\tif no UE IP address was provisioned in the PDI, the UE's IP address, and the Network instance when multiple PDNs with overlapping IP addresses are used in the UP function.\nNOTE:\tWhen the CP function instructs the UP function to perform unsolicited application reporting, the PDI in the corresponding PDR has no UE IP address.\n-\twhen reporting the stop of an application:\n-\tthe Application ID;\n-\tthe Application-Instance-Identifier, if an Application Identifier was provided when reporting the start of the application;\n-\tif no UE IP address was provisioned in the PDI, the UE's IP address, and the Network instance when multiple PDNs with overlapping IP addresses are used in the UP function.\nThe UP function shall only report the Application ID when detecting the start or stop of an application and the Reduced Application Detection Information flag is set in the Measurement Information of the URR, e.g. for envelope reporting.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Service Identification for Improved Radio Utilisation for GERAN", "numbering": "5.4.12", "title_level": 2, "desc": "5.4.12\tService Identification for Improved Radio Utilisation for GERAN\nService Identification for improved radio utilization for GERAN refers to the process in the PGW of marking DL user plane traffic with a Service Class Indicator (SCI) value. See clause 5.3.5.3 of 3GPP TS 23.060 [19].\nThis is controlled by the PGW-C by associating a QER, including the Service Class Indicator within the DL Flow Level Marking IE, to the PDR matching the DL traffic to be marked. The PGW-U performs the SCI marking for the detected DL traffic and sends the packet with the GTP-U Service Class Indicator Extension Header downstreams.\nThe PGW-C may stop the SCI marking during the PFCP session by removing the related QER or removing the DL Flow Level Marking IE from the related QER, the PGW-U shall then stop such function consequently.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Transport Level Marking", "numbering": "5.4.13", "title_level": 2, "desc": "5.4.13\tTransport Level Marking \nFor EPC, transport level marking is performed on a per EPS bearer basis in the SGW and PGW. Transport level marking refers to the process of marking traffic with a DSCP value based on the locally configured mapping from the QCI and optionally the ARP priority level.\nFor 5GC, transport level marking is performed on a per QoS flow basis. Transport level marking refers to the process of marking traffic at the UPF with a DSCP value based on the mapping from the 5QI, the Priority Level (if explicitly signalled) and optionally the ARP priority level configured at the SMF.\nTransport level marking shall be controlled by the CP function by providing the DSCP in the ToS or Traffic Class within the Transport Level Marking IE in the FAR that is associated to the PDR matching the traffic to be marked. The UP function shall perform the transport level marking for the detected traffic and sends the marked packet to the peer entity.\nThe CP function may change transport level marking by changing the Transport Level Marking IE in the related FAR.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Deferred PDR activation and deactivation", "numbering": "5.4.14", "title_level": 2, "desc": "5.4.14\tDeferred PDR activation and deactivation\nAs specified in clause 6.3.2 of 3GPP TS 23.203 [7] and clauses 4.5.13 and 4a.5.13 of 3GPP TS 29.212 [8], Policy and charging control rule operations can be also performed in a deferred mode. To support such deferred PCC rule activation or deactivation, the CP function and UP function may optionally support the Deferred PDR activation and deactivation (DPDRA) as described below.\nIf the feature DPDRA is supported in both CP function and UP function, and when a PCC rule is provisioned in a deferred mode, i.e. with a Rule-Activation-Time and/or Rule-Deactivation-Time, the CP function shall provision the corresponding PDR using Create PDR IE or Update PDR together with an Activation Time and/or Deactivation Time to enable the PDR being activated or deactivated at requested time. \nWithout being provisioned together with an Activation Time or a Deactivation Time, a PDR shall be active immediately when it is received. When the status of a PDR is changed from active to inactive, the UP function shall keep storing the inactive PDR together with its associated FAR, URR(s) and QER(s), and then UP function shall apply the same behavior as if the PDR is deleted.\nThe CP function shall control at what time the status of a PDR rule changes using Activation Time and/or Deactivation Time as exactly as being instructed by the PCRF using a Rule-Activation-Time and/or Rule-Deactivation-Time, as specified in clause 4.5.13 of 3GPP TS 29.212 [8].\n1)\tIf only Activation Time is specified and has not yet occurred, then the UP function shall set the PDR rule inactive and make it active at that time. If Activation Time has passed, then the UP function shall immediately set the PDR rule active.\n2)\tIf only Deactivation Time is specified and has not yet occurred, then the UP function shall set the PDR rule active and make it inactive at that time. If Deactivation Time has passed, then the UP function shall immediately set the PDR rule inactive.\n3)\tIf both Activation Time and Deactivation Time are specified, and the Activation Time occurs before the Deactivation Time, and also when the PDR rule is provided before or at the time specified in the Deactivation Time, the UP function shall handle the rule as defined in 1) and then as defined in 2).\n4)\tIf both Activation Time and Deactivation Time are specified, and the Deactivation Time occurs before the Activation Time, and also when the PDR rule is provided before or at the time specified in the Activation Time, the UP function shall handle the rule as defined in 2) and then as defined in 1).\n5)\tIf both Activation Time and Deactivation Time are specified but time has already occurred for both, and the Activation Time occurs before the Deactivation Time, then the UP function shall immediately set the PDR rule inactive. \nNOTE 1:\tIf the CP function receives both Rule-Activation-Time and Rule-Deactivation-Time from the PCRF, but time has already occurred for both, and the Rule-Activation-Time occurs before the Rule-Deactivation-Time, as alternative to above, the CP function can deactivate the corresponding PDR rule by provisioning a Deactivation Time which has occurred or removing the corresponding PDR rule. \n6)\tIf both Activation Time and Deactivation Time are specified but time has passed for both, and the Deactivation Time occurs before the Activation Time, then the UP fucntion shall immediately set the PDR rule active. \nNOTE 2:\tIf the CP function receives both Rule-Activation-Time and Rule-Deactivation-Time from the PCRF, but time has passed for both, and the Rule-Deactivation-Time occurs before the Rule-Activation-Time, as alternative to above, the CP function can activate the corresponding PDR rule by provisioning a activation Time which has occurred, or update the PDR without providing Activation Time and Deactivation Time, or create the corresponding PDR rule if the PDR is not provisioned yet.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "F-TEID Allocation and Release", "numbering": "5.5", "title_level": 1, "desc": "5.5\tF-TEID Allocation and Release \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "5.5.1", "title_level": 2, "desc": "5.5.1\tGeneral\nF-TEID shall be allocated either by the CP function or the UP function. The support of F-TEID allocation by the CP function is mandatory. The support of F-TEID allocation by the UP function is optional. See clause 5.4 of 3GPP TS 23.214 [2].\nThe UP function shall set the FTUP feature flag in the UP Function Features IE if it supports F-TEID allocation in the UP function (see clause 8.2.25). If so, the CP function shall determine whether F-TEIDs are allocated by the CP function or the UP function based on network configuration. The same F-TEID allocation option shall be used by all the CP functions controlling a particular UP function. The UP function shall reject a request to establish a new PDR with a different F-TEID allocation option than the option used for already created PDRs (by the same or a different CP function), with the cause \"Invalid F-TEID allocation option\".\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "F-TEID allocation in the CP function", "numbering": "5.5.2", "title_level": 2, "desc": "5.5.2\tF-TEID allocation in the CP function\nWhen performing F-TEID allocation in the CP function, the CP function shall assign the Local F-TEID IE of the PDR IE (see Table 7.5.2.2-1) and provide the assigned F-TEID value to the UP function.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "F-TEID allocation in the UP function", "numbering": "5.5.3", "title_level": 2, "desc": "5.5.3\tF-TEID allocation in the UP function\nWhen performing F-TEID allocation in the UP function, the CP function shall request the UP function to allocate the F-TEID by setting the CHOOSE flag in the Local F-TEID IE of the PDR IE (see Table 7.5.2.2-1). The Source Interface IE indicates for which interface the F-TEID is to be assigned. \nThe CP function may request the UP function to allocate the same F-TEID to several PDRs to be created within one single PFCP Session Establishment Request or PFCP Session Modification Request by: \n-\tsetting the CHOOSE flag in the Local F-TEID IE of each PDR to be created with a new F-TEID, and \n-\tsetting the CHOOSE ID field of the Local F-TEID IE, for each PDR to be created with the same F-TEID, with the same CHOOSE ID value. \nor, if the UP function indicated support of the PDI optimization (see clause 8.2.25), by:\n-\tincluding the Local F-TEID IE only in the Create Traffic Endpoint IE and by setting the CHOOSE flag in the Local F-TEID IE of this IE; and\n-\tincluding the Traffic Endpoint ID in all the PDRs to be created with the same F-TEID.\nIf the PDR(s) is created successfully, the UP function shall return the F-TEID(s) it has assigned to the PDR(s) or to the Traffic Endpoint(s) in the PFCP Session Establishment Response or PFCP Session Modification Response. \nUpon receiving a request to remove a PDR or a Traffic Endpoint, or to delete an PFCP session, the UP function shall free the F-TEID(s) that was assigned to the PDR if there is no more PDR with the same F-TEID, to the Traffic Endpoint or to the PFCP Session.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Session Handling", "numbering": "5.6", "title_level": 1, "desc": "5.6\tPFCP Session Handling\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "5.6.1", "title_level": 2, "desc": "5.6.1\tGeneral\nThe following clauses provide details on PFCP Sessions handling.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Session Endpoint Identifier Handling", "numbering": "5.6.2", "title_level": 2, "desc": "5.6.2\tSession Endpoint Identifier Handling\nThe SEID uniquely identifies an PFCP session at an IP address of a PFCP entity. The F-SEID is the Fully Qualified SEID and it contains the SEID and IP address. The PFCP endpoint locally assigns the SEID value the peer PFCP side has to use when transmitting message. The SEID values are exchanged between PFCP endpoints using PFCP messages. The PFCP entity communicates to the peer PFCP entity the SEID value at which it expects to receive all subsequent control plane messages related to that PFCP session via the \"F-SEID\" IE. \nThe PFCP session related messages shall share the same F-SEID for the PFCP session. A F-SEID shall be released after the PFCP session is released.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Modifying the Rules of an Existing PFCP Session", "numbering": "5.6.3", "title_level": 2, "desc": "5.6.3\tModifying the Rules of an Existing PFCP Session\nThe following principles shall apply, unless specified otherwise in the specification.\nWhen modifying an existing PFCP session, the CP function shall only provide in the PFCP Request message the requested changes compared to what was previously provisioned in the UP function for this PFCP session, i.e. the CP function shall:\n-\tinclude IEs which needs to be newly provisioned in the UP function;\n-\tinclude IEs which need to be provisioned with a modified value;\n-\tremove IEs which need to be removed from the set of parameters previously provisioned in the UP function, as further specified below.\nThe CP function shall remove IEs which needs to be removed by either:\n-\tremoving the entire Rule if no other parameter of that rule needs to remain provisioned in the UP function, e.g. by including the Remove URR IE in the PFCP Session Modification Request; or\n-\tupdating the Rule including the IEs to be removed with a null length, e.g. by including the Update URR IE in the PFCP Session Modification Request with the IE(s) to be removed with a null length.\nThe CP function shall set a URR ID and/or QER ID with a length \"0\" in the Update PDR IE within PFCP Session Modification Request, to request the UP function to stop applying the URRs and/or QERs for this PDR.\nUpon receipt of an PFCP Request which modifies an existing PFCP session, the UP function shall add, update or remove the parameters as instructed by the CP function, as defined above, and shall keep unchanged the set of parameters previously provisioned in the UP function which are neither modified nor removed.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Support of Lawful Interception", "numbering": "5.7", "title_level": 1, "desc": "5.7\tSupport of Lawful Interception\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "5.7.1", "title_level": 2, "desc": "5.7.1\tGeneral\nThis clause specifies lawful interception with PFCP in EPC.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Lawful Interception in EPC", "numbering": "5.7.2", "title_level": 2, "desc": "", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Lawful Interception in GC", "numbering": "5.7.3", "title_level": 2, "desc": "5.7.2\tLawful Interception in EPC\nRequirements for support of Lawful Interception with a split SGW or PGW are specified in clauses 12.9 and 20.4 of 3GPP TS 33.107 [20].\nUser plane packets shall be forwarded from the UP function to the SX3LIF (or LMISF for S8HR) by encapsulating the user plane packets using GTP-U encapsulation (see 3GPP TS 29.281 [3]).\nThe CP function shall instruct the UP function to duplicate the packets to be intercepted and to forward them to the SX3LIF (or to the LMISF for S8HR) as specified in clause 5.2.3.\nFor forwarding data from the UP function to the SX3LIF (or LMISF for S8HR), the CP function shall set the DUPL flag in the Apply Action and set the Duplicating Parameters in the FAR, associated to the PDRs of the traffic to be intercepted, with the Destination Interface \"LI Function\" and set to perform GTP-U encapsulation and to forward the packets to a GTP-u F-TEID uniquely assigned in the SX3LIF (or LMISF for S8HR) for the traffic to be intercepted. The SX3LIF (or LMISF for S8HR) shall then identify the intercepted traffic by the F-TEID in the header of the encapsulating GTP-U packet.\n5.7.3\tLawful Interception in 5GC\nRequirements for support of Lawful Interception with SMF and UPF are specified in clauses 6.2.3 of 3GPP TS 33.127 [47]. The PFCP protocol is not used for Lawful Interception in 5GC. \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Association", "numbering": "5.8", "title_level": 1, "desc": "5.8\tPFCP Association \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "5.8.1", "title_level": 2, "desc": "5.8.1\tGeneral\nAn PFCP Association shall be set up between the CP function and the UP function prior to establishing PFCP sessions on that UP function. Only one PFCP association shall be setup between a given pair of CP and UP functions, even if the CP and/or UP function exposes multiple IP addresses. A single PFCP association may also be setup between a SMF set and a UPF (see clause 5.22).\nThe CP function and the UP function shall support the PFCP Association Setup procedure initiated by the CP function (see clause 6.2.6.2). The CP function and the UP function may additionally support the PFCP Association Setup procedure initiated by the UP function (see clause 6.2.6.3).\nA CP function may have PFCP Associations set up with multiple UP functions. A UP function may have PFCP Associations set up with multiple CP functions.\nA CP function or a UP function shall be identified by a unique Node ID. A Node ID may be set to an FQDN or an IP address (see clause 8.2.38).\nPrior to establishing an PFCP Association, the function responsible for establishing the PFCP Association (e.g. CP function) shall look up a peer function (e.g. UP function), e.g using DNS procedures (see 3GPP TS 29.303 [25]), NRF procedures (see 3GPP TS 29.510 [43]) or local configuration. If the peer function is found to support multiple IP addresses (in the look up information), one of these addresses (any one) shall be used as destination IP address to send the PFCP Association Setup Request. Once the PFCP Association is established, any of the IP addresses of the peer function (found during the look-up) may then be used to send subsequent PFCP node related messages and PFCP session establishment requests for that PFCP Association.  \nNOTE 1:\tThe look up information (e.g. in DNS, NRF or local configuration of the function responsible for establishing the PFCP association) needs to be configured consistently with the addressing information of the peer function. If a FQDN is configured to identify a function in DNS or NRF, then the Node ID of that function included in PFCP messages need to be set to the same FQDN. For instance, if the CP function is responsible for establishing the PFCP association, a UP function that exposes multiple IP addresses (for PFCP node related messages and PFCP session establishment requests) needs to be configured in the look up information as one (single) UP function that is associated to multiple IP addresses. The Node ID needs to be set to an SMF set FQDN when a single association is setup between an SMF set and UPF (see clause 5.22).\nNOTE 2:\tPFCP session related messages for sessions that are already established are sent to the IP address received in the F-SEID allocated by the peer function or to the IP address of an alternative SMF in the SMF set (see clause 5.22). The former IP address needs not be configured in the look up information. See clause 4.3.2 and 4.3.3. \n5.8.2\tBehaviour with an Established PFCP Association\nWhen an PFCP Association is established with a UP function, the CP function:\n-\tshall provision node related parameters (i.e. parameters that apply to all PFCP sessions) in the UP function, if any, e.g. PFDs;\n-\tshall provision the UP function with the list of features (affecting the UP function behaviour) the CP function supports, if any, e.g. support of load and/or overload control;\n-\tshall check the responsiveness of the UP function using the Heartbeat procedure as specified in clause 6.2.2;\n-\tmay establish PFCP sessions on that UP function; \n-\tshall refrain from attempting to establish new PFCP sessions on the UP function, if the UP function has indicated it will shut down gracefully.\nWhen an PFCP Association is established with a CP function, the UP function:\n-\tshall update the CP function with the list of features it supports;\n-\tshall update the CP function with its load and/or overload control information, if load and/or overload control is supported by the CP and UP functions;\n-\tmay update the CP function with the set of its IP resources available for use by the CP function, when F-TEID allocation is performed by the CP function;\nNOTE:\tThe CP function can be aware of the available IP resources in the UP function e.g. based on the UP function reporting this information over Sx using Sx node related messages, or by other implementation specific means.\n-\tshall accept PFCP Session related messages from that CP function (unless prevented by other reasons, e.g. overload);\n-\tshall check the responsiveness of the CP function using the Heartbeat procedure as specified in clause 6.2.2;\n-\tshall indicate to the CP function if it will shut down within a graceful period and, when possible, if it fails and becomes out of service.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Behaviour without an Established PFCP Association", "numbering": "5.8.3", "title_level": 2, "desc": "5.8.3\tBehaviour without an Established PFCP Association\nWhen an PFCP Association is not established with a UP function, the CP function:\n-\tshall reject any incoming PFCP Session related messages from that UP function, with a cause indicating that no PFCP association exists with the peer entity.\nWhen an PFCP Association is not yet established with a CP function, the UP function:\n-\tshall reject any incoming PFCP Session related messages from that CP function, with a cause indicating that no PFCP association exists with the peer entity.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Usage of Vendor-specific IE", "numbering": "5.9", "title_level": 1, "desc": "5.9\tUsage of Vendor-specific IE\nVendor-specific IEs are defined to cover requirements and features not specified by 3GPP.\nNOTE 1:\tWhen a IE is intended to be used by more than one vendor, the definition of the IE is encouraged to be specified by 3GPP to ease implementation and interoperability.\nNOTE 2:\tThe PFCP entities can use Vendor-specific IE(s) in the PFCP message relevant to the PFCP Association Setup procedure to learn which vendor specific enhancements are supported by the peer.\nIn a network with Vendor specific enhancements, unrecognized vendor specific IEs shall be handled as unknown optional IEs.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Error Indication Handling", "numbering": "5.10", "title_level": 1, "desc": "5.10\tError Indication Handling\nUpon receipt of a GTP-U Error Indication message, the UP function:\n-\tshall identify the related PFCP session for which the message is received; and\n-\tshall initiate an PFCP Session Report procedure, towards the CP function controlling this PFCP session, to send an Error Indication Report including the remote F-TEID signalled in the GTP-U Peer Address IE and the Tunnel Endpoint Identifier Data I IE of the GTP-U Error Indication (see clause 7.3.1 of 3GPP TS 29.281 [3]).\nFor EPC, upon receipt of an Error Indication Report, the CP function shall then identify the bearer for which the Error Indication Report is received using the remote F-TEID included in the report and proceed as specified in clauses 21.7 and 21.8 of 3GPP TS 23.007 [24], i.e.:\n-\tmodify the PFCP session to instruct the UP function to buffer DL packets;\n-\tmodify the PFCP session to delete the PDR and FAR, when having to delete a bearer; or\n-\tdelete the PFCP session, when having to delete the PDN connection.\nFor 5GC, upon receipt of an Error Indication Report, the SMF shall proceed as specified in clause 5.3 of 3GPP TS 23.527 [40].\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "User plane inactivity detection and reporting", "numbering": "5.11", "title_level": 1, "desc": "5.11\tUser plane inactivity detection and reporting\nClause 5.4.4.1 of 3GPP TS 23.401 [14] requires the PGW to initiate the release of an inactive emergency PDN connection. \nClause 4.3.7 and 4.3.2.2.2 of 3GPP TS 23.502 [29] requires the SMF to be able to initiate the deactivation of the UP connection of an existing PDU session without user plane activity for a given inactivity period, except for the H-SMF for the home routed roaming scenario or except for an always-on PDU session as described in clause 5.6.8 of 3GPP TS 23.501 [28].\nThe CP function may request the UP function to detect and report when no user plane packets are received for an PFCP session, by provisioning the User Plane Inactivity Timer IE in the PFCP Session Establishment Request or PFCP Session Modification Request. \nUpon being provisioned with this IE, the UP function shall monitor the user plane activity of the PFCP session, and report any user plane inactivity exceeding the duration indicated by this IE by sending an PFCP Session Report Request with the Report Type set to UPIR (User Plane Inactivity Report). The UP function shall then continue to process any further user plane packets as instructed by the rules provisioned for the PFCP session, until receiving any new instruction from the CP function.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Suspend and Resume Notification procedures", "numbering": "5.12", "title_level": 1, "desc": "", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Ethernet traffic (for GC)", "numbering": "5.13", "title_level": 1, "desc": "5.12\tSuspend and Resume Notification procedures\nUpon receipt of a Suspend Notification message, the PGW-C should request the PGW-U to discard packets received for the suspended PDN connection by:\n-\tsetting the DROP flag in the Apply Action IE of the FARs of the corresponding PFCP session, or \n-\tsetting the gate fields in the Gate Status IE of QERs to the value CLOSED.\nUpon being requested to resume the PDN connection, the PGW-C should re-allow the PGW-U to forward the packets for the PDN connection (unless not permitted for other reasons) by:\n-\tsetting the FORW flag in the Apply Action IE of the FARs of the corresponding PFCP session or \n-\tsetting the gate fields in the Gate Status IE of QERs to the value OPEN.\n5.13\tEthernet traffic (for 5GC)\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "5.13.1", "title_level": 2, "desc": "", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Address Resolution Protocol or IPv Neighbour Solicitation Response by SMF", "numbering": "5.13.2", "title_level": 2, "desc": "", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Address Resolution Protocol or IPv Neighbour Solicitation Response by UPF", "numbering": "5.13.3", "title_level": 2, "desc": "5.13.1\tGeneral\nAn SMF and UPF may support Ethernet PDU sessions, as specified in clause 5.6.10.2 of 3GPP TS 23.501[28].\nFor a PFCP session set up for an Ethernet PDU session, the SMF shall:\n-\tinclude the PDN Type IE set to \"Ethernet\" in the PFCP Session Establishment Request;\n-\tprovision PDR(s), for uplink and/or downlink traffic, with Ethernet Packet Filter(s), based on at least any combination of:\n-\tSource/destination MAC address;  \n-\tEthertype as defined in IEEE 802.3 [31]; \n-\tCustomer-VLAN tag (C-TAG) and/or Service-VLAN tag (S-TAG) VID fields as defined in IEEE 802.1Q [30];  \n-\tCustomer-VLAN tag (C-TAG) and/or Service-VLAN tag (S-TAG) PCP/DEI fields as defined in IEEE 802.1Q [30]; \n-\tIP Packet Filter Set, in case Ethertype indicates IPv4/IPv6 payload. ; \n-\tEthernet PDU Session Information, only possible for a DL PDR, that identifies all (DL) Ethernet packets matching the PDU session as follows, based on the N6 Ethernet configuration in the UPF for the associated Network Instance (see clause 5.6.10.2 of 3GPP TS 23.501 [28]): \n-\tDL traffic based on the MAC address(es) and/or C-TAG and/or S-TAG used by the UE for the UL traffic, for configurations where more than one PDU Session to the same DNN (e.g. for more than one UE) corresponds to the same N6 interface; \n-\tDL traffic from the N6 interface associated to the PDU session, for configurations where there is a one-to-one relationship between a PDU Session and a N6 interface (in which case the UPF does not need to be aware of MAC addresses and/or C-TAG and/or S-TAG used by the UE in order to route down-link traffic). \nNOTE 1:\tFor instance, the SMF can provision a DL PDR with just an \"Ethernet PDU Session Information\", in a Traffic Endpoint ID or in a PDI, or Ethernet Packet Filters in a PDI, or both an \"Ethernet PDU Session Information\" in a Traffic Endpoint ID and Ethernet Packet Filters in a PDI.  \nThe SMF may also request a UPF, acting as a PDU session anchor, to: \n-\tredirect Address Resolution Protocol (ARP) (see IETF RFC 826 [32]) or IPv6 Neighbour Solicitation traffic (see IETF RFC 4861 [33]) to the SMF as specified in clause 5.13.2, or to respond to ARP or IPv6 Neighbour Solicitation based on the local cache information as specified in clause 5.13.3; \n-\treport the MAC (Ethernet) addresses used as source address of frames sent UL by the UE, as specified in clause 5.13.5.\nFor a PFCP session set up for an Ethernet PDU session, the UPF shall:\n-\tdetect Ethernet traffic, based on Ethernet Packet Filter(s) provisioned in PDR(s) by the SMF, and process the Ethernet traffic as instructed in the FAR, QER(s) and URR(s) associated to the PDR(s);\n-\tforward Address Resolution Protocol (see IETF RFC 826 [32]) or IPv6 Neighbour Solicitation messages (see IETF RFC 4861 [33]) to the SMF, as specified in clause 5.13.2, if so required by the SMF.\n-\trespond to Address Resolution Protocol (see IETF RFC 826 [32]) or IPv6 Neighbour Solicitation (see IETF RFC 4861 [33]) based on the local cache information, as specified in clause 5.13.3, if so required by the SMF; \nNOTE 2:\tEthernet Preamble and Start of Frame delimiter are not sent over 5GS. \nNOTE 3:\tHow the UPF/SMF builds the ARP or the IPv6 Neighbour cache is not specified in this release and is implementation specific.\n5.13.2\tAddress Resolution Protocol or IPv6 Neighbour Solicitation Response by SMF\nIf the SMF requests the UPF to forward all Address Resolution Protocol (ARP) (see IETF RFC 826 [32]) or IPv6 Neighbour Solicitation (see IETF RFC 4861 [33]) traffic to the SMF to respond to the ARP or IPv6 Neighbour Solicitation based on the local cache information for Ethernet PDU sessions, the SMF shall provision a PDR in the UPF with:\n-\tan Ethernet Packet Filter containing EtherType 2054 (hexadecimal 0x0806) and associate the PDR with a FAR, for forwarding ARP traffic to the SMF; and/or\n-\ta PDI containing an application ID such that the identified application ID matches against EtherType 34525 (hexadecimal 0x86DD), IPv6 Next Header type as 58 and ICMP Field Type as 135 and associate the PDR with a FAR, for forwarding IPv6 Neighbour Solicitation traffic to the SMF.\nIn this case, the user plane packets shall be forwarded between the CP and UP functions by encapsulating the user plane packets using GTP-U encapsulation (see clause 5.3.1).\nThe SMF shall respond to ARP  and/or IPv6 Neighbour Solicitation as specified in 3GPP TS 23.501 [28], clause 5.6.10.2 in this case.\n5.13.3\tAddress Resolution Protocol or IPv6 Neighbour Solicitation Response by UPF\nIf the SMF requests the UPF to respond to Address Resolution Protocol (ARP) (see IETF RFC 826 [32]) or IPv6 Neighbour Solicitation (see IETF RFC 4861 [33]) based on the local cache information for an Ethernet PDU session, the SMF shall provision a PDR in the UPF with:\n-\tan Ethernet Packet Filter containing EtherType 2054 (hexadecimal 0x0806) and associate the PDR with a FAR that has the ARP bit in Proxying IE of the Forwarding Parameters IE set to 1; or\n-\ta PDI containing an application ID such that the identified application ID matches against EtherType 34525 (hexadecimal 0x86DD), IPv6 Next Header type as 58 and ICMP Field Type as 135 and associate the PDR with a FAR that has the INS bit in Proxying IE of the Forwarding Parameters IE set to 1.\nThe UPF shall respond to ARP and/or IPv6 Neighbour Solicitation as specified in 3GPP TS 23.501 [28], clause 5.6.10.2 in this case.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Provisioning of MAC addresses and SDF filters in Ethernet Packet Filters", "numbering": "5.13.3A", "title_level": 2, "desc": "5.13.3A\tProvisioning of MAC addresses and SDF filters in Ethernet Packet Filters\nThe provisioning of an SDF Filter in an Ethernet Packet Filter shall follow the requirements specified for provisioning an SDF Filter in clause 5.2.1A.2A. \nLikewise, the source and destination MAC addresses information, when provisioned, shall be set as for downlink Ethernet flows. The UP function shall apply source and destination MAC addresses information based on the Source Interface of the PDR, according to the same principles as specified in clause 5.2.1A.2A, e.g. swapping the source and destination MAC addresses information if the Source Interface is ACCESS, and applying them as provisioned if the Source Interface is CORE.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Bidirectional Ethernet Filters", "numbering": "5.13.4", "title_level": 2, "desc": "5.13.4\tBidirectional Ethernet Filters\nThe CP function may provision bidirectional Ethernet Filters in the UP function (see clause 7.5.2.2-x), i.e. Ethernet filters that may be associated to both uplink and downlink PDRs of a same PFCP session, as follows:\n-\twhen provisioning a bidirectional Ethernet Filter the first time for an PFCP session, the CP function shall set the BIDE (Bidirectional Ethernet Filter) flag in the Ethernet Filter Properties IE and provision the Ethernet filter definition together with a Ethernet Filter ID uniquely identifying the Ethernet Filter among all the Ethernet Filters provisioned for a given PFCP session; the source and destination MAC addresses information, in a bidirectional Ethernet filter, shall be set as for downlink Ethernet flows;\n-\tthe CP function may then provision a PDR for the same PFCP session but the opposite direction, by provisioning the Ethernet Filter ID in the Ethernet filter ID field of the PDI, without provisioning again the Ethernet Filter Properties and Ethernet filter definition.; \n-\twhen being provisioned with a bidirectional Ethernet Filter in a PDR, the UP function shall apply the Ethernet filter according to the direction of the PDR as specified in clause 5.13.3A, i.e. the UP function shall apply the Ethernet filter parameters provisioned for the Ethernet filter ID, but with swapping the source and destination MAC addresses, and the source and destination IP addresses if any, if the PDR is set for uplink Ethernet flows;\n-\tthe UP function shall apply any modification of a bidirectional Ethernet Filter to all PDRs of the PFCP session making use of this Ethernet Filter; \n-\tupon deletion of a PDR making use of a bidirectional Ethernet Filter, the UP function shall still apply the Ethernet Filter for any other PDR making use of the Ethernet Filter.\nThe requirements specified for provisioning of MAC addresses and SDF Filters in clause 5.13.A shall also apply when provisioning bidirectional Ethernet Filters.  \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Reporting of UE MAC addresses to the SMF", "numbering": "5.13.5", "title_level": 2, "desc": "", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Support IPv Prefix Delegation", "numbering": "5.14", "title_level": 1, "desc": "5.13.5\tReporting of UE MAC addresses to the SMF\nIn a PFCP Session Establishment Request or a PFCP Session Modification Request, the SMF may request the UPF to start or stop (in a PFCP Sesssion Modification Request only) reporting the UE MAC addresses, i.e. the different MAC (Ethernet) addresses used as source address of frames sent UL by the UE in a PDU Session, by: \n-\tcreating a URR requesting the UPF to report Ethernet traffic information (i.e. with the Reporting Trigger set to 'MAC Addresses Reporting'); and\n-\tassociating the URR to the PDR provisioned for the UL traffic of the PDU session.\nThe SMF may additionally request the UPF to detect and report when no user plane packets are received for an UE MAC address, by provisioning the Ethernet Inactivity Timer IE in the URR. \nWhen being requested to start reporting the UE MAC addresses, the UPF shall: \n-\treport immediately any UE MAC addresses known to be associated to the PDU session (e.g. if the request to start monitoring of traffic is received after the PFCP session establishment and if the UPF monitors the UE MAC addresses for the routing of DL traffic); \n-\treport new UE MAC addresses that are detected subsequently; \n-\treport UE MAC addresses that are removed subsequently from the PDU session, based on the detection of absence of traffic during the Ethernet Inactivity Timer, if this timer is provisioned in the URR. \nNOTE:\tNumerous UE MAC addresses can be used by a same PDU session. The UP function can defer a bit the reporting of newly detected or removed UE MAC addresses to allow the reporting of multiple UE MAC addresses in a same usage report. Details are implementation specific.\n5.14\tSupport IPv6 Prefix Delegation\nClause 5.3.1.2.6 of 3GPP TS 23.401 [14] specifies the requirements for IPv6 Prefix Delegation via DHCPv6, that allow assigning a single network prefix shorter than the default /64 prefix to a PDN connection. \nWhen assigning additional IPv6 prefixes (i.e. prefixes in addition to the default prefix) to a UE, the CP function shall provision/update the UE IP Address IE in the UP function with the IPv6D flag set to \"1\" and IPv6 Prefix Delegation Bits field to indicating the length of IPv6 Prefix for delegation.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Signalling based Trace (De)Activation", "numbering": "5.15", "title_level": 1, "desc": "5.15\tSignalling based Trace (De)Activation\nThe UP function shall set the TRACE feature flag in the UP Function Features IE if it supports Trace (see 3GPP TS 32.422 [35]). \nIf the UP function indicated support of Trace, the CP function may activate a trace session during a PFCP session establishment or a PFCP session modification procedure, by including the Trace Information IE in the PFCP Session Establishment Request or PFCP Session Modification Request. \nThe CP function may deactivate an on-going trace session by including the Trace Information IE with a null length in a PFCP Session Modification Request.    \nThere shall be at most one trace session activated per PFCP session at a time.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Framed Routing", "numbering": "5.16", "title_level": 1, "desc": "", "Keywords": "3GPP, EPC, PFCP"}, {"key": "G UPF (for GC)", "numbering": "5.17", "title_level": 1, "desc": "5.16\tFramed Routing\nFramed routing allows to support an IP network behind a UE, such that a range of IP addresses or IPv6 prefixes is reachable over a single PDU session, e.g. for enterprise connectivity. Framed routes are IP routes behind the UE. The UPF advertizes relevant IP routes to receive packets destined to these destination IP addresses or IPv6 prefixes and to forward these packets over the PDU session. See clause 5.6.14 of 3GPP TS 23.501 [28], IETF RFC 2865 [37], IETF RFC 3162 [38]) and the Framed-Route, Framed-Routing and Framed-IPv6-Route AVPs specified in 3GPP TS 29.061 [39] and 3GPP TS 29.561 [49]. \nFramed routing is defined only for PDN connections and PDU sessions of the IP type (IPv4, IPv6, IPv4v6).\nA UPF may indicate support of framed routing by setting the FRRT flag in the UP Function Features IE. If so, the CP function may include Framed-Route IEs, the Frame-Routing IE and Framed-IPv6-Route IEs in DL PDRs to describe framed routes associated to the PDU session.\n5.17\t5G UPF (for 5GC)\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Introduction", "numbering": "5.17.1", "title_level": 2, "desc": "5.17.1\tIntroduction\nThe following clauses describe the 5GS specific functionalites of a UP function.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Uplink Classifier and Branching Point", "numbering": "5.17.2", "title_level": 2, "desc": "", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Data Forwarding during handovers between GS and EPS", "numbering": "5.17.3", "title_level": 2, "desc": "", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Redundant Transmission on N/N interfaces", "numbering": "5.17.4", "title_level": 2, "desc": "5.17.2\tUplink Classifier and Branching Point\nThe Uplink Classifier and Branching Point functionalities refer to the capability of the UPF to route uplink traffic flows of the same PFCP session (PDU session) to two or more PDU Sessions Anchors, and to route the downlink traffic flows from these PDU Session Anchors on the tunnel towards the UE. They are defined in 3GPP TS 23.501 [28] and 3GPP TS 23.502 [29].\nUplink Classifier is supported for PDU sessions of type IPv4, IPv6, IPv4v6 or Ethernet. The routing of the uplink traffic flows to different PDU Session Anchors is based e.g. on the destination IP address/Prefix of the uplink packets for an IP PDU session.\nBranching Point is supported for multi-homed PDU sessions of type IPv6, i.e. PDU sessions with multiple IPv6 prefixes. The routing of the uplink traffic flows to different PDU Session Anchors is based on the source IP prefix of the uplink packets.\nThe SMF may insert an Uplink Classifier or Branching Point, during a PDU session establishment or modification, by provisioning:\n-\ttwo or more UL PDRs, with the appropriate Packet Detection Information, and with corresponding FARs to route the uplink traffic flows towards the appropriate PDU Session Anchors; \n-\ttwo or more DL PDRs, with the appropriate Packet Detection Information, and with one (or more FARs) to route the downlink traffic flows on the tunnel towards the UE.\nNOTE 1:\tThis uses the generic functionalities of the PFCP protocol described in this specification, with two or more DL PDRs (for the traffic coming from the different PDU session anchors).  \nNOTE 2:\tA UPF acting as an Uplink Classifier or Branching Point can also behave as a PDU Session Anchor for the PDU session. \nThe SMF may remove an Uplink Classifier or Branching Point, during a PDU session modification, by removing the UL (or modifying the FAR associated to the UL PDR) and DL PDRs that were setup for the traffic to/from the PDU Session Anchor(s) to be removed.\n5.17.3\tData Forwarding during handovers between 5GS and EPS \nData forwarding during handovers between 5GS and EPS is supported as follows (see 3GPP TS 38.300 [42]):  \n-\tFor 5G to 4G handover, the source NG-RAN node sends one or several end markers including one QFI of those QoS flows mapped to the same E-RAB and sends the end marker packets to the UPF over the PDU session tunnel. UPF removes the QFI and maps to an appropriate E-RAB tunnel towards SGW.\n-\tFor 4G to 5G handover, the source eNB forwards the received end markers in the EPS bearer tunnel to the SGW which forwards them to the UPF. The UPF adds one QFI among the QoS flows mapped to that E-RAB to the end markers and sends those end markers to the target NG-RAN node in the per PDU session tunnel. \nTo forward data (G-PDUs and End Marker packets) during a 5GS to EPS handover, the SMF shall: \n-\tprovision one PDR per E-RAB (that supports data forwarding for at least one QoS flow), with the list of QFIs that are mapped to the E-RAB; \n-\trequest the UPF to remove the GTP-U PDU Session Container extension header (including the QFI) from the data by including the GTP-U Extension Header Deletion field set to 'PDU Session Container' in the Outer Header Removal IE of the PDR(s); \n-\tassociate to each PDR a FAR to forward the data to the GTP-U tunnel of the corresponding E-RAB, i.e. with an Outer Header Creation IE containing the F-TEID of the (forwarding) SGW for the corresponding forwarding GTP-U tunnel; \nTo forward data (G-PDUs and End Marker packets) during an EPS to 5GS handover, the SMF shall: \n-\tprovision one PDR per E-RAB (that supports data forwarding for at least one QoS flow);  \n-\tcreate and associate one QER with each PDR, including the QFI IE set to the QFI value of one of the QoS flows mapped to the E-RAB, to request the UPF to insert a GTP-U PDU Session Container extension header including the QFI; \n-\tcreate one FAR for each data forwarding tunnel in 5GS (i.e. per PDU session), with an Outer Header Creation IE containing the F-TEID of the target NG-RAN for the corresponding forwarding GTP-U tunnel; \n-\tassociate each PDR to the corresponding FAR (i.e. to forward the data of each E-RAB to the data forwarding tunnel of the corresponding PDU session).\n5.17.4\tRedundant Transmission on N3/N9 interfaces\nStage 2 requirements for support of Redundant Transmission on N3/N9 interfaces for high reliability communication are specified in clause 5.33.2.2 3GPP TS 23.501 [28]. \nThis requires duplicating downlink and uplink packets of QoS flows requiring redundant transmission of a PDU session via two independent N3 or N9 tunnels between the RAN and the UPF (PSA).\nIf redundant transmission is required for a QoS flow, the SMF shall instruct the PSA UPF to replicate each downlink packet of the QoS Flow and to assign a sequence number to them as follows: \nEditor's note: how to request the UPF to duplicate downlink packets is FFS.\nIf redundant transmission is required for a QoS flow, the SMF shall instruct the PSA UPF to eliminate the duplicated uplink packets of the QoS Flow, based on their sequence numbers, as follows: \nEditor's note: how to request the UPF eliminate the duplicate uplink packets is FFS.\nEditor's note: how to realize the sequence number for support of redundant transmission is FFS.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Enhanced PFCP Association Release", "numbering": "5.18", "title_level": 1, "desc": "5.18\tEnhanced PFCP Association Release\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "5.18.1", "title_level": 2, "desc": "5.18.1 General\nTo ensure no loss of usage reports and signalling efficiency, during a PFCP Association Release procedure, which is either initiated by CP function, or upon request from the UP function,  the CP function and UP function may support the Enhanced PFCP Association Release feature (EPFAR) as described below.\nWhen both the CP function and the UP function support the EPFAR feature, and when the CP (or UP) function determines that the PFCP association is to be released, the CP (or UP) function shall send a PFCP Association Update Request message with a \"PFCP Association Release Preparation Start\" flag to inform the peer UP (or CP) function that the PFCP Association is going to be released and the final non-zero usage reports are to be collected for these PFCP sessions which will be affected by PFCP association release. \nThe CP function should stop establishing new PFCP sessions in the UP function after receiving or sending a PFCP Association Release Preparation Start indication.\nThen the UP function shall initiate the PFCP Session Release procedure as specified in clause 5.18.2 by sending one or more PFCP Session Report Request messages for the PFCP sessions affected by the release of the PFCP association and that have non-zero usage reports to be reported. In the PFCP Session Report Request message, the UP function shall: \n-\tset the Usage Report Trigger to TEBUR (Termination By UP function Report) for the usage reports being reported; and\n-\tset the PSDBU (PFCP Session Deleted By the UP function) flag to \"1\" to indicate to the CP function that the PFCP Session is being deleted in the UP funciton and the usage reports included in the message are the final usage reports for the given PFCP Session, if this is the last PFCP Session Report Request message sent for the PFCP session. \nWhen the UP function has sent all the non-zero usage reports for the PFCP sessions affected by the release of the PFCP Association, the UP function shall send a PFCP Association Update Request with the flag URSS (non-zero Usage Reports for the affected PFCP Sessions Sent) set to 1 to indicate to the CP function that all non-zero usage reports for the affected PFCP sessions have been sent to the CP function and the corresponding PFCP sessions in the UP function have been locally deleted.\nThe CP function shall then send a PFCP Association Release Request to release the PFCP Association as specified in clause 6.2.8. \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "UP Function Initiated PFCP Session Release", "numbering": "5.18.2", "title_level": 2, "desc": "5.18.2 UP Function Initiated PFCP Session Release\nWhen the UP function needs delete a PFCP sesssion, e.g. during the the Enhanced PFCP Association Release as described in 5.18.1 or when it detects an error, the UP function shall:\n-\tsend one or more PFCP Session Report Request messages for this PFCP session;  \n-\tset the Usage Report Trigger to \"TEBUR\" for non-zero usage report(s), if usage reports are included in the PFCP Session Report Request message(s); and \n-\tset the PSDBU flag to \"1\" to indicate to the CP function that the PFCP session is being deleted, in the last PFCP Session Report Request message sent for that PFCP session.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Activation and Deactivation of Pre-defined PDRs", "numbering": "5.19", "title_level": 1, "desc": "", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Support of Access Traffic Steering, Switching and Splitting for GC", "numbering": "5.20", "title_level": 1, "desc": "5.19\tActivation and Deactivation of Pre-defined PDRs\nTo reduce the signalling overhead for establishing a PFCP session (for a PDU session or a PDN connection) and improve the signalling efficiency, the CP and UP functions may support the Activation and Deactivation of a Pre-defined PDR (ADPDP) feature as described below. \nWhen both the CP function and the UP function support the ADPDP feature, the CP function may activate one or more pre-defined PDRs for a PFCP session during a PFCP Session Establishment or a PFCP Session Modification procedure. A pre-defined PDR shall be configured in the UP function before it can be activated in a PFCP session. \nA pre-defined PDR may contain all the necessary packets detection information to identify a service data flow or application traffic which may be common to many PFCP sessions, and it may be configured in the UPF associated with a pre-defined FAR, one or more pre-defined QER(s), and/or one or more pre-defined URR(s). \nAny PFCP session specific information, e.g. traffic endpoint information, may not be part of a pre-defined PDR and is provisioned before or during the activation of the pre-defined PDR. \nTo activate one or more pre-defined PDR(s), the CP function shall provide one or more Activate Predefined Rules IE(s) in a Create PDR IE in a PFCP Session Establishment Request, or in a Create PDR IE or an Update PDR IE in a PFCP Session Modification Request message, that references a pre-defined PDR configured in the UP function, with the following information in the Create PDR or Update PDR IE:\n-\tthe traffic endpoint that the traffic shall match (e.g. Local F-TEID, UE IP Address or Traffic Endpoint ID);\n-\toptionally the QFI that the traffic shall match, e.g. for a UL PDR where UL QoS flow binding verification is required (see clause 5.4.2);\n-\tthe precedence to be applied by the UP function among all PDRs of the PFCP session;\n-\toptionally, a FAR containing instructions related to the processing of the packets matching the pre-defined PDR(s); when present, the UP function shall enforce it instead of the one defined in the pre-defined PDR(s) if any; \n-\toptionally, one or more URRs to be used in addition to any URR(s) specified in the pre-defined PDR(s) (e.g. for session level Usage Monitoring);\n-\toptionally, one or more QERs to be applied in addition to any QER(s) specified in the pre-defined PDR (e.g. for APN-AMBR enforcement).\nWhen a pre-defined PDR is activated for a given PDR, an incoming packet matches the PDR if it matches the traffic endpoint, and the QFI if provisioned and one of the activated pre-defined PDR(s).\nThe CP function may update the use of pre-defined PDRs that are already activated in a PFCP session by including one or more Activate Predefined Rules IE(s) or Deactivate Predefined Rules IE(s) in a PFCP Session Modification Request and/or by updating the parameters provisioned in the PDR.\nNOTE:\tThe CP function can not change a pre-defined PDR via PFCP session related procedure.\nThe CP function may deactivate a pre-defined PDR that is already activated in a PFCP session by including the Deactivate Predefined Rules IE in a PFCP Session Modification Request requesting to deactivate the predefined PDR(s).\nIn addition, this feature allows to define a group of pre-defined PDRs which can be activated, updated, and deactivated together. This allows the CP function to further optimize the signaling towards the UP function.\nTo activate, update, or deactivate a group of pre-defined PDRs, the CP shall follow the same procedure as for activating, updating, and deactivating a pre-defined PDR, but it shall use an Activate Predefined Rules IE that refers to a group of pre-defined PDRs.\n5.20\tSupport of Access Traffic Steering, Switching and Splitting for 5GC\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "5.20.1", "title_level": 2, "desc": "5.20.1\tGeneral\nThe Access Traffic Steering, Switching and Splitting (ATSSS) feature enables a multi-access PDU Connectivity Service, which can exchange PDUs between the UE and a data network by simultaneously using one 3GPP access network and one non-3GPP access network. The multi-access PDU Connectivity Service is realized by establishing a Multi-Access PDU (MA PDU) Session, i.e. a PDU Session that may have user-plane resources on two access networks.\nSupport of the ATSSS feature is an optional for the SMF and UPF, for 5GC. See 3GPP TS 23.501 [28]. \nWhen establishing a N4 session for a MA PDU session, the (h)SMF shall select a (h)UPF supporting the MA PDU Session Capability, i.e. ATSSS-LL capability, MPTCP capability, or both, and the h(SMF) shall provision a Multi-Access Rule for every downlink PDR which is used to match traffic sent towards the UE in the N4 session. (See also clause 5.2.7)\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "MPTCP functionality", "numbering": "5.20.2", "title_level": 2, "desc": "5.20.2 MPTCP functionality\nEditor's Note: This clause will document any impact on N4 to support MPTCP functionality in UPF.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "ATSSS-LL functionality", "numbering": "5.20.3", "title_level": 2, "desc": "", "Keywords": "3GPP, EPC, PFCP"}, {"key": "UE IP address/prefix Allocation and Release (for GC)", "numbering": "5.21", "title_level": 1, "desc": "5.20.3 ATSSS-LL functionality\nEditor's Note: This clause will document any impact on N4 to support ATSSS-LL functionality in UPF, including support of Access Network Performance Measurement function, i.e. PMF.\n5.21\tUE IP address/prefix Allocation and Release (for 5GC) \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "5.21.1", "title_level": 2, "desc": "5.21.1\tGeneral\nA UE IPv4 address or IPv6 prefix may be allocated by the CP function or the UP function. A given IP address pool shall be controlled by a unique entity (either the SMF or the UPF or an external server).\nThe support of UE IP address/prefix allocation by the CP function is mandatory. The support of UE IP address/prefix allocation by the UP function is optional. See clause 5.8.2.2 of 3GPP TS 23.501 [28].\nThe UP function shall set the UEIP feature flag in the UP Function Features IE if it supports UE IP address/prefix allocation in the UP function (see clause 8.2.25). If so, the CP function shall determine whether UE IP address or prefix is allocated by the CP function or the UP function based on network configuration. \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "UE IP address/prefix allocation in the CP function", "numbering": "5.21.2", "title_level": 2, "desc": "5.21.2\tUE IP address/prefix allocation in the CP function\nWhen performing UE IP address allocation in the CP function, the CP function shall assign the UE IP address/prefix and provide the assigned address/prefix to the UP function in the UE IP Address IE of the PDR IE (see Table 7.5.2.2-1) or of the Traffic Endpoint (see Table 7.5.2.7-1).\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "UE IP address/prefix allocation in the UP function", "numbering": "5.21.3", "title_level": 2, "desc": "", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP sessions successively controlled by different SMFs of an SMF set (for GC)", "numbering": "5.22", "title_level": 1, "desc": "5.21.3\tUE IP address/prefix allocation in the UP function\nWhen performing UE IP address/prefix allocation in the UP function, the CP function shall request the UP function to allocate the UE IP address/prefix by: \n-\tsetting the CHOOSE flag in the UE IP Address IE of the PDR IE (see Table 7.5.2.2-1) or of the Traffic Endpoint (see Table 7.5.2.7-1); and\n-\tincluding the Network Instance IE to indicate the IP address pool from which the UE IP address/prefix is to be assigned.\nThe CP function may request the UP function to allocate the same UE IP address/prefix to several PDRs to be created within one single PFCP Session Establishment Request or PFCP Session Modification Request by: \n-\tsetting the CHOOSE flag in the UE IP Address IE of each PDR to be created with a new UE IP address/prefix; \nor, if the UP function indicated support of the PDI optimization (see clause 8.2.25), by:\n-\tincluding the UE IP Address IE only in the Create Traffic Endpoint IE and by setting the CHOOSE flag in the UE IP Address IE of this IE; and\n-\tincluding the Traffic Endpoint ID in all the PDRs to be created with the same UE IP address.\nIf the PDR(s) is created successfully, the UP function shall return the UE IP address/prefix it has assigned to the PDR(s) or to the Traffic Endpoint(s) in the PFCP Session Establishment Response or PFCP Session Modification Response. \nUpon receiving a request to delete a PFCP session, to remove a Traffic Endpoint, or to remove the last PDR associated with the UE IP address/prefix, the UP function shall release the UE IP address/prefix that was assigned to the PFCP session, to the Traffic Endpoint, or to the PDR.\n5.22\tPFCP sessions successively controlled by different SMFs of an SMF set (for 5GC)\nWhen a UPF supports that a PFCP session can be successively controlled by different SMF(s) in the same SMF set, the following applies: \n1)\tOne SMF in the SMF set shall establish one single PFCP Association with the UPF for the SMF set; the Node ID in the PFCP Association Setup Request shall be set to an FQDN representing the SMF set. \n\nThe SMF shall indicate that it supports the SSET feature in the CP Function Features IE (see clause 8.2.58); this indicates to the UPF that the PFCP sessions established with this PFCP association can be successively controlled by different SMFs of an SMF set. \n\nThe SMF may also indicate the IP addresses of alternative SMFs within the SMF Set in the PFCP Association Setup Request. \n2)\tWhen establishing a PFCP session, an SMF shall assign, in the CP F-SEID of the PFCP Session Establishment Request, a unique SEID within the SMF set; \n3)\tAny SMF in the SMF set may issue requests to modify or delete the PFCP session, or to update or release the PFCP association. \n4)\tThe UPF shall initiate PFCP session related requests (e.g. PFCP Session Report Request) towards any SMF of the SMF Set, if the IP address included in the CP F-SEID assigned to the PFCP session is not responsive, or if the UPF receives a GTP-U Error Indication from the SMF over the N4-u tunnel assigned to the N4 session for data forwarding if any. \n\nThe UPF shall use the IP addresses of alternative SMFs received during the PFCP association setup or update procedures, if any. Otherwise the UPF shall use the SMF set FQDN in the CP Node ID to discover alternative SMFs within the SMF Set, e.g. by querying the DNS or by performing a discovery request towards the NRF.\n5)\tAn SMF may redirect a UPF initiated PFCP session related request to a different SMF in the SMF set by rejecting the request with the cause \"Redirection Requested\" and with the CP F-SEID IE including the IP address of the new SMF to contact. \n\nAlternatively, an SMF may forward the UPF request to another SMF in the SMF set; the new SMF answers to the UPF, optionally including the CP F-SEID IE with the IPv4 or IPv6 address of the new SMF, and optionally including the N4-u F-TEID that the UPF shall use for sending data towards the new SMF. \nNOTE 2:\tThis allows to address cases where a different SMF would have been reselected in the 5GC for the PFCP session, e.g. by an AMF.  \n6)\tAn SMF may also update, at any time, a PFCP session by including the CP F-SEID with the IPv4 or IPv6 address of a new SMF in a PFCP Session Modification Request.  \n7)\tThe UPF shall not trigger the restoration procedures specified in 3GPP TS 23.527 [40] for a PFCP session that can be controlled by different SMFs of an SMF set when a heartbeat failure is detected for the IP address of the assigned CP F-SEID. Restoration procedures shall be triggered only if heartbeat procedures fail with all the IP addresses of all the SMFs in the SMF set. \nNOTE 3:\tThe above requirements enable all SMFs of a same SMF set to successively control a given PFCP session without causing extra signalling over the N4 interface.  \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Procedures", "numbering": "6", "title_level": 0, "desc": "6\tProcedures\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Introduction", "numbering": "6.1", "title_level": 1, "desc": "6.1\tIntroduction\nThe following clauses specify the procedures supported over the Sxa, Sxb and Sxc reference points.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Node Related Procedures", "numbering": "6.2", "title_level": 1, "desc": "6.2\tPFCP Node Related Procedures\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "6.2.1", "title_level": 2, "desc": "6.2.1\tGeneral\nThe following clauses specify the node related procedures over the Sxa, Sxb, Sxc and N4 reference points. The behaviour of the CP function und UP function when sending and receiving a node related message is described.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Heartbeat Procedure", "numbering": "6.2.2", "title_level": 2, "desc": "6.2.2\tHeartbeat Procedure\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "6.2.2.1", "title_level": 3, "desc": "6.2.2.1\tGeneral \nTwo messages are specified for PFCP heartbeat procedure: Heartbeat Request and Heartbeat Response. The use of these messages is further specified in clause 19A of 3GPP TS 23.007 [24] for EPC, and in clause 4 of 3GPP TS 23.527 [40] for 5GC.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Heartbeat Request", "numbering": "6.2.2.2", "title_level": 3, "desc": "6.2.2.2\tHeartbeat Request\nThe CP function or the UP function may send an Heartbeat Request on a path to the peer node to find out if it is alive. Heartbeat Request messages may be sent for each peer with which an PFCP control association is established.\nFor each peer with which an PFCP control association is established, a CP function or UP function shall be prepared to receive an Heartbeat Request at any time and it shall reply with an Heartbeat Response.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Heartbeat Response", "numbering": "6.2.2.3", "title_level": 3, "desc": "6.2.2.3\tHeartbeat Response\nThe message shall be sent as a response to a received Heartbeat Request.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Load Control Procedure", "numbering": "6.2.3", "title_level": 2, "desc": "6.2.3\tLoad Control Procedure\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "6.2.3.1", "title_level": 3, "desc": "6.2.3.1\tGeneral\nLoad Control is an optional feature defined over the Sxa, Sxb, Sxc and N4 reference points.\nLoad control enables the UP function to send its load information to the CP function to adaptively balance the PFCP session load across the UP functions according to their effective load. The load information reflects the operating status of the resources of the UP function.\nLoad control allows for better balancing of the PFCP session load, so as to attempt to prevent overload in the first place (preventive action). Load control does not trigger overload mitigation actions even if the UP function reports a high load.\nLoad control and overload control may be supported and activated independently in the network, based on operator's policy.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Principles", "numbering": "6.2.3.2", "title_level": 3, "desc": "6.2.3.2\tPrinciples\nThe UP function may signal its Load Control Information to reflect the operating status of its resources, at the node level, allowing the receiving CP function to use this information to augment the UP function selection procedures. \nThe Load Control Information is piggybacked in PFCP request or response messages such that the exchange of Load Control Information does not trigger extra signalling.\nNOTE:\tThe inclusion of Load Control Information in existing messages means that the frequency of transmission of load control information increases as the session load increases, allowing for faster feedback and thus better regulation of the load.\nThe calculation of the Load Control Information is implementation dependent and its calculation and transfer shall not add significant additional load to the node itself and to its corresponding peer nodes.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Load Control Information", "numbering": "6.2.3.3", "title_level": 3, "desc": "6.2.3.3\tLoad Control Information\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General Description", "numbering": "6.2.3.3.1", "title_level": 4, "desc": "6.2.3.3.1\tGeneral Description \nA PFCP message may contain one instance of the Load Control Information (LCI) IE.\nWhen providing load control information in a message for the first time or subsequently, the UP function shall always include the full set of load control information, i.e. all the node level instance of the Load Control Information, even if only a subset of the load control information has changed. The Load Control Sequence Number shall be incremented whenever the load control information is changed (see clause 6.2.3.3.2.1).\nLoad Control Information shall be linked to the Node ID (i.e. FQDN or the IP address used during the UP function selection) of the UP function providing the Information.\nThe receiver shall overwrite any stored load control information of a peer with the newly received load control information from the same peer node if the new load control information is more recent than the old information as indicated by the Load Control Sequence Number, e.g. if the receiver has stored an instance of the load control information for a peer node, it overwrites this instance with the new instance received in a message from the same peer node.\nThe receiver shall consider all the parameters received in the same instance of the LCI IE in conjunction while using this information for UP function selection.\nThe parameters are further defined in clause 6.2.3.3.2.\nLoad control information may be extended with new parameters in future versions of the specification. Any new parameter will have to be categorized as:\n-\tNon-critical optional parameters: the support of these parameters is not critical for the receiver. The receiver can successfully and correctly comprehend the load control information instance, containing one or more of these parameters, by using the other parameters and ignoring the non-critical optional parameter.\n-\tCritical optional parameters: the support of these parameters is critical for the receiver to correctly comprehend the instance of the load control information containing one or more of these parameters.\nThe sender may include one or more non-critical optional parameters within any instance of the LCI IE without having the knowledge of the receiver's capability to support the same. However, the sender shall only include one or more critical optional parameter in an instance of the LCI IE towards a receiver if the corresponding receiver is known to support those parameters. The sender may be aware of this either via signalling methods or by configuration (this will have to be defined when introducing any such new parameter in future).\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Parameters", "numbering": "6.2.3.3.2", "title_level": 4, "desc": "6.2.3.3.2\tParameters\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Load Control Sequence Number", "numbering": "6.2.3.3.2.1", "title_level": 5, "desc": "6.2.3.3.2.1\tLoad Control Sequence Number\nThe Load Control Sequence number contains a value that indicates the sequence number associated with the LCI IE. This sequence number shall be used to differentiate any two LCI IEs generated at two different instances by the same UP function. The Load Control Sequence Number shall be supported (if load control is supported) and shall always be present in the LCI IE.\nThe UP function generating this information shall increment the Load Control Sequence Number whenever modifying some information in the Load Control Information IE. The Load Control Sequence Number shall not be incremented otherwise. The UP function may use the time, represented in an unsigned integer format, of the generation of the Load Control Information to populate the Load Control Sequence Number.\nThis parameter shall be used by the receiver of the Load Control Information IE to properly collate out-of-order load control information, e.g. due to PFCP retransmissions. This parameter shall also be used by the receiver of the LCI IE to determine whether the newly received load control information has changed compared to load control information previously received from the same node earlier.\nNOTE:\tThe PFCP sequence number cannot be used for collating out-of-order load control information as e.g. load control information may be sent in both PFCP requests and responses, using independent PFCP sequence numbering.\nIf the receiving entity has already received and stored load control information from the peer UP function, the receiving CP function shall update its load control information only if the Load Control Sequence Number received in the new load control information is higher than the stored value of the Load Control Sequence Number associated with the peer UP function. However due to roll-over of the Load Control Sequence Number or restart of the node, the Load Control Sequence Number may be reset to an appropriate base value by the peer UP function, hence the receiving entity shall be prepared to receive (and process) a Load Control Sequence Number parameter whose value is less than the previous value.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Load Metric", "numbering": "6.2.3.3.2.2", "title_level": 5, "desc": "6.2.3.3.2.2\tLoad Metric\nThe Load Metric parameter shall indicate the current load level of the originating node. The computation of the Load Metric is left to implementation. The node may consider various aspects, such as the used capacity of the UP function, the load in the node (e.g. memory/CPU usage in relationship to the total memory/CPU available, etc.).\nThe Load Metric represents the current load level of the sending node as a percentage within the range of 0 to100, where 0 means no or 0% load and 100 means maximum or 100% load reached (i.e. no further load is desirable).\nThe Load Metric shall be supported (if load control is supported). The Load Metric shall always be included in the Load Control Information.\nConsidering the processing requirement of the receiver of the Load Control Information (e.g. handling of the new information, tuning the node selection algorithm to take the new information into account), the sender should refrain from advertising every small variation (e.g. with the granularity of 1 or 2), in the Load Metric which does not result in useful improvement in node selection logic at the receiver. During the typical operating condition of the sender, a larger variation in the Load Metric, e.g. 5 or more units, should be considered as reasonable enough for advertising the new Load Control Information and thus justifying the processing requirement (to handle the new information) of the receiver.\nNOTE:\tThe range of the Load Metric, i.e. 0 to 100, does not mandate the sender to collect its own load information at every increment/decrement and hence to advertise the change of Load Metric with a granularity of 1%. Based on various implementation specific criteria, such as: the architecture, session and signalling capacity, the current load and so on, the sender is free to define its own logic and periodicity with which its own load information is collected.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Frequency of Inclusion", "numbering": "6.2.3.3.3", "title_level": 4, "desc": "6.2.3.3.3\tFrequency of Inclusion \nHow often the sender includes the load control information is implementation specific. The sender shall ensure that new/updated load control information is propagated to the target CP functions within an acceptable delay, such that the purpose of the information (i.e. effective load balancing) is achieved. The sender may include the LCI IE e.g. as follows:\n-\tthe sender may include Load Control Information towards a peer only when the new/changed value has not already been provided to that peer;\n-\tthe sender may include the Load Control Information in each and every message (extended with LCI IE) towards the peer;\n-\tthe sender may include Load Control Information periodically, i.e. include the information during a first period then cease to do so during a second period.\nThe sender may also implement a combination of one or more of the above approaches. Besides, the sender may also decide to include the Load Control Information only in a subset of the applicable PFCP messages.\nThe receiver shall be prepared to receive the load control information in any of the PFCP messages extended with an LCI IE and upon such reception, shall be able act upon the received load control information.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Overload Control Procedure", "numbering": "6.2.4", "title_level": 2, "desc": "6.2.4\tOverload Control Procedure\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "6.2.4.1", "title_level": 3, "desc": "6.2.4.1\tGeneral\nOverload Control is an optional feature defined over the Sxa, Sxb, Sxc and N4 reference points.\nOverload control enables a UP function becoming or being overloaded to gracefully reduce its incoming signalling load by instructing its peer CP functions to reduce sending traffic according to its available signalling capacity to successfully process the traffic. A UP function is in overload when it operates over its signalling capacity which results in diminished performance (including impacts to handling of incoming and outgoing traffic).\nOverload control aims at shedding the incoming traffic as close to the traffic source as possible generally when an overload has occurred (reactive action), so to avoid spreading the problem inside the network and to avoid using resources of intermediate nodes in the network for signalling that would anyhow be discarded by the overloaded node.\nLoad control and overload control may be supported and activated independently in the network, based on operator's policy.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Principles", "numbering": "6.2.4.2", "title_level": 3, "desc": "6.2.4.2\tPrinciples\nWhen a UP function determines that the offered incoming signalling traffic is growing (or is about to grow) beyond its nominal capacity, the UP function may signal its overload, at node level granularity, to its peer CP functions by including Overload Control Information in PFCP signalling which provides guidance to the receiving CP functions to decide actions which lead to signalling traffic mitigation towards the sender of the information. This helps in preventing severe overload and hence potential breakdown of the UP function.\nThe Overload Control Information is piggybacked in PFCP request or response messages such that the exchange of Overload Control Information does not trigger extra signalling.\nNOTE:\tThe inclusion of Overload Control Information in existing messages means that the frequency of transmission of overload control information increases as the signalling load increases, thus allowing for faster feedback and better regulation.\nThe calculation of the Overload Control Information is implementation dependent and its calculation and transfer shall not add significant additional load to the node itself and to its corresponding peer nodes. The calculation of Overload Control Information should not severely impact the resource utilization of the UP function, especially considering the overload situation.\nThe overload control feature should continue to allow for preferential treatment of priority users (eMPS) and emergency services.\nThe overload mitigation actions based on the reception of the overload related information received from the UP function will not be standardized.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Overload Control Information", "numbering": "6.2.4.3", "title_level": 3, "desc": "6.2.4.3\tOverload Control Information\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General Description", "numbering": "6.2.4.3.1", "title_level": 4, "desc": "6.2.4.3.1\tGeneral Description \nA PFCP message may contain one instance of the Overload Control Information (OCI) IE. \nWhen providing overload control information in a message for the first time or subsequently, the UP function shall always include the full set of overload control information, i.e. all the node level instance of the Overload Control Information, even if only a subset of the overload control information has changed. The Overload Control Sequence Number shall be incremented whenever the Overload control information is changed (see clause 6.2.4.3.2.1).\nThe receiver shall overwrite any stored overload control information of a peer with the newly received overload control information from the same peer node if the new overload control information is more recent than the old information as indicated by the Overload Control Sequence Number, e.g. if the receiver has stored an instance of the Overload control information for a peer node, it overwrites this instance with the new instance received in a message from the same peer node. \nThe receiver shall consider all the parameters received in the same instance of the OCI IE in conjunction while applying the overload mitigation action. \nThe parameters are further defined in clause 6.2.4.3.2.\nOverload control information may be extended with new parameters in future versions of the specification. Any new parameter will have to be categorized as:\n-\tNon-critical optional parameters: the support of these parameters is not critical for the receiver. The receiver can successfully and correctly comprehend the Overload control information instance, containing one or more of these parameters, by using the other parameters and ignoring the non-critical optional parameter.\n-\tCritical optional parameters: the support of these parameters is critical for the receiver to correctly comprehend the instance of the Overload control information containing one or more of these parameters.\nThe sender may include one or more non-critical optional parameters within any instance of the OCI IE without having the knowledge of the receiver's capability to support the same. However, the sender shall only include one or more critical optional parameter in an instance of the OCI IE towards a receiver if the corresponding receiver is known to support those parameters. The sender may be aware of this either via signalling methods or by configuration (this will have to be defined when introducing any such new parameter in future).\nThe Overload Control Information shall be associated by default to the PFCP entity corresponding to the peer node's IP address of the PFCP session, over which the OCI IE is received, i.e. to the IP address received within the \"UP F-SEID\" IE.\nAlternatively, the UP function may send Overload Control Information which is associated with the Node ID of the UP function (i.e. FQDN or the IP address used during the UP function selection). In that case, the UP function shall provide an explicit indication that the OCI IE included in the message belongs to the Node ID.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Parameters", "numbering": "6.2.4.3.2", "title_level": 4, "desc": "6.2.4.3.2\tParameters\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Overload Control Sequence Number", "numbering": "6.2.4.3.2.1", "title_level": 5, "desc": "6.2.4.3.2.1\tOverload Control Sequence Number\nThe PFCP protocol requires retransmitted messages to have the same contents as the original message. Due to PFCP retransmissions, the overload control information received by a CP function at a given time may be less recent than the overload control information already received from the same UP function. The Overload Control Sequence Number aids in sequencing the overload control information received from an overloaded UP function. The Overload Control Sequence Number contains a value that indicates the sequence number associated with the Overload Control Information IE. This sequence number shall be used to differentiate between two OCI IEs generated at two different instants, by the same UP function.\nThe Overload Control Sequence Number parameter shall be supported (when supporting the overload control feature) and shall always be present in the Overload Control Information IE.\nThe UP function generating this information shall increment the Overload Control Sequence Number whenever modifying some information in the OCI IE. The Overload Control Sequence Number shall not be incremented otherwise. The UP function may use the time, represented in an unsigned integer format, of the generation of the overload control information, to populate the Overload Control Sequence Number.\nThis parameter shall be used by the receiver of the OCI IE to properly collate out-of-order OCI IEs, e.g. due to PFCP retransmissions. This parameter shall also be used by the receiver of the OCI IE to determine whether the newly received overload control information has changed compared to the overload control information previously received from the same UP function. If the newly received overload control information has the same Overload Control Sequence Number as the previously received overload control information from the same UP function, then the receiver may simply discard the newly received overload control information whilst continuing to apply the overload abatement procedures, as per the previous value.\nNOTE 1:\tThe timer corresponding to the Period of Validity (see clause 6.2.4.3.2.2) is not restarted if the newly received overload control information has the same Overload Control Sequence Number as the previously received overload control information. If the overload condition persists and the overloaded UP function needs to extend the duration during which the overload information applies, the sender needs to provide a new overload control information with an incremented Overload Control Sequence Number (even if the parameters within the overload control information have not changed).\nNOTE 2:\tThe PFCP Sequence Number cannot be used for collating out-of-order overload information as e.g. overload control information may be sent in both PFCP requests and responses, using independent PFCP sequence numbering.\nIf the receiving CP function already received and stored overload control information, which is still valid, from the overloaded UP function, the receiving entity shall update its overload control information, only if the Overload-Sequence-Number received in the new overload control information is larger than the value of the Overload Control Sequence Number associated with the stored information. However due to roll-over of the Overload Control Sequence Number or restart of the UP function, the Overload Control Sequence Number may be reset to an appropriate base value by the peer UP function, hence the receiving entity shall be prepared to receive (and process) an Overload Control Sequence Number parameter whose value is less than the previous value.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Period of Validity", "numbering": "6.2.4.3.2.2", "title_level": 5, "desc": "6.2.4.3.2.2\tPeriod of Validity\nThe Period of Validity indicates the length of time during which the overload condition specified by the OCI IE is to be considered as valid (unless overridden by subsequent new overload control information).\nAn overload condition shall be considered as valid from the time the OCI IE is received until the period of validity expires or until another OCI IE with a new set of information (identified using the Overload Control Sequence Number) is received from the same UP function (at which point the newly received overload control information shall prevail). The timer corresponding to the period of validity shall be restarted each time an OCI IE with a new set of information (identified using the Overload Control Sequence Number) is received. When this timer expires, the last received overload control information shall be considered outdated and obsolete, i.e. any associated overload condition shall be considered to have ceased.\nThe Period of Validity parameter shall be supported (when supporting overload control).\nThe Period of Validity parameter achieves the following:\n-\tit avoids the need for the overloaded UP function to include the Overload Control Information IE in every PFCP messages it signals to its peer CP functions when the overload state does not change; thus it minimizes the processing required at the overloaded UP function and its peer CP functions upon sending/receiving PFCP signalling;\n-\tit allows to reset the overload condition after some time in the peer CP functions having received an overload indication from the overloaded UP function, e.g. if no signalling traffic takes place between these PFCP entities for some time due to overload mitigation actions. This also removes the need for the overloaded UP function to remember the list of CP functions to which it has sent a non-null overload reduction metric and to which it would subsequently need to signal when the overload condition ceases, if the Period of Validity parameter was not defined.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Overload Reduction Metric", "numbering": "6.2.4.3.2.3", "title_level": 5, "desc": "6.2.4.3.2.3\tOverload Reduction Metric\nThe Overload Reduction Metric shall have a value in the range of 0 to 100 (inclusive) which indicates the percentage of traffic reduction the sender of the overload control information requests the receiver to apply. An Overload Reduction Metric of \"0\" always indicates that the UP function is not in overload (that is, no overload abatement procedures need to be applied) for the indicated scope.\nConsidering the processing requirement of the receiver of the Overload Control Information, e.g. to perform overload control based on the updated Overload Reduction Metric, the sender should refrain from advertising every small variation, e.g. with the granularity of 1 or 2, in the Overload Reduction Metric which does not result in useful improvement for mitigating the overload situation. During the typical operating condition of the sender, a larger variation in the Overload Reduction Metric, e.g. 5 or more units, should be considered as reasonable enough for advertising a new Overload Reduction Metric Information and thus justifying the processing requirement (to handle the new information) of the receiver.\nNOTE:\tThe range of Overload Reduction Metric, i.e. 0 to 100, does not mandate the sender to collect its own overload information at every increment/decrement and hence to advertise the change of Overload Reduction Metric with a granularity of 1%. Based on various implementation specific criteria, such as the architecture, session and signalling capacity, the current load/overload situation and so on, the sender is free to define its own logic and periodicity with which its own overload control information is collected.\nThe computation of the exact value for this parameter is left as an implementation choice at the sending UP function.\nThe Overload Reduction Metric shall be supported (when supporting overload control) and shall always be present in the OCI IE.\nThe inclusion of the OCI IE signals an overload situation is occuring, unless the Overload Reduction Metric is set to 0, which signals that the overload condition has ceased. Conversely, the absence of the OCI IE in a message does not mean that the overload has abated.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Frequency of Inclusion", "numbering": "6.2.4.3.3", "title_level": 4, "desc": "6.2.4.3.3\tFrequency of Inclusion \nHow often or when the sender includes the overload control information is implementation specific. The sender shall ensure that new/updated overload control information is propagated to the target receivers with an acceptable delay, such that the purpose of the information, (i.e. the effective overload control protection) is achieved. The following are some of the potential approaches the sender may implement for including the OCI IE:\n-\tthe sender may include OCI IE towards a receiver only when the new/changed value has not already been provided to the given receiver;\n-\tthe sender may include the OCI IE in a subset of the messages towards the receiver;\n-\tthe sender may include the OCI IE periodically, i.e. include the information during a first period then cease to do so during a second period. \nThe sender may also implement a combination of one or more of the above approaches. Besides, the sender may also include the OCI IE only in a subset of the applicable PFCP messages.\nThe receiver shall be prepared to receive the overload control information received in any of the PFCP messages extended with an OCI IE and upon such reception, shall be able act upon the received information.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Message Throttling", "numbering": "6.2.4.4", "title_level": 3, "desc": "6.2.4.4\tMessage Throttling\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "6.2.4.4.1", "title_level": 4, "desc": "6.2.4.4.1\tGeneral\nAs part of the overload mitigation, a CP function shall reduce the total number of messages, which would have been sent otherwise, towards the overloaded peer based on the information received within the Overload Control Information. This shall be achieved by discarding a fraction of the messages in proportion to the overload level of the target peer. This is called \"message throttling\".\nMessage throttling shall only apply to Request messages. Response messages should not be throttled since that would result in the retransmission of the corresponding request message by the sender.\nA CP function supporting PFCP overload control shall support and use the \"Loss\" algorithm as specified in this clause, for message throttling.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Throttling algorithm  -  \"Loss\"", "numbering": "6.2.4.4.2", "title_level": 4, "desc": "6.2.4.4.2\tThrottling algorithm  -  \"Loss\"\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Description", "numbering": "6.2.4.4.2.1", "title_level": 5, "desc": "6.2.4.4.2.1\tDescription\nAn overloaded UP function shall ask its peers to reduce the number of requests they would ordinarily send by signalling Overload Control Information including the requested traffic reduction, as a percentage, within the \"Overload-Reduction-Metric\", as specified in clause 6.2.4.3.2.\nThe recipients of the \"Overload-Reduction-Metric\" shall reduce the number of requests sent by that percentage, either by redirecting them to an alternate destination if possible (e.g. the PFCP Session Establishment Request message may be redirected to an alternate UP function), or by failing the request and treating it as if it was rejected by the destination UP function. \nFor example, if a sender requests another peer to reduce the traffic it is sending by 10%, then that peer shall throttle 10% of the traffic that would have otherwise been sent to this UP function.\nThe overloaded UP function should periodically adjust the requested traffic reduction based e.g. on the traffic reduction factor that is currently in use, the current system utilization (i.e. the overload level) and the desired system utilization (i.e. the target load level), and/or the rate of the current overall received traffic. \nAnnex A.1 provides an (informative) example of a possible implementation of the \"Loss\" algorithm, amongst other possible methods.\nNOTE 1:\tThis algorithm does not guarantee that the future traffic towards the overloaded UP function will be less than the past traffic but it ensures that the total traffic sent towards the overloaded UP function is less than what would have been sent without any throttling in place. If after requesting a certain reduction in traffic, the overloaded UP function receives more traffic than in the past, whilst still in overload, leading to the worsening rather than an improvement in the overload level, then the overloaded UP function can request for more reduction in traffic. Thus, by periodically adjusting the requested traffic reduction, the overloaded node can ensure that it receives, approximately, the amount of traffic which it can handle.\nNOTE 2:\tSince the reduction is requested as a percentage, and not as an absolute amount, this algorithm achieves a good useful throughput towards the overloaded node when the traffic conditions vary at the source nodes (depending upon the events generated towards these source nodes by other entities in the network), as a potential increase of traffic from some source nodes can possibly be compensated by a potential decrease of traffic from other source nodes.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Message Prioritization", "numbering": "6.2.4.5", "title_level": 3, "desc": "6.2.4.5\tMessage Prioritization\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Description", "numbering": "6.2.4.5.1", "title_level": 4, "desc": "6.2.4.5.1\tDescription\nWhen performing message throttling:\n-\tPFCP requests related to priority traffic (i.e. eMPS as described in 3GPP TS 22.153 [15]) and emergency have the highest priority. Depending on regional/national requirements and network operator policy, these PFCP requests shall be the last to be throttled, when applying traffic reduction, and the priority traffic shall be exempted from throttling due to PFCP overload control up to the point where the requested traffic reduction cannot be achieved without throttling the priority traffic;\n-\tfor other types of sessions, messages throttling should consider the relative priority of the messages so that the messages which are considered as low priority are considered for throttling before the other messages. The relative priority of the messages may be derived from the relative priority of the procedure for which the message is being sent or may be derived from the session parameters such as APN, QCI, ARP and/or Low Access Priority Indicator (LAPI).\nNOTE:\tA random throttling mechanism, i.e. discarding the messages without any special consideration, could result in an overall poor congestion mitigation mechanism and bad user experience.\nAn overloaded node may also apply these message prioritization schemes when handling incoming initial messages during an overloaded condition, as part of a self-protection mechanism.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Based on the Message Priority Signalled in the PFCP Message", "numbering": "6.2.4.5.2", "title_level": 4, "desc": "6.2.4.5.2\tBased on the Message Priority Signalled in the PFCP Message\nMessage prioritization may be performed by an overloaded node, when handling incoming messages during an overloaded condition, based on the relative PFCP message priority signalled in the PFCP header (see clause 7.2.2.3). \nA PFCP entity shall determine whether to set and use the message priority in PFCP signalling, based on operator policy. The requirements specified in this clause shall apply if message priority in PFCP signalling is used.\nA sending PFCP entity shall determine the relative message priority to signal in the message according to the principles specified in clause 6.2.4.5.1. If the message affects multiple bearers, the relative message priority should be determined considering the highest priority ARP among all the bearers. \nA PFCP entity should set the same message priority in a Response message as received in the corresponding Request message.\nFor incoming PFCP messages that do not have a message priority in the PFCP header, the receiving PFCP entity:\n-\tshall apply a default priority, if the incoming message is a Request message;\n-\tshould apply the message priority sent in the Request message, if the incoming message is a Response message. \nThis feature should be supported homogenously across the CP functions and UP functions in the network, otherwise an overloaded node will process Request messages received from the non-supporting nodes according to the default priority while Request messages received from supporting nodes will be processed according to the message priority signalled in the PFCP message.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP PFD Management Procedure", "numbering": "6.2.5", "title_level": 2, "desc": "6.2.5\tPFCP PFD Management Procedure\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "6.2.5.1", "title_level": 3, "desc": "6.2.5.1\tGeneral\nThe PFCP PFD Management procedure may be used by the CP function and UP function to provision PFDs (e.g. received from the PFDF as specified in clauses 5.11.4 and 6.5.2 of 3GPP TS 23.214 [2]) to the UP function, for one or more Application Identifiers.\nSupport of this procedure is optional for the CP function and the UP function. The UP function shall set the PFDM feature flag in the UP Function Features IE if it supports the PFD Management procedure (see clause 8.2.25).\nThe UP function shall store the PFDs provisioned per Application Identifier. These PFDs shall apply to all the PFCP session established in the UP function, for all the controlling CP functions, i.e. the scope of a PFD is not limited to the PFCP sessions established by the CP function which provisioned the PFD. \nNOTE:\tApplication identifiers preconfigured in the UP function, if any, need to be distinct from application identifiers provisioned via PFD management procedure.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "CP Function Behaviour", "numbering": "6.2.5.2", "title_level": 3, "desc": "6.2.5.2\tCP Function Behaviour\nThe CP function initiates the PFCP PFD Management procedure to provision PFDs in the UP function, for one or more Application Identifier(s).\nThe CP function:\n-\tshall send the PFCP PFD Management Request message, including the full set of PFD IDs and PFD contents to be provisioned in the UP function per Application Identifier.\nWhen the CP function receives an PFCP PFD Management Response with cause success, the CP function shall consider that the PFDs have been provisioned as requested.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "UP Function Behaviour", "numbering": "6.2.5.3", "title_level": 3, "desc": "6.2.5.3\tUP Function Behaviour\nWhen the UP function receives a PFCP PFD Management Request message, it shall:\n-\tif no Application ID's PFDs IE is present in the request (i.e. empty message), \n-\tdelete all the PFDs received and stored earlier for all Application Identifier(s) provisioned via the PFD Management Procedure;\n-\tif at least one Application ID's PFDs IE is present in the request, \n-\tdelete all the PFDs received and stored earlier for the indicated Application Identifier(s);\n-\tstore all the PFDs received in the request for the indicated Application Identifier(s); \n-\tsend a PFCP PFD Management Response with the cause \"success\", if the above operations were performed successfully.\n-\tif a PFD is removed/modified and this PFD was used to detect application traffic related to an application identifier in a PDR created/activated for a PFCP session and the UP function has reported the application start to the CP function for the application instance corresponding to this PFD as defined in clause 5.4.11 ((Un)solicited Application Reporting), the UP function shall report the application stop to the CP function for the corresponding application instance identifier as defined in clause 5.4.11 if the removed/modified PFD in UP results in the stop of the application instance is not being able to be detected. See clause 5.11.4 of 3GPP TS 23.214 [2].\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Association Setup Procedure", "numbering": "6.2.6", "title_level": 2, "desc": "6.2.6\tPFCP Association Setup Procedure\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "6.2.6.1", "title_level": 3, "desc": "6.2.6.1\tGeneral \nThe PFCP Association Setup procedure shall be used to setup an PFCP association between a CP function and a UP function, to enable the CP function to use the resources of the UP function subsequently, i.e. establish PFCP Sessions.\nThe setup of an PFCP association may be initiated by the CP function (see clause 6.2.6.2) or the UP function (see clause 6.2.6.3).\nThe CP function and the UP function shall support the PFCP Association Setup initiated by the CP function. The CP function and the UP function may additionally support the PFCP Association Setup initiated by the UP function.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Association Setup Initiated by the CP Function", "numbering": "6.2.6.2", "title_level": 3, "desc": "6.2.6.2\tPFCP Association Setup Initiated by the CP Function\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "CP Function Behaviour", "numbering": "6.2.6.2.1", "title_level": 4, "desc": "6.2.6.2.1\tCP Function Behaviour\nThe CP function initiates the PFCP Association Setup procedure to request to setup an PFCP association towards a UP function prior to establishing a first PFCP session on this UP function.\nThe CP function:\n-\tshall retrieve an IP address of the UP function to send the PFCP Association Setup Request, as specified in clause 5.8.1. \n-\tshall send the PFCP Association Setup Request with the Node ID of the CP function;\n-\tshall include the list of optional features the CP function supports which may affect the UP function behaviour, if any.\nThe CP function shall only initiate PFCP Session related signalling procedures toward a UP function after it receives the PFCP Association Setup Response with a successful cause from this UP function.\nThe CP function shall determine whether the UP function supports Sxa, Sxb, Sxc and/or combined Sxa/Sxb by local configuration or optionally via DNS if deployed.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "UP Function behaviour", "numbering": "6.2.6.2.2", "title_level": 4, "desc": "6.2.6.2.2\tUP Function behaviour\nWhen receiving an PFCP Association Setup Request, the UP function:\n-\tif the request is accepted:\n-\tshall store the Node ID of the CP function as the identifier of the PFCP association;\n-\tshall send an PFCP Association Setup Response with a successful cause, its Node ID, and information of all supported optional features in the UP function and optionally the available user plane resources, e.g. IP address(es) or F-TEID range;\n-\tshall send an PFCP Version Not Supported Response if the PFCP header of the request indicates a PFCP protocol version that is not supported by the UP function;\n-\totherwise, shall send an PFCP Association Setup Response with an appropriate error cause if the request is rejected.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Association Setup Initiated by the UP Function", "numbering": "6.2.6.3", "title_level": 3, "desc": "6.2.6.3\tPFCP Association Setup Initiated by the UP Function\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "UP Function Behaviour", "numbering": "6.2.6.3.1", "title_level": 4, "desc": "6.2.6.3.1\tUP Function Behaviour\nThe UP function initiates the PFCP Association Setup procedure to request to setup an PFCP association towards a CP function. The UP function is configured with a set of CP functions to which it shall establish an PFCP association.\nThe UP function:\n-  shall retrieve an IP address of the CP function, e.g. based on local configuration in the UP function; \n-\tshall send the PFCP Association Setup Request including the Node ID of the UP function and information of all supported optional features in the UP function and optionally the available user plane resources, e.g. IP address(es) or F-TEID range.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "CP Function Behaviour", "numbering": "6.2.6.3.2", "title_level": 4, "desc": "6.2.6.3.2\tCP Function Behaviour\nWhen receiving an PFCP Association Setup Request, the CP function:\n-\tif the request is accepted:\n-\tshall store the Node ID of the UP function as the identifier of the PFCP association;\n-\tshall send an PFCP Association Setup Response with a successful cause, its Node ID, and information of the list of optional features the CP function supports which may affect the UP function behaviour, if any;\n-\tshall send an PFCP Version Not Supported Response if the PFCP header of the request indicates a PFCP protocol version that is not supported by the CP function;\n-\totherwise, shall send an PFCP Association Setup Response with an appropriate error cause if the request is rejected.\nThe CP function shall only initiate PFCP Session related signalling procedures toward a UP function after it has sent the PFCP Association Setup Response with a successful cause to the UP function. \nThe CP function shall determine the UP function supports Sxa, Sxb, Sxc and/or combined Sxa/Sxb by local configuration or optionally via DNS if deployed. \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Association Update Procedure", "numbering": "6.2.7", "title_level": 2, "desc": "6.2.7\tPFCP Association Update Procedure\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "6.2.7.1", "title_level": 3, "desc": "6.2.7.1\tGeneral\nThe PFCP Association Update procedure shall be used to modify an existing PFCP association between the CP function and the UP function. It may be initiated by the UP function or by the CP function to update the supported features or available resources of the UP function.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Association Update Procedure Initiated by the CP Function", "numbering": "6.2.7.2", "title_level": 3, "desc": "6.2.7.2\tPFCP Association Update Procedure Initiated by the CP Function\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "CP Function Behaviour", "numbering": "6.2.7.2.1", "title_level": 4, "desc": "6.2.7.2.1\tCP Function Behaviour\nThe CP function initiates the PFCP Association Update procedure to report changes to the PFCP association to the UP function, e.g. to update the supported features. \nWhen both the CP function and UP function support the EPFAR feature, the CP function may send a PFCP Association Update Request with the \"PFCP Association Release Preparation Start\" flag set to \"1\" when the CP function decides to release the PFCP association and request the UP function to report all non-zero usage reports for the PFCP session affected by the release of the PFCP association, as specified in clause 5.18.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "UP Function Behaviour", "numbering": "6.2.7.2.2", "title_level": 4, "desc": "6.2.7.2.2\tUP Function Behaviour\nWhen receiving an PFCP Association Update Request, the UP function:\n-\tshall update the list of optional features of the CP function, when received;\n-\tshall send an PFCP Association Update Response with an appropriate error cause if the Node ID is not known by the UP Function;\n-\tshall return an PFCP Association Update Response with a successful cause value, if the PFCP Association Update Request is handled successfully. \nWhen both the CP function and UP function support the EPFAR feature, and the CP function has set the \"PFCP Association Release Preparation\" set to \"1\"  in the PFCP Association Update Request message, the UP function shall send PFCP Session Report Request messages to report non-zero usage reports (at least one message per PFCP Session) for the PFCP Sessions affected by the release of the PFCP association, as specified in clause 5.18.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Association Update Procedure Initiated by UP Function", "numbering": "6.2.7.3", "title_level": 3, "desc": "6.2.7.3\tPFCP Association Update Procedure Initiated by UP Function\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "UP Function Behaviour", "numbering": "6.2.7.3.1", "title_level": 4, "desc": "6.2.7.3.1\tUP Function Behaviour\nThe UP function initiates the PFCP Association Update procedure to report changes to the PFCP association to the CP function, e.g. change of optional features, change of the available user plane resources, an indication to request to release the PFCP association.\nThe UP function may send an PFCP Association Update Request to request the CP function to perform the release of the PFCP association, optionally providing a Graceful Release Period. \nWhen the Enhanced PFCP Association Release feature (EPFAR) (see clause 5.18) is supported by both the CP function and UP function, the UP function:\n-\tmay send a PFCP Association Update Request with the flag \"PFCP Association Release Preparation\" set to \"1\" when the UP function decides to release the PFCP association and thus inform the CP function that all non-zero usage reports for those PFCP session affected by the release of the PFCP association will be reported; \n-\tshall then send a PFCP Association Update Request, with the URSS flag set to \"1\" once all non-zero usage reports for all the PFCP Sessions affected by the release of PFCP Association have been sent to the CP function. \nAfter reception of the PFCP Association Update Response, the UP function shall consider that the PFCP association is still setup until receiving an PFCP Association Release Request.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "CP Function Behaviour", "numbering": "6.2.7.3.2", "title_level": 4, "desc": "6.2.7.3.2\tCP Function Behaviour\nWhen receiving an PFCP Association Update Request, the CP function:\n-\tshall update the list of optional features of the UP function, when received;\n-\tshall send an PFCP Association Update Response with an appropriate error cause if the Node ID is not known by the CP Function;\n-\tshall return an PFCP Association Update Response with a successful cause value if the PFCP Association Update Request is handled successfully.\nIf the UP function has requested to release the PFCP association in the PFCP Association Update Request, the CP function should initiate an PFCP Association Release Request to release the PFCP association, as soon as possible if no Graceful Release Period was included in the request or before the expiry of the Graceful Release Period. The CP function should stop creating new PFCP sessions in the UP function during the Graceful Release Period. When the final usage report(s) for a PFCP Session (upon being deleted) is required, e.g. based on operator policies, the CP function should initiate a PFCP Session Deletion Procedure to collect the usage reports per PFCP Session affected by the release of PFCP Association before the Graceful Release Period is expired.\nWhen both the CP function and UP function support the EPFAR feature, and if the UP function has set the URSS flag to \"1\" in the PFCP Association Update Request message, the CP function shall immediately initiate the PFCP Association Release Procedure, as specified in clause 5.18.\nIf the UP function has included User Plane IP Resource Information IE in the PFCP Association Update Request message, the CP function shall use it to overwrite the User Plane IP Resource Information previously received from the UP function.\nIf the UP function has included UE IP address Pool Identity IE in the PFCP Association Update Request message, the CP function shall use it to overwrite the UE IP address Pool Identity previously received from the UP function.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Association Release Procedure", "numbering": "6.2.8", "title_level": 2, "desc": "6.2.8\tPFCP Association Release Procedure\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "6.2.8.1", "title_level": 3, "desc": "6.2.8.1\tGeneral\nThe PFCP Association Release procedure shall be used to terminate the PFCP association between the CP Function and the UP Function due to e.g. OAM reasons. The PFCP Association Release Request may be initiated by the CP function.\nWhen the final usage report(s) for a PFCP Session is required, e.g. based on the operator policies, the CP function should retrieve the final usage reports for the PFCP Sessions affected by the release of PFCP Association, i.e. by initiating a PFCP Session Deletion Procedure towards the UP function for every PFCP session, before it initiates PFCP Association Release Request.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "CP Function Behaviour", "numbering": "6.2.8.2", "title_level": 3, "desc": "6.2.8.2\tCP Function Behaviour\nIf the CP function initiates the PFCP Association Release procedure to release an existing PFCP association, the CP function:\n-\tshall delete locally all the PFCP sessions related to that PFCP association when receiving the PFCP Association Release Response with the cause value success.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "UP Function behaviour", "numbering": "6.2.8.3", "title_level": 3, "desc": "6.2.8.3\tUP Function behaviour\nWhen the UP function receives an PFCP Association Release Request, the UP function:\n-\tshall delete all the PFCP sessions related to that PFCP association locally;\n-\tshall delete the PFCP association and any related information (e.g. Node ID of the CP function);\n-\tshall send an PFCP Association Release Response with a successful cause.\nNOTE:\tThe UP function always accepts an PFCP Association Release Request.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Node Report Procedure", "numbering": "6.2.9", "title_level": 2, "desc": "6.2.9\tPFCP Node Report Procedure\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "6.2.9.1", "title_level": 3, "desc": "6.2.9.1\tGeneral\nThe PFCP Node Report procedure shall be used by the UP function to report information to the CP function which is not related to a specific PFCP session, e.g. to report a user plane path failure affecting all the PFCP sessions towards a remote GTP-U peer.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "UP Function Behaviour", "numbering": "6.2.9.2", "title_level": 3, "desc": "6.2.9.2\tUP Function Behaviour\nThe UP function shall initiate the PFCP Node Report procedure to report information to the CP function. The UP function:\n-\tshall send the PFCP Node Report Request message, including the information to be reported.\nWhen the UP function receives an PFCP Node Report Response with the cause success, the UP function shall consider the information successfully delivered to the CP function.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "CP Function behaviour", "numbering": "6.2.9.3", "title_level": 3, "desc": "6.2.9.3\tCP Function behaviour\nWhen the CP function receives an PFCP Node Report Request message, it shall:\n-\tprocess the information being reported as appropriate and send an PFCP Node Report Response with the cause \"success\";\n-\totherwise return an appropriate error cause value.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Session Related Procedures", "numbering": "6.3", "title_level": 1, "desc": "6.3\tPFCP Session Related Procedures\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "6.3.1", "title_level": 2, "desc": "6.3.1\tGeneral\nThe following clauses describe the session related procedures over the Sxa, Sxb and Sxc reference points. The behaviour of the CP function and UP function when sending and receiving session related messages is described.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Session Establishment Procedure", "numbering": "6.3.2", "title_level": 2, "desc": "6.3.2\tPFCP Session Establishment Procedure\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "6.3.2.1", "title_level": 3, "desc": "6.3.2.1\tGeneral\nThe PFCP Session Establishment procedure shall be used to setup an PFCP session between CP function and UP function and configure Rules in the UP function so that the UP function can handle incoming packets.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "CP Function Behaviour", "numbering": "6.3.2.2", "title_level": 3, "desc": "6.3.2.2\tCP Function Behaviour\nThe CP function initiates the PFCP Session Establishment procedure to create a PFCP session for a PDN connection, or IP-CAN session or TDF session or for applying a certain IP packets treatment which is not associated with any PDN connection or TDF session.\nThe CP function:\n-\tshall send the PFCP Session Establishment Request message with a new PFCP F-SEID together with Rules to be created;\n-\tmay assign a local F-TEID for the access side and/or core side and provide it in the PDI, if F-TEID allocation is performed in the CP function.\nWhen the CP function receives an PFCP Session Establishment Response with cause success, the CP function shall continue with the procedure which triggered the PFCP Session Establishment procedure.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "UP Function Behaviour", "numbering": "6.3.2.3", "title_level": 3, "desc": "6.3.2.3\tUP Function Behaviour\nWhen the UP function receives an PFCP Session Establishment Request message it shall:\n-\tstore and apply the rules received in the request and send an PFCP Session Establishment Response with cause \"success\", if all rules in the PFCP Session Establishment Request are stored and applied;\n-\tOtherwise, if at least one rule failed to be stored or applied, return an appropriate error cause value with the Rule ID of the Rule causing the first error, discard all the received rules and not create any PFCP session context.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Session Modification Procedure", "numbering": "6.3.3", "title_level": 2, "desc": "6.3.3\tPFCP Session Modification Procedure\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "6.3.3.1", "title_level": 3, "desc": "6.3.3.1\tGeneral\nThe PFCP Session Modification procedure shall be used to modify an existing PFCP session, e.g. to configure a new rule, to modify an existing rule, to delete an existing rule.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "CP Function behaviour", "numbering": "6.3.3.2", "title_level": 3, "desc": "6.3.3.2\tCP Function behaviour\nThe CP function initiates the PFCP Session Modification procedure to modify an existing PFCP session, e.g. triggered by an modification of PDN connection, IP CAN session or TDF session.\nThe CP function shall:\n-\tinclude a complete PDI if the PDI in the existing PDR is to be updated;\n-\tremove locally the reference to a rule in the PDRs when the related Rule is deleted;\n-\tprovide all the new, updated or deleted Rules. The Updated Rules shall contain only the information which are changed, added and/or deleted.\nThe CP function shall not include multiple updates in a PFCP Modification Request message, e.g. Create PDR, Update PDR and Remove PDR, for the same rule identified by the Rule ID.\nWhen the CP function receives an PFCP Session Modification Response with the cause \"success\" it shall continue with the procedure which has initiated the PFCP Session Modification procedure.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "UP Function Behaviour", "numbering": "6.3.3.3", "title_level": 3, "desc": "6.3.3.3\tUP Function Behaviour\nWhen the UP function receives a PFCP Session Modification Request it shall:\n-\tsend the PFCP Session Modification Response message with a rejection cause value set to \"Session context not found\" if the F-SEID included in the PFCP Session Modification Request message is unknown;\n-\treject a modification request which would relate to a rule not existing in the UP function;\n-\tdiscard any updates on the PFCP session context included in the PFCP Session Modification Request message if the request is rejected and send an PFCP Session Modification Response with an appropriate error cause together with additional information e.g. indicating the first Rule ID of the Rule causing the error. In this case, the UP function shall continue with the existing PFCP session context for the PFCP session as if the PFCP Session Modification Request had not been received;\n-\tremove all rules identified by a Rule ID to be removed and remove the Rule ID from the PDR(s) from where they are referenced;\n-\tsend the PFCP Session Modification Response with an acceptance cause value if all the requested modifications are accepted and performed successfully.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Session Deletion Procedure", "numbering": "6.3.4", "title_level": 2, "desc": "6.3.4\tPFCP Session Deletion Procedure\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "6.3.4.1", "title_level": 3, "desc": "6.3.4.1\tGeneral\nThe PFCP Session Deletion procedure shall be used to delete an existing PFCP session between the CP function and the UP function.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "CP Function Behaviour", "numbering": "6.3.4.2", "title_level": 3, "desc": "6.3.4.2\tCP Function Behaviour\nThe CP function initiates an PFCP Session Deletion procedure towards the UP function to delete an existing PFCP session e.g. when the corresponding PDN is deleted.\nThe CP shall:\n-\tsend an PFCP Session Deletion Request with the F-SEID identifying the PFCP session.\nWhen the CP function receives PFCP Session Deletion Response with cause success, the CP function shall continue with the procedure which triggers the PFCP Session Deletion procedure.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "UP Function Behaviour", "numbering": "6.3.4.3", "title_level": 3, "desc": "6.3.4.3\tUP Function Behaviour\nWhen the UP function receives a PFCP Session Deletion Request it shall:\n-\tsend the PFCP Session Deletion Response message with a rejection cause set to \"Session context not found\" if the F-SEID include in the PFCP Session Deletion Request message is unknown;\n-\tsend the PFCP Session Deletion Response message with an acceptance cause if the PFCP session and associated rules are deleted successfully, and include any pending Usage Report(s) in the message.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Session Report Procedure", "numbering": "6.3.5", "title_level": 2, "desc": "6.3.5\tPFCP Session Report Procedure\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "6.3.5.1", "title_level": 3, "desc": "6.3.5.1\tGeneral\nThe PFCP Session Report procedure shall be used by the UP function to report information related to the PFCP session to the CP function.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "UP Function Behaviour", "numbering": "6.3.5.2", "title_level": 3, "desc": "6.3.5.2\tUP Function Behaviour\nThe UP function shall initiate the PFCP Session Report procedure to report information related to an PFCP session to the CP function. The UP function:\n-\tshall send the PFCP Session Report Request message, identifying the PFCP session for which the report is sent and including the information to be reported.\nIf the Enhanced PFCP Association Release feature (EPFAR) is supported by both the CP function and UP function, the UP function may send a PFCP Session Report Request message with the flag PSDBU being set to \"1\" to the CP function to report that the PFCP session is being deleted in the UP function, as specified in clause 5.18, e.g. to report remaining non-zero usage reports for all URRs in the PFCP Session before the PFCP Session is locally deleted in the UP function during an Enhanced PFCP Association Release procedure.\nWhen the UP function receives an PFCP Session Report Response with the cause success, the UP function shall consider the information to be successfully delivered to the CP function.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "CP Function Behaviour", "numbering": "6.3.5.3", "title_level": 3, "desc": "6.3.5.3\tCP Function Behaviour\nWhen the CP function receives an PFCP Session Report Request message, it shall:\n-\tsend the PFCP Session Report Response message with a rejection cause set to \"Session context not found\" if the F-SEID included in the PFCP Session Report Request message is unknown;\n-\tprocess the information being reported as appropriate and send an PFCP Session Report Response with the cause \"success\";\n-\totherwise return an appropriate error cause value. \nIf the Enhanced PFCP Association Release feature (EPFAR) is supported by both the CP function and UP function, the CP function shall consider that a PFCP Session is locally deleted in the UP function upon receiving a PFCP Session Report Request message from the UP function with the flag PSDBU being set to \"1\". \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Reliable Delivery of PFCP Messages", "numbering": "6.4", "title_level": 1, "desc": "6.4\tReliable Delivery of PFCP Messages\nReliable delivery of PFCP messages is accomplished by retransmission of these messages as specified in this clause.\nA PFCP entity shall maintain, for each triplet of local IP address, local UDP port and remote peer's IP address, a sending queue with Request messages to be sent to that peer. Each message shall be sent with a Sequence Number and be held until a corresponding Response is received or until the PFCP entity ceases retransmission of that message. The Sequence Number shall be unique for each outstanding Request message sourced from the same IP/UDP endpoint. A PFCP entity may have several outstanding Requests waiting for replies.\nWhen sending a Request message, the sending PFCP entity shall start a timer T1. The sending entity shall consider that the Request message has been lost if a corresponding Response message has not been received before the T1 timer expires. If so, the sending entity shall retransmit the Request message, if the total number of retry attempts is less than N1 times. The setting of the T1 timer and N1 counter is implementation specific.\nA retransmitted PFCP message shall have the same message content, including the same PFCP header, UDP ports, source and destination IP addresses as the originally transmitted message.\nA Request and its Response message shall have the same Sequence Number value, i.e. the Sequence Number in the PFCP header of the Response message shall be copied from the respective Request message. A Request and its Response messages are matched based on the Sequence Number and the IP address and UDP port.\nNot counting retransmissions, a Request message shall be answered with a single Response message. Duplicated Response messages shall be discarded by the receiver. A received Response message not matching an outstanding Request message waiting for a reply should be discarded. \nThe PFCP entity should inform the upper layer when detecting an unsuccessful transfer of a Request message to enable the controlling upper entity to take any appropriate measure.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Messages and Message Formats", "numbering": "7", "title_level": 0, "desc": "7\tMessages and Message Formats\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Transmission Order and Bit Definitions", "numbering": "7.1", "title_level": 1, "desc": "7.1\tTransmission Order and Bit Definitions\nPFCP messages shall be transmitted in network octet order starting with octet 1 with the most significant bit sent first.\nThe most significant bit of an octet in a PFCP message is bit 8. If a field in a PFCP message spans over several octets, the most significant bit is bit 8 of the octet with the lowest number, unless specified otherwise.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Message Format", "numbering": "7.2", "title_level": 1, "desc": "7.2\tMessage Format\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "7.2.1", "title_level": 2, "desc": "7.2.1\tGeneral\nThe format of a PFCP message is depicted in Figure 7.2.1-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to m\nPFCP message header\n\n\nm+1 to n\nZero or more Information Element(s)\n\n\n\n\n\nFigure 7.2.1-1: PFCP Message Format\nA PFCP message shall contain the PFCP message header and may contain subsequent information element(s) dependent on the type of message.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Message Header", "numbering": "7.2.2", "title_level": 2, "desc": "7.2.2\tMessage Header \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General Format", "numbering": "7.2.2.1", "title_level": 3, "desc": "7.2.2.1\tGeneral Format\nPFCP messages use a variable length header. The message header length shall be a multiple of 4 octets. Figure 7.2.2.1-1 illustrates the format of the PFCP Header. \n\n\n\nBits\nOctets\n\n8\n7\n6\n5\n4\n3\n2\n1\n1\n\nVersion\nSpare\nSpare\nSpare\nMP\nS\n2\n\nMessage Type\n3\n\nMessage Length (1[st] Octet)\n4\n\nMessage Length (2[nd] Octet)\nm to k(m+7)\n\nIf S flag is set to 1, then SEID shall be placed into octets 5-12. Otherwise, SEID field is not present at all.\nn to (n+2)\n\nSequence Number\n(n+3)\n\nSpare\nFigure 7.2.2.1-1: General format of PFCP Header\nWhere:\n-\tif S = 0, SEID field is not present, k = 0, m = 0 and n = 5;\n-\tif S = 1, SEID field is present, k = 1, m = 5 and n = 13.\nThe usage of the PFCP header is defined in clause 7.2.2.4. \nOctet 1 bits shall be encoded as follows:\n-\tBit 1 represents the SEID flag (T).\n-\tBit 2 represents the \"MP\" flag (see clause 7.2.2.4.1).\n-\tBit 3 to 5 are spare, the sender shall set them to \"0\" and the receiving entity shall ignore them.\n-\tBits 6-8 represent the Version field.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Header for Node Related Messages", "numbering": "7.2.2.2", "title_level": 3, "desc": "7.2.2.2\tPFCP Header for Node Related Messages\nThe PFCP message header for the node related messages shall not contain the SEID field, but shall contain the Sequence Number field, followed by one spare octet as depicted in figure 7.2.2.2-1. The spare bits shall be set to zero by the sender and ignored by the receiver. For the Version Not Supported Response message, the Sequence Number may be set to any number and shall be ignored by the receiver.\n\n\n\nBits\nOctets\n\n8\n7\n6\n5\n4\n3\n2\n1\n1\n\nVersion\nSpare\nSpare\nSpare\nMP=0\nS=0\n2\n\nMessage Type\n3\n\nMessage Length (1[st] Octet)\n4\n\nMessage Length (2[nd] Octet)\n5\n\nSequence Number (1[st] Octet)\n6\n\nSequence Number (2[nd] Octet)\n7\n\nSequence Number (3[rd] Octet)\n8\n\nSpare\nFigure 7.2.2.2-1: PFCP Message Header for node related messages\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Header for Session Related Messages", "numbering": "7.2.2.3", "title_level": 3, "desc": "7.2.2.3\tPFCP Header for Session Related Messages\nFor The PFCP message header, for session related messages, shall contain the SEID and Sequence Number fields followed by one spare octet. The PFCP header is depicted in figure 7.2.2.3-1. The spare bits shall be set to zero by the sender and ignored by the receiver.\n\n\n\nBits\nOctets\n\n8\n7\n6\n5\n4\n3\n2\n1\n1\n\nVersion\nSpare\nSpare\nSpare\nMP\nS=1\n2\n\nMessage Type\n3\n\nMessage Length (1[st] Octet)\n4\n\nMessage Length (2[nd] Octet)\n5\n\nSession Endpoint Identifier (1[st] Octet)\n6\n\nSession Endpoint Identifier (2nd Octet)\n7\n\nSession Endpoint Identifier (3rd Octet)\n8\n\nSession Endpoint Identifier (4[th] Octet)\n9\n\nSession Endpoint Identifier (5[th] Octet)\n10\n\nSession Endpoint Identifier (6[th] Octet)\n11\n\nSession Endpoint Identifier (7[th] Octet)\n12\n\nSession Endpoint Identifier (8[th] Octet)\n13\n\nSequence Number (1[st] Octet)\n14\n\nSequence Number (2[nd] Octet)\n15\n\nSequence Number (3[rd] Octet)\n16\n\nMessage Priority\nSpare\nFigure 7.2.2.3-1: PFCP message Header for session related messages\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Usage of the PFCP Header", "numbering": "7.2.2.4", "title_level": 3, "desc": "7.2.2.4\tUsage of the PFCP Header\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "7.2.2.4.1", "title_level": 4, "desc": "", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Conditions for Sending SEID= in PFCP Header", "numbering": "7.2.2.4.2", "title_level": 4, "desc": "7.2.2.4.1\tGeneral\nThe format of the PFCP header is specified in clause 7.2.2.\nThe usage of the PFCP header shall be as defined below.\nThe first octet of the header shall be used is the following way:\n-\tBit 1 represents the \"S\" flag, which indicates if SEID field is present in the PFCP header or not. If the \"S\" flag is set to 0, then the SEID field shall not be present in the PFCP header. If the \"S\" flag is set to 1, then the SEID field shall immediately follow the Length field, in octets 5 to 12. Apart from the node related messages , in all PFCP messages the value of the \"S\" flag shall be set to \"1\".\n-\tBit 2 represents the \"MP\" flag. If the \"MP\" flag is set to \"1\", then bits 8 to 5 of octet 16 shall indicate the message priority.\n-\tBit 3 is a spare bit. The sending entity shall set it to \"0\" and the receiving entity shall ignore it. \n-\tBit 4 is a spare bit. The sending entity shall set it to \"0\" and the receiving entity shall ignore it.\n-\tBit 5 is a spare bit. The sending entity shall set it to \"0\" and the receiving entity shall ignore it.\n-\tBits 6 to 8, which represent the PFCP version, shall be set to decimal 1 (\"001\").\nThe usage of the fields in octets 2 - n of the header shall be as specified below.\n-\tOctet 2 represents the Message type field, which shall be set to the unique value for each type of control plane message. Message type values are specified in Table 7.3-1 \"Message types\".\n-\tOctets 3 to 4 represent the Message Length field. This field shall indicate the length of the message in octets excluding the mandatory part of the PFCP header (the first 4 octets). The SEID (if present) and the Sequence Number shall be included in the length count. The format of the Length field of information elements is specified in clause 8.2 \"Information Element Format\".\n-\tWhen S=1, Octets 5 to 12 represent the Session Endpoint Identifier (SEID) field. This field shall unambiguously identify a session endpoint in the receiving Packet Forward Control entity. The Session Endpoint Identifier is set by the sending entity in the PFCP header of all control plane messages to the SEID value provided by the corresponding receiving entity (CP or UP function). If a peer's SEID is not available the SEID field shall be present in a PFCP header, but its value shall be set to \"0\", \"Conditions for sending SEID=0 in PFCP header\". \nNOTE:\tThe SEID in the PFCP header of a message is set to the SEID value provided by the corresponding receiving entity regardless of whether the source IP address of the request message and the IP Destination Address provided by the receiving entity for subsequent request messages are the same or not.\n-\tOctets 13 to 15 represent PFCP Sequence Number field.\n7.2.2.4.2\tConditions for Sending SEID=0 in PFCP Header\nIf a peer's SEID is not available, the SEID field shall still be present in the header and its value shall be set to \"0\" in the following messages:\n-\tPFCP Session Establishment Request message on Sxa/Sxb/Sxc;\n-\tIf a node receives a message for which it has no session, i.e. if SEID in the PFCP header is not known, it shall respond with \"Session context not found\" cause in the corresponding response message to the sender, the SEID used in the PFCP header in the response message shall be then set to \"0\";\n-\tIf a node receives a request message containing protocol error, e.g. Mandatory IE missing, which requires the receiver to reject the message as specified in clause 7.6, it shall reject the request message. For the response message, the node should look up the remote peer's SEID and accordingly set SEID in the PFCP header and the message cause code. As an implementation option, the node may not look up the remote peer's SEID and set the PFCP header SEID to \"0\" in the response message. However in this case, the cause value shall not be set to \"Session not found\".\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Information Elements", "numbering": "7.2.3", "title_level": 2, "desc": "7.2.3\tInformation Elements\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "7.2.3.1", "title_level": 3, "desc": "7.2.3.1\tGeneral\nThe format of PFCP Information Elements are defined in clause 8.2. \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Presence Requirements of Information Elements", "numbering": "7.2.3.2", "title_level": 3, "desc": "7.2.3.2\tPresence Requirements of Information Elements\nIEs within PFCP messages shall be specified with one of the following presence requirement:\n-\tMandatory: this means that the IE shall be included by the sending entity, and that the receiver diagnoses a \"Mandatory IE missing\" error when detecting that the IE is not present. A response including a \"Mandatory IE missing\" cause, shall include the type of the missing IE.\n-\tConditional: this means that:\n-\tthe IE shall be included by sending entity if the conditions specified are met;\n-\tthe receiver shall check the conditions as specified in the corresponding message type description, based on the parameter combination in the message and/or on the state of the receiving node, to infer if a conditional IE shall be expected. Only if a receiver has sufficient information, if a conditional IE, which is necessary for the receiving entity to complete the procedure, is missing, then the receiver shall abort the procedure.\n-\tConditional-Optional: this means that:\n-\tthe IE shall be included by a sending entity complying with the version of the specification, if the conditions specified in the relevant protocol specification are met. An entity, which is at an earlier version of the protocol and therefore is not up-to-date, cannot send this IE;\n-\tthe receiver need not check the presence of the IE in the message. If the receiver checks the presence of the Conditional-Optional IE, then the IE's absence shall not trigger any of the error handling procedures. The handling of an absence or erroneous such IEs shall be treated as Optional IEs as specified in clause 7.6.\n-\tOptional: this means that:\n-\tthe IE shall be included as a service option. Therefore, the IE may be included or not in a message. The handling of an absent optional IE, or an erroneous optional IE is specified in clause 7.6.\nFor conditional IEs, the clause describing the PFCP message explicitly defines the conditions under which the inclusion of each IE becomes mandatory or optional for that particular message. These conditions shall be defined so that the presence of a conditional IE only becomes mandatory if it is critical for the receiving entity. The definition might reference other protocol specifications for final terms used as part of the condition.\nFor grouped IEs, the presence requirement of the embedded IE shall follow the rules:\n-\tIf the grouped IE is Mandatory within a given message: the presence requirements of individual embedded IEs are as stated within the Mandatory grouped IE for the given message;\n-\tif the grouped IE is Conditional within a given message: if the embedded IE in the grouped IE is Mandatory or Conditional, this embedded IE is viewed as Conditional IE by the receiver. If the embedded IE in the grouped IE is Conditional-Optional, this embedded IE is viewed as Optional IE by the receiver. If the embedded IE in the grouped IE is Optional, this embedded IE is viewed as Optional IE by the receiver;\n-\tif the grouped IE is Conditional-Optional within a given message: if the embedded IE in the grouped IE is Mandatory or Conditional, this embedded IE is viewed as Conditional-Optional IE by the receiver. If the embedded IE in the grouped IE is Conditional-Optional, this embedded IE is viewed as Optional IE by the receiver. If the embedded IE in the grouped IE is Optional, this embedded IE is viewed as Optional IE by the receiver;\n-\tif the grouped IE is Optional within a given message: all embedded IEs in the grouped IE are viewed as Optional IEs by the receiver.\nIn all of the above cases, appropriate error handling as described in clause 7.6 shall be applied for protocol errors of the embedded IEs.\nOnly the Cause IE at message level shall be included in the response if the Cause contains a value that indicates that the request is not accepted, regardless of whether there are other mandatory or conditional IEs defined for a given response message. The following are exceptions:\n-\tthe Node ID and Offending IE shall be included as per the requirements specified for the corresponding response message; \n-\tthe Load Control Information, Overload Control Information and the Failed Rule ID IEs may be included in an PFCP session related message.  \nIf the Cause IE at Grouped IE level contains a value that indicates that the Grouped IE is not handled correctly, the other IEs in this Grouped IE, other than the Cause IE, may not be included.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Grouped Information Elements", "numbering": "7.2.3.3", "title_level": 3, "desc": "7.2.3.3\tGrouped Information Elements\nA Grouped IE is an IE which may contain other IEs.\nGrouped IEs have a length value in the TLV encoding, which includes the added length of all the embedded IEs. Overall coding of a grouped IE with 4 octets long IE header is defined in clause 8.2. Each IE within a grouped IE also shall also contain 4 octets long IE header.\nGrouped IEs are not marked by any flag or limited to a specific range of IE type values. The clause describing an IE in this specification shall explicitly state if it is a Grouped IE.\nNOTE:\tEach entry into each Grouped IE creates a new scope level. Exit from the grouped IE closes the scope level. The PFCP message level is the top most scope.\nIf more than one grouped IEs of the same type, but for a different purpose are sent with a message, these IEs shall have different IE types.\nIf more than one grouped IEs of the same type and for the same purpose are sent with a message, these IEs shall have exactly the same IE type to represent a list.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Information Element Type", "numbering": "7.2.3.4", "title_level": 3, "desc": "7.2.3.4\tInformation Element Type\nAn IE in a PFCP message or Grouped IE is identified by its IE Type and described by a specific row in the corresponding tables in clause 7.\nIf several IEs with the same Type are included in a PFCP message or Grouped IE, they represent a list for the corresponding IE name.\nAn IE Type value uniquely identifies a specific IE.\nOne IE type value is specified for Vendor Specific IEs.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Message Types", "numbering": "7.3", "title_level": 1, "desc": "7.3\tMessage Types\nThe PFCP message types to be used over the Sxa, Sxb, Sxc and N4 reference points are defined in Table 7.3-1.\nTable 7.3-1: Message Types\nMessage Type value (Decimal)\nMessage\nApplicability\n\n\nSxa\nSxb\nSxc\nN4\n0\nReserved\n\n\n\n\n\nPFCP Node related messages\n\n\n\n\n1\nPFCP Heartbeat Request\nX\nX\nX\nX\n2\nPFCP Heartbeat Response\nX\nX\nX\nX\n3\nPFCP PFD Management Request\n-\nX\nX\nX\n4\nPFCP PFD Management Response\n-\nX\nX\nX\n5\nPFCP Association Setup Request\nX\nX\nX\nX\n6\nPFCP Association Setup Response\nX\nX\nX\nX\n7\nPFCP Association Update Request\nX\nX\nX\nX\n8\nPFCP Association Update Response\nX\nX\nX\nX\n9\nPFCP Association Release Request\nX\nX\nX\nX\n10\nPFCP Association Release Response\nX\nX\nX\nX\n11\nPFCP Version Not Supported Response\nX\nX\nX\nX\n12\nPFCP Node Report Request\nX\nX\nX\nX\n13\nPFCP Node Report Response\nX\nX\nX\nX\n14\nPFCP Session Set Deletion Request\nX\nX\n-\n\n15\nPFCP Session Set Deletion Response\nX\nX\n-\n\n16 to 49\nFor future use\n\n\n\n\n\nPFCP Session related messages\n\n\n\n\n50\nPFCP Session Establishment Request\nX\nX\nX\nX\n51\nPFCP Session Establishment Response\nX\nX\nX\nX\n52\nPFCP Session Modification Request\nX\nX\nX\nX\n53\nPFCP Session Modification Response\nX\nX\nX\nX\n54\nPFCP Session Deletion Request\nX\nX\nX\nX\n55\nPFCP Session Deletion Response\nX\nX\nX\nX\n56\nPFCP Session Report Request\nX\nX\nX\nX\n57\nPFCP Session Report Response\nX\nX\nX\nX\n58 to 99\nFor future use\n\n\n\n\n\nOther messages\n\n\n\n\n100 to 255 \nFor future use\n\n\n\n\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Node Related Messages", "numbering": "7.4", "title_level": 1, "desc": "7.4\tPFCP Node Related Messages\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "7.4.1", "title_level": 2, "desc": "7.4.1\tGeneral\nThis clause specifies the node related messages used over the Sxa, Sxb, Sxc and N4 reference points.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Heartbeat Messages", "numbering": "7.4.2", "title_level": 2, "desc": "7.4.2\tHeartbeat Messages\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Heartbeat Request", "numbering": "7.4.2.1", "title_level": 3, "desc": "7.4.2.1\tHeartbeat Request\nTable 7.4.2.1-1: Information Elements in Heartbeat Request\n                             Information elements\n                                       P\n                              Condition / Comment\n                                    IE Type\nRecovery Time Stamp\n                                       M\nThis IE shall contain the time stamp when the PFCP entity was started see clause 19A of 3GPP TS 23.007 [24].\nRecovery Time Stamp\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Heartbeat Response", "numbering": "7.4.2.2", "title_level": 3, "desc": "7.4.2.2\tHeartbeat Response\nTable 7.4.2.2-1: Information Elements in Heartbeat Response\n                             Information elements\n                                       P\n                              Condition / Comment\n                                    IE Type\nRecovery Time Stamp\n                                       M\nThis IE shall contain the time stamp when the PFCP entity was started see clause 19A of 3GPP TS 23.007 [24].\nRecovery Time Stamp\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP PFD Management", "numbering": "7.4.3", "title_level": 2, "desc": "7.4.3\tPFCP PFD Management\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP PFD Management Request", "numbering": "7.4.3.1", "title_level": 3, "desc": "7.4.3.1\tPFCP PFD Management Request\nTable 7.4.3.1-1: Information Elements in PFCP PFD Management Request\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nApplication ID's PFDs\n                                       C\nThis IE shall contain an Application Identifier and the associated PFDs to be provisioned in the UP function. \nSeveral IEs with the same IE type may be present to provision PFDs for multiple Application IDs.\nThe UP function shall delete all the PFDs received and stored earlier for all the Application IDs if this IE is absent in the message.\n-\nX\nX\nX\nApplication ID's PFDs\n\nTable 7.4.3.1-2: Application ID's PFDs\nOctet 1 and 2\n\nApplication ID's PFDs IE Type = 58 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nApplication ID\n                                       M\nThis IE shall identify the Application ID for which PFDs shall be provisioned in the UP function.\n-\nX\nX\nX\nApplication ID\nPFD context\n                                       C\nThis IE shall be present if the PFD needs to be provisioned in the UP function. \nWhen present, it shall describe the PFD to be provisioned in the UP function.\nSeveral IEs with the same IE type may be present to provision multiple PFDs for this Application ID. \n\nWhen this IE is absent, the UP function shall delete all the PFDs received and stored earlier in the UP function for this Application ID.\n-\nX\nX\nX\nPFD context\n\nTable 7.4.3.1-3: PFD context\nOctet 1 and 2\n\nPFD context IE Type = 59 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nPFD Contents \n                                       M\nThis IE shall describe the PFD to be provisioned in the UP function. Several IEs with the same IE type may be present to provision multiple contents for this PFD. (NOTE 1)\n-\nX\nX\nX\nPFD Contents\nNOTE 1\tThe CP function shall only provision a PFD Contents including a property with multiple values if the UP function supports PFDE feature. See clauses 8.2.25 and 8.2.39.\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP PFD Management Response", "numbering": "7.4.3.2", "title_level": 3, "desc": "7.4.3.2\tPFCP PFD Management Response\nTable 7.4.3.2-1: Information Elements in PFCP PFD Management Response\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nCause\n                                       M\nThis IE shall indicate the acceptance or the rejection of the corresponding request message.\n-\nX\nX\nX\nCause\nOffending IE\n                                       C\nThis IE shall be included if the rejection is due to an conditional or mandatory IE missing or faulty.\n-\nX\nX\nX\nOffending IE\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Association messages", "numbering": "7.4.4", "title_level": 2, "desc": "7.4.4\tPFCP Association messages \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Association Setup Request", "numbering": "7.4.4.1", "title_level": 3, "desc": "7.4.4.1\tPFCP Association Setup Request\nTable 7.4.4.1-1: Information Elements in a PFCP Association Setup Request\nInformation elements\nP\nCondition / Comment\nIE Type\n                                    Node ID\nM\nThis IE shall contain the unique identifier of the sending Node.\nNode ID\n                              Recovery Time Stamp\nM\nThis IE shall contain the time stamp when the CP or UP function was started, see clause 19A of 3GPP TS 23.007 [24]. (NOTE)\nRecovery Time Stamp\n                             UP Function Features\nC\nThis IE shall be present if the UP function sends this message and the UP function supports at least one UP feature defined in this IE. \nWhen present, this IE shall indicate the features the UP function supports.\nUP Function Features\n                             CP Function Features\nC\nThis IE shall be present if the CP function sends this message and the CP function supports at least one CP feature defined in this IE. \nWhen present, this IE shall indicate the features the CP function supports.\nCP Function Features\n                      User Plane IP Resource Information \nO\nThis IE may be present if the UP function sends this message.\n\nWhen present, this IE shall contain an IPv4 and/or an IPv6 address, together with a TEID range that the CP function shall use to allocate GTP-U F-TEID in the UP function. \nSeveral IEs with the same IE type may be present to represent multiple User Plane IP Resources.\nUser Plane IP Resource Information\n                          UE IP address Pool Identity\nO\nThis IE may be present if the UP function sends this message.\n\nWhen present, this IE shall contain an UE IP address Pool Identity \nSeveral IEs with the same IE type may be present to represent multiple UE IP address Pool Identities.\nUE IP address Pool Identity\n                          Alternative SMF IP Address\nO\nThis IE may be present if the SMF advertises the support of the SSET feature in the CP Function Features IE (see clause 8.2.58). \n\nWhen present, this IE shall contain an IPv4 and/or IPv6 address of an alternative SMF. \nSeveral IEs with the same IE type may be present to represent multiple alternative SMF IP addresses. \nAlternative SMF IP Address\nNOTE:\tA PFCP function that receives a PFCP Association Setup Request shall proceed with \n\t-\testablishing the PFCP association and \n\t-\tdeleting the existing PFCP association and associated PFCP sessions, if a PFCP association was already established for the Node ID received in the request, regardless of the Recovery Timestamp received in the request.\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Association Setup Response", "numbering": "7.4.4.2", "title_level": 3, "desc": "7.4.4.2\tPFCP Association Setup Response\nTable 7.4.4.2-1: Information Elements in a PFCP Association Setup Response\nInformation elements\nP\nCondition / Comment\nIE Type\n                                    Node ID\nM\nThis IE shall contain the unique identifier of the sending Node.\nNode ID\n                                     Cause\nM\nThis IE shall indicate the acceptance or the rejection of the corresponding request message.\nCause\n                              Recovery Time Stamp\nM\nThis IE shall contain the time stamp when the CP or UP function was started, see clause 19A of 3GPP TS 23.007 [24]. (NOTE)\nRecovery Time Stamp\n                             UP Function Features\nC\nThis IE shall be present if the UP function sends this message and the UP function supports at least one UP feature defined in this IE. \nWhen present, this IE shall indicate the features the UP function supports.\nUP Function Features\n                             CP Function Features\nC\nThis IE shall be present if the CP function sends this message and the CP function supports at least one CP feature defined in this IE. \nWhen present, this IE indicates the features the CP function supports.\nCP Function Features\n                      User Plane IP Resource Information \nO\nThis IE may be present if the UP function sends this message.\n\nWhen present, this IE shall contain an IPv4 and/or an IPv6 address, together with a TEID range that the CP function shall use to allocate GTP-U F-TEID in the UP function. \nSeveral IEs with the same IE type may be present to represent multiple User Plane IP Resources.\nUser Plane IP Resource Information\nNOTE:\tA PFCP function shall ignore the Recovery Timestamp received in PFCP Association Setup Response message.\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Association Update Request", "numbering": "7.4.4.3", "title_level": 3, "desc": "7.4.4.3\tPFCP Association Update Request\nTable 7.4.4.3-1: Information Elements in a PFCP Association Update Request\nInformation elements\nP\nCondition / Comment\nIE Type\n                                    Node ID\nM\nThis IE shall contain the unique identifier of the sending Node.\nNode ID\n                             UP Function Features\nO\nIf present, this IE shall indicate the supported Features when the sending node is the UP function.\nUP Function Features\n                             CP Function Features\nO\nIf present, this IE shall indicate the supported Features when the sending node is the CP function.\nCP Function Features\n                       PFCP Association Release Request\nC\nThis IE shall be present if the UP function requests the CP function to release the PFCP association.\nPFCP Association Release Request\n                            Graceful Release Period\nC\nThis IE shall be present if the UP function requests a graceful release of the PFCP association.\nGraceful Release Period\n                      User Plane IP Resource Information \nO\nThis IE may be present if the UP function sends this message.\n\nWhen present, this IE shall contain an IPv4 and/or an IPv6 address, together with a TEID range that the CP function shall use to allocate GTP-U F-TEID in the UP function.\n\nSeveral IEs with the same IE type may be present to represent multiple User Plane IP Resources. \nUser Plane IP Resource Information\n                                PFCPAUReq-Flags\nO\nThis IE shall be included if at least one of the flags is set to 1.\n-\tPARPS (PFCP Association Release Preparation Start): if both the CP function and UP function support the EPFAR feature, the CP or UP function may set this flag to \"1\" to indicate that the PFCP association is to be released and all non-zero usage reports for those PFCP Sessions affected by the release of the PFCP association shall be reported.\nPFCPAUReq-Flags\n                          Alternative SMF IP Address\nO\nThis IE may be present if the SMF advertises the support of the SSET feature in the CP Function Features IE (see clause 8.2.58). \n\nWhen present, this IE shall contain an IPv4 and/or IPv6 address of an alternative SMF. \nSeveral IEs with the same IE type may be present to represent multiple alternative SMF IP addresses. \nAlternative SMF IP Address\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Association Update Response", "numbering": "7.4.4.4", "title_level": 3, "desc": "7.4.4.4\tPFCP Association Update Response\nTable 7.4.4.4-1: Information Elements in a PFCP Association Update Response\nInformation elements\nP\nCondition / Comment\nIE-Type\nNode ID\nM\nThis IE shall contain the unique identifier of the sending Node.\nNode ID\n                                     Cause\nM\nThis IE shall indicate the acceptance or the rejection of the corresponding request message.\nCause\n                             UP Function Features\nO\nIf present, this IE shall indicate the supported Features when the sending node is the UP function.\nUP Function Features\n                             CP Function Features\nO\nIf present, this IE shall indicate the supported Features when the sending node is the CP function.\nCP Function Features\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Association Release Request", "numbering": "7.4.4.5", "title_level": 3, "desc": "7.4.4.5\tPFCP Association Release Request\nTable 7.4.4.5-1: Information Elements in a PFCP Association Release Request\nInformation elements\nP\nCondition / Comment\nIE Type\n                                    Node ID\nM\nThis IE shall contain the unique identifier of the sending Node.\nNode ID\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Association Release Response", "numbering": "7.4.4.6", "title_level": 3, "desc": "7.4.4.6\tPFCP Association Release Response\nTable 7.4.4.6-1: Information Elements in a PFCP Association Release Response\nInformation elements\nP\nCondition / Comment\nIE type\n                                    Node ID\nM\nThis IE shall contain the unique identifier of the sending Node.\n                                    Node ID\n                                     Cause\n                                       M\nThis IE shall indicate the acceptance or the rejection of the corresponding request message.\n                                     Cause\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Version Not Supported Response", "numbering": "7.4.4.7", "title_level": 3, "desc": "7.4.4.7\tPFCP Version Not Supported Response\nThis message shall only contain the PFCP header. The PFCP protocol version in the PFCP header shall indicate the highest PFCP Version that the sending entity supports. \nNOTE:\tThe PFCP Version Not Supported Response message can be received by a PFCP entity when sending the very first message to a PFCP peer only supporting earlier version(s) of the protocol. \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Node Report Procedure", "numbering": "7.4.5", "title_level": 2, "desc": "7.4.5\tPFCP Node Report Procedure\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Node Report Request", "numbering": "7.4.5.1", "title_level": 3, "desc": "7.4.5.1\tPFCP Node Report Request\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "7.4.5.1.1", "title_level": 4, "desc": "7.4.5.1.1\tGeneral\nThe PFCP Node Report Request shall be sent over the Sxa, Sxb, Sxc and N4 interface by the UP function to report information to the CP function that is not specific to an PFCP session.\nTable 7.4.5.1.1-1: Information Elements in PFCP Node Report Request\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nNode ID\n                                       M\nThis IE shall contain the unique identifier of the sending Node.\nX\nX\nX\nX\nNode ID\nNode Report Type\n                                       M\nThis IE shall indicate the type of the report.\nX\nX\nX\nX\nNode Report Type\nUser Plane Path Failure Report\n                                       C\nThis IE shall be present if the Node Report Type indicates a User Plane Path Failure Report.\nX\nX\n-\nX\nUser Plane Path Failure Report\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "User Plane Path Failure Report IE within PFCP Node Report Request", "numbering": "7.4.5.1.2", "title_level": 4, "desc": "7.4.5.1.2\tUser Plane Path Failure Report IE within PFCP Node Report Request\nTable 7.4.5.1.2-1: User Plane Path Failure Report IE within PFCP Node Report Request\nOctet 1 and 2\n\n\nUser Plane Path Failure Report IE Type = 102 (decimal)\nOctets 3 and 4\n\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nRemote GTP-U Peer  \n                                       M\nThis IE shall include the IP address of the remote GTP-U peer towards which a user plane path failure has been detected.\nMore than one IE with this type may be included to represent multiple remote GTP-U peers towards which a user plane path failure has been detected.\nX\nX\n-\nX\nRemote GTP-U Peer\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Node Report Response", "numbering": "7.4.5.2", "title_level": 3, "desc": "7.4.5.2\tPFCP Node Report Response\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "7.4.5.2.1", "title_level": 4, "desc": "7.4.5.2.1\tGeneral\nThe PFCP Node Report Response shall be sent over the Sxa, Sxb; Sxc and N4 interface by the CP function to the UP function as a reply to the PFCP Node Report Request.\nTable 7.4.5.2.1-1: Information Elements in PFCP Node Report Response\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nNode ID\n                                       M\nThis IE shall contain the unique identifier of the sending Node.\nX\nX\nX\nX\nNode ID\nCause\n                                       M\nThis IE shall indicate the acceptance or the rejection of the corresponding request message.\nX\nX\nX\nX\nCause\nOffending IE\n                                       C\nThis IE shall be included if the rejection cause is due to a conditional or mandatory IE missing or faulty.\nX\nX\nX\nX\nOffending IE\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Session Set Deletion", "numbering": "7.4.6", "title_level": 2, "desc": "7.4.6\tPFCP Session Set Deletion\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Session Set Deletion Request", "numbering": "7.4.6.1", "title_level": 3, "desc": "7.4.6.1\tPFCP Session Set Deletion Request\nThe PFCP Session Set Deletion Request shall be sent over the Sxa and Sxb interface by the CP function to request the UP function to delete the PFCP sessions affected by a partial failure.\nThe PFCP Session Set Deletion Request shall be also sent over the Sxa and Sxb interface by the UP function to request the CP function to delete the PFCP sessions affected by a partial failure.\nTable 7.4.6.1-1: Information Elements in a PFCP Session Set Deletion Request\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nNode ID\nM\nThis IE shall contain the node identity of the originating node of the message.\nX\nX\n-\n\nNode ID\nSGW-C FQ-CSID\n                                       C\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\nX\nX\n-\n\nFQ-CSID\nPGW-C FQ-CSID\n                                       C\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\nX\nX\n-\n\nFQ-CSID\nSGW-U FQ-CSID\n                                       C\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\nX\n-\n-\n\nFQ-CSID\nPGW-U FQ-CSID\n                                       C\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\n-\nX\n-\n\nFQ-CSID\nTWAN FQ-CSID\n                                       C\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\n-\nX\n-\n\nFQ-CSID\nePDG FQ-CSID\n                                       C\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\n-\nX\n-\n\nFQ-CSID\nMME FQ-CSID\n                                       C\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\nX\nX\n-\n\nFQ-CSID\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Session Set Deletion Response", "numbering": "7.4.6.2", "title_level": 3, "desc": "7.4.6.2\tPFCP Session Set Deletion Response\nThe PFCP Session Set Deletion Response shall be sent over the Sxa and Sxb interface by the UP function or the CP function as a reply to the PFCP Session Set Deletion Request.\nTable 7.4.6.2-1: Information Elements in a PFCP Session Set Deletion Response\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nNode ID\nM\nThis IE shall contain the unique identifier of the sending node.\nX\nX\n-\n\nNode ID\nCause\n                                       M\nThis IE shall indicate the acceptance or the rejection of the corresponding request message.\nX\nX\n-\n\nCause\nOffending IE\n                                       C\nThis IE shall be included if the rejection is due to an conditional or mandatory IE missing or faulty.\nX\nX\n-\n\nOffending IE\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Session Related Messages", "numbering": "7.5", "title_level": 1, "desc": "7.5\tPFCP Session Related Messages\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "7.5.1", "title_level": 2, "desc": "7.5.1\tGeneral\nThis clause specifies the session related messages used over the Sxa, Sxb and Sxc reference points.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Session Establishment Request", "numbering": "7.5.2", "title_level": 2, "desc": "7.5.2\tPFCP Session Establishment Request\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "7.5.2.1", "title_level": 3, "desc": "7.5.2.1\tGeneral \nThe PFCP Session Establishment Request shall be sent over the Sxa, Sxb, Sxc and N4 interface by the CP function to establish a new PFCP session context in the UP function.\nTable 7.5.2.1-1: Information Elements in an PFCP Session Establishment Request\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nNode ID\n                                       M\nThis IE shall contain the unique identifier of the sending Node.\nX\nX\nX\nX\nNode ID\nCP F-SEID\n                                       M\nThis IE shall contain the unique identifier allocated by the CP function identifying the session.\nX\nX\nX\nX\nF-SEID\nCreate PDR\n                                       M\nThis IE shall be present for at least one PDR to be associated to the PFCP session.\n\nSeveral IEs with the same IE type may be present to represent multiple PDRs.\nSee Table 7.5.2.2-1.\nX\nX\nX\nX\nCreate PDR\nCreate FAR\n                                       M\nThis IE shall be present for at least one FAR to be associated to the PFCP session.\n\nSeveral IEs with the same IE type may be present to represent multiple FARs.\nSee Table 7.5.2.3-1.\nX\nX\nX\nX\nCreate FAR\nCreate URR\n                                       C\nThis IE shall be present if a measurement action shall be applied to packets matching one or more PDR(s) of this PFCP session. \nSeveral IEs within the same IE type may be present to represent multiple URRs.\nSee Table 7.5.2.4-1.\nX\nX\nX\nX\nCreate URR\nCreate QER\n                                       C\nThis IE shall be present if a QoS enforcement or QoS marking action shall be applied to packets matching one or more PDR(s) of this PFCP session.\nSeveral IEs within the same IE type may be present to represent multiple QERs.\nSee Table 7.5.2.5-1.\n-\nX\nX\nX\nCreate QER\nCreate BAR\n                                       O\nWhen present, this IE shall contain the buffering instructions to be applied by the UP function to any FAR of this PFCP session set with the Apply Action requesting the packets to be buffered and with a BAR ID IE referring to this BAR. See table 7.5.2.6-1.\nX\n-\n-\nX\nCreate BAR\nCreate Traffic Endpoint\n                                       C\nThis IE may be present if the UP function has indicated support of PDI optimization.\nSeveral IEs within the same IE type may be present to represent multiple Traffic Endpoints.\nSee Table 7.5.2.7-1.\nX\nX\nX\nX\nCreate Traffic Endpoint\nPDN Type\n                                       C\nThis IE shall be present if the PFCP session is setup for an individual PDN connection or PDU session (see clause 5.2.1). \nWhen present, this IE shall indicate whether this is an IP or non-IP PDN connection/PDU session or, for 5GC, an Ethernet PDU session.\nX\nX\n-\nX\nPDN Type\nSGW-C FQ-CSID\n                                       C\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\nX\nX\n-\n\nFQ-CSID\nMME FQ-CSID\n                                       C\nThis IE shall be included when received on the S11 interface or on S5/S8 interface according to the requirements in clause 23 of 3GPP TS 23.007 [24].\nX\nX\n-\n-\nFQ-CSID\nPGW-C FQ-CSID\n                                       C\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\nX\nX\n-\n-\nFQ-CSID\nePDG FQ-CSID\n                                       C\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\n-\nX\n-\n-\nFQ-CSID\nTWAN FQ-CSID\n                                       C\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\n-\nX\n-\n-\nFQ-CSID\nUser Plane Inactivity Timer\n                                       O\nThis IE may be present to request the UP function to send a User Plane Inactivity Report when no user plane packets are received for this PFCP session for a duration exceeding the User Plane Inactivity Timer. \nWhen present, it shall contain the duration of the inactivity period after which a User Plane Inactivity Report shall be generated.\n-\nX\nX\nX\nUser Plane Inactivity Timer\nUser ID\n                                       O\nThis IE may be present, based on operator policy. It shall only be sent if the UP function is in a trusted environment. \nSee NOTE.\nX\nX\nX\nX\nUser ID\nTrace Information\n                                       O\nWhen present, this IE shall contain the trace instructions to be applied by the UP function for this PFCP session.\nX\nX\nX\nX\nTrace Information\nAPN/DNN\n                                       O\nThis IE may be present, if related functionalities in the UP function require the APN/DNN information. See NOTE 2.\nX\nX\n-\nX\nAPN/DNN\nCreate MAR\n                                       C\nThis IE shall be present for a N4 session established for a MA PDU session. \n\nSeveral IEs with the same IE type may be present to represent multiple MARs.\nSee Table 7.5.2.8-1.\n-\n-\n-\nX\nCreate MAR\nNOTE 1:\tThis can be used for troubleshooting problems in the UP function affecting a subscriber. \nNOTE 2:\tThe CP function may provide additional information (e.g. APN/DNN) to the UP function, e.g. used by the forwarding rules pre-defined in UP function (some forwarding rules are APN specific), used by the UP function for performance measurement, etc.\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Create PDR IE within PFCP Session Establishment Request", "numbering": "7.5.2.2", "title_level": 3, "desc": "7.5.2.2\tCreate PDR IE within PFCP Session Establishment Request\nThe Create PDR grouped IE shall be encoded as shown in Figure 7.5.2.2-1.\nTable 7.5.2.2-1: Create PDR IE within PFCP Session Establishment Request\nOctet 1 and 2\n\nCreate PDR IE Type = 1(decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nPDR ID\n                                       M\nThis IE shall uniquely identify the PDR among all the PDRs configured for that PFCP session.\nX\nX\nX\nX\nPDR ID\nPrecedence\n                                       M\nThis IE shall indicate the PDR's precedence to be applied by the UP function among all PDRs of the PFCP session, when looking for a PDR matching an incoming packet.\n-\nX\nX\nX\nPrecedence\nPDI\n                                       M\nThis IE shall contain the PDI against which incoming packets will be matched. \nSee Table 7.5.2.2-2.\nX\nX\nX\nX\nPDI\nOuter Header Removal \n                                       C\nThis IE shall be present if the UP function is required to remove one or more outer header(s) from the packets matching this PDR.\nX\nX\n-\nX\nOuter Header Removal\nFAR ID \n                                       C\nThis IE shall be present if the Activate Predefined Rules IE is not included or if it is included but it does not result in activating a predefined FAR, and if the MAR ID is not included.\nWhen present this IE shall contain the FAR ID to be associated to the PDR.\nX\nX\nX\nX\nFAR ID\nURR ID\n                                       C\nThis IE shall be present if a measurement action shall be applied to packets matching this PDR.\nWhen present, this IE shall contain the URR IDs to be associated to the PDR. \nSeveral IEs within the same IE type may be present to represent a list of URRs to be associated to the PDR.\nX\nX\nX\nX\nURR ID\nQER ID \n                                       C\nThis IE shall be present if a QoS enforcement or QoS marking action shall be applied to packets matching this PDR.\nWhen present, this IE shall contain the QER IDs to be associated to the PDR. Several IEs within the same IE type may be present to represent a list of QERs to be associated to the PDR.\n-\nX\nX\nX\nQER ID\nActivate Predefined Rules \n                                       C\nThis IE shall be present if Predefined Rule(s) shall be activated for this PDR. When present this IE shall contain one Predefined Rules name.\nSeveral IEs with the same IE type may be present to represent multiple \"Activate Predefined Rules\" names.\n-\nX\nX\nX\nActivate Predefined Rules \nActivation Time\n                                       O\nThis IE may be present if the PDR activation shall be deferred. (NOTE 1)\n-\nX\nX\nX\nActivation Time\nDeactivation Time\n                                       O\nThis IE may be present if the PDR deactivation shall be deferred. (NOTE 1)\n-\nX\nX\nX\nDeactivation Time\nMAR ID\n                                       C\nThis IE shall be present if the PDR is provisioned to match the downlink traffic towards the UE for a PFCP session established for a MA PDU session.\n-\n-\n-\nX\nMAR ID\nNOTE 1:\tWhen the Activation Time and Deactivation Time are not present, the PDR shall be activated immediately at receiving the message.\n\nTable 7.5.2.2-2: PDI IE within PFCP Session Establishment Request\nOctet 1 and 2\n\nPDI IE Type = 2 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nSource Interface\n                                       M\nThis IE shall identify the source interface of the incoming packet.\nX\nX\nX\nX\nSource Interface\nLocal F-TEID \n                                       O\nThis IE shall not be present if Traffic Endpoint ID is present.\nIf present, this IE shall identify the local F-TEID to match for an incoming packet. \nThe CP function shall set the CHOOSE (CH) bit to 1 if the UP function supports the allocation of F-TEID and the CP function requests the UP function to assign a local F-TEID to the PDR.\nX\nX\n-\nX\nF-TEID\nNetwork Instance\n                                       O\nThis IE shall not be present if Traffic Endpoint ID is present. It shall be present if the CP function requests the UP function to allocate a UE IP address/prefix and the Traffic Endpoint ID is not present.\nIf present, this IE shall identify the Network instance to match for the incoming packet. See NOTE 1, NOTE2.\nX\nX\nX\nX\nNetwork Instance\nUE IP address \n                                       O\nThis IE shall not be present if Traffic Endpoint ID is present.\nIf present, this IE shall identify the source or destination IP address to match for the incoming packet. (NOTE 5)\nThe CP function shall set the CHOOSE (CH) bit to 1 if the UP function supports the allocation of UE IP address/ prefix and the CP function requests the UP function to assign a UE IP address/prefix to the PDR.\n-\nX\nX\nX\nUE IP address\nTraffic Endpoint ID\n                                       C\nThis IE may be present if the UP function has indicated the support of PDI optimization. \nIf present, this IE shall uniquely identify the Traffic Endpoint for that PFCP session.\nX\nX\nX\nX\nTraffic Endpoint ID\nSDF Filter\n                                       O\nIf present, this IE shall identify the SDF filter to match for the incoming packet. Several IEs with the same IE type may be present to provision a list of SDF Filters. The full set of applicable SDF filters, if any, shall be provided during the creation or the modification of the PDI.\nSee NOTE 3.\n-\nX\nX\nX\nSDF Filter\nApplication ID\n                                       O\nIf present, this IE shall identify the Application ID to match for the incoming packet. \n-\nX\nX\nX\nApplication ID\nEthernet PDU Session Information\n                                       O\nThis IE may be present to identify all the (DL) Ethernet packets matching an Ethernet PDU session (see clause 5.13.1).\n-\n-\n-\nX\nEthernet PDU Session Information\nEthernet Packet Filter\n                                       O\nIf present, this IE shall identify the Ethernet PDU to match for the incoming packet.\nSeveral IEs with the same IE type may be present to represent a list of Ethernet Packet Filters.\nThe full set of applicable Ethernet Packet filters, if any, shall be provided during the creation or the modification of the PDI.\n-\n-\n-\nX\nEthernet Packet Filter\nQFI\n                                       O\nIf present, this IE shall identify the QoS Flow Identifier to match for the incoming packet. \nSeveral IEs with the same IE type may be present to provision a list of QFIs. When present, the full set of applicable QFIs shall be provided during the creation or the modification of the PDI. \n-\n-\n-\nX\nQFI\nFramed-Route\n                                       O\nThis IE may be present for a DL PDR if the UPF indicated support of Framed Routing (see clause 8.2.25). If present, this IE shall describe a framed route. \nSeveral IEs with the same IE type may be present to provision a list of framed routes. (NOTE 5)\n-\nX\n-\nX\nFramed-Route\nFramed-Routing\n                                       O\nThis IE may be present for a DL PDR if the UPF indicated support of Framed Routing (see clause 8.2.25). If present, this IE shall describe a framed route. \n-\nX\n-\nX\nFramed-Routing\nFramed-IPv6-Route\n                                       O\nThis IE may be present for a DL PDR if the UPF indicated support of Framed Routing (see clause 8.2.25). If present, this IE shall describe a framed IPv6 route. \nSeveral IEs with the same IE type may be present to provision a list of framed IPv6 routes. (NOTE 5)\n-\nX\n-\nX\nFramed-IPv6-Route\nSource Interface Type\n                                       O\nThis IE may be present to indicate the 3GPP interface type of the source interface, if required by functionalities in the UP Function, e.g. for performance measurements.\nX\nX\n-\nX\n3GPP Interface Type\nNOTE 1:\tThe Network Instance parameter is needed e.g. in the following cases:\n\t-\tPGW/TDF UP function supports multiple PDNs with overlapping IP addresses; \n\t-\tSGW UP function is connected to PGWs in different IP domains (S5/S8);\n\t-\tPGW UP function is connected to SGWs in different IP domains (S5/S8);\n\t-\tSGW UP function is connected to eNodeBs in different IP domains;\n\t-\tUPF is connected to 5G-ANs in different IP domains.\nNOTE 2:\tWhen a Local F-TEID is provisioned in the PDI, the Network Instance shall relate to the IP address of the F-TEID. Otherwise, the Network Instance shall relate to the UE IP address if provisioned or the destination IP address in the SDF filter if provisioned\nNOTE 3:\tSDF Filter IE(s) shall not be present if Ethernet Packet Filter IE(s) is present. \nNOTE 4:\tWhen several SDF filter IEs are provisioned, the UP function shall consider that the packets are matched if matching any SDF filter. The same principle shall apply for Ethernet Packet Filters and QFIs.\nNOTE 5:\tIf both the UE IP Address and the Framed-Route (or Framed-IPv6-Route) are present, the packets which are considered being matching the PDR shall match at least one of them.\n\nTable 7.5.2.2-3: Ethernet Packet Filter IE within PFCP Session Establishment Request\nOctet 1 and 2\n\nEthernet Packet Filter IE Type = 132 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nEthernet Filter ID\n                                       C\nThis shall be present if Bidirectional Ethernet filter is required. This IE shall uniquely identify an Ethernet Filter among all the Ethernet Filters provisioned for a given PFCP session.\n-\n-\n-\nX\nEthernet Filter ID\nEthernet Filter Properties\n                                       C\nThis IE shall be present when provisioning a bidirectional Ethernet Filter the first time (see clause 5.13.4).\n-\n-\n-\nX\nEthernet Filter Properties\nMAC address\n                                       O\nIf present, this IE shall identify the MAC address.\nThis IE may be present up to 16 times.\n-\n-\n-\nX\nMAC address\nEthertype\n                                       O\nIf present, this IE shall identify the Ethertype.\n-\n-\n-\nX\nEthertype\nC-TAG\n                                       O\nIf present, this IE shall identify the Customer-VLAN tag.\n-\n-\n-\nX\nC-TAG\nS-TAG\n                                       O\nIf present, this IE shall identify the Service-VLAN tag.\n-\n-\n-\nX\nS-TAG\nSDF Filter\n                                       O\nIf packet filtering is required, for Ethernet frames with Ethertype indicating IPv4 or IPv6 payload, this IE shall describe the IP Packet Filter Set. \nSeveral IEs with the same IE type may be present to represent a list of SDF filters.\n-\n-\n-\nX\nSDF Filter\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Create FAR IE within PFCP Session Establishment Request", "numbering": "7.5.2.3", "title_level": 3, "desc": "7.5.2.3\tCreate FAR IE within PFCP Session Establishment Request\nThe Create FAR grouped IE shall be encoded as shown in Figure 7.5.2.3-1.\nTable 7.5.2.3-1: Create FAR IE within PFCP Session Establishment Request\nOctet 1 and 2\n\nCreate FAR IE Type = 3 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nFAR ID\n                                       M\nThis IE shall uniquely identify the FAR among all the FARs configured for that PFCP session.\nX\nX\nX\nX\nFAR ID\nApply Action\n                                       M\nThis IE shall indicate the action to apply to the packets, See clauses 5.2.1 and 5.2.3.\nX\nX\nX\nX\nApply Action\nForwarding Parameters\n                                       C\nThis IE shall be present when the Apply Action requests the packets to be forwarded. It may be present otherwise. \n\nWhen present, this IE shall contain the forwarding instructions to be applied by the UP function when the Apply Action requests the packets to be forwarded. \nSee table 7.5.2.3-2.\nX\nX\nX\nX\nForwarding Parameters\nDuplicating Parameters \n                                       C\nThis IE shall be present when the Apply Action requests the packets to be duplicated. It may be present otherwise. \n\nWhen present, this IE shall contain the forwarding instructions to be applied by the UP function for the traffic to be duplicated, when the Apply Action requests the packets to be duplicated. \n\nSeveral IEs with the same IE type may be present to represent to duplicate the packets to different destinations. See NOTE 1.\n\nSee table 7.5.2.3-3.\nX\nX\n-\n-\nDuplicating Parameters\nBAR ID\n                                       O\nWhen present, this IE shall contain the BAR ID of the BAR defining the buffering instructions to be applied by the UP function when the Apply Action requests the packets to be buffered. \nX\n-\n-\nX\nBAR ID\nNOTE 1:\tThe same user plane packets may be required, according to operator's policy and configuration, to be duplicated to different SX3LIFs.\n\nTable 7.5.2.3-2: Forwarding Parameters IE in FAR \nOctet 1 and 2\n\nForwarding Parameters IE Type = 4 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nDestination Interface\n                                       M\nThis IE shall identify the destination interface of the outgoing packet.\nX\nX\nX\nX\nDestination Interface\nNetwork Instance\n                                       O\nWhen present, this IE shall identify the Network instance towards which to send the outgoing packet. See NOTE 1.\nX\nX\nX\nX\nNetwork Instance\nRedirect Information\n                                       C\nThis IE shall be present if the UP function is required to enforce traffic redirection towards a redirect destination provided by the CP function. \n-\nX\nX\nX\nRedirect Information\nOuter Header Creation \n                                       C\nThis IE shall be present if the UP function is required to add one or more outer header(s) to the outgoing packet. If present, it shall contain the F-TEID of the remote GTP-U peer when adding a GTP-U/UDP/IP header, or the Destination IP address and/or Port Number when adding a UDP/IP header or an IP header or the C-TAG/S-TAG (for 5GC). See NOTE 2.\nX\nX\n-\nX\nOuter Header Creation\nTransport Level Marking \n                                       C\nThis IE shall be present if the UP function is required to mark the IP header with the DSCP marking as defined by IETF RFC 2474 [22]. When present for EPC, it shall contain the value of the DSCP in the TOS/Traffic Class field set based on the QCI, and optionally the ARP priority level, of the associated EPS bearer, as described in clause 5.10 of 3GPP TS 23.214 [2]. When present for 5GC, it shall contain the value of the DSCP in the TOS/Traffic Class field set based on the 5QI, the Priority Level (if explicitly signalled), and optionally the ARP priority level, of the associated QoS flow, as described in clause 5.8.2.7 of 3GPP TS 23.501 [28],\nX\nX\n-\nX\nTransport Level Marking\nForwarding Policy \n                                       C\nThis IE shall be present if a specific forwarding policy is required to be applied to the packets. It shall be present if the Destination Interface IE is set to SGi-LAN / N6-LAN. It may be present if the Destination Interface is set to Core, Access, or CP-Function.  See NOTE 2.\nWhen present, it shall contain an Identifier of the Forwarding Policy locally configured in the UP function.\n-\nX\nX\nX\nForwarding Policy\nHeader Enrichment\n                                       O\nThis IE may be present if the UP function indicated support of Header Enrichment of UL traffic. When present, it shall contain information for header enrichment.\n-\nX\nX\nX\nHeader Enrichment\nLinked Traffic Endpoint ID\n                                       C\nThis IE may be present, if it is available and the UP function indicated support of the PDI optimisation feature, (see clause 8.2.25). When present, it shall identify the Traffic Endpoint ID allocated for this PFCP session to receive the traffic in the reverse direction (see clause 5.2.3.1).\nX\nX\n-\nX\nTraffic Endpoint ID\nProxying\n                                       C\nThis IE shall be present if proxying is to be performed by the UP function.\n\nWhen present, this IE shall contain the information that the UPF shall respond to Address Resolution Protocol and / or IPv6 Neighbour Solicitation based on the local cache information for the Ethernet PDUs.\n-\n-\n-\nX\nProxying\nDestination Interface Type\n                                       O\nThis IE may be present to indicate the 3GPP interface type of the destination interface, if required by functionalities in the UP Function, e.g. for performance measurements.\nX\nX\n-\nX\n3GPP Interface Type\nNOTE 1:\tThe Network Instance parameter is needed e.g. in the following cases:\n\t-\tPGW/TDF UP function supports multiple PDNs with overlapping IP addresses; \n\t-\tSGW UP function is connected to PGWs in different IP domains (S5/S8);\n\t-\tPGW UP function is connected to SGWs in different IP domains (S5/S8);\n\t-\tSGW UP function is connected to eNodeBs in different IP domains;\n\t-\tUPF is connected to 5G-ANs in different IP domains.\nNOTE 2:\tIf the Outer Header Creation and Forwarding Policy are present, the UP function shall put the user plane packets in the user plane tunnel by applying Outer Header Creation, after enforcing the required Forwarding Policy.\n\nTable 7.5.2.3-3: Duplicating Parameters IE in FAR \nOctet 1 and 2\n\nDuplicating Parameters IE Type = 5 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nDestination Interface\n                                       M\nThis IE shall identify the destination interface of the outgoing packet.\nX\nX\n-\n-\nDestination Interface\nOuter Header Creation \n                                       C\nThis IE shall be present if the UP function is required to add one or more outer header(s) to the outgoing packet. If present, it shall contain the F-TEID of the remote GTP-U peer. See NOTE 1.\nX\nX\n-\n-\nOuter Header Creation\nTransport Level marking\n                                       C\nThis IE shall be present if the UP function is required to mark the IP header with the DSCP marking as defined by IETF RFC 2474 [22]. When present, it shall contain the value of the DSCP in the TOS/Traffic Class field. \nX\nX\n-\n-\nTransport Level Marking\nForwarding Policy \n                                       C\nThis IE shall be present if a specific forwarding policy is required to be applied to the packets. When present, it shall contain an Identifier of the Forwarding Policy locally configured in the UP function.\nX\nX\n-\n-\nForwarding Policy\nNOTE 1:\tIf the Outer Header Creation and Forwarding Policy are present, the UP function shall put the user plane packets in the user plane tunnel by applying Outer Header Creation, after enforcing the required Forwarding Policy.\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Create URR IE within PFCP Session Establishment Request", "numbering": "7.5.2.4", "title_level": 3, "desc": "7.5.2.4\tCreate URR IE within PFCP Session Establishment Request\nThe Create URR grouped IE shall be encoded as shown in Figure 7.5.2.4-1.\nTable 7.5.2.4-1: Create URR IE within PFCP Session Establishment Request \nOctet 1 and 2\n\nCreate URR IE Type = 6 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nURR ID\n                                       M\nThis IE shall uniquely identify the URR among all the URRs configured for this PFCP session.\nX\nX\nX\nX\nURR ID\nMeasurement Method\n                                       M\nThis IE shall indicate the method for measuring the network resources usage, i.e. whether the data volume, duration (i.e. time), combined volume/duration, or event shall be measured.\nX\nX\nX\nX\nMeasurement Method\nReporting Triggers\n                                       M\nThis IE shall indicate the trigger(s) for reporting network resources usage to the CP function, e.g. periodic reporting or reporting upon reaching a threshold, or envelope closure.\nX\nX\nX\nX\nReporting Triggers\nMeasurement Period \n                                       C\nThis IE shall be present if periodic reporting is required. When present, it shall indicate the period for generating and reporting usage reports. \nX\nX\nX\nX\nMeasurement Period\nVolume Threshold\n                                       C\nThis IE shall be present if volume-based measurement is used and reporting is required upon reaching a volume threshold. When present, it shall indicate the traffic volume value after which the UP function shall report network resources usage to the CP function for this URR.\nX\nX\nX\nX\nVolume Threshold\nVolume Quota\n                                       C\nThis IE shall be present if volume-based measurement is used and the CP function needs to provision a Volume Quota in the UP function (see clause 5.2.2.2) \nWhen present, it shall indicate the Volume Quota value.\n-\nX\nX\nX\nVolume Quota\nEvent Threshold\n                                       C\nThis IE shall be present if event-based measurement is used and reporting is required upon reaching an event threshold. When present, it shall indicate the number of events after which the UP function shall report to the CP function for this URR.\n-\nX\nX\nX\nEvent Threshold\nEvent Quota\n                                       C\nThis IE shall be present if event-based measurement is used and the CP function needs to provision an Event Quota in the UP function (see clause 5.2.2.2) \nWhen present, it shall indicate the Event Quota value.\n-\nX\nX\nX\nEvent Quota\nTime Threshold\n                                       C\nThis IE shall be present if time-based measurement is used and reporting is required upon reaching a time threshold. When present, it shall indicate the time usage after which the UP function shall report network resources usage to the CP function for this URR.\nX\nX\nX\nX\nTime Threshold\nTime Quota\n                                       C\nThis IE shall be present if time-based measurement is used and the CP function needs to provision a Time Quota in the UP function (see clause 5.2.2.2) \nWhen present, it shall indicate the Time Quota value\n-\nX\nX\nX\nTime Quota\nQuota Holding Time\n                                       C\nThis IE shall be present, for a time, volume or event-based measurement, if reporting is required and packets are no longer permitted to pass on when no packets are received during a given inactivity period. \nWhen present, it shall contain the duration of the inactivity period.\n-\nX\nX\nX\nQuota Holding Time\nDropped DL Traffic Threshold\n                                       C\nThis IE shall be present if reporting is required when the DL traffic being dropped exceeds a threshold. \nWhen present, it shall contain the threshold of the DL traffic being dropped.\nX\n-\n-\nX\nDropped DL Traffic Threshold\nMonitoring Time\n                                       O\nWhen present, this IE shall contain the time at which the UP function shall re-apply the volume or time threshold. \nX\nX\nX\nX\nMonitoring Time\nSubsequent Volume Threshold\n                                       O\nThis IE may be present if the Monitoring Time IE is present and volume-based measurement is used. \nWhen present, it shall indicate the traffic volume value after which the UP function shall report network resources usage to the CP function for this URR for the period after the Monitoring Time.\nX\nX\nX\nX\nSubsequent Volume Threshold\nSubsequent Time Threshold\n                                       O\nThis IE may be present if the Monitoring Time IE is present and time-based measurement is used. \nWhen present, it shall indicate the time usage after which the UP function shall report network resources usage to the CP function for this URR for the period after the Monitoring Time.\nX\nX\nX\nX\nSubsequent Time Threshold\nSubsequent Volume Quota\n                                       O\nThis IE may be present if Monitoring Time IE is present and volume-based measurement is used (see clause 5.2.2.2). \nWhen present, it shall indicate the Volume Quota value which the UP function shall use for this URR for the period after the Monitoring Time.\n-\nX\nX\nX\nSubsequent Volume Quota\nSubsequent Time Quota\n                                       O\nThis IE may be present if Monitoring Time IE is present and time-based measurement is used (see clause 5.2.2.2) \nWhen present, it shall indicate the Time Quota value which the UP function shall use for this URR for the period after the Monitoring Time.\n-\nX\nX\nX\nSubsequent Time Quota\nSubsequent Event Threshold\n                                       O\nThis IE may be present if the Monitoring Time IE is present and event-based measurement is used. \nWhen present, it shall indicate the number of events after which the UP function shall report to the CP function for this URR for the period after the Monitoring Time.\n-\nX\nX\nX\nSubsequent Event Threshold\nSubsequent Event Quota\n                                       O\nThis IE may be present if Monitoring Time IE is present and event-based measurement is used (see clause 5.2.2.2). \nWhen present, it shall indicate the Event Quota value which the UP function shall use for this URR for the period after the Monitoring Time.\n-\nX\nX\nX\nSubsequent Event Quota\nInactivity Detection Time\n                                       C\nThis IE shall be present if time-based measurement is used and the time measurement need to be suspended when no packets are received during a given inactivity period. When present, it shall contain the duration of the inactivity period.\n-\nX\nX\nX\nInactivity Detection Time\nLinked URR ID\n                                       C\nThis IE shall be present if linked usage reporting is required. When present, this IE shall contain the linked URR ID which is related with this URR (see clause 5.2.2.4).\nSeveral IEs with the same IE type may be present to represent multiple linked URRs which are related with this URR.\n-\nX\nX\nX\nLinked URR ID \nMeasurement Information\n                                       C\nThis IE shall be included if any of the following flag is set to 1.\nApplicable flags are:\n-\tMeasurement Before QoS Enforcement Flag: this flag shall be set to 1 if the traffic usage before any QoS Enforcement is requested to be measured. \n-\tInactive Measurement Flag: this flag shall be set to 1 if the measurement shall be paused (inactive). The measurement shall be performed (active) if the bit is set to 0 or if the Measurement Information IE is not present in the Create URR IE.\n-\tReduced Application Detection Information Flag: this flag may be set to 1, if the Reporting Triggers request to report the start or stop of application, to request the UP function to only report the Application ID in the Application Detection Information, e.g. for envelope reporting. \n-\tImmediate Start Time Metering Flag: this flag may be set to 1 if time-based measurement is used and the UP function is requested to start the time metering immediately at receiving the flag.\n\n\n\n-\n\n\n\n\n-\n\n\n\nX\n\n\n\n\nX\n\n\n\nX\n\n\n\n\n-\n\n\n\nX\n\n\n\n\nX\nMeasurement Information\nTime Quota Mechanism\n                                       C\nThis IE shall be present if time-based measurement based on CTP or DTP is used.\n-\nX\n-\n-\nTime Quota Mechanism\nAggregated URRs\n                                       C\nThis IE shall be included if the URR is used to support a Credit Pool.\n\nSeveral IEs with the same IE type may be present to provide multiple aggregated URRs.\n-\nX\n-\n\nAggregated URRs\nFAR ID for Quota Action\n                                       C\nThis IE may be present if the Volume Quota IE and/or the Time Quota IE and/or Event Quota IE is provisioned in the URR and the UP Function indicated support of the Quota Action feature. \nWhen present, it shall contain the identifier of the substitute FAR the UP function shall apply, for the traffic associated to this URR, when exhausting any of these quotas. See NOTE 1. \n-\nX\nX\nX\nFAR ID\nEthernet Inactivity Timer\n                                       C\nThis IE shall be present if Ethernet traffic reporting is used and the SMF requests the UP function to also report inactive UE MAC addresses. \nWhen present, it shall contain the duration of the Ethernet inactivity period.\n-\n-\n-\nX\nEthernet Inactivity Timer\nAdditional Monitoring Time\n                                       O\nWhen present, this IE shall contain the time at which the UP function shall re-apply the volume or time or event threshold/quota provisioned in the IE. \n\nSeveral IEs with the same IE type may be present to provide multiple Monitoring Times.\nX\nX\nX\nX\nAdditional Monitoring Time\nNOTE 1:\tThe substitute FAR used when exhausting a Volume Quota or Time Quota may be set to drop the packets or redirect the traffic towards a redirect destination as specified in clause 5.4.7.\n\nTable 7.5.2.4-2: Aggregated URRs\nOctet 1 and 2\n\nAggregated URRs = 118 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nAggregated URR ID\n                                       M\nThis IE shall be present for the aggregated URR ID of the URR sharing the credit pool.\n-\nX\n-\n-\nAggregated URR ID\nMultiplier\n                                       M\nThis IE shall be included to measure the abstract service units the traffic of the corresponding aggregated URR consumes from the credit pool.\n-\nX\n-\n-\nMultiplier\n\nTable 7.5.2.4-3: Additional Monitoring Time\nOctet 1 and 2\n\nAdditional Monitoring Time = 147 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nMonitoring Time\n                                       M\nThis IE shall be present and contain the time at which the UP function shall re-apply the volume or time threshold/quota. \nX\nX\nX\nX\nMonitoring Time\nSubsequent Volume Threshold\n                                       O\nThis IE may be present if the Monitoring Time IE is present and volume-based measurement is used. \nWhen present, it shall indicate the traffic volume value after which the UP function shall report network resources usage to the CP function for this URR for the period after the Monitoring Time.\nX\nX\nX\nX\nSubsequent Volume Threshold\nSubsequent Time Threshold\n                                       O\nThis IE may be present if the Monitoring Time IE is present and time-based measurement is used. \nWhen present, it shall indicate the time usage after which the UP function shall report network resources usage to the CP function for this URR for the period after the Monitoring Time.\nX\nX\nX\nX\nSubsequent Time Threshold\nSubsequent Volume Quota\n                                       O\nThis IE may be present if Monitoring Time IE is present and volume-based measurement is used (see clause 5.2.2.2). \nWhen present, it shall indicate the Volume Quota value which the UP function shall use for this URR for the period after the Monitoring Time.\n-\nX\nX\nX\nSubsequent Volume Quota\nSubsequent Time Quota\n                                       O\nThis IE may be present if Monitoring Time IE is present and time-based measurement is used (see clause 5.2.2.2) \nWhen present, it shall indicate the Time Quota value which the UP function shall use for this URR for the period after the Monitoring Time.\n-\nX\nX\nX\nSubsequent Time Quota\nSubsequent Event Threshold\n                                       O\nThis IE may be present if the Monitoring Time IE is present and event-based measurement is used. \nWhen present, it shall indicate the number of events after which the UP function shall report to the CP function for this URR for the period after the Monitoring Time.\n-\nX\nX\nX\nEvent Threshold\nSubsequent Event Quota\n                                       O\nThis IE may be present if Monitoring Time IE is present and event-based measurement is used (see clause 5.2.2.2). \nWhen present, it shall indicate the Event Quota value which the UP function shall use for this URR for the period after the Monitoring Time.\n-\nX\nX\nX\nEvent Quota\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Create QER IE within PFCP Session Establishment Request", "numbering": "7.5.2.5", "title_level": 3, "desc": "7.5.2.5\tCreate QER IE within PFCP Session Establishment Request\nThe Create QER grouped IE shall be encoded as shown in Figure 7.5.2.5-1.\nTable 7.5.2.5-1: Create QER IE within PFCP Session Establishment Request \nOctet 1 and 2\n\nCreate QER IE Type = 7 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nQER ID\n                                       M\nThis IE shall uniquely identify the QER among all the QER configured for that PFCP session\n-\nX\nX\nX\nQER ID\nQER Correlation ID\n                                       C\nThis IE shall be present if the UP function is required to correlate the QERs of several PFCP sessions, for APN-AMBR enforcement of multiple UE's PDN connections to the same APN.\n-\nX\n-\nX\nQER Correlation ID\nGate Status\n                                       M\nThis IE shall indicate whether the packets are allowed to be forwarded (the gate is open) or shall be discarded (the gate is closed) in the uplink and/or downlink directions.\n-\nX\nX\nX\nGate Status\nMaximum Bitrate\n                                       C\nThis IE shall be present if an MBR enforcement action shall be applied to packets matching this PDR. When present, this IE shall indicate the uplink and/or downlink maximum bit rate to be enforced for packets matching the PDR.\n\nFor EPC, this IE may be set to the value of:\n  -\tthe APN-AMBR, for a QER that is referenced by all the PDRs of the non-GBR bearers of a PDN connection;\n  -\tthe TDF session MBR, for a QER that is referenced by all the PDRs of a TDF session;\n  -\tthe bearer MBR, for a QER that is referenced by all the PDRs of a bearer;\n  -\tthe SDF MBR, for a QER that is referenced by all the PDRs of a SDF.\n\nFor 5GC, this IE may be set to the value of:\n  -\tthe Session-AMBR, for a QER that is referenced by all the PDRs of the non-GBR QoS flows of a PDU session;\n  -\tthe QoS Flow MBR, for a QER that is referenced by all the PDRs of a QoS Flow;\n  -\tthe SDF MBR, for a QER that is referenced by all the PDRs of a SDF.\n-\nX\nX\nX\nMBR\nGuaranteed Bitrate\n                                       C\nThis IE shall be present if a GBR has been authorized to packets matching this PDR. When present, this IE shall indicate the authorized uplink and/or downlink guaranteed bit rate.\n\nThis IE may be set to the value of: \n  -\tthe aggregate GBR, for a QER that is referenced by all the PDRs of a GBR bearer;\n  -\tthe QoS Flow GBR, for a QER that is referenced by all the PDRs of a QoS Flow (for 5GC);\n  -\tthe SDF GBR, for a QER that is referenced by all the PDRs of a SDF.\n\n-\nX\nX\nX\nGBR\nPacket Rate\n                                       C\nThis IE shall be present if a Packet Rate enforcement action (in terms of number of packets per time interval) shall be applied to packets matching this PDR. \nWhen present, this IE shall indicate the uplink and/or downlink maximum packet rate to be enforced for packets matching the PDR.\nThis IE may be set to the value of: \n  -\tdownlink packet rate for Serving PLMN Rate Control, for a QER that is referenced by all PDRs of the UE belonging to the PDN connection using CIoT EPS Optimizations as described in 3GPP TS 23.401 [2])\n  -\tuplink and/or downlink packet rate for APN Rate Control, for a QER that is referenced by all the PDRs of the UE belonging to PDN connections to the same APN using CIoT EPS Optimizations as described in 3GPP TS 23.401 [2]).\n-\nX\n-\n\nPacket Rate\nDL Flow Level Marking\n                                       C\nThis IE shall be set if the UP function is required to mark the packets for QoS purposes: \n\n  -\tby the TDF-C, for DL flow level marking for application indication (see clause 5.4.5); \n  -\tby the PGW-C, for setting the GTP-U Service Class Indicator extension header for service indication towards GERAN (see clause 5.4.12).\n-\nX\nX\n-\nDL Flow Level Marking\nQoS flow identifier\n                                       C\nThis IE shall be present if the QoS flow identifier shall be inserted by the UPF.\n-\n-\n-\nX\nQFI\nReflective QoS\n                                       C\nThis IE shall be present if the UP function is required to insert a Reflective QoS Identifier to request reflective QoS for uplink traffic.\n-\n-\n-\nX\nRQI\nPaging Policy Indicator\n                                       C\nThis IE shall be present if the UPF is required to set the Paging Policy Indicator (PPI) in outgoing packets (see clause 5.4.3.2 of 3GPP TS 23.501 [28])\nWhen present, it shall be set to the PPI value to set. \n-\n-\n-\nX\nPaging Policy Indicator\nAveraging Window\n                                       O\nThis IE may be present if the UP function is required to use a different Averaging window than the default one. (NOTE)\n\n-\n-\n-\nX\nAveraging Window\nNOTE:\tAs 5QI is not signalled over N4, one default averaging window shall be pre-configured in the UPF. \n\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Create BAR IE within PFCP Session Establishment Request", "numbering": "7.5.2.6", "title_level": 3, "desc": "7.5.2.6\tCreate BAR IE within PFCP Session Establishment Request\nThe Create BAR grouped IE shall be encoded as shown in Figure 7.5.2.6-1.\nTable 7.5.2.6-1: Create BAR IE within PFCP Session Establishment Request\nOctet 1 and 2\n\nCreate BAR IE Type = 85 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nBAR ID\n                                       M\nThis IE shall uniquely identify the BAR provisioned for that PFCP session.\nX\n-\n-\nX\nBAR ID\nDownlink Data Notification Delay\n                                       C\nThis IE shall be present if the UP function indicated support of the Downlink Data Notification Delay parameter (see clause 8.2.28) and the UP function has to delay the notification to the CP function about the arrival of DL data packets. \nWhen present, it shall contain the delay the UP function shall apply between receiving a downlink data packet and notifying the CP function about it, when the Apply Action parameter requests to buffer the packets and notify the CP function.\nX\n-\n-\n-\nDownlink Data Notification Delay\nSuggested Buffering Packets Count\n                                       C\nThis IE may be present if the UP Function indicated support of the the feature UDBC.\n\nWhen present, it shall contain the number of packets that are suggested to be buffered when the Apply Action parameter requests to buffer the packets. The packets that exceed the limit shall be discarded.\n\nX\nX\nX\nSuggested Buffering Packets Count\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Create Traffic Endpoint IE within Sx Session Establishment Request", "numbering": "7.5.2.7", "title_level": 3, "desc": "7.5.2.7\tCreate Traffic Endpoint IE within Sx Session Establishment Request\nThe Create Traffic Endpoint grouped IE shall be encoded as shown in Figure 7.5.2.7-1.\nTable 7.5.2.7-1: Create Traffic Endpoint IE within PFCP Session Establishment Request\nOctet 1 and 2\nCreate Traffic Endpoint IE Type = 127(decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nTraffic Endpoint ID\n                                       M\nThis IE shall uniquely identify the Traffic Endpoint for that Sx session.\nX\nX\nX\nX\nTraffic Endpoint ID\nLocal F-TEID \n                                       O\nIf present, this IE shall identify the local F-TEID to match for an incoming packet. \nThe CP function shall set the CHOOSE (CH) bit to 1 if the UP function supports the allocation of F-TEID and the CP function requests the UP function to assign a local F-TEID to the Traffic Endpoint.\nX\nX\n-\nX\nF-TEID\nNetwork Instance\n                                       O\nThis IE shall be present if the CP function requests the UP function to allocate a UE IP address/prefix. \nIf present, this IE shall identify the Network instance to match for the incoming packet. See NOTE 1, NOTE2.\nX\nX\nX\nX\nNetwork Instance\nUE IP address \n                                       O\nIf present, this IE shall identify the source or destination IP address to match for the incoming packet. (NOTE 3) \nThe CP function shall set the CHOOSE (CH) bit to 1 if the UP function supports the allocation of UE IP address/ prefix and the CP function requests the UP function to assign a UE IP address/prefix to the Traffic Endpoint.\n-\nX\nX\nX\nUE IP address\nEthernet PDU Session Information\n                                       O\nThis IE may be present to identify all the (DL) Ethernet packets matching an Ethernet PDU session (see clause 5.13.1).\n-\n-\n-\nX\nEthernet PDU Session Information\nFramed-Route\n                                       O\nThis IE may be present for a DL PDR if the UPF indicated support of Framed Routing (see clause 8.2.25). If present, this IE shall describe a framed route. \nSeveral IEs with the same IE type may be present to provision a list of framed routes. (NOTE 3)\n-\nX\n-\nX\nFramed-Route\nFramed-Routing\n                                       O\nThis IE may be present for a DL PDR if the UPF indicated support of Framed Routing (see clause 8.2.25). If present, this IE shall describe the framed routing associated to a framed route. \n-\nX\n-\nX\nFramed-Routing\nFramed-IPv6-Route\n                                       O\nThis IE may be present for a DL PDR if the UPF indicated support of Framed Routing (see clause 8.2.25). If present, this IE shall describe a framed IPv6 route. \nSeveral IEs with the same IE type may be present to provision a list of framed IPv6 routes. (NOTE 3)\n-\nX\n-\nX\nFramed-IPv6-Route\nNOTE 1:\tThe Network Instance parameter is needed e.g. in the following cases:\n\t-\tPGW/TDF UP function supports multiple PDNs with overlapping IP addresses; \n\t-\tSGW UP function is connected to PGWs in different IP domains (S5/S8);\n\t-\tPGW UP function is connected to SGWs in different IP domains (S5/S8);\n\t-\tSGW UP function is connected to eNodeBs in different IP domains;\n\t-\tUPF is connected to 5G-ANs in different IP domains.\nNOTE 2:\tWhen a Local F-TEID is provisioned in the Traffic Endpoint, the Network Instance shall relate to the IP address of the F-TEID. Otherwise, the Network Instance shall relate to the UE IP address.\nNOTE 3:\tIf both the UE IP Address and the Framed-Route (or Framed-IPv6-Route) are present, the packets which are considered being matching the PDR shall match at least one of them.\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Create MAR IE within PFCP Session Establishment Request", "numbering": "7.5.2.8", "title_level": 3, "desc": "7.5.2.8\tCreate MAR IE within PFCP Session Establishment Request\nThe Create MAR grouped IE shall be encoded as shown in Figure 7.5.2.8-1.\nTable 7.5.2.8-1: Create MAR IE within PFCP Session Establishment Request\nOctet 1 and 2\n\nCreate MAR IE Type = 165 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nMAR ID\n                                       M\nThis IE shall uniquely identify the MAR among all the MARs configured for that PFCP session.\n-\n-\n-\nX\nMAR ID\nSteering Functionality\n                                       M\nThis IE shall be present to indicate the applicable traffic steering functionality.\n\n-\n-\n-\nX\nSteering Functionality\nSteering Mode\n                                       M\nThis IE shall be present to indicate the steering mode. \n\n-\n-\n-\nX\nSteering Mode\nAccess Forwarding Action Information 1 \n                                       M\nThis IE shall be present to provision access specific (non-3gpp or 3gpp) forwarding action information.\n\n\n\n-\n-\n-\nX\nAccess Forwarding Action Information 1 \nAccess Forwarding Action Information 2\n                                       C\nThis IE shall be present to provision access specific (non-3gpp or 3gpp) forwarding action information if the UE is registered for both non-3GPP and 3GPP accesses.\n\n\n\n-\n-\n-\nX\nAccess Forwarding Action Information 2 \n\nTable 7.5.2.8-2: Access Forwarding Action Information 1 IE in the Create MAR IE \nOctet 1 and 2\n\nAccess Forwarding Action Information 1 IE Type = 166 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nFAR ID\n                                       M\nThis IE shall uniquely identify the FAR among all the FARs configured for this PFCP session. \n-\n-\n-\nX\nFAR ID\nWeight\n                                       C\nThis IE shall be present if steering mode is set to \"Load Balancing\" to identify the weight of the FAR.\n(NOTE 1) \n-\n-\n-\nX\nWeight\nPriority\n                                       C\nThis IE shall be present if the steering mode is set to \"Active-Standby\" or \"Priority-based\". (NOTE 2)\n-\n-\n-\nX\nPriority\nURR ID \n                                       C\nThis IE shall uniquely identify the URR among all the URRs configured for the PFCP session. This enables the SMF to request separate usage reports for different FARs (i.e. different accesses) (NOTE 3)\n\nSeveral IEs within the same IE type may be present to represent a list of URRs to be associated to the FAR.\n-\n-\n-\nX\nURR ID\nNOTE 1:\tThe weights for all FARs included in both Access Forwarding Action Information 1 and Access Forwarding Action Information 2 need to sum up to be 100.\nNOTE 2:\tThe Priority value shall be set to \"Active\" or \"Standby\" if the Steering Mode is set to \"Active-Standby\"; the Priority value shall be set to \"High\" or \"Low\" if the Steering Mode is set to \"Priority-based\". The Access Forwarding Action Information 1 and Access Forwarding Action Information 2 shall set different values.\nNOTE 3:\tOne or more URRs may still be provisioned in the Create PDR IE when a MAR ID is present, while the URR(s) provisioned in this IE shall present a different set of URR(s) to request separate usage reports. \n\nTable 7.5.2.8-3: Access Forwarding Action Information 2 IE in the Create MAR IE \nOctet 1 and 2\n\nAccess Forwarding Action Information 2 IE Type = 167 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nSame IEs and requirements as defined in Table 7.5.2.8-2 \n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Session Establishment Response", "numbering": "7.5.3", "title_level": 2, "desc": "7.5.3\tPFCP Session Establishment Response\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "7.5.3.1", "title_level": 3, "desc": "7.5.3.1\tGeneral\nThe PFCP Session Establishment Response shall be sent over the Sxa, Sxb, Sxc and N4 interface by the UP function to the CP function as a reply to the PFCP Session Establishment Request.\nTable 7.5.3.1-1: Information Elements in a PFCP Session Establishment Response\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nNode ID\n                                       M\nThis IE shall contain the unique identifier of the sending Node.\nX\nX\nX\nX\nNode ID\nCause\n                                       M\nThis IE shall indicate the acceptance or the rejection of the corresponding request message.\nX\nX\nX\nX\nCause\nOffending IE\n                                       C\nThis IE shall be included if the rejection is due to a conditional or mandatory IE missing or faulty.\nX\nX\nX\nX\nOffending IE\nUP F-SEID\n                                       C\nThis IE shall be present if the cause is set to \"Request accepted (success)\". When present, it shall contain the unique identifier allocated by the UP function identifing the session.\nX\nX\nX\nX\nF-SEID\nCreated PDR \n                                       C\nThis IE shall be present if the cause is set to \"success\" and the UP function was requested to allocate a local F-TEID or a UE IP address/prefix for the PDR. \nWhen present, this IE shall contain the PDR information associated to the PFCP session. There may be several instances of this IE.\nSee table 7.5.3.2-1.\nX\nX\n-\nX\nCreated PDR\nLoad Control Information\n                                       O\nThe UP function may include this IE if it supports the load control feature and the feature is activated in the network.\nSee Table 7.5.3.3-1.\nX\nX\nX\nX\nLoad Control Information\nOverload Control Information\n                                       O\nDuring an overload condition, the UP function may include this IE if it supports the overload control feature and the feature is activated in the network.\nSee Table 7.5.3.4-1.\nX\nX\nX\nX\nOverload Control Information\nSGW-U FQ-CSID\n                                       C\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\nX\n-\n-\n-\nFQ-CSID\nPGW-U FQ-CSID\n                                       C\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\n-\nX\n-\n-\nFQ-CSID\nFailed Rule ID\n                                       C\nThis IE shall be included if the Cause IE indicates a rejection due to a rule creation or modification failure. \nX\nX\nX\nX\nFailed Rule ID\nCreated Traffic Endpoint \n                                       C\nThis IE shall be present if the cause is set to \"success\" and the UP function was requested to allocate a local F-TEID or a UE IP address/prefix in a Create Traffic Endpoint IE. When present, it shall contain the local F-TEID or UE IP address/prefix to be used for this Traffic Endpoint.\nThere may be several instances of this IE.\nX\nX\n-\nX\nCreated Traffic Endpoint\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Created PDR IE within PFCP Session Establishment Response", "numbering": "7.5.3.2", "title_level": 3, "desc": "7.5.3.2\tCreated PDR IE within PFCP Session Establishment Response\nThe Created PDR grouped IE shall be encoded as shown in Figure 7.5.3.2-1.\nTable 7.5.3.2-1: Created PDR IE within PFCP Session Establishment Response \nOctet 1 and 2\n\nCreated PDR IE Type = 8 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nPDR ID\n                                       M\n\nX\nX\n-\nX\nPDR ID\nLocal F-TEID \n                                       C\nIf the UP function allocates the F-TEID, this IE shall be present and shall contain the local F-TEID to be used for this PDR.\nX\nX\n-\nX\nF-TEID\nUE IP Address\n                                       C\nIf the UP function allocates the UE IP address/prefix, this IE shall be present and shall contain the UE IP address/ prefix assigned by the UP function.\n-\n-\n-\nX\nUE IP Address\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Load Control Information IE within PFCP Session Establishment Response", "numbering": "7.5.3.3", "title_level": 3, "desc": "7.5.3.3\tLoad Control Information IE within PFCP Session Establishment Response\nThe Load Control Information grouped IE shall be encoded as shown in Figure 7.5.3.3-1.\nTable 7.5.3.3-1: Load Control Information IE within PFCP Session Establishment Response \nOctet 1 and 2\n\nLoad Control Information IE Type = 51 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nLoad Control Sequence Number\n                                       M\nSee clause 6.2.3.3.2 for the description and use of this parameter.\nX\nX\nX\nX\nSequence Number\nLoad Metric\n                                       M\nSee clause 6.2.3.3.2 for the description and use of this parameter.\nX\nX\nX\nX\nMetric\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Overload Control Information IE within PFCP Session Establishment Response", "numbering": "7.5.3.4", "title_level": 3, "desc": "7.5.3.4\tOverload Control Information IE within PFCP Session Establishment Response\nThe Overload Control grouped IE shall be encoded as shown in Figure 7.5.3.4-1.\nTable 7.5.3.4-1: Overload Control Information IE within PFCP Session Establishment Response \nOctet 1 and 2\n\nOverload Control Information IE Type = 54 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nOverload Control Sequence Number\n                                       M\nSee clause 6.2.4.3.2 for the description and use of this parameter.\nX\nX\nX\nX\nSequence Number\nOverload Reduction Metric\n                                       M\nSee clause 6.2.4.3.2 for the description and use of this parameter.\nX\nX\nX\nX\nMetric\nPeriod of Validity\n                                       M\nSee clause 6.2.4.3.2 for the description and use of this parameter.\nX\nX\nX\nX\nTimer\nOverload Control Information Flags\n                                       C\nThis IE shall be included if any of flag in this IE is set.  \nX\nX\nX\nX\nOCI Flags\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Created Traffic Endpoint IE within Sx Session Establishment Response", "numbering": "7.5.3.5", "title_level": 3, "desc": "7.5.3.5\tCreated Traffic Endpoint IE within Sx Session Establishment Response\nThe Created Traffic Endpoint grouped IE shall be encoded as shown in Figure 7.5.3.5-1.\nTable 7.5.3.5-1: Created Traffic Endpoint IE within Sx Session Establishment Response\nOctet 1 and 2\n\nCreated Traffic Endpoint IE Type = 128 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nTraffic Endpoint ID\n                                       M\nThis IE shall uniquely identify the Traffic Endpoint for that Sx session.\nX\nX\n-\nX\nTraffic Endpoint ID\nLocal F-TEID \n                                       C\nIf the UP function allocates the F-TEID, this IE shall be present and shall contain the local F-TEID to be used for this Traffic Endpoint. \n\nX\nX\n-\nX\nF-TEID\nUE IP Address\n                                       C\nIf the UP function allocates the UE IP address/prefix, this IE shall be present and shall contain the UE IP address/ prefix assigned by the UP function.\n-\n-\n-\nX\nUE IP Address\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Session Modification Request", "numbering": "7.5.4", "title_level": 2, "desc": "7.5.4\tPFCP Session Modification Request\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "7.5.4.1", "title_level": 3, "desc": "7.5.4.1\tGeneral\nThe PFCP Session Modification Request is used over the Sxa, Sxb, Sxc and N4 interface by the CP function to request the UP function to modify the PFCP session.\nTable 7.5.4.1-1: Information Elements in a PFCP Session Modification Request\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nCP F-SEID\nC\nThis IE shall be present if the CP function decides to change its F-SEID for the PFCP session. The UP function shall use the new CP F-SEID for subsequent PFCP Session related messages for this PFCP Session. See Note 2.\nX\nX\nX\nX\nF-SEID\nRemove PDR\n                                       C\nWhen present, this IE shall contain the PDR Rule which is requested to be removed. See Table 7.5.4-6-1. \nSeveral IEs within the same IE type may be present to represent a list of PDRs to remove.\nX\nX\nX\nX\nRemove PDR\nRemove FAR\n                                       C\nWhen present, this IE shall contain the FAR Rule which is requested to be removed. See Table 7.5.4-7-1.\nSeveral IEs within the same IE type may be present to represent a list of FARs to remove.\nX\nX\nX\nX\nRemove FAR\nRemove URR\n                                       C\nWhen present, this shall contain the URR Rule which is requested to be removed. See Table 7.5.4-8-1.\nSeveral IEs within the same IE type may be present to represent a list of URRs to remove.\nX\nX\nX\nX\nRemove URR\nRemove QER\n                                       C\nWhen present, this IE shall contain the QER Rule which is requested to be removed. See Table 7.5.4-9-1. \nSeveral IEs within the same IE type may be present to represent a list of QERs to remove.\n-\nX\nX\nX\nRemove QER\nRemove BAR\n                                       C\nWhen present, this IE shall contain the BAR Rule which is requested to be removed. See Table 7.5.4.12-1.\nX\n-\n-\nX\nRemove BAR\nRemove Traffic Endpoint\n                                       C\nWhen present, this IE shall contain the Traffic Endpoint ID identifying the traffic endpoint to be removed, if the UP function has indicated support of PDI optimization.\nAll the PDRs that refer to the removed Traffic Endpoint shall be deleted.\nSee Table 7.5.4.14-1.\nX\nX\nX\nX\nRemove Traffic Endpoint\nCreate PDR\n                                       C\nThis IE shall be present if the CP function requests the UP function to create a new PDR.\nSee Table 7.5.2.2-1. \nSeveral IEs within the same IE type may be present to represent a list of PDRs to create.\nX\nX\nX\nX\nCreate PDR\nCreate FAR\n                                       C\nThis IE shall be present if the CP function requests the UP function to create a new FAR.See Table 7.5.2.3-1.\nSeveral IEs within the same IE type may be present to represent a list of FARs to create.\nX\nX\nX\nX\nCreate FAR\nCreate URR\n                                       C\nThis IE shall be present if the CP function requests the UP function to create a new URR. See Table 7.5.2.4-1. \nSeveral IEs within the same IE type may be present to represent a list of URRs to create.\nX\nX\nX\nX\nCreate URR\nCreate QER\n                                       C\nThis IE shall be present if the CP function requests the UP function to create a new QER. See Table 7.5.2.5-1. \nSeveral IEs within the same IE type may be present to represent a list of QERs to create.\n-\nX\nX\nX\nCreate QER\nCreate BAR\n                                       C\nThis IE shall be present if the CP function requests the UP function to create a new BAR. \nSee Table 7.5.2.6-1.\nX\n-\n-\nX\nCreate BAR\nCreate Traffic Endpoint\n                                       C\nWhen present this IE shall contain the information associated with the Traffic Endpoint to be created, if the UP function has indicated support of PDI optimization. See Table 7.5.2.7-1.\nX\nX\nX\nX\nCreate Traffic Endpoint\nUpdate PDR\n                                       C\nThis IE shall be present if a PDR previously created for the PFCP session need to be modified. See Table 7.5.4.2-1. \nSeveral IEs within the same IE type may be present to represent a list of PDRs to update.\nX\nX\nX\nX\nUpdate PDR\nUpdate FAR\n                                       C\nThis IE shall be present if a FAR previously created for the PFCP session need to be modified. See Table 7.5.4.3-1. Several IEs within the same IE type may be present to represent a list of FARs to update.\nX\nX\nX\nX\nUpdate FAR\nUpdate URR\n                                       C\nThis IE shall be present if URR(s) previously created for the PFCP session need to be modified.\nSeveral IEs within the same IE type may be present to represent a list of modified URRs. Previously URRs that are not modified shall not be included. See Table 7.5.4.4-1.\nX\nX\nX\nX\nUpdate URR\nUpdate QER\n                                       C\nThis IE shall be present if QER(s) previously created for the PFCP session need to be modified. \nSeveral IEs within the same IE type may be present to represent a list of modified QERs. \nPreviously created QERs that are not modified shall not be included.\nSee Table 7.5.4.5-1.\n-\nX\nX\nX\nUpdate QER\nUpdate BAR\n                                       C\nThis IE shall be present if a BAR previously created for the PFCP session needs to be modified. \nA previously created BAR that is not modified shall not be included.\nSee Table 7.5.4.11-1.\nX\n-\n-\nX\nUpdate BAR\nUpdate Traffic Endpoint\n                                       C\nWhen present this IE shall contain the information associated with the traffic endpoint to be updated, if the UP function has indicated support of PDI optimization.\n\nAll the PDRs that refer to the Traffic Endpoint shall use the updated Traffic Endpoint information.\nSee Table 7.5.4.13-1.\nX\nX\nX\nX\nUpdate Traffic Endpoint\nPFCPSMReq-Flags\n                                       C\nThis IE shall be included if at least one of the flags is set to 1. \n       -\tDROBU (Drop Buffered Packets): the CP function shall set this flag if the UP function is requested to drop the packets currently buffered for this PFCP session (see NOTE 1).\n       -\tQAURR (Query All URRs): the CP function shall set this flag if the CP function requests immediate usage report(s) for all the URRs previously provisioned for this PFCP session (see NOTE 3). \n\n\nX\n\n\n\n\nX\n\n\n-\n\n\n\n\nX\n\n\n-\n\n\n\n\nX\n\n\nX\n\n\n\n\nX\nPFCPSMReq-Flags\nQuery URR\n                                       C\nThis IE shall be present if the CP function requests immediate usage report(s) to the UP function. \nSeveral IEs within the same IE type may be present to represent a list of URRs for which an immediate report is requested.\nSee Table 7.5.4.10-1. \nSee NOTE 3.\nX\nX\nX\nX\nQuery URR\nPGW-C FQ-CSID\n                                       C\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\nX\nX\n-\n-\nFQ-CSID\nSGW-C FQ-CSID\n                                       C\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\nX\nX\n-\n-\nFQ-CSID\nMME FQ-CSID\n                                       C\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\nX\nX\n-\n-\nFQ-CSID\nePDG FQ-CSID\n                                       C\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\n-\nX\n-\n-\nFQ-CSID\nTWAN FQ-CSID\n                                       C\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\n-\nX\n-\n-\nFQ-CSID\nUser Plane Inactivity Timer\n                                       C\nThis IE shall be present if it needs to be changed.\n-\nX\nX\nX\nUser Plane Inactivity Timer\nQuery URR Reference\n                                       O\nThis IE may be present if the Query URR IE is present or the QAURR flag is set to \"1\". When present, it shall contain a reference identifying the query request, which the UP function shall return in any usage report sent in response to the query.\nX\nX\nX\nX\nQuery URR Reference\nTrace Information\n                                       O\nWhen present, this IE shall contain the trace instructions to be applied by the UP function for this PFCP session.\nA Trace Information with a null length indicates that the trace session shall be deactivated. \nX\nX\nX\nX\nTrace Information\nRemove MAR\n                                       C\nWhen present, this IE shall contain the MAR Rule which is requested to be removed. See Table 7.5.4.15-1.\nSeveral IEs within the same IE type may be present to represent a list of MARs to remove.\n-\n-\n-\nX\nRemove MAR\nUpdate MAR\n                                       C\nThis IE shall be present if a MAR previously created for the PFCP session needs to be modified. See Table 7.5.4.16-1. \n\nSeveral IEs within the same IE type may be present to represent a list of MARs to update.\n-\n-\n-\nX\nUpdate MAR\nCreate MAR\n                                       C\nThis IE shall be present if the CP function requests the UP function to create a new MAR for a new PDR. See Table 7.5.2.8-1.\n\nSeveral IEs within the same IE type may be present to represent a list of MARs to create.\n-\n-\n-\nX\nCreate MAR\nNOTE 1:\tThe CP function may request the UP function to drop the packets currently buffered for the PFCP session when using extended buffering of downlink data packets, buffering is performed in the UP function and the DL Data Buffer Expiration Time is handled by the CP function. In this case, when the DL Data Buffer Expiration Time expires, the CP function shall send an PFCP Session Modification Request including the DROBU flag (to drop the downlink data packets currently buffered in the UP function) and updating the Apply Action within the FARs of this PFCP session to request the UP function to start buffering the downlink data packets with notifying the arrival of subsequent downlink data packets. See clause 5.9.3 of 3GPP TS 23.214 [2].\nNOTE 2:\tWhen changing the CP F-SEID of an established PFCP Session, the CP function shall be able to handle any incoming PFCP Session related messages sent by the UP function with the previous CP F-SEID for a duration at least longer than twice the PFCP retransmission timer (N1xT1).\nNOTE 3:\tThe QAURR (Query All URRs) flag in the PFCPSMReq-Flags IE and the Query URR IE are exclusive from each other in a PFCP Session Modification Request.\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Update PDR IE within PFCP Session Modification Request", "numbering": "7.5.4.2", "title_level": 3, "desc": "7.5.4.2\tUpdate PDR IE within PFCP Session Modification Request\nThe Update PDR grouped IE shall be encoded as shown in Figure 7.5.4.2-1.\nTable 7.5.4.2-1: Update PDR IE within PFCP Session Modification Request\nOctet 1 and 2\n\nUpdate PDR IE Type = 9 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nPDR ID\n                                       M\nThis IE shall uniquely identify the PDR among all the PDRs configured for that PFCP session.\nX\nX\nX\nX\nPDR ID\nOuter Header Removal \n                                       C\nThis IE shall be present if it needs to be changed.\nX\nX\n-\nX\nOuter Header Removal\nPrecedence\n                                       C\nThis IE shall be present if there is a change in the PDR's precedence to be applied by the UP function among all PDRs of the PFCP session, when looking for a PDR matching an incoming packet.\n-\nX\nX\nX\nPrecedence\nPDI\n                                       C\nThis IE shall be present if there is a change within the PDI against which incoming packets will be matched. When present, this IE shall replace the PDI previously stored in the UP function for this PDR. See Table 7.5.2.2-2.\nX\nX\nX\nX\nPDI\nFAR ID \n                                       C\nThis IE shall be present if it needs to be changed\nX\nX\nX\nX\nFAR ID\nURR ID \n                                       C\nThis IE shall be present if a measurement action shall be applied or no longer applied to packets matching this PDR.\nWhen present, this IE shall contain the list of all the URR IDs to be associated to the PDR.\nX\nX\nX\nX\nURR ID\nQER ID \n                                       C\nThis IE shall be present if a QoS enforcement action shall be applied or no longer applied to packets matching this PDR.\nWhen present, this IE shall contain the list of all the QER IDs to be associated to the PDR.\n-\nX\nX\nX\nQER ID\nActivate Predefined Rules \n                                       C\nThis IE shall be present if new Predefined Rule(s) needs to be activated for the PDR. When present this IE shall contain one Predefined Rules name.\nSeveral IEs with the same IE type may be present to represent multiple \"Activate Predefined Rules\" names.\n-\nX\nX\nX\nActivate Predefined Rules \nDeactivate Predefined Rules \n                                       C\nThis IE shall be present if Predefined Rule(s) needs to be deactivated for the PDR. When present this IE shall contain one Predefined Rules name.\nSeveral IEs with the same IE type may be present to represent multiple \"Activate Predefined Rules\" names.\n-\nX\nX\nX\nDeactivate Predefined Rules \nActivation Time\n                                       O\nThis IE may be present if the PDR activation time shall be changed. (NOTE 2)\n-\nX\nX\nX\nActivation Time\nDeactivation Time\n                                       O\nThis IE may be present if the PDR deactivation time shall be changed. (NOTE 2)\n-\nX\nX\nX\nDeactivation Time\nNOTE1:\tThe IEs which do not need to be modified shall not be included in the Update PDR IE. The UP function shall continue to behave according to the values previously received for IEs not present in the Update PDR IE.\nNOTE2:\tWhen the Activation Time and Deactivation Time are not present, the PDR shall keep its current activation status, either active or inactive.\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Update FAR IE within PFCP Session Modification Request", "numbering": "7.5.4.3", "title_level": 3, "desc": "7.5.4.3\tUpdate FAR IE within PFCP Session Modification Request\nThe Update FAR grouped IE shall be encoded as shown in Figure 7.5.4.3-1.\nTable 7.5.4.3-1: Update FAR IE within PFCP Session Modification Request \nOctet 1 and 2\n\nUpdate FAR IE Type = 10 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nFAR ID\n                                       M\nThis IE shall identify the FAR to be updated.\nX\nX\nX\nX\nFAR ID\nApply Action\n                                       C\nThis IE shall be present if it is changed.\nX\nX\nX\nX\nApply Action\nUpdate Forwarding parameters\n                                       C\nThis IE shall be present if it is changed.See table 7.5.4.3-2.\nX\nX\nX\nX\nUpdate Forwarding Parameters\nUpdate Duplicating Parameters \n                                       C\nThis IE shall be present if it is changed. See table 7.5.4.3-3.\nSeveral IEs with the same IE type may be present to request to duplicate the packets to different destinations.\nX\nX\n-\n-\nUpdate Duplicating Parameters\nBAR ID\n                                       C\nThis IE shall be present if the BAR ID associated to the FAR needs to be modified. \nX\n-\n-\nX\nBAR ID\n\nTable 7.5.4.3-2: Update Forwarding Parameters IE in FAR \nOctet 1 and 2\n\nUpdate Forwarding Parameters IE Type = 11 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nDestination Interface\n                                       C\nThis IE shall only be provided if it is changed. \nWhen present, it shall indicate the destination interface of the outgoing packet.\nX\nX\nX\nX\nDestination Interface\nNetwork instance\n                                       C\nThis IE shall only be provided if it is changed.\nX\nX\nX\nX\nNetwork Instance\nRedirect Information\n                                       C\nThis IE shall be present if the instructions regarding the redirection of traffic by the UP function need to be modified.\n-\nX\nX\nX\nRedirect Information\nOuter Header Creation \n                                       C\nThis IE shall only be provided if it is changed. See NOTE 1.\nX\nX\n-\nX\nOuter Header Creation\nTransport Level Marking \n                                       C\nThis IE shall only be provided if it is changed\nX\nX\n-\nX\nTransport Level Marking\nForwarding Policy \n                                       C\nThis IE shall only be provided if it is changed. See NOTE 1.\n-\nX\nX\nX\nForwarding Policy\nHeader Enrichment\n                                       C\nThis IE shall only be provided if it is changed\n-\nX\nX\nX\nHeader Enrichment\nPFCPSMReq-Flags\n                                       C\nThis IE shall be included if at least one of the flags is set to 1. \n-\tSNDEM (Send End Marker Packets): this IE shall be present if the CP function modifies the F-TEID of the downstream node in the Outer Header Creation IE and the CP function requests the UP function to construct and send GTP-U End Marker messages towards the old F-TEID of the downstream node. \nX\nX\n-\nX\nPFCPSMReq-Flags\nLinked Traffic Endpoint ID\n                                       C\nThis IE may be present, if it is changed and the UP function indicated support of the PDI optimization feature, (see clause 8.2.25). When present, it shall identify the Traffic Endpoint ID allocated for this PFCP session to receive the traffic in the reverse direction (see clause 5.2.3.1).\nX\nX\n-\nX\nTraffic Endpoint ID\nDestination Interface Type\n                                       C\nThis IE shall be present to indicate the 3GPP interface type of the destination interface, if the value has changed.\nX\nX\n-\nX\n3GPP Interface Type\nNOTE 1:\tIf the Outer Header Creation and Forwarding Policy are present, the UP function shall put the user plane packets in the user plane tunnel by applying Outer Header Creation, after enforcing the required Forwarding Policy.\n\nTable 7.5.4.3-3: Update Duplicating Parameters IE in FAR \nOctet 1 and 2\n\nUpdate Duplicating Parameters IE Type = 105 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nDestination Interface\n                                       C\nThis IE shall only be provided if it is changed. \nWhen present, it shall indicate the destination interface of the outgoing packet.\nX\nX\n-\n-\nDestination Interface\nOuter Header Creation \n                                       C\nThis IE shall only be provided if it is changed. See NOTE 1.\nX\nX\n-\n-\nOuter Header Creation\nTransport Level Marking \n                                       C\nThis IE shall only be provided if it is changed.\nX\nX\n-\n-\nTransport Level Marking\nForwarding Policy \n                                       C\nThis IE shall only be provided if it is changed. See NOTE 1.\n-\nX\n-\n-\nForwarding Policy\nNOTE 1:\tIf the Outer Header Creation and Forwarding Policy are present, the UP function shall put the user plane packets in the user plane tunnel by applying Outer Header Creation, after enforcing the required Forwarding Policy.\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Update URR IE within PFCP Session Modification Request", "numbering": "7.5.4.4", "title_level": 3, "desc": "7.5.4.4\tUpdate URR IE within PFCP Session Modification Request\nThe Update URR grouped IE shall be encoded as shown in Figure 7.5.4.4-1.\nTable 7.5.4.4-1: Update URR IE within PFCP Session Modification Request \nOctet 1 and 2\n\nUpdate URR IE Type = 13 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nURR ID\n                                       M\nThis IE shall uniquely identify the URR among all the URRs configured for that PFCP session\nX\nX\nX\nX\nURR ID\nMeasurement Method\n                                       C\nThis IE shall be present if the measurement method needs to be modified. \nWhen present, this IE shall indicate the method for measuring the network resources usage, i.e. whether the data volume, duration (i.e. time), combined volume/duration, or event shall be measured.\nX\nX\nX\nX\nMeasurement Method\nReporting Triggers\n                                       C\nThis IE shall be present if the reporting triggers needs to be modified. \nWhen present, this IE shall indicate the trigger(s) for reporting network resources usage to the CP function, e.g. periodic reporting or reporting upon reaching a threshold, or envelope closure.\nX\nX\nX\nX\nReporting Triggers\nMeasurement Period \n                                       C\nThis IE shall be present if the Measurement Period needs to be modified. \nWhen present, it shall indicate the period for generating and reporting usage reports. \nX\nX\nX\nX\nMeasurement Period\nVolume Threshold\n                                       C\nThis IE shall be present if the Volume Threshold needs to be modified. When present, it shall indicate the traffic volume value after which the UP function shall report network resources usage to the CP function for this URR.\nX\nX\nX\nX\nVolume Threshold\nVolume Quota\n                                       C\nThis IE shall be present if the Volume Quota needs to be modified. \nWhen present, it shall indicate the Volume Quota value.\n-\nX\nX\nX\nVolume Quota\nTime Threshold\n                                       C\nThis IE shall be present if the Time Threshold needs to be modified. When present, it shall indicate the time usage after which the UP function shall report network resources usage to the CP function for this URR.\nX\nX\nX\nX\nTime Threshold\nTime Quota\n                                       C\nThis IE shall be present if the Time Quota needs to be modified. \nWhen present, it shall indicate the Time Quota value.\n-\nX\nX\nX\nTime Quota\nEvent Threshold\n                                       C\nThis IE shall be present if Event Threshold needs to be modified.\nWhen present, it shall indicate the number of events after which the UP function shall report to the CP function for this URR.\n-\nX\nX\nX\nEvent Threshold\nEvent Quota\n                                       C\nThis IE shall be present if Event Quota needs to be modified.\nWhen present, it shall indicate the Event Quota value.\n-\nX\nX\nX\nEvent Quota\nQuota Holding Time\n                                       C\nThis IE shall be present if the Quota Holding Time needs to be modified. \nWhen present, it shall contain the duration of the Quota Holding Time.\n-\nX\nX\nX\nQuota Holding Time\nDropped DL Traffic Threshold\n                                       C\nThis IE shall be present if the Dropped DL Threshold needs to be modified. \nWhen present, it shall contain the threshold of the DL traffic being dropped.\nX\n-\n-\nX\nDropped DL Traffic Threshold\nMonitoring Time\n                                       C\nThis IE shall be present if the Monitoring Time needs to be modified. When present, this IE shall contain the time at which the UP function shall re-apply the volume or time threshold. \nX\nX\nX\nX\nMonitoring Time\nSubsequent Volume Threshold\n                                       C\nThis IE shall be present if the Subsequent Volume Threshold needs to be modified and volume-based measurement is used. \nWhen present, it shall indicate the traffic volume value after which the UP function shall report network resources usage to the CP function for this URR for the period after the Monitoring Time.\nX\nX\nX\nX\nSubsequent Volume Threshold\nSubsequent Time Threshold\n                                       C\nThis IE shall be present if the Subsequent Time Threshold needs to be modified. When present, it shall indicate the time usage value after which the UP function shall report network resources usage to the CP function for this URR for the period after the Monitoring Time.\nX\nX\nX\nX\nSubsequent Time Threshold\nSubsequent Volume Quota\n                                       C\nThis IE shall be present if the Subsequent Volume Quota needs to be modified. \nWhen present, it shall indicate the Volume Quota value which the UP function shall use for this URR for the period after the Monitoring Time.\n-\nX\nX\nX\nSubsequent Volume Quota\nSubsequent Time Quota\n                                       C\nThis IE shall be present if the Subsequent Time Quota needs to be modified. \nWhen present, it shall indicate the Time Quota value which the UP function shall use for this URR for the period after the Monitoring Time.\n-\nX\nX\nX\nSubsequent Time Quota\nSubsequent Event Threshold\n                                       O\nThis IE shall be present if the Subsequent Event Threshold needs to be modified. \nWhen present, it shall indicate the number of events after which the UP function shall report to the CP function for this URR for the period after the Monitoring Time.\n-\nX\nX\nX\n\n\n\n\nSubsequent Event Threshold\nSubsequent Event Quota\n                                       O\nThis IE shall be present if the Subsequent Event Quota needs to be modified. \nWhen present, it shall indicate the Event Quota value which the UP function shall use for this URR for the period after the Monitoring Time.\n-\nX\nX\nX\nSubsequent Event Quota\nInactivity Detection Time\n                                       C\nThis IE shall be present if the Inactivity Detection Time needs to be modified. \nWhen present, it shall indicate the duration of the inactivity period after which time measurement needs to be suspended when no packets are received during this inactivity period. \n-\nX\nX\nX\nInactivity Detection Time\nLinked URR ID \n                                       C\nThis IE shall be present if linked usage reporting is required. When present, this IE shall contain the linked URR ID which is related with this URR (see clause 5.2.2.4). \n\nSeveral IEs with the same IE type may be present to represent multiple linked URRs which are related with this URR.\n-\nX\nX\nX\nLinked URR ID \nMeasurement Information\n                                       C\nThis IE shall be included if any of the following flag is set to 1.\nApplicable flags are:\n-\tInactive Measurement Flag: this flag shall be set to 1 if the measurement shall be paused (inactive). The measurement shall be performed (active) if the bit is set to 0 or if the Measurement Information IE is not present in the Update URR IE. \n-\tReduced Application Detection Information Flag: this flag may be set to 1, if the Reporting Triggers request to report the start or stop of application, to request the UP function to only report the Application ID in the Application Detection Information, e.g. for envelope reporting. \n-\tImmediate Start Time Metering Flag: this flag may be set to 1 if time-based measurement is used and the UP function is requested to start the time metering immediately at receiving the flag.\n\n\n\n-\n\n\n\nX\n\n\n\n-\n\n\n\nX\nMeasurement Information\nTime Quota Mechanism\n                                       C\nThis IE shall be present if time-based measurement based on CTP or DTP needs to be modified.\n-\nX\n-\n-\nTime Quota Mechanism\nAggregated URRs\n                                       C\nThis IE shall be included if the Aggregated URRs IE needs to be modified. See Table 7.5.2.4-2.\n\nSeveral IEs with the same IE type may be present to provision multiple aggregated URRs.\n\nWhen present, this IE shall provide the complete list of the aggregated URRs.\n-\nX\n-\n\nAggregated URRs\nFAR ID for Quota Action\n                                       C\nThis IE shall be present if the FAR ID for Quota Action IE needs to be modified. This IE may be present if the Volume Quota IE or the Time Quota IE or Event Quota IE is newly provisioned in the URR and the UP Function indicated support of the Quota Action. \nWhen present, it shall contain the identifier of the substitute FAR the UP function shall apply, for the traffic associated to this URR, when exhausting any of these quotas. See NOTE 1. \n-\nX\nX\nX\nFAR ID\nEthernet Inactivity Timer\n                                       C\nThis IE shall be present if the Ethernet Inactivity Timer needs to be modified. When present, it shall contain the duration of the Ethernet inactivity period.\n-\n-\n-\nX\nEthernet Inactivity Timer\nAdditional Monitoring Time\n                                       O\nThis IE shall be present if the additional Monitoring Time needs to be modified. When present, this IE shall contain the time at which the UP function shall re-apply the volume or time or event threshold/quota. See Table 7.5.2.4-3.\nThe CP function shall provide the full set of Additional Monitoring Times IE(s).  The UP function shall replace any Additional Monitoring Times IE(s) provisioned earlier by the new set of received IE(s).\nX\nX\nX\nX\nAdditional Monitoring Time\nNOTE 1:\tThe substitute FAR used when exhausting a Volume Quota or Time Quota may be set to drop the packets or redirect the traffic towards a redirect destination as specified in clause 5.4.7.\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Update QER IE within PFCP Session Modification Request", "numbering": "7.5.4.5", "title_level": 3, "desc": "7.5.4.5\tUpdate QER IE within PFCP Session Modification Request\nThe Update QER grouped IE shall be encoded as shown in Figure 7.5.4.5-1.\nTable 7.5.4.5-1: Update QER IE within PFCP Session Modification Request \nOctet 1 and 2\n\nUpdate QER IE Type = 14 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nQER ID\n                                       M\nThis IE shall uniquely identify the QER among all the QRs configured for that PFCP session\n-\nX\nX\nX\nQER ID\nQER Correlation ID\n                                       C\nThis IE shall be present if the QER correlation ID in this QER needs to be modified.\nSee NOTE 1.\n-\nX\n-\nX\nQER Correlation ID\nGate Status\n                                       C\nThis IE shall be present if the Gate Status needs to be modified. When present, it shall indicate whether the packets are allowed to be forwarded (the gate is open) or shall be discarded (the gate is closed) in the uplink and/or downlink directions.\nSee NOTE 1.\n-\nX\nX\nX\nGate Status\nMaximum Bitrate\n                                       C\nThis IE shall be present if an MBR enforcement action applied to packets matching this PDR need to be modified. \nWhen present, this IE shall indicate the uplink and/or downlink maximum bit rate to be enforced for packets matching the PDR.\n\nFor EPC, this IE may be set to the value of:\n  -\tthe APN-AMBR, for a QER that is referenced by all the PDRs of the non-GBR bearers of a PDN connection;\n  -\tthe TDF session MBR, for a QER that is referenced by all the PDRs of a TDF session;\n  -\tthe bearer MBR, for a QER that is referenced by all the PDRs of a bearer;\n  -\tthe SDF MBR, for a QER that is referenced by all the PDRs of a SDF.\n\nFor 5GC, this IE may be set to the value of:\n  -\tthe Session-AMBR, for a QER that is referenced by all the PDRs of the non-GBR QoS flows of a PDU session;\n  -\tthe QoS Flow MBR, for a QER that is referenced by all the PDRs of a QoS Flow;\n  -\tthe SDF MBR, for a QER that is referenced by all the PDRs of a SDF.\n  \nSee NOTE 1.\n-\nX\nX\nX\nMBR\nGuaranteed Bitrate\n                                       C\nThis IE shall be present if a GBR authorization to packets matching this PDR needs to be modified. When present, this IE shall indicate the authorized uplink and/or downlink guaranteed bit rate.\n\nThis IE may be set to the value of: \n  -\tthe aggregate GBR, for a QER that is referenced by all the PDRs of a GBR bearer;\n  -\tthe QoS Flow GBR, for a QER that is referenced by all the PDRs of a QoS Flow (for 5GC);\n  -\tthe SDF GBR, for a QER that is referenced by all the PDRs of a SDF.\nSee NOTE 1.\n-\nX\nX\nX\nGBR\nPacket Rate\n                                       C\nThis IE shall be present if a Packet Rate enforcement action (in terms of number of packets per time interval) need to be modified for packets matching this PDR. \n-\nX\n-\n\nPacket Rate\nDL Flow Level Marking\n                                       C\nThis IE shall be set if the DL Flow Level Marking IE needs to be modified.\nSee NOTE 1.\n-\nX\nX\n-\nDL Flow Level Marking\nQoS flow identifier\n                                       C\nThis IE shall be present if it needs to be modified.\n-\n-\n-\nX\nQFI\nReflective QoS\n                                       C\nThis IE shall be present if it needs to be modified.\n-\n-\n-\nX\nRQI\nPaging Policy Indicator\n                                       C\nThis IE shall be present if it needs to be modified.\n-\n-\n-\nX\nPaging Policy Indicator\nAveraging Window\n                                       O\nThis IE may be present if the UP function is required to modify the Averaging Window. (NOTE 2)\n\n-\n-\n-\nX\nAveraging Window\nNOTE 1:\tThe IEs which do not need to be modified shall not be included in the Update QER IE. The UP function shall continue to behave according to the values previously received for IEs not present in the Update QER IE.\nNOTE 2:\tAs 5QI is not signalled over N4, one default averaging window shall be pre-configured in the UPF.\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Remove PDR IE within PFCP Session Modification Request", "numbering": "7.5.4.6", "title_level": 3, "desc": "7.5.4.6\tRemove PDR IE within PFCP Session Modification Request\nThe Remove PDR grouped IE shall be encoded as shown in Figure 7.5.4.6-1.\nTable 7.5.4.6-1: Remove PDR IE within PFCP Session Modification Request \nOctet 1 and 2\n\nRemove PDR IE Type = 15 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nPDR ID\n                                       M\nThis IE shall identify  the PDR to be deleted.\n\nX\nX\nX\nX\nPDR ID\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Remove FAR IE within PFCP Session Modification Request", "numbering": "7.5.4.7", "title_level": 3, "desc": "7.5.4.7\tRemove FAR IE within PFCP Session Modification Request\nThe Remove FAR grouped IE shall be encoded as shown in Figure 7.5.4.7-1.\nTable 7.5.4.7-1: Remove FAR IE within PFCP Session Modification Request \nOctet 1 and 2\n\nRemove FAR IE Type = 16 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nFAR ID\n                                       M\nThis IE shall identify the FAR to be deleted.\nX\nX\nX\nX\nFAR ID\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Remove URR IE within PFCP Session Modification Request", "numbering": "7.5.4.8", "title_level": 3, "desc": "7.5.4.8\tRemove URR IE within PFCP Session Modification Request\nThe Remove URR grouped IE shall be encoded as shown in Figure 7.5.4.7-1.\nTable 7.5.4.8-1: Remove URR IE within PFCP Session Modification Request \nOctet 1 and 2\n\nRemove URR IE Type = 17 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nURR ID\n                                       M\nThis IE shall identify the URR to be deleted.\nX\nX\nX\nX\nURR ID\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Remove QER IE PFCP Session Modification Request", "numbering": "7.5.4.9", "title_level": 3, "desc": "7.5.4.9\tRemove QER IE PFCP Session Modification Request\nThe Remove QER grouped IE shall be encoded as shown in Figure 7.5.4.9-1.\nTable 7.5.4.9-1: Remove QER IE PFCP Session Modification Request \nOctet 1 and 2\n\nRemove QER IE Type = 18 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nQER ID\n                                       M\nThis IE shall identify the QER to be deleted.\n-\nX\nX\nX\nQER ID\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Query URR IE within PFCP Session Modification Request", "numbering": "7.5.4.10", "title_level": 3, "desc": "7.5.4.10\tQuery URR IE within PFCP Session Modification Request\nThe Query URR grouped IE shall be encoded as shown in Figure 7.5.4.10-1.\nTable 7.5.4.10-1: Query URR IE within PFCP Session Modification Request \nOctet 1 and 2\n\nQuery URR IE Type = 77 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nURR ID\n                                       M\nThis IE shall identify the URR being queried.\nX\nX\nX\nX\nURR ID\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Update BAR IE within PFCP Session Modification Request", "numbering": "7.5.4.11", "title_level": 3, "desc": "7.5.4.11\tUpdate BAR IE within PFCP Session Modification Request\nThe Update BAR grouped IE shall be encoded as shown in Figure 7.5.4.11-1.\nTable 7.5.4.11-1: Update BAR IE within PFCP Session Modification Request \nOctet 1 and 2\n\nUpdate BAR IE Type = 86 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nBAR ID\n                                       M\nThis IE shall identify the BAR Rule to be modified.\nX\n-\n-\nX\nBAR ID\nDownlink Data Notification Delay\n                                       C\nThis IE shall be present if the UP function indicated support of the Downlink Data Notification Delay parameter (see clause 8.2.28) and the Downlink Data Notification Delay needs to be modified.\nWhen present, it shall contain the delay the UP function shall apply between receiving a downlink data packet and notifying the CP function about it, when the Apply Action parameter requests to buffer the packets and notify the CP function.\nX\n-\n-\nX\nDownlink Data Notification Delay\nSuggested Buffering Packets Count\n                                       C\nThis IE may be present if the UP Function indicated support of the the feature UDBC.\n\nWhen present, it shall contain the number of packets that are suggested to be buffered when the Apply Action parameter requests to buffer the packets. The packets that exceed the limit shall be discarded.\n\nX\nX\nX\nSuggested Buffering Packets Count\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Remove BAR IE within PFCP Session Modification Request", "numbering": "7.5.4.12", "title_level": 3, "desc": "7.5.4.12\tRemove BAR IE within PFCP Session Modification Request\nThe Remove BAR grouped IE shall be encoded as shown in Figure 7.5.4.12-1.\nTable 7.5.4.12-1: Remove BAR IE within PFCP Session Modification Request \nOctet 1 and 2\n\nRemove BAR IE Type = 87 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nBAR ID\n                                       M\nThis IE shall identify the BAR to be deleted.\nX\n-\n-\nX\nBAR ID\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Update Traffic Endpoint IE within Sx Session Modification Request", "numbering": "7.5.4.13", "title_level": 3, "desc": "7.5.4.13\tUpdate Traffic Endpoint IE within Sx Session Modification Request\nThe Update Traffic Endpoint grouped IE shall be encoded as shown in Figure 7.5.4.13-1.\nTable 7.5.4.13-1: Update Traffic Endpoint IE within Sx Session Modification Request\nOctet 1 and 2\nUpdate Traffic Endpoint Type = 129 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nTraffic Endpoint ID\n                                       M\nThis IE shall uniquely identify the Traffic Endpoint to be modified for that Sx session.\nX\nX\nX\nX\nTraffic Endpoint ID\nLocal F-TEID \n                                       C\nThis IE shall be present if it needs to be changed. \nThe CP function shall set the CHOOSE (CH) bit to 1 if the UP function supports the allocation of F-TEID and the CP function requests the UP function to assign a local F-TEID to the PDR.\nSee NOTE.\nX\n-\n-\nX\nF-TEID\nNetwork Instance\n                                       O\nIf present, this IE shall identify the Network instance to match for the incoming packet. See NOTE.\nX\nX\nX\nX\nNetwork Instance\nUE IP address \n                                       C\nThis IE shall be present if it needs to be changed.\nSee NOTE.\n-\nX\nX\nX\nUE IP address\nFramed-Route\n                                       C\nThis IE shall be present for a DL PDR if the UPF indicated support of Framed Routing (see clause 8.2.25) and it needs to be changed. If present, this IE shall describe a framed route. \nSeveral IEs with the same IE type may be present to provision a list of framed routes. \n-\nX\n-\nX\nFramed-Route\nFramed-Routing\n                                       C\nThis IE shall be present for a DL PDR if the UPF indicated support of Framed Routing (see clause 8.2.25) and it needs to be changed. If present, this IE shall describe the framed routing associated to a framed route. \n-\nX\n-\nX\nFramed-Routing\nFramed-IPv6-Route\n                                       C\nThis IE shall be present for a DL PDR if the UPF indicated support of Framed Routing (see clause 8.2.25) and it needs to be changed. If present, this IE shall describe a framed IPv6 route. \nSeveral IEs with the same IE type may be present to provision a list of framed IPv6 routes. \n-\nX\n-\nX\nFramed-IPv6-Route\nNOTE:\tThe IEs which do not need to be modified shall not be included in the Update Traffic Endpoint IE. The UP function shall continue to behave according to the values previously received for IEs not present in the Update Traffic Endpoint IE. F-TEID may be changed if the SGW-C has received the \"Change F-TEID support Indication\" over the S11/S4 interface (for an IDLE state UE initiated TAU/RAU procedure to allow the SGW changing the GTP-U F-TEID).\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Remove Traffic Endpoint IE within Sx Session Modification Request", "numbering": "7.5.4.14", "title_level": 3, "desc": "7.5.4.14\tRemove Traffic Endpoint IE within Sx Session Modification Request\nThe Remove Traffic Endpoint grouped IE shall be encoded as shown in Figure 7.5.4.14-1.\nTable 7.5.4.14-1: Remove Traffic Endpoint IE within Sx Session Modification Request\nOctet 1 and 2\n\nRemove Traffic Endpoint IE Type = 130 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nTraffic Endpoint ID\n                                       M\nThis IE shall identify the Traffic Endpoint to be deleted.\n\nX\nX\nX\nX\nTraffic Endpoint ID\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Remove MAR IE within PFCP Session Modification Request", "numbering": "7.5.4.15", "title_level": 3, "desc": "7.5.4.15\tRemove MAR IE within PFCP Session Modification Request\nThe Remove MAR grouped IE shall be encoded as shown in Figure 7.5.4.15-1.\nTable 7.5.4.15-1: Remove MAR IE within PFCP Session Modification Request \nOctet 1 and 2\n\nRemove MAR IE Type = 168 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nMAR ID\n                                       M\nThis IE shall identify the MAR to be deleted.\n-\n-\n-\nX\nMAR ID\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Update MAR IE within PFCP Session Modification Request", "numbering": "7.5.4.16", "title_level": 3, "desc": "7.5.4.16\tUpdate MAR IE within PFCP Session Modification Request\nThe Update MAR grouped IE shall be encoded as shown in Figure 7.5.4.16-1.\nTable 7.5.4.z-1: Update MAR IE within PFCP Session Modification Request \nOctet 1 and 2\n\nUpdate MAR IE Type = 169 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nMAR ID\n                                       M\nThis IE shall identify the MAR to be updated.\n-\n-\n-\nX\nMAR ID\nSteering Functionality\n                                       C\nThis IE shall be present if it is changed.\n-\n-\n-\nX\nSteering Functionality\nSteering Mode\n                                       C\nThis IE shall be present if it is changed.\n\n-\n-\n-\nX\nSteering Mode\nUpdate Access Forwarding Action Information 1 \n                                       C\nThis IE shall be present if the Access Forwarding Action Information 1 was provisioned previously and if any of IEs is to be changed.\n\nThis IE shall also be present to remove Access Forwarding Action Information 1 that was provisioned previously if the UE deregisters from the corresponding access. This shall be done by including this IE with a null length.\n-\n-\n-\nX\nUpdate Access Forwarding Action Information 1 \nUpdate Access Forwarding Action Information 2 \n                                       C\nThis IE shall be present if the Access Forwarding Action Information 2 was provisioned previously and if any of IEs is to be changed. \n\nThis IE shall also be present to remove Access Forwarding Action Information 2 that was provisioned previously if the UE deregisters from the corresponding access. This shall be done by including this IE with a null length.\n\n-\n-\n-\nX\nUpdate Access Forwarding Action Information 2 \nAccess Forwarding Action Information 1 \n                                       C\nThis IE shall be present to provision access specific (non-3gpp or 3gpp) forwarding action information when another access is added, i.e. when the UE is registered in both non-3GPP and 3GPP accesses. \n\nSee Table 7.5.2.8-2. \n-\n-\n-\nX\nAccess Forwarding Action Information 1 \nAccess Forwarding Action Information 2 \n                                       C\nThis IE shall be present to provision access specific (non-3gpp or 3gpp) forwarding action information when another access is added, i.e. when the UE is registered in both non-3GPP and 3GPP accesses. \nSee Table 7.5.2.8-3. \n-\n-\n-\nX\nAccess Forwarding Action Information 2 \n\nTable 7.5.4.16-2: Update Access Forwarding Action Information 1 IE in Update MAR IE \nOctet 1 and 2\n\nUpdate Access Forwarding Action Information 1 IE Type = 175 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nFAR ID\n                                       C\nThis IE shall be present if it is changed. \n-\n-\n-\nX\nFAR ID\nWeight\n                                       C\nThis IE shall be present if it is changed.\n-\n-\n-\nX\nWeight\nPriority\n                                       C\nThis IE shall be present if it is changed.\n\n-\n-\n-\nX\nPriority\nURR ID \n                                       C\nThis IE shall be present if a measurement action shall be applied or no longer applied to packets for this access.\n\nWhen present, this IE shall contain the list of all the URR IDs to be associated to this access.\n\n-\n-\n-\nX\nURR ID\n\nTable 7.5.4.z-3: Update Access Forwarding Action Information 2 IE in Update MAR IE \nOctet 1 and 2\n\nUpdate Access Forwarding Action Information 2 IE Type = 176 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nSame IEs and requirements as defined in Table 7.5.4.16-2\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Session Modification Response", "numbering": "7.5.5", "title_level": 2, "desc": "7.5.5\tPFCP Session Modification Response \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "7.5.5.1", "title_level": 3, "desc": "7.5.5.1\tGeneral\nThe PFCP Session Modification Response shall be sent over the Sxa, Sxb, Sxc and N4 interface by the UP function to the CP function as a reply to the PFCP Session Modification Request.\nTable 7.5.5.1-1: Information Elements in a PFCP Session Modification Response\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nCause\n                                       M\nThis IE shall indicate the acceptance or the rejection of the corresponding request message.\nX\nX\nX\nX\nCause\nOffending IE\n                                       C\nThis IE shall be included if the rejection is due to a conditional or mandatory IE missing or faulty.\nX\nX\nX\nX\nOffending IE\nCreated PDR\n                                       C\nThis IE shall be present if the cause is set to \"success\", new PDR(s) were requested to be created and the UP function was requested to allocate the local F-TEID for the PDR(s).\nWhen present, this IE shall contain the PDR information associated to the PFCP session. \nSee Table 7.5.3.2-1.\nX\nX\n-\nX\nCreated PDR\nLoad Control Information\n                                       O\nThe UP function may include this IE if it supports the load control feature and the feature is activated in the network.\nSee Table 7.5.3.3-1.\nX\nX\nX\nX\nLoad Control Information\nOverload Control Information\n                                       O\nDuring an overload condition, the UP function may include this IE if it supports the overload control feature and the feature is activated in the network.\nX\nX\nX\nX\nOverload Control Information\nUsage Report\n                                       C\nThis IE shall be present if:\n\t- the Query URR IE was present or the QAURR flag was set to \"1\" in the PFCP Session Modification Request, \n\t- traffic usage measurements for that URR are available at the UP function, and\n\t- the UP function decides to return some or all of the requested usage reports in the PFCP Session Modification Response. \n\nThis IE shall be also present if:\n\t- a URR or the last PDR associated to a URR has been removed, \n\t- non-null traffic usage measurements for that URR are available in the UP function, and\n\t- the UP function decides to return some or all of the related usage reports in the PFCP Session Modification Response (see clause 5.2.2.3.1).\n\nSeveral IEs within the same IE type may be present to represent a list of Usage Reports.\nX\nX\nX\nX\nUsage Report\nFailed Rule ID\n                                       C\nThis IE shall be included if the Cause IE indicates a rejection due to a rule creation or modification failure.\nX\nX\nX\nX\nFailed Rule ID\nAdditional Usage Reports Information\n                                       C\nThis IE shall be included if the Query URR IE was present or the QAURR flag was set to \"1\" in the PFCP Session Modification Request, and usage reports need to be sent in additional PFCP Session Report Request messages (see clause 5.2.2.3.1).\nWhen present, this IE shall either indicate that additional usage reports will follow, or indicate the total number of usage reports that need to be sent in PFCP Session Report Request messages.   \nX\nX\nX\nX\nAdditional Usage Reports Information\nCreated/Updated Traffic Endpoint\n                                       C\nThis IE shall be present if the cause is set to \"success\", Traffic Endpoint(s) were requested to be created or updated, and the UP function was requested to allocate the local F-TEID for the Traffic Endpoint(s).\nWhen present, this IE shall contain the Traffic Endpoint information associated to the PFCP session. \nSee Table 7.5.3.5-1.\nX\nX\n-\nX\nCreated Traffic Endpoint\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Usage Report IE within PFCP Session Modification Response", "numbering": "7.5.5.2", "title_level": 3, "desc": "7.5.5.2\tUsage Report IE within PFCP Session Modification Response\nThe Usage Report grouped IE shall be encoded as shown in Figure 7.5.5.2-1.\nTable 7.5.5.2-1: Usage Report IE within PFCP Session Modification Response \nOctet 1 and 2\n\nUsage Report IE Type = 78 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nURR ID\n                                       M\nThis IE shall identify the URR for which usage is reported.\nX\nX\nX\nX\nURR ID\nUR-SEQN\n                                       M\nThis IE shall uniquely identify the Usage Report for the URR (see clause 5.2.2.3).\nX\nX\nX\nX\nUR-SEQN\nUsage Report Trigger\n                                       M\nThis IE shall identify the trigger for this report.\nX\nX\nX\nX\nUsage Report Trigger\nStart Time\n                                       C\nThis IE shall be present, except if the Usage Report Trigger indicates 'Start of Traffic', 'Stop of Traffic' or 'MAC Addresses Reporting'.\nWhen present, this IE shall provide the timestamp when the collection of the information in this report was started.\nX\nX\nX\nX\nStart Time\nEnd Time\n                                       C\nThis IE shall be present, except if the Usage Report Trigger indicates 'Start of Traffic', 'Stop of Traffic' or 'MAC Addresses Reporting'.\nWhen present, this IE shall provide the timestamp when the collection of the information in this report was generated.\nX\nX\nX\nX\nEnd Time\nVolume Measurement\n                                       C\nThis IE shall be present if a volume measurement needs to be reported.\nX\nX\nX\nX\nVolume Measurement\nDuration Measurement\n                                       C\nThis IE shall be present if a duration measurement needs to be reported.\nX\nX\nX\nX\nDuration Measurement\nTime of First Packet\n                                       C\nThis IE shall be present if available for this URR.\n-\nX\nX\nX\nTime of First Packet\nTime of Last Packet\n                                       C\nThis IE shall be present if available for this URR.\n-\nX\nX\nX\nTime of Last Packet\nUsage Information \n                                       C\nThis IE shall be present if the UP function reports Usage Reports before and after a Monitoring Time or before and after QoS enforcement. When present, it shall indicate whether the usage is reported for the period before or after that time, or before or after QoS enforcement.\nX\nX\nX\nX\nUsage Information\nQuery URR Reference\n                                       C\nThis IE shall be present if this usage report is sent as a result of a query URR received in an PFCP Session Modification Request and the Query URR Reference IE was present in the PFCP Session Modification Request.\nWhen present, it shall be set to the Query URR Reference value received in the PFCP Session Modification Request. \nX\nX\nX\nX\nQuery URR Reference\nEthernet Traffic Information\n                                       C\n This IE shall be present if Ethernet Traffic Information needs to be reported. \n-\n-\n-\nX\nEthernet Traffic Information\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Session Deletion Request", "numbering": "7.5.6", "title_level": 2, "desc": "7.5.6\tPFCP Session Deletion Request \nThe PFCP Session Deletion Request shall be sent over the Sxa, Sxb, Sxc and N4 interface by the CP function to request the UP function to delete the PFCP session.\nTable 7.5.6-1: Information Elements in a PFCP Session Deletion Request\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\n\n                                       \n\n\n\n\n\n\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Session Deletion Response", "numbering": "7.5.7", "title_level": 2, "desc": "7.5.7\tPFCP Session Deletion Response \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "7.5.7.1", "title_level": 3, "desc": "7.5.7.1\tGeneral\nThe PFCP Session Deletion Response shall be sent over the Sxa, Sxb, Sxc and N4 interface by the UP function to the CP function as a reply to the PFCP Session Deletion Request.\nTable 7.5.7.1-1: Information Elements in a PFCP Session Deletion Response\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nCause\n                                       M\nThis IE shall indicate the acceptance or the rejection of the corresponding request message.\nX\nX\nX\nX\nCause\nOffending IE\n                                       C\nThis IE shall be included if the rejection is due to an conditional or mandatory IE missing or faulty.\nX\nX\nX\nX\nOffending IE\nLoad Control Information\n                                       O\nThe UP function may include this IE if it supports the load control feature and the feature is activated in the network.\nSee Table 7.5.3.3-1.\nX\nX\nX\nX\nLoad Control Information\nOverload Control Information\n                                       O\nDuring an overload condition, the UP function may include this IE if it supports the overload control feature and the feature is activated in the network.\nSee Table 7.5.3.4-1.\nX\nX\nX\nX\nOverload Control Information\nUsage Report\n                                       C\nThis IE shall be present if a URR had been provisioned in the UP function for the PFCP session being deleted and traffic usage measurements for that URR are available at the UP function. \nSeveral IEs within the same IE type may be present to represent a list of Usage Reports.\nX\nX\nX\nX\nUsage Report\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Usage Report IE within PFCP Session Deletion Response", "numbering": "7.5.7.2", "title_level": 3, "desc": "7.5.7.2\tUsage Report IE within PFCP Session Deletion Response\nThe Usage Report grouped IE shall be encoded as shown in Figure 7.5.7.2-1.\nTable 7.5.7.2-1: Usage Report IE within PFCP Session Deletion Response \nOctet 1 and 2\n\nUsage Report IE Type = 79 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nURR ID\n                                       M\nThis IE shall identify the URR for which usage is reported.\nX\nX\nX\nX\nURR ID\nUR-SEQN\n                                       M\nThis IE shall uniquely identify the Usage Report for the URR (see clause 5.2.2.3).\nX\nX\nX\nX\nUR-SEQN\nUsage Report Trigger\n                                       M\nThis IE shall identify the trigger for this report.\nX\nX\nX\nX\nUsage Report Trigger\nStart Time\n                                       C\nThis IE shall be present, except if the Usage Report Trigger indicates 'Start of Traffic', 'Stop of Traffic' or 'MAC Addresses Reporting'.\nWhen present, this IE shall provide the timestamp when the collection of the information in this report was started.\nX\nX\nX\nX\nStart Time\nEnd Time\n                                       C\nThis IE shall be present, except if the Usage Report Trigger indicates 'Start of Traffic', 'Stop of Traffic' or 'MAC Addresses Reporting'.\nWhen present, this IE shall provide the timestamp when the collection of the information in this report was generated.\nX\nX\nX\nX\nEnd Time\nVolume Measurement\n                                       C\nThis IE shall be present if a volume needs to be reported.\nX\nX\nX\nX\nVolume Measurement\nDuration Measurement\n                                       C\nThis IE shall be present if a duration measurement needs to be reported.\nX\nX\nX\nX\nDuration Measurement\nTime of First Packet\n                                       C\nThis IE shall be present if available for this URR.\n-\nX\nX\nX\nTime of First Packet\nTime of Last Packet\n                                       C\nThis IE shall be present if available for this URR.\n-\nX\nX\nX\nTime of Last Packet\nUsage Information \n                                       C\nThis IE shall be present if the UP function reports Usage Reports before and after a Monitoring Time, or before and after QoS enforcement. When present, it shall indicate whether the usage is reported for the period before or after that time, or before or after QoS enforcement.\nX\nX\nX\nX\nUsage Information\nEthernet Traffic Information\n                                       C\n This IE shall be present if Ethernet Traffic Information needs to be reported. See Table 7.5.8.3-3.\n-\n-\n-\nX\nEthernet Traffic Information\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Session Report Request", "numbering": "7.5.8", "title_level": 2, "desc": "7.5.8\tPFCP Session Report Request \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "7.5.8.1", "title_level": 3, "desc": "7.5.8.1\tGeneral\nThe PFCP Session Report Request shall be sent over the Sxa, Sxb, Sxc and N4 interface by the UP function to report information related to an PFCP session to the CP function.\nTable 7.5.8-1: Information Elements in a PFCP Session Report Request\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nReport Type\n                                       M\nThis IE shall indicate the type of the report.\nX\nX\nX\nX\nReport Type\nDownlink Data Report\n                                       C\nThis IE shall be present if the Report Type indicates a Downlink Data Report. \nX\n-\n-\nX\nDownlink Data Report\nUsage Report\n                                       C\nThis IE shall be present if the Report Type indicates a Usage Report. \nSeveral IEs within the same IE type may be present to represent a list of Usage Reports.\nX\nX\nX\nX\nUsage Report\nError Indication Report\n                                       C\nThis IE shall be present if the Report Type indicates an Error Indication Report. \nX\nX\n-\nX\nError Indication Report\nLoad Control Information\n                                       O\nThe UP function may include this IE if it supports the load control feature and the feature is activated in the network.\nSee Table 7.5.3.3-1.\nX\nX\nX\nX\nLoad Control Information\nOverload Control Information\n                                       O\nDuring an overload condition, the UP function may include this IE if it supports the overload control feature and the feature is activated in the network.\nSee Table 7.5.3.4-1.\nX\nX\nX\nX\nOverload Control Information\nAdditional Usage Reports Information\n                                       C\nThis IE shall be included in one additional PFCP Session Report Request message, if the PFCP Session Modification Response indicated that more reports would follow (i.e. if the AURI flag was set to 1) (see clause 5.2.2.3.1).\nWhen present, this IE shall indicate the total number of usage reports that need to be sent in PFCP Session Report Request messages.   \nX\nX\nX\nX\nAdditional Usage Reports Information\nPFCPSRReq-Flags\n                                       C\nThis IE shall be included if at least one of the flags is set to 1. \n       -\tPSDBU (PFCP Session Deleted By the UP function): if both the CP function and UP function support the EPFAR feature, the UP function may set this flag if the UP function needs to delete the PFCP session, e.g. to report all remaining non-zero usage reports for all URRs in the PFCP Session and the PFCP session is being deleted locally in the UP function.\n\n\n\nX\n\n\n\n\n\n\n\nX\n\n\n\n\n\n\n\nX\n\n\n\n\n\n\n\nX\n\n\n\n\n\nPFCPSRReq-Flags\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Downlink Data Report IE within PFCP Session Report Request", "numbering": "7.5.8.2", "title_level": 3, "desc": "7.5.8.2\tDownlink Data Report IE within PFCP Session Report Request\nThe Downlink Data Report grouped IE shall be encoded as shown in Figure 7.5.8.2-1.\nTable 7.5.8.2-1: Downlink Data Report IE within PFCP Session Report Request \nOctet 1 and 2\n\nDownlink Data Report IE Type = 83 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nPDR ID\n                                       M\nThis IE shall identify the PDR for which downlink data packets have been received at the UP function. \n\nMore than one IE with this type may be included to represent multiple PDRs having received downlink data packets.\nX\n-\n-\nX\nPDR ID\nDownlink Data Service Information\n                                       C\nThis IE shall be included for an PFCP session with an IP PDN type, if the UP function supports the Paging Policy Differentiation feature (see clause 4.9 of 3GPP TS 23.401 [14]) and clause 5.4.3.2 of 3GPP TS 23.501 [28]). \nWhen present, for each PDR and for each packet that triggers a Downlink Data Notification, the UP function shall copy, into the Paging Policy Indication value within this IE, the value of the DSCP in TOS (IPv4) or TC (IPv6) information received in the IP payload of the GTP-U packet from the PGW (see IETF RFC 2474 [13]).\n\nFor 5GC, this IE shall also be included over N4, for each PDR and for each packet that triggers a Downlink Data Notification, if the QFI of the downlink data packet is available.\n\nOne IE with this type shall be included per PDR ID reported in the message. When multiple PDR ID IEs are present in the message, the Downlink Data Service Information IEs shall be reported according to the order of the PDR ID IEs.\nX\n-\n-\nX\nDownlink Data Service Information\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Usage Report IE within PFCP Session Report Request", "numbering": "7.5.8.3", "title_level": 3, "desc": "7.5.8.3\tUsage Report IE within PFCP Session Report Request\nThe Usage Report grouped IE shall be encoded as shown in Figure 7.5.8.3-1.\nTable 7.5.8.3-1: Usage Report IE within PFCP Session Report Request \nOctet 1 and 2\n\nUsage Report IE Type = 80 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nURR ID\n                                       M\nThis IE shall identify the URR for which usage is reported.\nX\nX\nX\nX\nURR ID\nUR-SEQN\n                                       M\nThis IE shall uniquely identify the Usage Report for the URR (see clause 5.2.2.3).\nX\nX\nX\nX\nUR-SEQN\nUsage Report Trigger\n                                       M\nThis IE shall identify the trigger for this report.\nX\nX\nX\nX\nUsage Report Trigger\nStart Time\n                                       C\nThis IE shall be present, except if the Usage Report Trigger indicates 'Start of Traffic', 'Stop of Traffic' or 'MAC Addresses Reporting'.\nWhen present, this IE shall provide the timestamp when the collection of the information in this report was started.\nX\nX\nX\nX\nStart Time\nEnd Time\n                                       C\nThis IE shall be present, except if the Usage Report Trigger indicates 'Start of Traffic', 'Stop of Traffic' or ' MAC Addresses Reporting'.\nWhen present, this IE shall provide the timestamp when the collection of the information in this report was generated.\nX\nX\nX\nX\nEnd Time\nVolume Measurement\n                                       C\nThis IE shall be present if a volume measurement needs to be reported.\nX\nX\nX\nX\nVolume Measurement\nDuration Measurement\n                                       C\nThis IE shall be present if a duration measurement needs to be reported.\nX\nX\nX\nX\nDuration Measurement\nApplication Detection Information\n                                       C\nThis IE shall be present if application detection information needs to be reported.\n-\nX\nX\nX\nApplication Detection Information\nUE IP address\n                                       C\nThis IE shall be present if the start or stop of an application has been detected and no UE IP address was provisioned in the PDI. See NOTE 1.\n-\n-\nX\nX\nUE IP address\nNetwork Instance\n                                       C\nThis IE shall be present if the start or stop of an application has been detected, no UE IP address was provisioned in the PDI and multiple PDNs with overlapping IP addresses are used in the UP function. See NOTE 1.\n-\n-\nX\nX\nNetwork Instance\nTime of First Packet\n                                       C\nThis IE shall be present if available for this URR.\n-\nX\nX\nX\nTime of First Packet\nTime of Last Packet\n                                       C\nThis IE shall be present if available for this URR.\n-\nX\nX\nX\nTime of Last Packet\nUsage Information \n                                       C\nThis IE shall be present if the UP function reports Usage Reports before and after a Monitoring Time, or before and after QoS enforcement. When present, it shall indicate whether the usage is reported for the period before or after that time, or before or after QoS enforcement.\nX\nX\nX\nX\nUsage Information\nQuery URR Reference\n                                       C\nThis IE shall be present if this usage report is sent as a result of a query URR received in an PFCP Session Modification Request and the Query URR Reference IE was present in the PFCP Session Modification Request.\nWhen present, it shall be set to the Query URR Reference value received in the PFCP Session Modification Request. \nX\nX\nX\nX\nQuery URR Reference\nEvent Time Stamp \n                                       C\nThis IE shall be present, if the report is related to an event.\nWhen present, it shall be set to the time when the event occurs.\nSeveral IEs with the same IE type may be present to report multiple occurrences for an event for this URR ID.\n-\nX\nX\nX\nEvent Time Stamp \nEthernet Traffic Information\n                                       C\n This IE shall be present if Ethernet Traffic Information needs to be reported. See Table 7.5.8.3-3.\n-\n-\n-\nX\nEthernet Traffic Information\nNOTE 1:\tThis is the case for unsolicited application reporting by the TDF. The Network instance is required when the UE IP address cannot be used to determine the corresponding PDN connection.\n\nTable 7.5.8.3-2: Application Detection Information IE within Usage Report IE\nOctet 1 and 2\n\nApplication Detection Information IE Type = 68 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nApplication ID\n                                       M\nThis IE shall identify the Application ID for which a start or stop of traffic is reported.\n-\nX\nX\nX\nApplication ID\nApplication Instance ID\n                                       C\nWhen present, this IE shall identify the Application Instance Identifier for which a start or stop of traffic is reported. It shall be present, when reporting the start of an application, if the Reduced Application Detection Information flag was not set in the Measurement Information and if the flow information for the detected application is deducible. It shall be present, when reporting the stop of an application, if the Reduced Application Detection Information flag was not set in the Measurement Information and if it was provided when reporting the start of the application.\n-\nX\nX\nX\nApplication Instance ID\nFlow Information\n                                       C\nWhen present, this IE shall contain the flow information for the detected application. It shall be present, when reporting the start of an application, if the Reduced Application Detection Information flag was not set in the Measurement Information and if the flow information for the detected application is deducible.\n-\nX\nX\nX\nFlow Information\n\nTable 7.5.8.3-3: Ethernet Traffic Information IE within Usage Report IE\nOctet 1 and 2\n\nEthernet Traffic Information IE Type = 143 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nMAC Addresses Detected\n                                       C\nThis IE shall be present if one or more new MAC addresses have been detected. \nWhen present, it shall identify the MAC (Ethernet) addresses newly detected as source address of frames sent UL by the UE.\n-\n-\n-\nX\nMAC Addresses Detected\nMAC Addresses Removed\n                                       C\nThis IE shall be present if one or more new MAC addresses have been removed. \nWhen present, it shall identify the MAC (Ethernet) addresses that have been inactive for a duration exceeding the Ethernet inactivity Timer. \n-\n-\n-\nX\nMAC Addresses Removed\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Error Indication Report IE within PFCP Session Report Request", "numbering": "7.5.8.4", "title_level": 3, "desc": "7.5.8.4\tError Indication Report IE within PFCP Session Report Request\nThe Error Indication Report grouped IE shall be encoded as shown in Figure 7.5.8.4-1.\nTable 7.5.8.4-1: Error Indication Report IE within PFCP Session Report Request \nOctet 1 and 2\n\nError Indication Report IE Type = 99 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nRemote F-TEID\n                                       M\nThis IE shall identify the remote F-TEID of the GTP-U bearer for which an Error Indication has been received at the UP function. \n\nMore than one IE with this type may be included to represent multiple remote F-TEID for which an Error Indication has been received.\nX\nX\n-\nX\nF-TEID\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Session Report Response", "numbering": "7.5.9", "title_level": 2, "desc": "7.5.9\tPFCP Session Report Response\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "General", "numbering": "7.5.9.1", "title_level": 3, "desc": "7.5.9.1\tGeneral\nThe PFCP Session Report Response shall be sent over the Sxa, Sxb, Sxc and  N4 interface by the CP function to the UP function as a reply to the PFCP Session Report Request.\nTable 7.5.9.1-1: Information Elements in a PFCP Session Report Response\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nCause\n                                       M\nThis IE shall indicate the acceptance or the rejection of the corresponding request message.\nX\nX\nX\nX\nCause\nOffending IE\n                                       C\nThis IE shall be included if the rejection is due to a conditional or mandatory IE missing or faulty.\nX\nX\nX\nX\nOffending IE\nUpdate BAR\n                                       C\nThis IE shall be present if a BAR previously created for the PFCP session needs to be modified. \nA previously created BAR that is not modified shall not be included.\nSee Table 7.5.9.2-1.\nX\n-\n-\nX\nUpdate BAR\nPFCPSRRsp-Flags\n                                       C\nThis IE shall be included if at least one of the flags is set to 1. \n-\tDROBU (Drop Buffered Packets): the CP function shall set this flag if the UP function needs to drop the packets currently buffered for this PFCP session (see NOTE 1). \n\nX\n-\n-\nX\nPFCPSRRsp-Flags\n\nCP F-SEID\n                                       O\nThis IE may be set by the SMF if the UPF indicated support of PFCP sessions successively controlled by different SMFs of a same SMF Set and the Cause IE indicates \"Request accepted (success)\" or \"Redirection Requested\" (see clause 5.22). \n\nWhen present, it shall be set to the new F-SEID that the UPF shall use for sending subsequent PFCP session related messages. \n-\n-\n-\nX\nF-SEID\nN4-u F-TEID\n                                       O\nThis IE may be set by the SMF if the UPF indicated support of PFCP sessions successively controlled by different SMFs of a same SMF Set and the Cause IE indicates \"Request accepted (success)\". \n\nWhen present, it shall be set to the new N4-u F-TEID that the UPF shall use for data forwarding towards the SMF. \n-\n-\n-\nX\nF-TEID\nNOTE 1:\tThe CP function may request the UP function to drop the packets currently buffered for the PFCP session, when buffering is performed in the UP function, upon receipt of an PFCP Session Report Request notifying the CP function about the arrival of downlink data packets for which the CP function decides to throttle the corresponding Downlink Data Notification message over S11/S4 and. See clause 5.9.3 of 3GPP TS 23.214 [2].\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Update BAR IE within PFCP Session Report Response", "numbering": "7.5.9.2", "title_level": 3, "desc": "7.5.9.2\tUpdate BAR IE within PFCP Session Report Response\nThe Update BAR grouped IE shall be encoded as shown in Figure 7.5.9.2-1.\nTable 7.5.9.2-1: Update BAR IE in PFCP Session Report Response\nOctet 1 and 2\n\nUpdate BAR IE Type = 12 (decimal)\nOctets 3 and 4\n\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\n\n\n\nSxa\nSxb\nSxc\nN4\n\nBAR ID\n                                       M\nThis IE shall identify the BAR Rule to be modified.\nX\n-\n-\nX\nBAR ID\nDownlink Data Notification Delay\n                                       C\nThis IE shall be present if the UP function indicated support of the Downlink Data Notification Delay parameter (see clause 8.2.25) and the Downlink Data Notification Delay needs to be modified.\nWhen present, it shall contain the delay the UP function shall apply between receiving a downlink data packet and notifying the CP function about it, when the Apply Action parameter requests to buffer the packets and notify the CP function.\nX\n-\n-\nX\nDownlink Data Notification Delay\nDL Buffering Duration\n                                       C\nThis IE shall be present if the UP function indicated support of the DL Buffering Duration parameter (see clause 8.2.25) and extended buffering of downlink data packet is required in the UP function. \nWhen present, this IE shall indicate the duration during which the UP function shall buffer the downlink data packets without sending any further notification to the CP function about the arrival of DL data packets.\nX\n-\n-\nX\nDL Buffering Duration\nDL Buffering Suggested Packet Count\n                                       O\nThis IE may be present if extended buffering of downlink data packet is required in the UP function. \nWhen present, this IE shall indicate the maximum number of downlink data packets suggested to be buffered in the UP function.\nX\n-\n-\nX\nDL Buffering Suggested Packet Count\nSuggested Buffering Packets Count\n                                       C\nThis IE may be present if the UP Function indicated support of the feature UDBC.\n\nWhen present, it shall contain the number of packets that are suggested to be buffered when the Apply Action parameter requests to buffer the packets. The packets that exceed the limit shall be discarded.\n\nX\nX\nX\nSuggested Buffering Packets Count\nNOTE 1:\tIf the Apply Action requests the UP function to buffer and notify the CP function and the DL Buffering Duration is set, the UP function shall not notify the CP function for the duration indicated by the DL Buffering Duration.\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Error Handling", "numbering": "7.6", "title_level": 1, "desc": "7.6\tError Handling\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Protocol Errors", "numbering": "7.6.1", "title_level": 2, "desc": "7.6.1\tProtocol Errors\nA protocol error is defined as a message or an Information Element received from a peer entity with an unknown type, or if it is unexpected, or if it has an erroneous content.\nThe term silently discarded is used in the following clauses to mean that the receiving PFCP entity's implementation shall discard such a message without further processing or that the receiving PFCP entity discards such an IE and continues processing the message. The conditions for the receiving PFCP entity to silently discard an IE are specified in the subsequent clauses.\nThe handling of unknown, unexpected or erroneous PFCP messages and IEs shall provide for the forward compatibility of PFCP. Therefore, the sending PFCP entity shall be able to safely include in a message a new conditional-optional or an optional IE. Such an IE may also have a new type value. Any legacy receiving PFCP entity shall, however, silently discard such an IE and continue processing the message.\nIf a protocol error is detected by the receiving PFCP entity, it should log the event including the erroneous message and may include the error in a statistical counter.\nFor Response messages containing a rejection Cause value, see clause 7.2.3.2.\nThe receiving PFCP entity shall apply the error handling specified in the subsequent clauses.\nIf the received erroneous message is a reply to an outstanding PFCP message, the PFCP transaction layer shall stop retransmissions and notify the PFCP application layer of the error even if the reply is silently discarded.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Different PFCP Versions", "numbering": "7.6.2", "title_level": 2, "desc": "7.6.2\tDifferent PFCP Versions\nIf a PFCP entity receives a message of an unsupported PFCP version, it shall return an PFCP Version Not Supported Response message and silently discard the received message.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Message of Invalid Length", "numbering": "7.6.3", "title_level": 2, "desc": "7.6.3\tPFCP Message of Invalid Length\nIf a PFCP entity receives a message, which is too short to contain the respective PFCP header, the PFCP-PDU shall be silently discarded.\nIf a PFCP entity receives a Request message within an IP/UDP packet of a length that is inconsistent with the value specified in the Length field of the PFCP header, then the receiving PFCP entity should log the error and shall send the Response message with Cause IE value set to \"Invalid Length\".\nIf a PFCP entity receives a Response message within an IP/UDP packet of a length that is inconsistent with the value specified in the Length field of the PFCP header, then the receiving PFCP entity should log the error and shall silently discard the message.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Unknown PFCP Message", "numbering": "7.6.4", "title_level": 2, "desc": "7.6.4\tUnknown PFCP Message\nIf a PFCP entity receives a message with an unknown Message Type value, it shall silently discard the message.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Unexpected PFCP Message", "numbering": "7.6.5", "title_level": 2, "desc": "7.6.5\tUnexpected PFCP Message\nIf a PFCP entity receives an unexpected request message, for example a known message that is sent over an interface for which the message is not defined, or a message that is sent over an interface for which the message is defined, but the direction is incorrect, then the PFCP entity shall silently discard the message and shall log an error.\nIf a PFCP entity receives an unexpected response message which is not a request message, for example a message for which there is no corresponding outstanding request, it shall discard the message and may log an error. \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Missing Information Elements", "numbering": "7.6.6", "title_level": 2, "desc": "7.6.6\tMissing Information Elements\nA PFCP entity shall check if all mandatory IEs are present in the received Request message. Apart from Echo Request message, if one or more mandatory information elements are missing in the received Request message, the PFCP entity should log the error and shall send a Response message with Cause IE value set to \"Mandatory IE missing\" with the type of the missing mandatory IE.\nIf a PFCP entity receives a Response message with Cause IE value set to \"Mandatory IE missing\", it shall notify its upper layer.\nA PFCP entity shall check if all mandatory IEs are present in the received Response message without a rejection Cause value. If one or more mandatory information elements are missing, the PFCP entity shall notify the upper layer and should log the error.\nA PFCP entity shall check if conditional information elements are present in the received Request message, if possible (i.e. if the receiving entity has sufficient information available to check if the respective conditions were met). If one or more conditional information elements are missing, a PFCP entity should log the error and shall send a Response message with Cause IE value set to \"Conditional IE missing\" together with the type of the missing conditional IE.\nA PFCP entity shall check if conditional information elements are present in the received Response message without a rejection Cause value, if possible (i.e. if the receiving entity has sufficient information available to check if the respective conditions were met). If one or more conditional information elements are missing, a PFCP entity shall notify the upper layer and should log the error.\nFor Response messages containing a rejection Cause value, see clause 7.2.3.2.\nAbsence of an optional information element shall not trigger any error handling.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Invalid Length Information Element", "numbering": "7.6.7", "title_level": 2, "desc": "7.6.7\tInvalid Length Information Element\nAn information element has an invalid length when the actual length of the IE is different from the value of the Length field in the IE header. Here, the actual length of the IE means the length of the content field of the received IE.\nIf a PFCP message contains more than one information elements and one or more of them have invalid length, the receiving PFCP entity can detect which of the IEs have invalid length only in the following cases:\n-\tIf the Length value in the IE header is greater than the overall length of the message;\n-\tIf the invalid length IE is the last one in the message.\nApart from Echo Request message, if a receiving PFCP entity detects information element with invalid length in a Request message, it shall send an appropriate error response with Cause IE value set to \"Invalid length\" together with the type of the offending IE.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Semantically incorrect Information Element", "numbering": "7.6.8", "title_level": 2, "desc": "7.6.8\tSemantically incorrect Information Element\nApart from Echo Request message, the receiver of a PFCP signalling message Request including a mandatory or a verifiable conditional information element with a semantically invalid Value shall discard the request, should log the error, and shall send a response with Cause IE value set to \"Mandatory IE incorrect\" together with a type and instance of the offending IE.\nThe receiver of a PFCP signalling message Response including a mandatory or a verifiable conditional information element with a semantically invalid Value shall notify the upper layer that a message with this sequence number has been received and should log the error. \nIf a PFCP entity receives an information element with a value which is shown as reserved, it shall treat that information element as invalid and should log the error. If the invalid IE is received in a Request, and it is a mandatory IE or a verifiable conditional IE, the PFCP entity shall send a response with Cause set to \"Mandatory IE incorrect\" together with a type and instance of the offending IE.\nThe principle is: the use of reserved values invokes error handling; the use of spare values can be silently discarded and for IEs with spare values used, processing shall be continued ignoring the spare values.\nThe receiver of a PFCP signalling message including an optional information element with a Value that is not in the range defined for this information element value shall discard this IE, but shall treat the rest of the message as if this IE was absent and continue processing. The receiver shall not check the content of an information element field that is defined as \"spare\".\nAll semantically incorrect optional information elements in a PFCP signalling message shall be treated as not present in the message.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Unknown or unexpected Information Element", "numbering": "7.6.9", "title_level": 2, "desc": "7.6.9\tUnknown or unexpected Information Element\nThe receiver of a PFCP message including an unexpected information element with a known Type value that is not defined for this message shall discard the IE and log an error. The receiver shall process the message.\nNOTE:\tAn Information Element in an encoded PFCP message or grouped IE is identified by the IE Type.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Repeated Information Elements", "numbering": "7.6.10", "title_level": 2, "desc": "7.6.10\tRepeated Information Elements\nAn Information Element is repeated if there is more than one IE with the same IE Type in the scope of the PFCP message (or in the scope of the grouped IE). Such an IE is a member in a list.\nIf an information element is repeated in a PFCP signalling message in which repetition of the information element is not specified, only the contents of the information element appearing first shall be handled and all subsequent repetitions of the information element shall be ignored. When the number of repetitions of information elements is specified, only the contents of specified repeated information elements shall be handled and all subsequent repetitions of the information element shall be ignored.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Information Elements", "numbering": "8", "title_level": 0, "desc": "8\tInformation Elements\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Information Elements Format", "numbering": "8.1", "title_level": 1, "desc": "8.1\tInformation Elements Format\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Information Element Format", "numbering": "8.1.1", "title_level": 2, "desc": "8.1.1\tInformation Element Format\nFigure 8.1.1-1 depicts the format of an Information Element.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = xxx (decimal)\n\n\n3 to 4\nLength = n\n\n\np to (p+1)\nEnterprise ID\n\n\nk to (n+4)\nIE specific data or content of a grouped IE\n\nFigure 8.1.1-1: Information Element Format\nNOTE 1:\tIf the Bit 8 of Octet 1 is not set, this indicates that the IE is defined by 3GPP and the Enterprise ID is absent. If Bit 8 of Octet 1 is set, this indicates that the IE is defined by a vendor and the Enterprise ID is present identified by the Enterprise ID.\nAn IE has the following mandatory fields:\n-\tType: this field indicates the type of the Information Element. IE type values within the range of 0 to 32767 are reserved for IE defined by 3GPP and are listed in clause 8.1.2 IE type values within the range of 32768 to 65535 are used for vendor-specific IE and the value allocation is controlled by the vendor.\n-\tLength: this field contains the length of the IE excluding the first four octets, which are common for all IEs (Type and Length) and is denoted \"n\" in Figure 8.1.1-1 and in Figure 8.1.1-2. Bit 8 of the lowest numbered octet is the most significant bit and bit 1 of the highest numbered octet is the least significant bit.\nAn IE has the following optional fields:\n-\tEnterprise ID: if the IE type value is within the range of 32768 to 65535, this field shall contain the IANA-assigned \"SMI Network Management Private Enterprise Codes\" value of the vendor defining the IE. The Enterprise ID set to \"10415\" (IANA-assigned \"SMI Network Management Private Enterprise Codes\") shall not be used for the vendor specific IEs.\nFor illustration, Figure 8.1.1-2 depicts the format of a Information Element (IE) defined by 3GPP and is specified in this specification. For IE's defined by 3GPP, the IE type shall be within the range of 0 to 32767.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = xxx (decimal)\n\n\n3 to 4\nLength = n\n\n\n5 to (n+4)\nIE specific data or content of a grouped IE\n\nFigure 8.1.1-2: 3GPP defined Information Element Format\nNOTE 2:\tBit 8 of Octet 1 is not set. This indicates that the Information Element type value has been allocated by 3GPP. \nFor illustration, Figure 8.1.1-3 depicts the format of a vendor-specific Information Element, which content is not specified and the IE type value shall be within the range of 32768 to 65535.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = xxx (decimal)\n\n\n3 to 4\nLength = n\n\n\n5 to 6\nEnterprise ID\n\n\n7 to (n+4)\nIE specific data or content of a grouped IE\n\nFigure 8.1.1-3: Vendor-Specific Information Element Format\nNOTE 3:\tBit 8 of Octet 1 is set. This indicates that the IE type value has been allocated by the vendor identified by the Enterprise ID. The content of this IE is vendor specific and therefore out of scope of this specification. \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Information Element Types", "numbering": "8.1.2", "title_level": 2, "desc": "8.1.2\tInformation Element Types\nA PFCP message may contain several IEs. In order to have forward compatible type definitions for the PFCP IEs, all of them shall be TLV (Type, Length, Value) coded. PFCP IE type values are specified in the Table 8.1.2-1. The last column of this table indicates whether the IE is:\n-\tFixed Length: the IE has a fixed set of fields, and a fixed number of octets;\n-\tVariable Length: the IE has a fixed set of fields, and has a variable number of octets.\nFor example, the last octets may be numbered similar to \"5 to (n+4)\". In this example, if the value of the length field, n, is 0, then the last field is not present;\n-\tExtendable: the IE has a variable number of fields, and has a variable number of octets.\nThe last fields are typically specified with the statement: \"These octet(s) is/are present only if explicitly specified\". The legacy receiving entity shall ignore the unknown octets.\nAn IE of any of the above types may have a null length as specified in clause 5.6.3. This shall not be considered as an error by the receiving PFCP entity.\nIn order to improve the efficiency of troubleshooting, it is recommended that the IEs should be arranged in the signalling messages as well as in the grouped IEs, according to the order the IEs are listed in the message definition table or grouped IE definition table in section 7. However the receiving entity shall be prepared to handle the messages with IEs in any order.\nWithin IEs, certain fields may be described as spare. These bits shall be transmitted with the value set to 0. To allow for future features, the receiver shall not evaluate these bits.\nTable 8.1.2-1: Information Element Types \nIE Type value\n(Decimal)\nInformation elements\nComment / Reference\nNumber of Fixed Octets\n0\nReserved\n\n                                       \n1\nCreate PDR\nExtendable / Table 7.5.2.2-1\n                                Not Applicable\n2\nPDI\nExtendable / Table 7.5.2.2-2\n                                Not Applicable\n3\nCreate FAR\nExtendable / Table 7.5.2.3-1\n                                Not Applicable\n4\nForwarding Parameters\nExtendable / Table 7.5.2.3-2\n                                Not Applicable\n5\nDuplicating Parameters\nExtendable / Table 7.5.2.3-3\n                                Not Applicable\n6\nCreate URR\nExtendable / Table 7.5.2.4-1\n                                Not Applicable\n7\nCreate QER\nExtendable / Table 7.5.2.5-1\n                                Not Applicable\n8\nCreated PDR\nExtendable / Table 7.5.3.2-1\n                                Not Applicable\n9\nUpdate PDR\nExtendable / Table 7.5.4.2-1\n                                Not Applicable\n10\nUpdate FAR\nExtendable / Table 7.5.4.3-1\n                                Not Applicable\n11\nUpdate Forwarding Parameters\nExtendable / Table 7.5.4.3-2\n                                Not Applicable\n12\nUpdate BAR (PFCP Session Report Response)\nExtendable / Table 7.5.9.2-1 \n                                Not Applicable\n13\nUpdate URR\nExtendable / Table 7.5.4.4\n                                Not Applicable\n14\nUpdate QER\nExtendable / Table 7.5.4.5\n                                Not Applicable\n15\nRemove PDR\nExtendable / Table 7.5.4.6\n                                Not Applicable\n16\nRemove FAR\nExtendable / Table 7.5.4.7\n                                Not Applicable\n17\nRemove URR\nExtendable / Table 7.5.4.8\n                                Not Applicable\n18\nRemove QER\nExtendable / Table 7.5.4.9\n                                Not Applicable\n19\nCause\nFixed / Clause 8.2.1\n                                       1\n20\nSource Interface\nExtendable / Clause 8.2.2\n1\n21\nF-TEID\nExtendable / Clause 8.2.3\nq-4\n22\nNetwork Instance\nVariable Length / Clause 8.2.4\nNot Applicable\n23\nSDF Filter\nExtendable / Clause 8.2.5\nv+2-4\n24\nApplication ID\nVariable Length / Clause 8.2.6\nNot Applicable\n25\nGate Status\nExtendable / Clause 8.2.7\n                                       1\n26\nMBR\nExtendable / Clause 8.2.8\n                                      10\n27\nGBR\nExtendable / Clause 8.2.9\n                                      10\n28\nQER Correlation ID\nExtendable / Clause 8.2.10\n                                       4\n29\nPrecedence\nExtendable / Clause 8.2.11\n                                       4\n30\nTransport Level Marking\nExtendable / Clause 8.2.12\n                                       2\n31\nVolume Threshold\nExtendable /Clause 8.2.13\n                                     q+7-4\n32\nTime Threshold\nExtendable /Clause 8.2.14\n                                       4\n33\nMonitoring Time\nExtendable /Clause 8.2.15\n                                       4\n34\nSubsequent Volume Threshold\nExtendable /Clause 8.2.16\n                                     q+7-4\n35\nSubsequent Time Threshold\nExtendable /Clause 8.2.17\n                                       4\n36\nInactivity Detection Time\nExtendable /Clause 8.2.18\n                                       4\n37\nReporting Triggers\nExtendable /Clause 8.2.19\n                                       2\n38\nRedirect Information\nExtendable /Clause 8.2.20\n                                   (8+a-1)-4\n39\nReport Type\nExtendable / Clause 8.2.21\n1\n40\nOffending IE\nFixed / Clause 8.2.22\n2\n41\nForwarding Policy\nExtendable / Clause 8.2.23\nk-4\n42\nDestination Interface\nExtendable / Clause 8.2.24\n1\n43\nUP Function Features\nExtendable / Clause 8.2.25\n1\n44\nApply Action\nExtendable / Clause 8.2.26\n1\n45\nDownlink Data Service Information\nExtendable / Clause 8.2.27\n1\n46\nDownlink Data Notification Delay\nExtendable / Clause 8.2.28\n1\n47\nDL Buffering Duration\nExtendable / Clause 8.2.29\n1\n48\nDL Buffering Suggested Packet Count\nVariable / Clause 8.2.30\nNot Applicable\n49\nPFCPSMReq-Flags\nExtendable / Clause 8.2.31\n1\n50\nPFCPSRRsp-Flags\nExtendable / Clause 8.2.32\n1\n51\nLoad Control Information\nExtendable / Table 7.5.3.3-1\nNot Applicable\n52\nSequence Number\nFixed Length / Clause 8.2.33\n4\n53\nMetric\nFixed Length / Clause 8.2.34\n1\n54\nOverload Control Information\nExtendable / Table 7.5.3.4-1\nNot Applicable\n55\nTimer\nExtendable / Clause 8.2 35\n1\n56\nPDR ID\nExtendable / Clause 8.2 36\n2\n57\nF-SEID\nExtendable / Clause 8.2 37\np+15-4\n58\nApplication ID's PFDs\nExtendable / Table 7.4.3.1-2\nNot Applicable\n59\nPFD context\nExtendable / Table 7.4.3.1-3\nNot Applicable\n60\nNode ID\nExtendable / Clause 8.2.38\no-4\n61\nPFD contents\nExtendable / Clause 8.2.39\nv-4\n62\nMeasurement Method\nExtendable / Clause 8.2.40\n1\n63\nUsage Report Trigger\nExtendable / Clause 8.2.41\n1\n64\nMeasurement Period\nExtendable / Clause 8.2.42\n4\n65\nFQ-CSID\nExtendable / Clause 8.2.43\n(q+1)-4\n66\nVolume Measurement\nExtendable / Clause 8.2.44\nq+7-4\n67\nDuration Measurement\nExtendable / Clause 8.2.45\n4\n68\nApplication Detection Information\nExtendable / Table 7.5.8.3-2\nNot Applicable\n69\nTime of First Packet\nExtendable / Clause 8.2.46\n4\n70\nTime of Last Packet\nExtendable / Clause 8.2.47\n4\n71\nQuota Holding Time\nExtendable / Clause 8.2.48\n4\n72\nDropped DL Traffic Threshold\nExtendable / Clause 8.2.49\nm+7-4\n73\nVolume Quota\nExtendable / Clause 8.2.50\nq+7-4\n74\nTime Quota\nExtendable / Clause 8.2.51\n4\n75\nStart Time\nExtendable / Clause 8.2.52\n4\n76\nEnd Time\nExtendable / Clause 8.2.53\n4\n77\nQuery URR\nExtendable / Table 7.5.4.10-1\nNot Applicable\n78\nUsage Report (Session Modification Response)\nExtendable / Table 7.5.5.2-1\nNot Applicable\n79\nUsage Report (Session Deletion Response)\nExtendable / Table 7.5.7.2-1\nNot Applicable\n80\nUsage Report (Session Report Request)\nExtendable / Table 7.5.8.3-1\nNot Applicable\n81\nURR ID\nExtendable / Clause 8.2.54\n4\n82\nLinked URR ID\nExtendable / Clause 8.2.55\n4\n83\nDownlink Data Report\nExtendable / Table 7.5.8.2-1\nNot Applicable\n84\nOuter Header Creation\nExtendable / Clause 8.2.56\nr+1-4\n85\nCreate BAR\nExtendable / Table 7.5.2.6-1\nNot Applicable\n86\nUpdate BAR (Session Modification Request)\nExtendable / Table 7.5.4.11-1\nNot Applicable\n87\nRemove BAR\nExtendable / Table 7.5.4.12-1\nNot Applicable\n88\nBAR ID\nExtendable / Clause 8.2.57\n1\n89\nCP Function Features\nExtendable / Clause 8.2.58\n1\n90\nUsage Information\nExtendable / Clause 8.2.59\n1\n91\nApplication Instance ID\nVariable Length / Clause 8.2.60\nNot Applicable\n92\nFlow Information\nExtendable / Clause 8.2.61\nm-4\n93\nUE IP Address\nExtendable / Clause 8.2.62\np+15-1\n94\nPacket Rate\nExtendable / Clause 8.2.63\np+2-4\n95\nOuter Header Removal\nExtendable / Clause 8.2.64\n1\n96\nRecovery Time Stamp\nExtendable / Clause 8.2.65\n4\n97\nDL Flow Level Marking\nExtendable / Clause 8.2.66\np+1-4\n98\nHeader Enrichment\nExtendable / Clause 8.2.67\nq-4\n99\nError Indication Report\nExtendable / Table 7.5.8.4-1\nNot Applicable\n100\nMeasurement Information\nExtendable / Clause 8.2.68\n1\n101\nNode Report Type\nExtendable / Clause 8.2.69\n1\n102\nUser Plane Path Failure Report\nExtendable / Table 7.4.5.1.2-1\nNot Applicable\n103\nRemote GTP-U Peer\nExtendable / Clause 8.2.70\np+15-4\n104\nUR-SEQN\nFixed Length / Clause 8.2.71\n4\n105\nUpdate Duplicating Parameters\nExtendable / Table 7.5.4.3-3\nNot Applicable\n106\nActivate Predefined Rules \nVariable Length / Clause 8.2.72\nNot Applicable\n107\nDeactivate Predefined Rules \nVariable Length / Clause 8.2.73\nNot Applicable\n108\nFAR ID\nExtendable / Clause 8.2.74\n4\n109\nQER ID\nExtendable / Clause 8.2.75\n4\n110\nOCI Flags\nExtendable / Clause 8.2.76\n1\n111\nPFCP Association Release Request\nExtendable / Clause 8.2.77\n1\n112\nGraceful Release Period\nExtendable / Clause 8.2.78\n1\n113\nPDN Type\nExtendable / Clause 8.2.79\n1\n114\nFailed Rule ID\nExtendable / Clause 8.2.80\np-4\n115\nTime Quota Mechanism\nExtendable / Clause 8.2.81\n5\n116\nUser Plane IP Resource Information\nExtendable / Clause 8.2.82\nl+1-4\n117\nUser Plane Inactivity Timer\nExtendable /Clause 8.2.83\n                                       4\n118\nAggregated URRs\nExtendable / Table 7.5.2.4-2\nNot Applicable\n119\nMultiplier\nFixed / Clause 8.2.84\n12\n120\nAggregated URR ID\nFixed / Clause 8.2.85\n4\n121\nSubsequent Volume Quota\nExtendable / Clause 8.2.86\nq+7-4\n122\nSubsequent Time Quota\nExtendable / Clause 8.2.87\n4\n123\nRQI\nExtendable / Clause 8.2.88\n1\n124\nQFI\nExtendable / Clause 8.2.89\nm-4\n125\nQuery URR Reference\nExtendable / Clause 8.2.90\n4\n126\nAdditional Usage Reports Information\nExtendable / Clause 8.2.91\n2\n127\nCreate Traffic Endpoint\nExtendable / Table 7.5.2.7\nNot Applicable\n128\nCreated Traffic Endpoint\nExtendable / Table 7.5.3.5\nNot Applicable\n129\nUpdate Traffic Endpoint\nExtendable / Table 7.5.4.13\nNot Applicable\n130\nRemove Traffic Endpoint\nExtendable / Table 7.5.4.14\nNot Applicable\n131\nTraffic Endpoint ID\nExtendable / Clause 8.2.92\n1\n132\nEthernet Packet Filter\nExtendable / Table 7.5.2.2-3\nNot Applicable\n133\nMAC address\nExtendable / Clause 8.2.93\ns-1-4\n134\nC-TAG\nExtendable / Clause 8.2.94\n3\n135\nS-TAG\nExtendable / Clause 8.2.95\n3\n136\nEthertype\nExtendable / Clause 8.2.96\n2\n137\nProxying\nExtendable / Clause 8.2.97\n1\n138\nEthernet Filter ID\nExtendable / Clause 8.2.98\n4\n139\nEthernet Filter Properties\nExtendable / Clause 8.2.99\n1\n140\nSuggested Buffering Packets Count\nExtendable / Clause 8.2.100\n\n141\nUser ID\nExtendable / Clause 8.2.101\nh-1-4\n142\nEthernet PDU Session Information\nExtendable / Clause 8.2.102\n1\n143\nEthernet Traffic Information\nExtendable / Table 7.5.8.3-3\nNot Applicable\n144\nMAC Addresses Detected\nExtendable / Clause 8.2.103\n7\n145\nMAC Addresses Removed\nExtendable / Clause 8.2.104\n7\n146\nEthernet Inactivity Timer\nExtendable / Clause 8.2.105\n4\n147\nAdditional Monitoring Time\nExtendable / Table 7.5.2.4-3\nNot Applicable\n148\nEvent Quota\nExtendable / Clause 8.2.112\n4\n149\nEvent Threshold\nExtendable / Clause 8.2.113\n4\n150\nSubsequent Event Quota\nExtendable / Clause 8.2.106\n4\n151\nSubsequent Event Threshold\nExtendable / Clause 8.2.107\n4\n152\nTrace Information\nExtendable / Clause 8.2.108\nq-4\n153\nFramed-Route\nVariable Length / Clause 8.2.109\nNot Applicable\n154\nFramed-Routing\nFixed Length / Clause 8.2.110\n4\n155\nFramed-IPv6-Route\nVariable Length / Clause 8.2.111\nNot Applicable\n156\nEvent Time Stamp \nExtendable / Clause 8.2.114\n4\n157\nAveraging Window\nExtendable /Clause 8.2.115\n4\n158\nPaging Policy Indicator\nExtendable / Clause 8.2.116\n1\n159\nAPN/DNN\nVariable Length / Clause 8.2.117\nNot Applicable\n160\n3GPP Interface Type\nExtendable / Clause 8.2.118\n1\n161\nPFCPSRReq-Flags\nExtendable / Clause 8.2.119\n1\n162\nPFCPAUReq-Flags\nExtendable / Clause 8.2.120\n1\n163\nActivation Time\nExtendable / Clause 8.2.121\n4\n164\nDeactivation Time\nExtendable / Clause 8.2.122\n4\n165\nCreate MAR\nExtendable / Table 7.5.2.8-1\nNot Applicable\n166\nAccess Forwarding Action Information 1\nExtendable / Table 7.5.2.8-2\nNot Applicable\n167\nAccess Forwarding Action Information 2\nExtendable / Table 7.5.2.8-3\nNot Applicable\n168\nRemove MAR\nExtendable / Table 7.5.4.15-1\nNot Applicable\n169\nUpdate MAR\nExtendable / Table 7.5.4.16-1\nNot Applicable\n170\nMAR ID\nExtendable / Clause 8.2.123\n2\n171\nSteering Functionality\nExtendable / Clause 8.2.124\n1\n172\nSteering Mode\nExtendable / Clause 8.2.125\n1\n173\nWeight\nFixed / Clause 8.2.126\n1\n174\nPriority\nExtendable / Clause 8.2.127\n1\n175\nUpdate Access Forwarding Action Information 1\nExtendable / Table 7.5.4.16-2\nNot Applicable\n176\nUpdate Access Forwarding Action Information 2\nExtendable / Table 7.5.4.16-3\nNot Applicable\n177\nUE IP address Pool Identity\nVariable Length / Clause 8.2.128\nNot Applicable\n178\nAlternative SMF IP Address\nExtendable / Clause 8.2.129\nm-1-4\n179 to 65535\nSpare. For future use.\n\n\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Information Elements", "numbering": "8.2", "title_level": 1, "desc": "8.2\tInformation Elements\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Cause", "numbering": "8.2.1", "title_level": 2, "desc": "8.2.1\tCause\nCause IE is coded as depicted in Figure 8.2.1-1.\n\n.\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 19 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5\nCause value\n\nFigure 8.2.1-1: Cause\nThe Cause value shall be included in a response message. In a response message, the Cause value indicates the acceptance or the rejection of the corresponding request message. The Cause value indicates the explicit reason for the rejection.\nTable 8.2.1-1: Cause values\nMessage Type\nCause value \n(decimal)\nMeaning\nDescription\n\n0\nReserved. \nShall not be sent and if received the Cause shall be treated as an invalid IE\nAcceptance in a response\n1\nRequest accepted (success)\n\"Request accepted (success)\" is returned when the PFCP entity has accepted a request.\n\n2-63\nSpare. \nThis value range shall be used by Cause values in an acceptance response message. See NOTE 1.\nRejection in a response\n64\nRequest rejected (reason not specified)\nThis cause shall be returned to report an unspecified rejection cause\n\n65\nSession context not found\nThis cause shall be returned, if the F-SEID included in a PFCP Session Modification/Deletion Request message is unknown.\n\n66\nMandatory IE missing\nThis cause shall be returned when the PFCP entity detects that a mandatory IE is missing in a request message\n\n67\nConditional IE missing\nThis cause shall be returned when the PFCP entity detects that a Conditional IE is missing in a request message.\n\n68\nInvalid length\nThis cause shall be returned when the PFCP entity detects that an IE with an invalid length in a request message\n\n69\nMandatory IE incorrect\nThis cause shall be returned when the PFCP entity detects that a Mandatory IE is incorrect in a request message, e.g. the Mandatory IE is malformated or it carries an invalid or unexpected value.\n\n70\nInvalid Forwarding Policy\nThis cause shall be used by the UP function in the PFCP Session Establishment Response or PFCP Session Modification Response message if the CP function attempted to provision a FAR with a Forwarding Policy Identifier for which no Forwarding Policy is locally configured in the UP function.\n\n71\nInvalid F-TEID allocation option\nThis cause shall be used by the UP function in the PFCP Session Establishment Response or PFCP Session Modification Response message if the CP function attempted to provision a PDR with a F-TEID allocation option which is incompatible with the F-TEID allocation option used for already created PDRs (by the same or a different CP function).\n\n72\nNo established PFCP Association \nThis cause shall be used by the CP function or the UP function if they receive a PFCP Session related message from a peer with which there is no established PFCP Association.\n\n73\nRule creation/modification Failure \nThis cause shall be used by the UP function if a received Rule failed to be stored and  be applied in the UP function.\n\n74\nPFCP entity in congestion\nThis cause shall be returned when a PFCP entity has detected node level congestion and performs overload control, which does not allow the request to be processed.\n\n75\nNo resources available\nThis cause shall be returned to indicate a temporary unavailability of resources to process the received request.\n\n76\nService not supported\nThis cause shall be returned when a PFCP entity receives a message requesting a feature or service that is not supported. \n\n77\nSystem failure\nThis cause shall be returned to indicate a system error condition. \n\n78\nRedirection Requested\nThis cause may be returned to indicate a request to the UPF to redirect its PFCP request to a different SMF. \n\n79 to 255\nSpare for future use in a response message. See NOTE 2.\nThis value range shall be used by Cause values in a rejection response message. See NOTE 2.\nNOTE 1:\tThis value is or may be used in future version of the specification. If the receiver cannot comprehend the value, it shall be interpreted as an unspecified acceptance cause. Unspecified/unrecognized acceptance cause shall be treated in the same ways as the cause value 1 \" Request accepted (success)\".\nNOTE 2:\tThis value is or may be used in a future version of the specification. If the receiver cannot comprehend the value, it shall be interpreted as an unspecified rejection cause. Unspecified/unrecognized rejection cause shall be treated in the same ways as the cause value 32 \"Request rejected (reason not specified)\".\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Source Interface", "numbering": "8.2.2", "title_level": 2, "desc": "8.2.2\tSource Interface\nThe Source Interface IE type shall be encoded as shown in Figure 8.2.2-1. It indicates the type of the interface from which an incoming packet is received.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 20 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                      5 \nSpare\nInterface value\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.2-1: Source Interface\nThe Interface value shall be encoded as a 4 bits binary integer as specified in in Table 8.2.2-1.\nTable 8.2.2-1: Interface value\n     Interface value\n     Values (Decimal)\nAccess\n0\nCore\n1\nSGi-LAN/N6-LAN\n2\nCP-function\n3\nSpare\n4 to 15\nNOTE 1:\tThe \"Access\" and \"Core\" values denote an uplink and downlink traffic direction respectively.\nNOTE 2:\tFor indirect data forwarding, the Source Interface in the PDR and the Destination Interface in the FAR shall both be set to \"Access\", in the forwarding SGW(s). The Interface value does not infer any traffic direction, in PDRs and FARs set up for indirect data forwarding, i.e. with both the Source and Destination Interfaces set to Access.\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "F-TEID", "numbering": "8.2.3", "title_level": 2, "desc": "8.2.3\tF-TEID\nThe F-TEID IE type shall be encoded as shown in Figure 8.2.3-1. It indicates an F-TEID.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 21 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                      5 \nSpare\nCHID\nCH\nV6\nV4\n\n\n                                    6 to 9 \nTEID\n\n\n                                  m to (m+3) \nIPv4 address\n\n\n                                 p to (p+15) \nIPv6 address\n\n\n                                      q \nCHOOSE ID\n\n\nk to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.3-1: F-TEID\nThe following flags are coded within Octet 5:\n-\tBit 1  -  V4: If this bit is set to \"1\" and the CH bit is not set, then the IPv4 address field shall be present, otherwise the IPv4 address field shall not be present.\n-\tBit 2  -  V6: If this bit is set to \"1\" and the CH bit is not set, then the IPv6 address field shall be present, otherwise the IPv6 address field shall not be present.\n-\tBit 3  -  CH (CHOOSE): If this bit is set to \"1\", then the TEID, IPv4 address and IPv6 address fields shall not be present and the UP function shall assign an F-TEID with an IP4 or an IPv6 address if the V4 or V6 bit is set respectively. This bit shall only be set by the CP function.\n-\tBit 4  -  CHID (CHOOSE ID): If this bit is set to \"1\", then the UP function shall assign the same F-TEID to the PDRs requested to be created in a PFCP Session Establishment Request or PFCP Session Modification Request with the same CHOOSE ID value. This bit may only be set to \"1\" if the CH bit it set to \"1\". This bit shall only be set by the CP function.\n-\tBit 5 to 8: Spare, for future use and set to 0.\nAt least one of the V4 and V6 flags shall be set to \"1\", and both may be set to \"1\" for both scenarios:\n-\twhen the CP function is allocating F-TEID, i.e. both IPv4 address field and IPv6 address field may be present;\n-\tor when the UP function is requested to allocate the F-TEID, i.e. when CHOOSE bit is set to \"1\", and the IPv4 address and IPv6 address fields are not present.\nOctet 6 to 9 (TEID) shall be present and shall contain a GTP-U TEID, if the CH bit in octet 5 is not set. When the TEID is present, if both IPv4 and IPv6 addresses are present in the F-TEID IE, then the TEID value shall be shared by both addresses.\nOctets \"m to (m+3)\" and/or \"p to (p+15)\" (IPv4 address / IPv6 address fields), if present, it shall contain the respective IP address values.\nOctet q shall be present and shall contain a binary integer value if the CHID bit in octet 5 is set to \"1\".\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Network Instance", "numbering": "8.2.4", "title_level": 2, "desc": "8.2.4\tNetwork Instance\nThe Network Instance IE type shall be encoded as shown in Figure 8.2.4-1. It indicates a Network instance.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 22 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                  5 to (n+4)\nNetwork Instance\n\nFigure 8.2.4-1: Network Instance\nThe Network instance field shall be encoded as an OctetString and shall contain an identifier which uniquely identifies a particular Network instance (e.g. PDN instance) in the UP function. It may be encoded as a Domain Name or an Access Point Name (APN) as per clause 9.1 of 3GPP TS 23.003 [2]. In the latter case, the PDN Instance field may contain the APN Network Identifier only or the full APN with both the APN Network Identifier and the APN Operator Identifier as specified in 3GPP TS 23.003 [2] clauses 9.1.1 and 9.1.2. \nNOTE:\tThe APN field is not encoded as a dotted string as commonly used in documentation.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "SDF Filter", "numbering": "8.2.5", "title_level": 2, "desc": "8.2.5\tSDF Filter\nThe SDF Filter IE type shall be encoded as shown in Figure 8.2.5-1. It contains an SDF Filter, i.e. a single IP flow packet filter.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 23 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nBID\nFL\nSPI\nTTC\nFD\n\n\n                                       6\nSpare\n\n\n                                  m to (m+1)\nLength of Flow Description\n\n\n                                  (m+2) to p\nFlow Description\n\n\n                                  s to (s+1)\nToS Traffic Class\n\n\n                                  t to (t+3)\nSecurity Parameter Index\n\n\n                                  v to (v+2)\nFlow Label\n\n\n                                  w to (w+3)\nSDF Filter ID\n\n\nx to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.5-1: SDF Filter\nThe following flags are coded within Octet 5:\n-\tBit 1  -  FD (Flow Description): If this bit is set to \"1\", then the Length of Flow Description and the Flow Description fields shall be present, otherwise they shall not be present.\n-\tBit 2  -  TTC (ToS Traffic Class): If this bit is set to \"1\", then the ToS Traffic Class field shall be present, otherwise the ToS Traffic Class field shall not be present.\n-\tBit 3  -  SPI (Security Parameter Index): If this bit is set to \"1\", then the Security Parameter Index field shall be present, otherwise the Security Parameter Index field shall not be present.\n-\tBit 4  -  FL (Flow Label): If this bit is set to \"1\", then the Flow Label field shall be present, otherwise the Flow Label field shall not be present.\n-\tBit 5  -  BID (Bidirectional SDF Filter): If this bit is set to \"1\", then the SDF Filter ID shall be present, otherwise the SDF Filter ID shall not be present. \n-\tBit 6 to 8: Spare, for future use and set to 0.\nThe Flow Description field, when present, shall be encoded as an OctetString as specified in clause 5.4.2 of 3GPP TS 29.212 [8]. \nThe ToS Traffic Class field, when present, shall be encoded as an OctetString on two octets as specified in clause 5.3.15 of 3GPP TS 29.212 [8].\nThe Security Parameter Index field, when present, shall be encoded as an OctetString on four octets and shall contain the IPsec security parameter index (which is a 32-bit field), as specified in clause 5.3.51 of 3GPP TS 29.212 [8]. \nThe Flow Label field, when present, shall be encoded as an OctetString on 3 octets as specified in clause 5.3.52 of 3GPP TS 29.212 [8] and shall contain an IPv6 flow label (which is a 20-bit field). The bits 8 to 5 of the octet \"v\" shall be spare and set to zero, and the remaining 20 bits shall contain the IPv6 flow label.\nAn SDF Filter may:\n-\tbe a pattern for matching the IP 5 tuple (source IP address or IPv6 network prefix, destination IP address or IPv6 network prefix, source port number, destination port number, protocol ID of the protocol above IP). In the pattern:\n-\ta value left unspecified in a filter matches any value of the corresponding information in a packet;\n-\tan IP address may be combined with a prefix mask;\n-\tport numbers may be specified as port ranges;\n-\tthe pattern can be extended by the Type of Service (TOS) (IPv4) / Traffic class (IPv6) and Mask;\n-\tconsist of the destination IP address and optional mask, protocol ID of the protocol above IP, the Type of Service (TOS) (IPv4) / Traffic class (IPv6) and Mask and the IPsec Security Parameter Index (SPI);\n-\tconsist of the destination IP address and optional mask, the Type of Service (TOS) (IPv4) / Traffic class (IPv6) and Mask and the Flow Label (IPv6).\nNOTE 1:\tThe details about the IPsec Security Parameter Index (SPI), the Type of Service (TOS) (IPv4) / Traffic class (IPv6) and Mask and the Flow Label (IPv6) are defined in 3GPP TS 23.060 [19] clause 15.3.\n-\textend the packet inspection beyond the possibilities described above and look further into the packet. Such service data flow filters need to be predefined in the PGW-U, as specified in clause 5.11 of 3GPP TS 23.214 [2].\nNOTE 2:\tSuch filters may be used to support filtering with respect to a service data flow based on the transport and application protocols used above IP, e.g. for HTTP and WAP. Filtering for further application protocols and services can also be supported.\nThe SDF Filter ID, when present, shall be encoded as an Unsigned32 binary integer value. It shall uniquely identify an SDF Filter among all the SDF Filters provisioned for a given PFCP Session. The source/destination IP address and port information, in a bidirectional SDF Filter, shall be set as for downlink IP flows. The SDF filter for the opposite direction has the same parameters, but having the source and destination address/port parameters swapped. When being provisioned with a bidirectional SDF filter in a PDR, the UP function shall apply the SDF filter as specified in clause 5.2.1A.2A.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Application ID", "numbering": "8.2.6", "title_level": 2, "desc": "8.2.6\tApplication ID\nThe Application ID IE type shall be encoded as shown in Figure 8.2.6-1. It contains an Application Identifier referencing an application detection filter in the UP function (e.g. its value may represent an application such as a list of URLs).\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 24 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5 to (n+4)\nApplication Identifier\n\nFigure 8.2.6-1: Application ID\nThe Application Identifier shall be encoded as an OctetString (see 3GPP TS 29.212 [8]).\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Gate Status", "numbering": "8.2.7", "title_level": 2, "desc": "8.2.7\tGate Status\nThe Gate Status IE shall be encoded as shown in Figure 8.2.7-1. It indicates whether the service data flow or application's traffic is allowed to be forwarded (gate is open) or shall be discarded (gate is closed) in uplink and/or in downlink direction.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 25 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nUL Gate\nDL Gate \n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.7-1: Gate Status\nTable 8.2.7-1: UL Gate \nUL Gate \nValue (Decimal)\nOPEN\n0\nCLOSED\n1\nFor future use. Shall not be sent. If received, shall be interpreted as the value \"1\".\n2, 3\n\nTable 8.2.7-2: DL Gate \nDL Gate \nValue (Decimal)\nOPEN\n0\nCLOSED\n1\nFor future use. Shall not be sent. If received, shall be interpreted as the value \"1\".\n2, 3\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "MBR", "numbering": "8.2.8", "title_level": 2, "desc": "8.2.8\tMBR\nThe MBR IE type shall be encoded as shown in Figure 8.2.8-1. It indicates the maximum bit rate allowed for the uplink and downlink directions.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 26 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 9\nUL MBR\n\n\n                                   10 to 14\nDL MBR\n\n\n15 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.8-1: MBR\nThe UL/DL MBR fields shall be encoded as kilobits per second (1 kbps = 1000 bps) in binary value. The UL/DL MBR fields may require converting values in bits per second to kilobits per second when the UL/DL MBR values are received from an interface other than GTPv2 interface. If such conversions result in fractions, then the value of UL/DL MBR fields shall be rounded upwards. The range of UL/DL MBR is specified in 3GPP TS 36.413 [10].\nNOTE:\tThe encoding is aligned on the encoding specified in 3GPP TS 29.274 [9].\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "GBR", "numbering": "8.2.9", "title_level": 2, "desc": "8.2.9\tGBR\nThe GBR IE type shall be encoded as shown in Figure 8.2.9-1. It indicates the guaranteed bit rate authorized for the uplink and/or downlink directions.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 27 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 9\nUL GBR\n\n\n                                   10 to 14\nDL GBR\n\n\n15 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.9-1: GBR\nThe UL/DL GBR fields shall be encoded as kilobits per second (1 kbps = 1000 bps) in binary value. The UL/DL GBR fields may require converting values in bits per second to kilobits per second when the UL/DL GBR values are received from an interface other than GTPv2 interface. If such conversions result in fractions, then the value of UL/DL GBR fields shall be rounded upwards. The range of UL/DL GBR is specified in 3GPP TS 36.413 [10].\nNOTE:\tThe encoding is aligned on the encoding specified in 3GPP TS 29.274 [9].\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "QER Correlation ID", "numbering": "8.2.10", "title_level": 2, "desc": "8.2.10\tQER Correlation ID\nThe QER Correlation ID IE type shall be encoded as shown in Figure 8.2.10-1. It contains a QoS Enforcement Rule Correlation ID to correlate QERs from different PFCP sessions. The QER Correlation ID shall be dynamically assigned by the CP function and provisioned by the CP function in different PFCP sessions to correlate QERs used in these PFCP sessions.\nNOTE:\tA QER Correlation ID is not a Rule ID. It is only a correlation number to correlate QERs from different PFCP sessions.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 28 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nQER Correlation ID value\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.10-1: QER Correlation ID\nThe QER Correlation ID value shall be encoded as an Unsigned32 binary integer value. \n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Precedence", "numbering": "8.2.11", "title_level": 2, "desc": "8.2.11\tPrecedence\nThe Precedence IE type shall be encoded as shown in Figure 8.2.11-1. It defines the relative precedence of a PDR among all the PDRs provisioned within an PFCP session, when looking for a PDR matching an incoming packet.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 29 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nPrecedence value\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.11-1: Precedence\n      The Precedence value shall be encoded as an Unsigned32 binary integer value. The lower precedence values indicate higher precedence of the PDR, and the higher precedence values indicate lower precedence of the PDR when matching a packet.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Transport Level Marking", "numbering": "8.2.12", "title_level": 2, "desc": "8.2.12\tTransport Level Marking\nThe Transport Level Marking IE type shall be encoded as shown in Figure 8.2.12-1. It indicates the DSCP to be used for UL/DL transport level marking.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 30 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 6\nToS/Traffic Class\n\n\n7 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.12-1: Transport Level Marking\nThe ToS/Traffic Class shall be encoded on two octets as an OctetString. The first octet shall contain the DSCP value in the IPv4 Type-of-Service or the IPv6 Traffic-Class field and the second octet shall contain the ToS/Traffic Class mask field, which shall be set to \"0xFC\". See clause 5.3.15 of 3GPP TS 29.212 [8].\nNOTE:\tThe original ECN bits in the IP header of user plane packets are not changed after applying transport level marking. \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Volume Threshold", "numbering": "8.2.13", "title_level": 2, "desc": "8.2.13\tVolume Threshold\nThe Volume Threshold IE contains the traffic volume thresholds to be monitored by the UP function. It shall be encoded as shown in Figure 8.2.13-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 31 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nDLVOL\nULVOL\nTOVOL\n\n\n                                  m to (m+7)\nTotal Volume\n\n\n                                  p to (p+7)\nUplink Volume\n\n\n                                  q to (q+7)\nDownlink Volume\n\n\ns to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.13-1: Volume Threshold\nThe following flags are coded within Octet 5:\n-\tBit 1  -  TOVOL: If this bit is set to \"1\", then the Total Volume field shall be present, otherwise the Total Volume field shall not be present.\n-\tBit 2  -  ULVOL: If this bit is set to \"1\", then the Uplink Volume field shall be present, otherwise the Uplink Volume field shall not be present.\n-\tBit 3  -  DLVOL: If this bit is set to \"1\", then the Downlink Volume field shall be present, otherwise the Downlink Volume field shall not be present.\n-\tBit 4 to 8: Spare, for future use and set to 0.\nAt least one bit shall be set to 1. Several bits may be set to 1.\nThe Total Volume, Uplink Volume and Downlink Volume fields shall be encoded as an Unsigned64 binary integer value. They shall contain the total, uplink or downlink number of octets respectively.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Time Threshold", "numbering": "8.2.14", "title_level": 2, "desc": "8.2.14\tTime Threshold\nThe Time Threshold IE contains the traffic duration threshold to be monitored by the UP function. It shall be encoded as shown in Figure 8.2.14-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 32 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nTime Threshold\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.14-1: Time Threshold\nThe Time Threshold field shall be encoded as an Unsigned32 binary integer value. It shall contain the duration in seconds.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Monitoring Time", "numbering": "8.2.15", "title_level": 2, "desc": "8.2.15\tMonitoring Time\nThe Monitoring Time IE indicates the time at which the UP function is expected to reapply the thresholds. It shall be encoded as shown in Figure 8.2.15-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 33 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nMonitoring Time\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.15-1: Monitoring Time\nThe Monitoring Time field shall indicate the monitoring time in UTC time. Octets 5 to 8 shall be encoded in the same format as the first four octets of the 64-bit timestamp format as defined in section 6 of IETF RFC 5905 [12].\nNOTE:\tThe encoding is defined as the time in seconds relative to 00:00:00 on 1 January 1900.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Subsequent Volume Threshold", "numbering": "8.2.16", "title_level": 2, "desc": "8.2.16\tSubsequent Volume Threshold\nThe Subsequent Volume Threshold IE contains the subsequent traffic volume thresholds to be monitored by the UP function after the Monitoring Time. It shall be encoded as shown in Figure 8.2.16-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 34 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nDLVOL\nULVOL\nTOVOL\n\n\n                                  m to (m+7)\nTotal Volume\n\n\n                                  p to (p+7)\nUplink Volume\n\n\n                                  q to (q+7)\nDownlink Volume\n\n\ns to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.16-1: Subsequent Volume Threshold\nThe following flags are coded within Octet 5:\n-\tBit 1  -  TOVOL: If this bit is set to \"1\", then the Total Volume field shall be present, otherwise the Total Volume field shall not be present.\n-\tBit 2  -  ULVOL: If this bit is set to \"1\", then the Uplink Volume field shall be present, otherwise the Uplink Volume field shall not be present.\n-\tBit 3  -  DLVOL: If this bit is set to \"1\", then the Downlink Volume field shall be present, otherwise the Downlink Volume field shall not be present.\n-\tBit 4 to 8: Spare, for future use and set to 0.\nAt least one bit shall be set to 1. Several bits may be set to 1.\nThe Total Volume, Uplink Volume and Downlink Volume fields shall be encoded as an Unsigned64 binary integer value. They shall contain the total, uplink or downlink number of octets respectively.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Subsequent Time Threshold", "numbering": "8.2.17", "title_level": 2, "desc": "8.2.17\tSubsequent Time Threshold\nThe Subsequent Time Threshold IE contains the subsequent traffic duration threshold to be monitored by the UP function after the Monitoring Time. It shall be encoded as shown in Figure 8.2.17-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 35 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nSubsequent Time Threshold\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.17-1: Subsequent Time Threshold\nThe Subsequent Time Threshold field shall be encoded as an Unsigned32 binary integer value. It shall contain the duration in seconds.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Inactivity Detection Time", "numbering": "8.2.18", "title_level": 2, "desc": "8.2.18\tInactivity Detection Time\nThe Inactivity Detection Time IE contains the inactivity time period, in seconds, to be monitored by the UP function. It shall be encoded as shown in Figure 8.2.18-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 36 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nInactivity Detection Time\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.18-1: Inactivity Detection Time\nThe Inactivity Detection Time field shall be encoded as an Unsigned32 binary integer value.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Reporting Triggers", "numbering": "8.2.19", "title_level": 2, "desc": "8.2.19\tReporting Triggers\nThe Reporting Triggers IE shall be encoded as shown in Figure 8.2.19-1. It indicates the reporting trigger(s) for the UP function to send a report to the CP function.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 37 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nLIUSA\nDROTH\nSTOPT\nSTART\nQUHTI\nTIMTH\nVOLTH\nPERIO\n\n\n                                       6\nSpare\nSpare\nEVEQU\nEVETH\nMACAR\nENVCL\nTIMQU\nVOLQU\n\n\n7 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.19-1: Reporting Triggers\nOctet 5 shall be encoded as follows:\n-\tBit 1  -  PERIO (Periodic Reporting): when set to 1, this indicates a request for periodic reporting.\n-\tBit 2  -  VOLTH (Volume Threshold): when set to 1, this indicates a request for reporting when the data volume usage reaches a volume threshold\n-\tBit 3  -  TIMTH (Time Threshold): when set to 1, this indicates a request for reporting when the time usage reaches a time threshold.\n-\tBit 4  -  QUHTI (Quota Holding Time): when set to 1, this indicates a request for reporting when no packets have been received for a period exceeding the Quota Holding Time.\n-\tBit 5  -  START (Start of Traffic): when set to 1, this indicates a request for reporting when detecting the start of an SDF or Application traffic.\n-\tBit 6  -  STOPT (Stop of Traffic): when set to 1, this indicates a request for reporting when detecting the stop of an SDF or Application Traffic.\n-\tBit 7 - DROTH (Dropped DL Traffic Threshold): when set to 1, this indicates a request for reporting when the DL traffic being dropped reaches a threshold.\n-\tBit 8: - LIUSA (Linked Usage Reporting): when set to 1, this indicates a request for linked usage reporting, i.e. a request for reporting a usage report for a URR when a usage report is reported for a linked URR (see clause 5.2.2.4).\nOctet 6 shall be encoded as follows:\n-\tBit 1  - VOLQU (Volume Quota): when set to 1, this indicates a request for reporting when a Volume Quota is exhausted.\n-\tBit 2  -  TIMQU (Time Quota): when set to 1, this indicates a request for reporting when a Time Quota is exhausted.\n-\tBit 3  -  ENVCL (Envelope Closure): when set to 1, this indicates a request for reporting when conditions for closure of envelope is met (see clause 5.2.2.3).\n-\tBit 4  -  MACAR (MAC Addresses Reporting): when set to 1, this indicates a request for reporting the MAC (Ethernet) addresses used as source address of frames sent UL by the UE.\n-\tBit 5  -  EVETH (Event Threshold): when set to 1, this indicates a request for reporting when an event threshold is reached. .\n-\tBit 6  -  EVEQU (Event Quota): when set to 1, this indicates a request for reporting when an Event Quota is reached.\n-\tBits 7 to 8: Spare, for future use and set to 0.\nAt least one bit shall be set to 1. Several bits may be set to 1.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Redirect Information", "numbering": "8.2.20", "title_level": 2, "desc": "8.2.20\tRedirect Information\n Redirect Information is coded as depicted in Figure 8.2.20-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1-2\nType = 38 (decimal)\n\n\n3-4\nLength = n\n\n\n5\nSpare\nRedirect Address Type\n\n\n6-7\nRedirect Server Address Length=a\n\n\n8-(8+a-1)\nRedirect Server Address\n\n\np-(p+1)\nOther Redirect Server Address Length=b\n\n\n(p+2)-(p+2+b-1)\nOther Redirect Server Address\n\n\ns to (n+4) \nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.20-1: Redirect Information \nRedirect Address Type indicates the type of the Redirect Address. It shall be encoded as defined in Table 8.2.20-1.\nTable 8.2.20-1: Redirect Address Type\nRedirect Address Type \nValue (Decimal)\nIPv4 address\n0\nIPv6 address\n1\nURL\n2\nSIP URI\n3\nIPv4 and IPv6 addresses\n4\nSpare, for future use.\n5 to 15\n The Redirect Server Address Length shall indicate the length of the Redirect Server Address. \n The Redirect Server Address shall be encoded in UTF8String format and shall contain the address of the redirect server (e.g. HTTP redirect server, SIP server) with which the end user is to be connected, as specified in clauses 8.38 and 8.39 of IETF RFC 4006 [16].\n If the Redirect Address type is set to \"IPv4 and IPv6 address\", the Redirect Information IE shall include an IPv4 address and an IPv6 address in the Redirect Server Address IE and Other Redirect Server Address.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Report Type", "numbering": "8.2.21", "title_level": 2, "desc": "8.2.21\tReport Type\nThe Report Type IE shall be encoded as shown in Figure 8.2.21-1. It indicates the type of the report the UP function sends to the CP function.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 39 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nUPIR\nERIR\nUSAR\nDLDR\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.21-1: Report Type\nOctet 5 shall be encoded as follows:\n-\tBit 1  -  DLDR (Downlink Data Report): when set to 1, this indicates Downlink Data Report \n-\tBit 2  -  USAR (Usage Report): when set to 1, this indicates a Usage Report \n-\tBit 3  -  ERIR (Error Indication Report): when set to 1, this indicates an Error Indication Report.\n-\tBit 4  -  UPIR (User Plane Inactivity Report): when set to 1, this indicates a User Plane Inactivity Report.\n-\tBit 5 to 8  -  Spare, for future use and set to 0.\nAt least one bit shall be set to 1. Several bits may be set to 1.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Offending IE", "numbering": "8.2.22", "title_level": 2, "desc": "8.2.22\tOffending IE\nOffending IE IE is coded as depicted in Figure 8.2.22-1.\n\n.\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 40 (decimal)\n\n\n3 to 4\nLength = 2\n\n\n5 to 6\nType of the offending IE\n\nFigure 8.2.22-1: Offending IE\nThe offending IE shall contain a mandatory IE type, if the rejection is due to a conditional or mandatory IE is faulty or missing.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Forwarding Policy", "numbering": "8.2.23", "title_level": 2, "desc": "8.2.23\tForwarding Policy\nThe Forwarding Policy IE type shall be encoded as shown in Figure 8.2.23-1. It indicates a specific forwarding policy to apply to packets.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 41 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                      5 \nForwarding Policy Identifier Length\n\n\n                                    j to k \nForwarding Policy Identifier\n\n\nm to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.23-1: Forwarding Policy\nThe Forwarding Policy Identifier Length shall indicate the length of the Forwarding Policy Identifier.\nThe Forwarding Policy Identifier shall be encoded as an Octet String containing a reference to a pre-configured Forwarding Policy in the UP function, with a maximum length of 255 octets.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Destination Interface", "numbering": "8.2.24", "title_level": 2, "desc": "8.2.24\tDestination Interface\nThe Destination Interface IE type shall be encoded as shown in Figure 8.2.24-1. It indicates the type of the interface towards which an outgoing packet is sent.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 42 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                      5 \nSpare\nInterface value\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.24-1: Destination Interface\nThe Interface value shall be encoded as a 4 bits binary integer as specified in Table 8.2.24-1.\nTable 8.2.24-1: Interface value\n     Interface value\n     Values (Decimal)\nAccess (NOTE 1, NOTE 3, NOTE 4)\n0\nCore (see NOTE 1)\n1\nSGi-LAN/N6-LAN\n2\nCP- Function\n3\nLI Function (see NOTE 2)\n4\nSpare\n5 to 15\nNOTE 1:\tThe \"Access\" and \"Core\" values denote a downlink and uplink traffic direction respectively. \nNOTE 2:\tLI Function may denote an SX3LIF or an LMISF. See clause 5.7.\nNOTE 3:\tFor indirect data forwarding, the Source Interface in the PDR and the Destination Interface in the FAR shall both be set to \"Access\", in the forwarding SGW(s). The Interface value does not infer any traffic direction, in PDRs and FARs set up for indirect data forwarding, i.e. with both the Source and Destination Interfaces set to Access.\nNOTE 4:\tFor a HTTP redirection, the Source Interface in the PDR to match the uplink packets to be redirected and the Destination Interface in the FAR to enable the HTTP redirection shall both be set to \"Access\".\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "UP Function Features", "numbering": "8.2.25", "title_level": 2, "desc": "8.2.25\tUP Function Features\nThe UP Function Features IE indicates the features supported by the UP function. It is coded as depicted in Figure 8.2.25-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 43 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5 to 6\nSupported-Features\n\n\n7 to 8\nAdditional Supported-Features 1\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.25-1: UP Function Features\nThe UP Function Features IE takes the form of a bitmask where each bit set indicates that the corresponding feature is supported. Spare bits shall be ignored by the receiver. The same bitmask is defined for all PFCP interfaces.\nThe following table specifies the features defined on PFCP interfaces and the interfaces on which they apply.\nTable 8.2.25-1: UP Function Features\nFeature Octet / Bit\nFeature\nInterface\nDescription\n5/1\nBUCP\nSxa, N4\nDownlink Data Buffering in CP function is supported by the UP function. \n\n5/2\nDDND\nSxa, N4\nThe buffering parameter 'Downlink Data Notification Delay' is supported by the UP function. \n5/3\nDLBD\nSxa, N4\nThe buffering parameter 'DL Buffering Duration' is supported by the UP function. \n5/4\nTRST\nSxb, Sxc, N4\nTraffic Steering is supported by the UP function. \n\n5/5\nFTUP\nSxa, Sxb, N4\nF-TEID allocation / release in the UP function is supported by the UP function. \n5/6\nPFDM\nSxb, Sxc, N4\nThe PFD Management procedure is supported by the UP function. \n5/7\nHEEU\nSxb, Sxc, N4\nHeader Enrichment of Uplink traffic is supported by the UP function.\n5/8\nTREU\nSxb, Sxc, N4\nTraffic Redirection Enforcement in the UP function is supported by the UP function. \n6/1\nEMPU\nSxa, Sxb, N4\nSending of End Marker packets supported by the UP function.\n6/2\nPDIU\nSxa, Sxb, Sxc, N4\nSupport of PDI optimised signalling in UP function (see clause 5.2.1A.2).\n6/3\nUDBC\nSxb, Sxc, N4\nSupport of UL/DL Buffering Control\n6/4\nQUOAC\nSxb, Sxc, N4\nThe UP function supports being provisioned with the Quota Action to apply when reaching quotas. \n6/5\nTRACE\nSxa, Sxb, Sxc, N4\nThe UP function supports Trace (see clause 5.x). \n6/6\nFRRT\nSxb, N4\nThe UP function supports Framed Routing (see IETF RFC 2865 [37] and IETF RFC 3162 [38]).  \n6/7\nPFDE\nSxb, N4\nThe UP function supports a PFD Contents including a property with multiple values.\n6/8\nEPFAR\nSxa, Sxb, Sxc, N4\nThe UP function supports the Enhanced PFCP Association Release feature (see clause 5.18).\n7/1\nDPDRA\nSxb, Sxc, N4\nThe UP function supports Deferred PDR Activation or Deactivation.\n7/2\nADPDP\nSxa, Sxb, Sxc, N4\nThe UP function supports the Activation and Deactivation of Pre-defined PDRs (see clause 5.19). \n7/3\nUEIP\nN4\nThe UPF supports allocating UE IP addresses or prefixes (see clause 5.21).\n7/4\nSSET\nN4\nUPF support of PFCP sessions successively controlled by different SMFs of a same SMF Set (see clause 5.22). \nFeature Octet / Bit: The octet and bit number within the Supported-Features IE, e.g. \"5 / 1\".\nFeature: A short name that can be used to refer to the octet / bit and to the feature.\nInterface: A list of applicable interfaces to the feature.\nDescription: A clear textual description of the feature.\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Apply Action", "numbering": "8.2.26", "title_level": 2, "desc": "8.2.26\tApply Action\nThe Apply Action IE indicates the action(s) the UP function is required to apply to packets. It is coded as shown in Figure 8.2.26-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 44 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5\nSpare\nSpare\nSpare\nDUPL\nNOCP\nBUFF\nFORW\nDROP\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.26-1: Apply Action\nThe octet 5 shall be encoded as follows:\n-\tBit 1  -  DROP (Drop): when set to 1, this indicates a request to drop the packets.\n-\tBit 2  -  FORW (Forward): when set to 1, this indicates a request to forward the packets.\n-\tBit 3  -  BUFF (Buffer): when set to 1, this indicates a request to buffer the packets.\n-\tBit 4  -  NOCP (Notify the CP function): when set to 1, this indicates a request to notify the CP function about the arrival of a first downlink packet being buffered.\n-\tBit 5  -  DUPL (Duplicate): when set to 1, this indicates a request to duplicate the packets.\n-\tBit 6 to 8  -  Spare, for future use and set to 0.\nOne and only one of the DROP, FORW and BUFF flags shall be set to 1. \nThe NOCP flag may only be set if the BUFF flag is set.\nThe DUPL flag may be set with any of the DROP, FORW, BUFF and NOCP flags.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Downlink Data Service Information", "numbering": "8.2.27", "title_level": 2, "desc": "8.2.27\tDownlink Data Service Information\nThe Downlink Data Service Information IE is used to carry downlink data service information. It is coded as shown in Figure 8.2.27-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 45 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5\nSpare\nQFII\nPPI\n\n\n                                       m\nSpare\nPaging Policy Indication value\n\n\n                                       p\nSpare\nQFI\n\n\nq to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.27-1: Downlink Data Service Information\nThe PPI flag in octet 5 indicates whether the Paging Policy Indication value in octet 'm' shall be present. If PPI is set to '1', then the Paging Policy Indication value shall be present. If PPI is set to '0', then octet 'm' shall not be present.\nThe Paging Policy Indication value, in octet 'm', shall be encoded as the DSCP in TOS (IPv4) or TC (IPv6) information received in the IP payload of the GTP-U packet from the PGW (see IETF RFC 2474 [13]).\nThe QFII flag in octet 5 indicates whether the QFI value in octet 'p' shall be present. If QFII is set to '1', then the QFI value shall be present. If QFII is set to '0', then octet 'p' shall not be present.\nThe QFI value, in octet 'p', shall be encoded as the octet 5 of the QFI IE in clause 8.2.89.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Downlink Data Notification Delay", "numbering": "8.2.28", "title_level": 2, "desc": "8.2.28\tDownlink Data Notification Delay\nThe Downlink Data Notification Delay IE indicates the delay the UP function shall apply between receiving a downlink data packet and notifying the CP function about the arrival of the packet. It is coded as depicted in Figure 8.2.28-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 46 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5\nDelay Value in integer multiples of 50 millisecs, or zero\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.28-1: Downlink Data Notification Delay\nDelay Value shall be set to zero in order to clear a previously set delay condition.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "DL Buffering Duration", "numbering": "8.2.29", "title_level": 2, "desc": "8.2.29\tDL Buffering Duration\nThe DL Buffering Duration IE indicates the duration during which the UP function is requested to buffer the downlink data packets. It is coded as shown in figure 8.2.29-1 and table 8.2.29.1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 47 (decimal)\n\n\n3 to 4\nLength = n \n\n\n5\nTimer unit\nTimer value\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.29-1: DL Buffering Duration \nTable 8.2.29.1: DL Buffering Duration\nTimer value \nBits 5 to 1 represent the binary coded timer value.\n\nTimer unit \nBits 6 to 8 defines the timer value unit as follows:\nBits \n8 7 6\n0 0 0  value is incremented in multiples of 2 seconds\n0 0 1  value is incremented in multiples of 1 minute \n0 1 0  value is incremented in multiples of 10 minutes\n0 1 1  value is incremented in multiples of 1 hour\n1 0 0  value is incremented in multiples of 10 hours\n1 1 1  value indicates that the timer is infinite\n\nOther values shall be interpreted as multiples of 1 minute in this version of the protocol.\n\nTimer unit and Timer value both set to all \"zeros\" shall be interpreted as an indication that the timer is stopped. \n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "DL Buffering Suggested Packet Count", "numbering": "8.2.30", "title_level": 2, "desc": "8.2.30\tDL Buffering Suggested Packet Count\nThe DL Buffering Suggested Packet Count IE indicates the maximum number of downlink data packets suggested to be buffered in the UP function for this PFCP session. It is coded as depicted in Figure 8.2.30-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 48 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5 to n+4\nPacket Count Value\n\nFigure 8.2.30-1: DL Buffering Suggested Packet Count\nThe Packet Count value is encoded with the number of octets defined in the Length field, e.g. when n=2, the range of the Packet Count value is from 0 to 65535.\nThe length shall be set to 1 or 2 octets.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCPSMReq-Flags", "numbering": "8.2.31", "title_level": 2, "desc": "8.2.31\tPFCPSMReq-Flags\nThe PFCPSMReq-Flags IE indicates flags applicable to the PFCP Session Modification Request message. It is coded as depicted in Figure 8.2.31-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 49 (decimal)\n\n\n3 to 4\nLength = n \n\n\n5\nSpare\nSpare\nSpare\nSpare\nSpare\nQAURR\nSNDEM\nDROBU\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.31-1: PFCPSMReq-Flags\nThe following bits within Octet 5 shall indicate:\n-\tBit 1  -  DROBU (Drop Buffered Packets): if this bit is set to 1, it indicates that the UP function shall drop all the packets currently buffered for the PFCP session, if any, prior to further applying the action specified in the Apply Action value of the FARs.\n-\tBit 2  -  SNDEM (Send End Marker Packets): if this bit is set to 1, it indicates that the UP function shall construct and send End Marker packets towards the old F-TEID of the downstream node when switching to the new F-TEID.\n-\tBit 3  -  QAURR (Query All URRs): if this bit is set to 1, it indicates that the UP function shall return immediate usage report(s) for all the URRs previously provisioned for this PFCP session.\n-\tBit 4 to 8  -  Spare, for future use, shall be set to 0 by the sender and discarded by the receiver.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCPSRRsp-Flags", "numbering": "8.2.32", "title_level": 2, "desc": "8.2.32\tPFCPSRRsp-Flags\nThe PFCPSRRsp-Flags IE indicates flags applicable to the PFCP Session Report Response message. It is coded as depicted in Figure 8.2.32-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 50 (decimal)\n\n\n3 to 4\nLength = n \n\n\n5\nSpare\nSpare\nSpare\nSpare\nSpare\nSpare\nSpare \nDROBU\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.32-1: PFCPSRRsp-Flags\nThe following bits within Octet 5 shall indicate:\n-\tBit 1  -  DROBU (Drop Buffered Packets): if this bit is set to 1, it indicates that the UP function shall drop all the packets currently buffered for the PFCP session, if any, prior to further applying the action specified in the Apply Action value of the FARs.\n-\tBit 2 to 8  -  Spare, for future use, shall be set to 0 by the sender and discarded by the receiver.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Sequence Number", "numbering": "8.2.33", "title_level": 2, "desc": "8.2.33\tSequence Number\nThe Sequence Number IE shall be encoded as shown in Figure 8.2.33-1. It contains an Unsigned32 binary integer value.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 52 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nSequence Number\n\nFigure 8.2.33-1: Sequence Number\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Metric", "numbering": "8.2.34", "title_level": 2, "desc": "8.2.34\tMetric\nThe Metric IE shall be encoded as shown in Figure 8.2.34-1. It indicates a percentage and may take binary coded integer values from and including 0 up to and including 100. Other values shall be considered as 0.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 53 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nMetric\n\nFigure 8.2.34-1: Metric\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Timer", "numbering": "8.2.35", "title_level": 2, "desc": "8.2.35\tTimer\nThe purpose of the Timer IE is to specify specific timer values. The Timer IE shall be encoded as shown in Figure 8.2.35-1 and table 8.2.35.1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 55 (decimal)\n\n\n3 to 4\nLength = n \n\n\n5\nTimer unit\nTimer value\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.35-1: Timer \nTable 8.2.35.1: Timer information element\nTimer value \nBits 5 to 1 represent the binary coded timer value.\n\nTimer unit \nBits 6 to 8 defines the timer value unit for the timer as follows:\nBits \n8 7 6\n0 0 0  value is incremented in multiples of 2 seconds\n0 0 1  value is incremented in multiples of 1 minute \n0 1 0  value is incremented in multiples of 10 minutes\n0 1 1  value is incremented in multiples of 1 hour\n1 0 0  value is incremented in multiples of 10 hours\n1 1 1  value indicates that the timer is infinite\n\nOther values shall be interpreted as multiples of 1 minute in this version of the protocol.\n\nTimer unit and Timer value both set to all \"zeros\" shall be interpreted as an indication that the timer is stopped. \n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Packet Detection Rule ID (PDR ID)", "numbering": "8.2.36", "title_level": 2, "desc": "8.2.36\tPacket Detection Rule ID (PDR ID)\nThe PDR ID IE is coded as depicted in Figure 8.2.36-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 56 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 6\nRule ID\n\n\n7to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.36-1: PDR ID\nOctets 5 to 6 contain the Rule ID and shall be encoded as an integer.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "F-SEID", "numbering": "8.2.37", "title_level": 2, "desc": "8.2.37\tF-SEID\nF-SEID is coded as depicted in Figure 8.2.37-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 57 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5\nSpare\nSpare\nSpare\nSpare\nSpare\nSpare\nV4\nV6\n\n\n6 to 13\nSEID \n\n\nm to (m+3)\nIPv4 address\n\n\np to (p+15)\nIPv6 address \n\n\nk to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.37-1: F-SEID\nThe following flags are coded within Octet 5:\n-\tBit 1  -  V6: If this bit is set to \"1\", then IPv6 address field shall be present in the F-SEID, otherwise the IPv6 address field is not present at all.\n-\tBit 2  -  V4: If this bit is set to \"1\", then IPv4 address field shall be present in the F-SEID, otherwise the IPv4 address field is not present at all.\n-\tBit 3 to 8 are spare and reserved for future use.\nAt least one of V4 and V6 shall be set to \"1\", and both may be set to \"1\".\nOctets \"m to (m+3)\" and/or \"p to (p+15)\" (IPv4 address / IPv6 address fields), if present, contain respective address values.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Node ID", "numbering": "8.2.38", "title_level": 2, "desc": "8.2.38\tNode ID\nThe Node ID IE shall contain an FQDN or an IPv4/IPv6 address. It shall be encoded as shown in Figure 8.2.38-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 60 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5\nSpare\nNode ID Type\n\n\n                                    6 to o\nNode ID value\n\n\n                                  m to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.38-1: Node ID\nNode ID Type indicates the type of the Node ID value. It shall be encoded as a 4 bits binary integer as specified in Table 8.2.38-2.\nTable 8.2.38-2: Node ID Type\nNode ID Type Value (Decimal)\nNode ID Type \n0\nIPv4 address\n1\nIPv6 address\n2\nFQDN\n3 to 15\nSpare, for future use.\n \nIf the Node ID is an IPv4 address, the Node ID value length shall be 4 Octet.\nIf the Node ID is an IPv6 address, the Node ID value length shall be 16 Octet.\nIf the Node ID is an FQDN, the Node ID value encoding shall be identical to the encoding of a FQDN within a DNS message of section 3.1 of IETF RFC 1035 [27] but excluding the trailing zero byte.\nNOTE 1:\tThe FQDN field in the IE is not encoded as a dotted string as commonly used in DNS master zone files.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFD Contents", "numbering": "8.2.39", "title_level": 2, "desc": "8.2.39\tPFD Contents\nThe PFD Contents IE type shall be encoded as shown in Figure 8.2.39-1. It contains the description of a PFD.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 61 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nADNP\nAURL\nAFD\nDNP\nCP\nDN\nURL\nFD\n\n\n                                       6\nSpare\n\n\n                                  m to (m+1)\nLength of Flow Description\n\n\n                                  (m+2) to p\nFlow Description\n\n\n                                  q to (q+1)\nLength of URL\n\n\n                                  (q+2) to r\nURL\n\n\n                                  s to (s+1)\nLength of Domain Name\n\n\n                                  (s+2) to t\nDomain Name\n\n\n                                  u to (u+1)\nLength of Custom PFD Content\n\n\n                                  (u+2) to v\nCustom PFD Content\n\n\n                                  w to (w+1)\nLength of Domain Name Protocol\n\n\n                                  (w+2) to x\nDomain Name Protocol\n\n\n                                  y to (y+1)\nLength of Additional Flow Description\n\n\n                                  (y+2) to z\nAdditional Flow Description\n\n\n                                  a to (a+1)\nLength of Additional URL\n\n\n                                  (a+2) to b\nAdditional URL\n\n\n                                  c to (c+1)\nLength of Additional Domain Name and Domain Name Protocol\n\n\n                                  (c+2) to d\nAdditional Domain Name and Domain Name Protocol \n\n\ne to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.39-1: PFD Contents\nThe following flags are coded within Octet 5 in the Figure 8.2.39-1:\n-\tBit 1  -  FD (Flow Description): If this bit is set to \"1\", then the Length of Flow Description and the Flow Description fields shall be present, otherwise they shall not be present.\n-\tBit 2  -  URL (URL): If this bit is set to \"1\", then the Length of URL and the URL fields shall be present, otherwise they shall not be present.\n-\tBit 3  -  DN (Domain Name): If this bit is set to \"1\", then the Length of Domain Name and the Domain Name fields shall be present, otherwise they shall not be present.\n-\tBit 4  -  CP (Custom PFD Content): If this bit is set to \"1\", then the Length of Custom PFD Content and the Custom PFD Content fields shall be present, otherwise they shall not be present. \n-\tBit 5  -  DNP (Domain Name Protocol): If this bit is set to \"1\", then the Length of Domain Name Protocol and the Domain Name Protocol shall be present, otherwise they shall not be present; and if this bit is set to \"1\", the Length of Domain Name and the Domain Name fields shall also be present.\n-\tBit 6  -  AFD (Additional Flow Description): If this bit is set to \"1\", the Length of Additional Flow Description and the Additional Flow Description field shall be present, otherwise they shall not be present. \n-\tBit 7  -  AURL (Additional URL): If this bit is set to \"1\", the Length of Additional URL and the Additional URL field shall be present, otherwise they shall not be present. \n-\tBit 8  -  ADNP (Additional Domain Name and Domain Name Protocol): If this bit is set to \"1\", the Length of Additional Domain Name and Domain Name Protocol, and the Additional Domain Name and Domain Name Protocol field shall be present, otherwise they shall not be present. \nThe Flow Description field, when present, shall be encoded as an OctetString as specified in clause 6.4.3.7 of 3GPP TS 29.251 [21].\nThe Domain Name field, when present, shall be encoded as an OctetString as specified in clause 6.4.3.9 of 3GPP TS 29.251 [21].\nThe URL field, when present, shall be encoded as an OctetString as specified in clause 6.4.3.8 of 3GPP TS 29.251 [21].\nThe Domain Name Protocol field, when present, shall be encoded as an OctetString as specified in clause 6.4.3.x of 3GPP TS 29.251 [21].\nAdditional instance(s) of the Flow Description shall be encoded as shown in Figure 8.2.39-2.  The encoding of Flow Description 2, 3 up to m field are the same as the Flow Description field specified in clause 8.2.39.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n(y+2) to (y+3)\nLength of Flow Description 2\n\n\n(y+4) to i\nFlow Description 2\n\n\nj to (j+1) \nLength of Flow Description 3\n\n\n(j+2) to k\nFlowDescription 3\n\n\n\n...\n\n\nl to (l+1)\nLength of Flow Description m\n\n\n(l+2) to z\nFlow Description m\n\nFigure 8.2.39-2: Additional Flow Description field\nAdditional instance(s) of the URL shall be encoded as shown in 8.2.39-3. The encoding of URL 2, 3 up to m fields are the same as the URL field.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n(a+2) to (a+3)\nLength of URL 2\n\n\n(a+4) to o\nURL 2\n\n\npa to (pa+1) \nLength of URL 3\n\n\n(pa+2) to pb\nURL 3\n\n\n\n...\n\n\npc to (pc+1)\nLength of URL m\n\n\n(pc+2) to b\nURL m\n\nFigure 8.2.39-3: Additional URL field\nAdditional instance(s) of the Domain Name and Domain Name Protocol shall be encoded as shown in 8.2.39-4.  The encoding of Domain Name 2, 3, up to m fields and Domain Name Protocol 2, 3 up to m fields are the same as the Domain Name field and Domain Name Protocol field respectively.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n(c+2) to (c+3)\nLength of Domain Name 2\n\n\n(c+4) to pd\nDomain Name 2\n\n\npe to (pe+1) \nLength of Domain Name Protocol 2\n\n\n(pe+2) to pf\nDomain Name Protocol 2\n\n\npg to (pg+1)\nLength of Domain Name 3\n\n\n(pg+2) to ph \nDomain Name 3\n\n\npi to (pi+1)\nLength of Domain Name Protocol 3\n\n\n(pi+2) + pj\nDomain Name Protocol 3\n\n\n\n...\n\n\npk to (pk+1)\nLength of Domain Name m\n\n\n(pk+2) to pl\nDomain Name m\n\n\npm to (pm+1)\nLength of Domain Name Protocol m\n\n\n(pm+2) to d\nDomain Name Protocol m\n\nFigure 8.2.39-4: Additional Domain Name and Domain Name Protocol field\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Measurement Method", "numbering": "8.2.40", "title_level": 2, "desc": "8.2.40\tMeasurement Method\nThe Measurement Method IE shall be encoded as shown in Figure 8.2.40-1. It indicates the method for measuring the usage of network resources.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 62 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nSpare\nSpare\nSpare\nSpare\nEVENT\nVOLUM\nDURAT\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.40-1: Measurement Method\nOctet 5 shall be encoded as follows:\n-\tBit 1  -  DURAT (Duration): when set to 1, this indicates a request for measuring the duration of the traffic.\n-\tBit 2  -  VOLUM (Volume): when set to 1, this indicates a request for measuring the volume of the traffic.\n-\tBit 3  -  EVENT (Event): when set to 1, this indicates a request for measuring the events.\n-\tBit 4 to 8: Spare, for future use and set to 0.\nAt least one bit shall be set to 1. Several bits may be set to 1.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Usage Report Trigger", "numbering": "8.2.41", "title_level": 2, "desc": "8.2.41\tUsage Report Trigger\nThe Usage Report Trigger IE shall be encoded as shown in Figure 8.2.41-1. It indicates the trigger of the usage report.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 63 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5\nIMMER\nDROTH\nSTOPT\nSTART\nQUHTI\nTIMTH\nVOLTH\nPERIO\n\n\n6\nEVETH\nMACAR\nENVCL\nMONIT\nTERMR\nLIUSA\nTIMQU\nVOLQU\n\n\n7\nSpare\nTEBUR\nEVEQU\n\n\n8 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.41-1: Usage Report Trigger\nOctet 5 shall be encoded as follows:\n-\tBit 1  -  PERIO (Periodic Reporting): when set to 1, this indicates a periodic report.\n-\tBit 2  -  VOLTH (Volume Threshold): when set to 1, this indicates that the data volume usage reaches a volume threshold.\n-\tBit 3  -  TIMTH (Time Threshold): when set to 1, this indicates that the time usage reaches a time threshold.\n-\tBit 4  -  QUHTI (Quota Holding Time): when set to 1, this indicates that no packets have been received for a period exceeding the Quota Holding Time.\n-\tBit 5  -  START (Start of Traffic): when set to 1, this indicates that the start of traffic is detected.\n-\tBit 6  -  STOPT (Stop of Traffic): when set to 1, this indicates that the stop of traffic is detected.\n-\tBit 7 - DROTH (Dropped DL Traffic Threshold): when set to 1, this indicates that the DL traffic being dropped reaches a threshold.\n-\tBit 8  -  IMMER (Immediate Report): when set to 1, this indicates an immediate report reported on CP function demand.\nOctet 6 shall be encoded as follows:\n-\tBit 1  -  VOLQU (Volume Quota): when set to 1, this indicates that the Volume Quota has been exhausted.\n-\tBit 2  -  TIMQU (Time Quota): when set to 1, this indicates that the Time Quota has been exhausted.\n-\tBit 3 - LIUSA (Linked Usage Reporting): when set to 1, this indicates a linked usage report, i.e. a usage report being reported for a URR due to a usage report being also reported for a linked URR (see clause 5.2.2.4).\n-\tBit 4  -  TERMR (Termination Report): when set to 1, this indicates a usage report being reported (in a PFCP Session Deletion Response) for a URR due to the termination of the PFCP session, or a usage report being reported (in a PFCP Session Modification Response) for a URR due to the removal of the URR.\n-\tBit 5  -  MONIT (Monitoring Time): when set to 1, this indicates a usage report being reported for a URR due to the Monitoring Time being reached.\n-\tBit 6  -  ENVCL (Envelope Closure): when set to 1, this indicates the usage report is generated for closure of an envelope (see clause 5.2.2.3). \n-\tBit 7  -  MACAR (MAC Addresses Reporting): when set to 1, this indicates a usage report to report MAC (Ethernet) addresses used as source address of frames sent UL by the UE.\n-\tBits 8: EVETH (Event Threshold): when set to 1, this indicates a usage report is generated when an event threshold is reached.\nOctet 7 shall be encoded as follows:\n-\tBit 1  -  EVEQU (Event Quota): when set to 1, this indicates that the Event Quota has been exhausted.\n-\tBit 2  -  TEBUR (Termination By UP function Report): when set to 1, this indicates a usage report being reported for a URR due to the termination of the PFCP session which is initiated by the UP function.\n-\tBit 3 to 8: Spare, for future use and set to 0.\nAt least one bit shall be set to 1. Several bits may be set to 1.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Measurement Period", "numbering": "8.2.42", "title_level": 2, "desc": "8.2.42\tMeasurement Period\nThe Measurement Period IE contains the period, in seconds, for generating periodic usage reports. It shall be encoded as shown in Figure 8.2.42-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 64 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nMeasurement Period\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.42-1: Measurement Period\nThe Measurement Period field shall be encoded as an Unsigned32 binary integer value.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Fully qualified PDN Connection Set Identifier (FQ-CSID)", "numbering": "8.2.43", "title_level": 2, "desc": "8.2.43\tFully qualified PDN Connection Set Identifier (FQ-CSID)\nA fully qualified PDN Connection Set Identifier (FQ-CSID) identifies a set of PDN connections belonging to an arbitrary number of UEs on a SGW-C, PGW-C, SGW-U and PGW-U. The FQ-CSID is used on Sxa and Sxb interfaces. \nThe size of CSID is two octets. The FQ-CSID is coded as follows:\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 65 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5\nFQ-CSID Node-ID Type\nNumber of CSIDs= m\n\n\n6 to p\nNode-Address \n\n\n(p+1) to (p+2)\nFirst PDN Connection Set Identifier (CSID)\n\n\n(p+3) to (p+4)\nSecond PDN Connection Set Identifier (CSID)\n\n\n...\n...\n\n\nq to q+1\nm-th PDN Connection Set Identifier (CSID)\n\n\n(q+2) to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.43-1: FQ-CSID\nWhere FQ-CSID Node-ID Type values are:\n0\tindicates that Node-Address is a global unicast IPv4 address and p = 9.\n1\tindicates that Node-Address is a global unicast IPv6 address and p = 21. \n2\tindicates that Node-Address is a 4 octets long field with a 32 bit value stored in network order, and p= 9. The coding of the field is specified below:\n-\tMost significant 20 bits are the binary encoded value of (MCC * 1000 + MNC). \n-\tLeast significant 12 bits is a 12 bit integer assigned by an operator to an MME, SGW-C, SGW-U, PGW-C or PGW-U. Other values of Node-Address Type are reserved. \nValues of Number of CSID other than 1 are only employed in the PFCP Session Deletion Request.\nThe node that creates the FQ-CSID (i.e. SGW-C for SGW-C FQ-CSID, SGW-U for SGW-U FQ-CSID, PGW-C for PGW-C FQ-CSID and PGW-U for PGW-U FQ-CSID) needs to ensure that the Node-ID is globally unique and the CSID value is unique within that node.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Volume Measurement", "numbering": "8.2.44", "title_level": 2, "desc": "8.2.44\tVolume Measurement\nThe Volume Measurement IE contains the measured traffic volumes. It shall be encoded as shown in Figure 8.2.44-1. \n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 66 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nDLVOL\nULVOL\nTOVOL\n\n\n                                  m to (m+7)\nTotal Volume\n\n\n                                  p to (p+7)\nUplink Volume\n\n\n                                  q to (q+7)\nDownlink Volume\n\n\ns to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.44-1: Volume Measurement\nThe following flags are coded within Octet 5:\n-\tBit 1  -  TOVOL: If this bit is set to \"1\", then the Total Volume field shall be present, otherwise the Total Volume field shall not be present.\n-\tBit 2  -  ULVOL: If this bit is set to \"1\", then the Uplink Volume field shall be present, otherwise the Uplink Volume field shall not be present.\n-\tBit 3  -  DLVOL: If this bit is set to \"1\", then the Downlink Volume field shall be present, otherwise the Downlink Volume field shall not be present.\n-\tBit 4 to bit 8: Spare, for future use and set to 0.\nAt least one bit shall be set to 1. Several bits may be set to 1.\nThe Total Volume, Uplink Volume and Downlink Volume fields shall be encoded as an Unsigned64 binary integer value. They shall contain the total, uplink or downlink number of octets respectively.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Duration Measurement", "numbering": "8.2.45", "title_level": 2, "desc": "8.2.45\tDuration Measurement\nThe Duration Measurement IE type shall be encoded as shown in Figure 8.2.45-1. It contains the used time in seconds.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 67 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nDuration value\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.45-1: Duration Measurement\nThe Duration value shall be encoded as an Unsigned32 binary integer value.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Time of First Packet", "numbering": "8.2.46", "title_level": 2, "desc": "8.2.46\tTime of First Packet\nThe Time of First Packet IE indicates the time stamp for the first IP packet transmitted for a given usage report. It shall be encoded as shown in Figure 8.2.46-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 69 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nTime of First Packet\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.46-1: Time of First Packet\nThe Time of First Packet field shall contain a UTC time. Octets 5 to 8 shall be encoded in the same format as the first four octets of the 64-bit timestamp format as defined in section 6 of IETF RFC 5905 [12]. \nNOTE:\tThe encoding is defined as the time in seconds relative to 00:00:00 on 1 January 1900.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Time of Last Packet", "numbering": "8.2.47", "title_level": 2, "desc": "8.2.47\tTime of Last Packet\nThe Time of Last Packet IE indicates the time stamp for the last IP packet transmitted for a given usage report. It shall be encoded as shown in Figure 8.2.47-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 70 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nTime of Last Packet\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.47-1: Time of Last Packet\nThe Time of Last Packet field shall contain a UTC time. Octets 5 to 8 shall be encoded in the same format as the first four octets of the 64-bit timestamp format as defined in section 6 of IETF RFC 5905 [12]. \nNOTE:\tThe encoding is defined as the time in seconds relative to 00:00:00 on 1 January 1900.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Quota Holding Time", "numbering": "8.2.48", "title_level": 2, "desc": "8.2.48\tQuota Holding Time\nThe Quota Holding Time IE type shall be encoded as shown in Figure 8.2.48-1. It contains the quota holding time in seconds.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 71 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nQuota Holding Time value\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.48-1: Quota Holding Time\nThe Quota Holding Time value shall be encoded as an Unsigned32 binary integer value.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Dropped DL Traffic Threshold", "numbering": "8.2.49", "title_level": 2, "desc": "8.2.49\tDropped DL Traffic Threshold\nThe Dropped DL Traffic Threshold IE type shall be encoded as shown in Figure 8.2.49-1. It contains the dropped DL traffic volume thresholds to be monitored by the UP function.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 72 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nDLBY\nDLPA\n\n\n                                  m to (m+7)\nDownlink Packets\n\n\n                                  o to (o+7)\nNumber of Bytes of Downlink Data\n\n\ns to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.49-1: Dropped DL Traffic Threshold\nThe following flags are coded within Octet 5:\n-\tBit 1  -  DLPA: If this bit is set to \"1\", then the Downlink Packets field shall be present, otherwise the Downlink Packets field shall not be present.\n-\tBit 2  -  DLBY: If this bit is set to \"1\", then the Number of Bytes of Downlink Data field shall be present, otherwise the Number of Bytes of Downlink Data field shall not be present.-\tBit 3 to 8: Spare, for future use and set to 0.\nThe Downlink Packets fields shall be encoded as an Unsigned64 binary integer value. It shall contain a number of downlink packets.\nThe Number of Bytes of Downlink Data fields shall be encoded as an Unsigned64 binary integer value. It shall contain the number of bytes of the downlink data.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Volume Quota", "numbering": "8.2.50", "title_level": 2, "desc": "8.2.50\tVolume Quota\nThe Volume Quota IE type shall be encoded as shown in Figure 8.2.50-1. It contains the volume quota to be monitored by the UP function.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 73 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nDLVOL\nULVOL\nTOVOL\n\n\n                                  m to (m+7)\nTotal Volume\n\n\n                                  p to (p+7)\nUplink Volume\n\n\n                                  q to (q+7)\nDownlink Volume\n\n\nS to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.50-1: Volume Quota\nThe following flags are coded within Octet 5:\n-\tBit 1  -  TOVOL: If this bit is set to \"1\", then the Total Volume field shall be present, otherwise the Total Volume field shall not be present.\n-\tBit 2  -  ULVOL: If this bit is set to \"1\", then the Uplink Volume field shall be present, otherwise the Uplink Volume field shall not be present.\n-\tBit 3  -  DLVOL: If this bit is set to \"1\", then the Downlink Volume field shall be present, otherwise the Downlink Volume field shall not be present.\n-\tBit 4 to bit 8: Spare, for future use and set to 0.\nAt least one bit shall be set to 1. Several bits may be set to 1.\nThe Total Volume, Uplink Volume and Downlink Volume fields shall be encoded as an Unsigned64 binary integer value. They shall contain the total, uplink or downlink number of octets respectively.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Time Quota", "numbering": "8.2.51", "title_level": 2, "desc": "8.2.51\tTime Quota\nThe Time Quota IE type shall be encoded as shown in Figure 8.2.51-1. It contains the time quota to be monitored by the UP function.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 74 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nTime Quota value\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.51-1: Time Quota\nThe Time Quota value shall be encoded as an Unsigned32 binary integer value. It contains a duration in seconds.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Start Time", "numbering": "8.2.52", "title_level": 2, "desc": "8.2.52\tStart Time\nThe Start Time IE indicates the time at which the UP function started to collect the charging information. It shall be encoded as shown in Figure 8.2.52-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 75 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nStart Time\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.52-1: Start Time\nThe Start Time field shall contain a UTC time. Octets 5 to 8 shall be encoded in the same format as the first four octets of the 64-bit timestamp format as defined in section 6 of IETF RFC 5905 [12].\nNOTE:\tThe encoding is defined as the time in seconds relative to 00:00:00 on 1 January 1900.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "End Time", "numbering": "8.2.53", "title_level": 2, "desc": "8.2.53\tEnd Time\nThe End Time IE indicates the time at which the UP function ended to collect the charging information. It shall be encoded as shown in Figure 8.2.53-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 76 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nEnd Time\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.53-1: End Time\nThe End Time field shall contain a UTC time. Octets 5 to 8 shall be encoded in the same format as the first four octets of the 64-bit timestamp format as defined in section 6 of IETF RFC 5905 [12].\nNOTE:\tThe encoding is defined as the time in seconds relative to 00:00:00 on 1 January 1900.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "URR ID", "numbering": "8.2.54", "title_level": 2, "desc": "8.2.54\tURR ID\nThe URR ID IE type shall be encoded as shown in Figure 8.2.54-1. It contains a Usage Reporting Rule ID.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 81 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nURR ID value\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.54-1: URR ID\nThe URR ID value shall be encoded as an Unsigned32 binary integer value.\nThe bit 8 of octet 5 is used to indicate if the Rule ID is dynamically allocated by the CP function or predefined in the UP function. If set to 0, it indicates that the Rule is dynamically provisioned by the CP Function. If set to 1, it indicates that the Rule is predefined in the UP Function.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Linked URR ID IE", "numbering": "8.2.55", "title_level": 2, "desc": "8.2.55\tLinked URR ID IE\nThe Linked URR ID IE type shall be encoded as shown in Figure 8.2.55-1. It contains the URR ID of a linked URR.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 82 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nLinked URR ID value\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.55-1: Linked URR ID\nThe Linked URR ID value shall be encoded as an Unsigned32 binary integer value. \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Outer Header Creation", "numbering": "8.2.56", "title_level": 2, "desc": "8.2.56\tOuter Header Creation\nThe Outer Header Creation IE type shall be encoded as shown in Figure 8.2.56-1. It contains the instructions to create an Outer Header.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 84 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 6\nOuter Header Creation Description\n\n\n                                  m to (m+3)\nTEID\n\n\n                                  p to (p+3)\nIPv4 Address\n\n\n                                  q to (q+15)\nIPv6 Address\n\n\n                                  r to (r+1)\nPort Number\n\n\n                                  t to (t+2)\nC-TAG\n\n\n                                  u to (u+2)\nS-TAG\n\n\ns to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.56-1: Outer Header Creation\nThe Outer Header Creation Description field, when present, shall be encoded as specified in Table 8.2.56-1. It takes the form of a bitmask where each bit indicates the outer header to be created in the outgoing packet. Spare bits shall be ignored by the receiver.\nTable 8.2.56-1: Outer Header Creation Description \nOctet / Bit\nOuter Header to be created in the outgoing packet\n5/1\nGTP-U/UDP/IPv4 (NOTE 1), (NOTE 3)\n5/2\nGTP-U/UDP/IPv6 (NOTE 1), (NOTE 3)\n5/3\nUDP/IPv4 (NOTE 2, NOTE 5)\n5/4\nUDP/IPv6 (NOTE 2, NOTE 5)\n5/5\nIPv4 (NOTE 5)\n5/6\nIPv6 (NOTE 5) \n5/7\nC-TAG (see NOTE 4)\n5/8\nS-TAG (see NOTE 4)\nNOTE 1:\tThe SGW-U/I-UPF shall also create GTP-U extension header(s) if any has been stored for this packet, during a previous outer header removal (see clause 8.2.64).\nNOTE 2:\tThis value may apply to UL packets sent by a PGW-U for non-IP PDN connections with SGi tunnelling based on UDP/IP encapsulation (see clause 4.3.17.8.3.3.2 of 3GPP TS 23.401 [14]).\nNOTE 3:\tThe SGW-U/I-UPF shall set the GTP-U message type to the value stored during the previous outer header removal.\nNOTE 4:\tThis value may apply to UL packets sent by a UPF for Ethernet PDU sessions over N6 (see clause 5.8.2.11.6 of 3GPP TS 23.501 [28]).\nNOTE 5:\tThis value may apply e.g. to UL packets sent by a UPF (PDU Session Anchor) over N6, when explicit N6 traffic routing information is provided to the SMF (see clause 5.6.7 of 3GPP TS 23.501 [28]).\n\nAt least one bit of the Outer Header Creation Description field shall be set to 1. Bits 5/1 and 5/2 may both be set to 1 if an F-TEID with both an IPv4 and IPv6 addresses has been assigned by the GTP-U peer. In this case, the UP function shall send the outgoing packet towards the IPv4 or IPv6 address. \nThe TEID field shall be present if the Outer Header Creation Description requests the creation of a GTP-U header. Otherwise it shall not be present. When present, it shall contain the destination GTP-U TEID to set in the GTP-U header of the outgoing packet. \nThe IPv4 Address field shall be present if the Outer Header Creation Description requests the creation of an IPv4 header. Otherwise it shall not be present. When present, it shall contain the destination IPv4 address to set in the IPv4 header of the outgoing packet. \nThe IPv6 Address field shall be present if the Outer Header Creation Description requests the creation of an IPv6 header. Otherwise it shall not be present. When present, it shall contain the destination IPv6 address to set in the IPv6 header of the outgoing packet. \nThe Port Number field shall be present if the Outer Header Creation Description requests the creation of a UDP/IP header (i.e. it is set to the value 4). Otherwise it shall not be present. When present, it shall contain the destination Port Number to set in the UDP header of the outgoing packet.\nThe C-TAG field shall be present if the Outer Header Creation Description requests the setting of the C-Tag in Ethernet packet. Otherwise it shall not be present. When present, it shall contain the destination Customer-VLAN tag to set in the Customer-VLAN tag header of the outgoing packet. \nThe S-TAG field shall be present if the Outer Header Creation Description requests the setting of the S-Tag in Ethernet packet. Otherwise it shall not be present. When present, it shall contain the destination Service-VLAN tag to set in the Service-VLAN tag header of the outgoing packet.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "BAR ID", "numbering": "8.2.57", "title_level": 2, "desc": "8.2.57\tBAR ID\nThe BAR ID IE type shall be encoded as shown in Figure 8.2.57-1. It contains a Buffering Action Rule ID.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 88 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nBAR ID value\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.57-1: BAR ID\nThe BAR ID value shall be encoded as a binary integer value.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "CP Function Features", "numbering": "8.2.58", "title_level": 2, "desc": "8.2.58\tCP Function Features\nThe CP Function Features IE indicates the features supported by the CP function. Only features having an impact on the (system-wide) UP function behaviour are signalled in this IE. It is coded as depicted in Figure 8.2.58-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 89 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5 \nSupported-Features\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.58-1: CP Function Features\nThe CP Function Features IE takes the form of a bitmask where each bit set indicates that the corresponding feature is supported. Spare bits shall be ignored by the receiver. The same bitmask is defined for all PFCP interfaces.\nThe following table specifies the features defined on PFCP interfaces and the interfaces on which they apply.\nTable 8.2.58-1: CP Function Features\nFeature Octet / Bit\nFeature\nInterface\nDescription\n5/1\nLOAD\nSxa, Sxb, Sxc, N4\nLoad Control is supported by the CP function. \n\n5/2\nOVRL\nSxa, Sxb, Sxc, N4\nOverload Control is supported by the CP function. \n\n5/3\nEPFAR\nSxa, Sxb, Sxc, N4\nThe CP function supports the Enhanced PFCP Association Release feature (see clause 5.18).\n5/4\nSSET\nN4\nSMF support of PFCP sessions successively controlled by different SMFs of a same SMF Set (see clause 5.22).\nFeature Octet / Bit: The octet and bit number within the Supported-Features IE, e.g. \"5 / 1\".\nFeature: A short name that can be used to refer to the octet / bit and to the feature.\nInterface: A list of applicable interfaces to the feature.\nDescription: A clear textual description of the feature.\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Usage Information", "numbering": "8.2.59", "title_level": 2, "desc": "8.2.59\tUsage Information\nThe Usage Information IE shall be encoded as shown in Figure 8.2.59-1. It provides additional information on the Usage Report.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 90 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nUBE\nUAE\nAFT\nBEF\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.59-1: Usage Information\nOctet 5 shall be encoded as follows:\n-\tBit 1  -  BEF (Before): when set to 1, this indicates usage before a monitoring time.\n-\tBit 2  -  AFT (After): when set to 1, this indicates a usage after a monitoring time.\n-\tBit 3  -  UAE (Usage After Enforcement): when set to 1, this indicates a usage after QoS enforcement.\n-\tBit 4  -  UBE (Usage Before Enforcement): when set to 1, this indicates a usage before QoS enforcement.\n-\tBits 5 to 8: Spare, for future use and set to 0.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Application Instance ID", "numbering": "8.2.60", "title_level": 2, "desc": "8.2.60\tApplication Instance ID\nThe Application Instance ID IE type shall be encoded as shown in Figure 8.2.60-1. It contains an Application Instance Identifier referencing an application instance for which the start or stop of traffic is reported to the CP function.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 91 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5 to (n+4)\nApplication Instance Identifier\n\nFigure 8.2.60-1: Application Instance ID\nThe Application Instance Identifier shall be encoded as an OctetString (see 3GPP TS 29.212 [8]).\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Flow Information", "numbering": "8.2.61", "title_level": 2, "desc": "8.2.61\tFlow Information\nThe Flow Information IE type shall be encoded as shown in Figure 8.2.61-1. It contains the description of a flow information.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 92 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nFlow Direction\n\n\n                                    6 to 7\nLength of Flow Description\n\n\n                                    8 to m\nFlow Description\n\n\np to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.61-1: Flow Information\nThe Flow Direction field, when present, shall be encoded as defined in Table 8.2.61-1.\nTable 8.2.61-1: Flow Direction \nFlow Direction \nValue (Decimal)\nUnspecified\n0\nDownlink (traffic to the UE)\n1\nUplink (traffic from the UE)\n2\nBidirectional\n3\nFor future use. Shall not be sent. If received, shall be interpreted as the value \"0\".\n4 to 7\n\nThe Flow Description field, when present, shall be encoded as an OctetString as specified in clause 5.4.2 of 3GPP TS 29.212 [8].\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "UE IP Address", "numbering": "8.2.62", "title_level": 2, "desc": "8.2.62\tUE IP Address\nThe UE IP Address IE type shall be encoded as shown in Figure 8.2.62-1. It contains a source or destination IP address.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 93 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5\nSpare\nCH\nIPv6D\nS/D\nV4\nV6\n\n\nm to (m+3)\nIPv4 address\n\n\np to (p+15)\nIPv6 address \n\n\nr\nIPv6 Prefix Delegation Bits\n\n\nk to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.62-1: UE IP Address\nThe following flags are coded within Octet 5:\n-\tBit 1  -  V6: If this bit is set to \"1\" and the CH bit is not set, then the IPv6 address field shall be present in the UE IP Address, otherwise the IPv6 address field shall not be present.\n-\tBit 2  -  V4: If this bit is set to \"1\" and the CH bit is not set, then the IPv4 address field shall be present in the UE IP Address, otherwise the IPv4 address field shall not be present.\n-\tBit 3  -  S/D: This bit is only applicable to the UE IP Address IE in the PDI IE. It shall be set to \"0\" and ignored by the receiver in IEs other than PDI IE. In the PDI IE, if this bit is set to \"0\", this indicates a Source IP address; if this bit is set to \"1\", this indicates a Destination IP address. \n-\tBit 4  -  IPv6D: This bit is only applicable to the UE IP address IE in the PDI IE and when V6 bit is set to \"1\". If this bit is set to \"1\", then the IPv6 Prefix Delegation Bits field shall be present, otherwise the UP function shall consider IPv6 prefix is default /64.\n-\tBit 5  -  CH (CHOOSE): If this bit is set to \"1\", then the IPv4 address and IPv6 address fields shall not be present and the UP function shall assign an IP4 or an IPv6 address if the V4 or V6 bit is set respectively. This bit shall only be set by the CP function.\n-\tBit 6 to 8 Spare, for future use and set to 0.\nOctets \"m to (m+3)\" or \"p to (p+15)\" (IPv4 address / IPv6 address fields), if present, shall contain the address value.\nOctet r, if present, shall contain the number of bits allocated for IPv6 prefix delegation, e.g. if /60 prefix is used, the value is set to \"4\". When using UE IP address IE in a PDI to match the packets, the UP function shall only use the IPv6 prefix part and ignore the interface identifier part.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Packet Rate", "numbering": "8.2.63", "title_level": 2, "desc": "8.2.63\tPacket Rate\nThe Packet Rate IE contains the packet rate thresholds to be enforced by the UP function. It shall be encoded as shown in Figure 8.2.63-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 94 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nDLPR\nULPR\n\n\n                                       m\nSpare\nUplink Time Unit\n\n\n                                (m+1) to (m+2)\nMaximum Uplink Packet Rate \n\n\n                                       p\nSpare\nDownlink Time Unit\n\n\n                                (p+1) to (p+2)\nMaximum Downlink Packet Rate\n\n\nq to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.63-1: Packet Rate\nThe following flags are coded within Octet 5:\n-\tBit 1  -  ULPR (Uplink Packet Rate): If this bit is set to \"1\", then octets m to (m+2) shall be present, otherwise these octets shall not be present.\n-\tBit 2  -  DLPR (Downlink Packet Rate): If this bit is set to \"1\", then octets p to (p+2) shall be present, otherwise these octets shall not be present.\n-\tBit 3 to 8: Spare, for future use and set to 0.\nAt least one bit in Octet 5 shall be set to 1. Several bits may be set to 1.\nWhen present, octets m to (m+2) indicate the maximum number of uplink packets allowed to be sent within the uplink time unit. \nWhen present, octets p to (p+2) indicate the maximum number of downlink packets allowed to be sent within the downlink time unit. \nTable 8.2.63.1: Uplink/Downlink Time Unit\nUplink/Downlink Time unit \nBits 1 to 3 define the time unit as follows:\nBits \n3 2 1\n0 0 0  minute\n0 0 1  6 minutes\n0 1 0  hour\n0 1 1  day\n1 0 0  week\n\nOther values shall be interpreted as 000 in this version of the protocol.\n\nThe Maximum Uplink/Downlink Packet Rate shall be encoded as an Unsigned16 binary integer value. They shall indicate the maximum number of uplink/downlink packets allowed to be sent in the indicated uplink/downlink time unit respectively.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Outer Header Removal", "numbering": "8.2.64", "title_level": 2, "desc": "8.2.64\tOuter Header Removal\nThe Outer Header Removal IE type shall be encoded as shown in Figure 8.2.64-1. It contains the instructions to remove an Outer Header.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 95 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nOuter Header Removal Description\n\n\n                                       6\nGTP-U Extension Header Deletion\n\n\n7 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.64-1: Outer Header Removal\nThe Outer Header Removal Description field, when present, shall be encoded as specified in Table 8.2.64-1.\nTable 8.2.64-1: Outer Header Removal Description \nOuter Header to be removed from the incoming packet\nValue (Decimal)\nGTP-U/UDP/IPv4 (NOTE 1), (NOTE 2)\n0\nGTP-U/UDP/IPv6 (NOTE 1), (NOTE 2)\n1\nUDP/IPv4 (NOTE 3, NOTE 6)\n2\nUDP/IPv6 (NOTE 3, NOTE 6)\n3\nIPv4 (NOTE 6)\n4\nIPv6 (NOTE 6)\n5\nGTP-U/UDP/IP (NOTE 4)\n6\nVLAN S-TAG (See NOTE 5)\n7\nS-TAG and C-TAG (See NOTE 5)\n8\nFor future use. Shall not be sent. If received, shall be interpreted as the value \"1\".\n9 to 255\nNOTE 1:\tThe SGW-U/I-UPF shall store GTP-U extension header(s) required to be forwarded for this packet (as required by the comprehension rules of Figure 5.2.1-2 of 3GPP TS 29.281 [3]) that are not requested to be deleted by the GTP-U Extension Header Deletion field.\nNOTE 2:\tThe SGW-U/I-UPF shall store the GTP-U message type for a GTP-U signalling message which is required to be forwarded, e.g. for an End Marker message.\nNOTE 3:\tThis value may apply to DL packets received by a PGW-U for non-IP PDN connections with SGi tunnelling based on UDP/IP encapsulation (see clause 4.3.17.8.3.3.2 of 3GPP TS 23.401 [14]).\nNOTE 4:\tThe CP function shall use this value to instruct UP function to remove the GTP-U/UDP/IP header regardless it is IPv4 or IPv6.\nNOTE 5:\tThis value may apply to DL packets received by a UPF over N6 for Ethernet PDU sessions over (see clause 5.8.2.11.3 of 3GPP TS 23.501 [28]).\nNOTE 6:\tThis value may apply e.g. to DL packets received by a UPF (PDU Session Anchor) over N6, when explicit N6 traffic routing information is provided to the SMF (see clause 5.6.7 of 3GPP TS 23.501 [28]).\n\nThe GTP-U Extension Header Deletion field (octet 6) shall be present if it is required to delete GTP-U extension header(s) from incoming GTP-PDUs. Octet 6 shall be absent if all GTP-U extension headers required to be forwarded shall be stored as indicated in NOTE 1 of Table 8.2.64-1.\nThe GTP-U Extension Header Deletion field, when present, shall be encoded as specified in Table 8.2.64-2. It takes the form of a bitmask where each bit provides instructions on the information to be deleted from the incoming GTP-PDU packet. Spare bits shall be ignored by the receiver.\nTable 8.2.64-2: GTP-U Extension Header Deletion \nOctet / Bit\nGTP-U Extension Header to be deleted from incoming packet\n6/1\nPDU Session Container (NOTE)\nNOTE:\tThis value shall be used for data forwarding during a 5GS to EPS handover for a UPF that supports EPS-5GS interworking (see clause 5.17.3).   \n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Recovery Time Stamp", "numbering": "8.2.65", "title_level": 2, "desc": "8.2.65\tRecovery Time Stamp\nThe Recovery Time Stamp IE is coded as shown in Figure 8.2.65-1. It indicates the UTC time when the PFCP entity started. Octets 5 to 8 are encoded in the same format as the first four octets of the 64-bit timestamp format as defined in section 6 of IETF RFC 5905 [26].\nNOTE:\tThe encoding is defined as the time in seconds relative to 00:00:00 on 1 January 1900.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\n                              Type = 96 (decimal)\n\n\n                                    3 to 4\nLength = n\n\n\n                                    5 to 8\nRecovery Time Stamp value\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.65-1: Recovery Time Stamp\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "DL Flow Level Marking", "numbering": "8.2.66", "title_level": 2, "desc": "8.2.66\tDL Flow Level Marking\nThe DL Flow Level Marking IE type shall be encoded as shown in Figure 8.2.66-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 97 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nSCI\nTTC\n\n\n                                  m to (m+1)\nToS/Traffic Class\n\n\n                                  p to (p+1)\nService Class Indicator\n\n\nq to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.66-1: DL Flow Level Marking\nThe following flags are coded within Octet 5:\n-\tBit 1  -  TTC (ToS/Traffic Class): If this bit is set to \"1\", then the ToS/Traffic Class field shall be present, otherwise the ToS/Traffic Class field shall not be present.\n-\tBit 2  -  SCI (Service Class Indicator): If this bit is set to \"1\", then the Service Class Indicator field shall be present, otherwise the Service Class Indicator field shall not be present.\n-\tBit 3 to 8: Spare, for future use and set to 0.\nThe ToS/Traffic Class field, when present, shall be encoded on two octets as an OctetString. The first octet shall contain the IPv4 Type-of-Service or the IPv6 Traffic-Class field and the second octet shall contain the ToS/Traffic Class mask field. See clause 5.3.15 of 3GPP TS 29.212 [8].\nOctets p and (p+1) of the Service Class Indicator field, when present, shall be encoded respectively as octets 2 and 3 of the Service Class Indicator Extension Header specified in Figure 5.2.2.3-1 of 3GPP TS 29.281 [3].\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Header Enrichment", "numbering": "8.2.67", "title_level": 2, "desc": "8.2.67\tHeader Enrichment\nThe Header Enrichment IE type shall be encoded as shown in Figure 8.2.67-1. It contains information for header enrichment.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 98 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nHeader Type\n\n\n                                       6\nLength of Header Field Name\n\n\n                                    7 to m\nHeader Field Name\n\n\n                                       p\nLength of Header Field Value\n\n\n                                  (p+1) to q\nHeader Field Value\n\n\ns to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.67-1: Header Enrichment\nHeader Type indicates the type of the Header. It shall be encoded as defined in Table 8.2.67-1.\nTable 8.2.67-1: Header Type\nHeader Type \nValue (Decimal)\nHTTP\n0\nSpare, for future use.\n1 to 31\nLength of Header Field Name indicates the length of the Header Field Name.\nHeader Field Name shall be encoded as an OctetString.\nLength of Header Field Value indicates the length of the Header Field Value.\nHeader Field Value shall be encoded as an OctetString.\nFor a HTTP Header Type, the contents of the Header Field Name and Header Field Value shall comply with the HTTP header field format (see clause 3.2 of IETF RFC 7230 [23]).\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Measurement Information", "numbering": "8.2.68", "title_level": 2, "desc": "8.2.68\tMeasurement Information\nThe Measurement Information IE shall be encoded as shown in Figure 8.2.68-1. It provides information on the requested measurement information.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 100 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nISTM\nRADI\nINAM\nMBQE\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.68-1: Measurement Information\nOctet 5 shall be encoded as follows:\n-\tBit 1  -  MBQE (Measurement Before QoS Enforcement): when set to 1, this indicates a request to measure the traffic usage before QoS enforcement.\n-\tBit 2  -  INAM (Inactive Measurement): when set to 1, this indicates that the measurement shall be paused (inactive).\n-\tBit 3  -  RADI (Reduced Application Detection Information): when set to 1, this indicates that the Application Detection Information reported to the CP function, upon detecting the start or stop of an application, shall only contain the Application ID. \n-\tBit 4  -  ISTM (Immediate Start Time Metering): when set to 1, this indicates that time metering shall start immediately when the flag is received.\n-\tBits 5 to 8: Spare, for future use and set to 0.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Node Report Type", "numbering": "8.2.69", "title_level": 2, "desc": "8.2.69\tNode Report Type\nThe Node Report Type IE shall be encoded as shown in Figure 8.2.69-1. It indicates the type of the node report the UP function sends to the CP function.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 101 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nUPFR\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.69-1: Node Report Type\nOctet 5 shall be encoded as follows:\n-\tBit 1  -  UPFR (User Plane Path Failure Report): when set to 1, this indicates a User Plane Path Failure Report.\n-\tBit 2 to 8  -  Spare, for future use and set to 0.\nAt least one bit shall be set to 1. Several bits may be set to 1.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Remote GTP-U Peer", "numbering": "8.2.70", "title_level": 2, "desc": "8.2.70\tRemote GTP-U Peer\nThe Remote GTP-U Peer IE shall be encoded as depicted in Figure 8.2.70-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 103 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5\nSpare\nNI\nDI\nV4\nV6\n\n\nm to (m+3)\nIPv4 address\n\n\np to (p+15)\nIPv6 address \n\n\nq to (q+1)\nLength of Destination Interface field\n\n\n(q+2) to r\nDestination Interface field\n\n\ns to (s+1)\nLength of Network Instance field\n\n\n(s+2) to t\nNetwork Instance field\n\n\nk to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.70-1: Remote GTP-U Peer\nThe following flags are coded within Octet 5:\n-\tBit 1  -  V6: If this bit is set to \"1\", then the IPv6 address field shall be present, otherwise the IPv6 address field shall not be present.\n-\tBit 2  -  V4: If this bit is set to \"1\", then the IPv4 address field shall be present, otherwise the IPv4 address field shall not be present.\n-\tBit 3  -  DI: If this bit is set to \"1\", then the Length of Destination Interface field and the Destination Interface field shall be present, otherwise both the Length of Destination Interface field and the Destination Interface field shall not be present.\n-\tBit 4  -  NI: If this bit is set to \"1\", then the Length of Network Instance field and the Network Instance field shall be present, otherwise both the Length of Network Instance field and the Network Instance field shall not be present.\n-\tBit 5 to 8 - Spare, for future use and set to 0.\nEither the V4 or the V6 bit shall be set to \"1\".\nOctets \"m to (m+3)\" and/or \"p to (p+15)\" (IPv4 address / IPv6 address fields), if present, shall contain the respective address values.\nThe Destination Interface field, when present, shall be encoded as the same as Destination Interface IE specified in clause 8.2.24.\nThe Network Instance field, when present, shall be encoded as the same as Network Instance IE specified in clause 8.2.4.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "UR-SEQN", "numbering": "8.2.71", "title_level": 2, "desc": "8.2.71\tUR-SEQN\nThe UR-SEQN (Usage Report Sequence Number) IE identifies the order in which a usage report is generated for a given URR. It shall be encoded as shown in Figure 8.2.71-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 104 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nUR-SEQN\n\nFigure 8.2.71-1: UR-SEQN\nThe UR-SEQN value shall be encoded as an Unsigned32 binary integer value. \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Activate Predefined Rules", "numbering": "8.2.72", "title_level": 2, "desc": "8.2.72\tActivate Predefined Rules \nThe Activate Predefined Rules IE type shall be coded as shown in Figure 8.2.72-1. It shall indicate a Predefined Rules Name, referring to one or more predefined rules which need to be activated in the UP function.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 106 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                  5 to (n+4)\nPredefined Rules Name\n\n\nFigure 8.2.72-1: Activate Predefined Rules \nThe Predefined Rules Name field shall be encoded as an OctetString.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Deactivate Predefined Rules", "numbering": "8.2.73", "title_level": 2, "desc": "8.2.73\tDeactivate Predefined Rules\nThe Deactivate Predefined Rules IE type shall be coded as shown in Figure 8.2.73-1. It shall indicate a Predefined Rules Name, referring to one or more predefined rules which need to be deactivated in the UP function.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 107 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                  5 to (n+4)\nPredefined Rules Name\n\n\nFigure 8.2.73-1: Deactivate Predefined Rules \nThe Predefined Rules Name field shall be encoded as an OctetString.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "FAR ID", "numbering": "8.2.74", "title_level": 2, "desc": "8.2.74\tFAR ID\nThe FAR ID IE type shall be encoded as shown in Figure 8.2.74-1. It shall contain a Forwarding Action Rule ID.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 108 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nFAR ID value\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.74-1: FAR ID\nThe FAR ID value shall be encoded as an Unsigned32 binary integer value. \nThe bit 8 of octet 5 is used to indicate if the Rule ID is dynamically allocated by the CP function or predefined in the UP function. If set to 0, it indicates that the Rule is dynamically provisioned by the CP Function. If set to 1, it indicates that the Rule is predefined in the UP Function.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "QER ID", "numbering": "8.2.75", "title_level": 2, "desc": "8.2.75\tQER ID\nThe QER ID IE type shall be encoded as shown in Figure 8.2.75-1. It shall contain a QoS Enforcement Rule ID.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 109 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nQER ID value\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.75-1: QER ID\nThe QER ID value shall be encoded as an Unsigned32 binary integer value. \nThe bit 8 of octet 5 is used to indicate if the Rule ID is dynamically allocated by the CP function or predefined in the UP function. If set to 0, it indicates that the Rule is dynamically provisioned by the CP Function. If set to 1, it indicates that the Rule is predefined in the UP Function.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "OCI Flags", "numbering": "8.2.76", "title_level": 2, "desc": "8.2.76\tOCI Flags\nThe OCI Flags IE shall contain the flags for overload control related information. It shall be encoded as shown in Figure 8.2.76-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 110 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nAOCI\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.76-1: OCI Flags\nThe following flags are coded within Octet 5:\n-\tBit 1  -  AOCI: Associate OCI with Node ID: The UP function shall set this flag to 1 if it has included the \"Overload Control Information\" and if this information is to be associated with the Node ID (i.e. FQDN or the IP address used during the UP function selection) of the serving UP function. This flag shall be set to 1 by the UP function, if the \"Overload Control Information\" is included in the PFCP Session Establishment Response and the Cause IE is set to a rejection cause value.\n-\tBit 2 to 8: Spare, for future use and set to 0.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCP Association Release Request", "numbering": "8.2.77", "title_level": 2, "desc": "8.2.77\tPFCP Association Release Request\nThe PFCP Association Release Request IE shall be encoded as shown in Figure 8.2.77-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 111 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nURSS\nSARR\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.77-1: PFCP Association Release Request\nThe following flags are coded within Octet 5:\n-\tBit 1  -  SARR (PFCP Association Release Request): If this bit is set to \"1\", then the UP function requests the release of the PFCP association.\n-\tBit 2  -  URSS (non-zero Usage Reports for the affected PFCP Sessions Sent): If this bit is set to \"1\", it indicates that the UP function has sent all the non-zero usage reports to the CP function for all PFCP essions affected by the PFCP Association Release.  \n-\tBit 3 to 8: Spare, for future use and set to 0.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Graceful Release Period", "numbering": "8.2.78", "title_level": 2, "desc": "8.2.78\tGraceful Release Period\nThe purpose of the Graceful Release Period IE is to specify a specific time for a graceful release. The Graceful Release Period IE shall be encoded as shown in Figure 8.2.78-1 and table 8.2.78.1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 112 (decimal)\n\n\n3 to 4\nLength = n \n\n\n5\nTimer unit\nTimer value\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.78-1: Graceful Release Period \nTable 8.2.78.1: Graceful Release Period information element\nTimer value \nBits 5 to 1 represent the binary coded timer value.\n\nTimer unit \nBits 6 to 8 defines the timer value unit for the timer as follows:\nBits \n8 7 6\n0 0 0  value is incremented in multiples of 2 seconds\n0 0 1  value is incremented in multiples of 1 minute \n0 1 0  value is incremented in multiples of 10 minutes\n0 1 1  value is incremented in multiples of 1 hour\n1 0 0  value is incremented in multiples of 10 hours\n1 1 1  value indicates that the timer is infinite\n\nOther values shall be interpreted as multiples of 1 minute in this version of the protocol.\n\nTimer unit and Timer value both set to all \"zeros\" shall be interpreted as an indication that the timer is stopped. \n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PDN Type", "numbering": "8.2.79", "title_level": 2, "desc": "8.2.79\tPDN Type\nThe PDN Type IE shall be encoded as shown in Figure 8.2.79-1. It indicates the type of a PDN connection (IP, Ethernet or Unstructured).\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 113 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nPDN Type\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.79-1: PDN Type\nTable 8.2.79-1: PDN Type\nPDN Type \nValue (Decimal)\nIPv4\n1\nIPv6\n2\nIPv4v6\n3\nNon-IP\n4\nEthernet\n5\nFor future use. Shall not be sent. \n0, 6, 7\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Failed Rule ID", "numbering": "8.2.80", "title_level": 2, "desc": "8.2.80\tFailed Rule ID\nThe Failed Rule ID IE type shall be encoded as shown in Figure 8.2.80-1. It shall identify the Rule which failed to be created or modified.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 114 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nRule ID Type\n\n\n                                    6 to p\nRule ID value\n\n\n(p+1) to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.80-1: Failed Rule ID\nThe Rule ID Type shall be encoded as a 5 bits binary integer value as specified in Table 8.2.80-1.\nTable 8.2.80-1: Rule ID Type \nRule ID Type\nValue (Decimal)\nPDR\n0\nFAR\n1\nQER\n2\nURR\n3\nBAR\n4\nFor future use. Shall not be sent. If received, shall be interpreted as the value \"1\".\n5 to 31\n\nThe length and the value of the Rule ID value field shall be set as specified for the PDR ID, FAR ID, QER ID, URR ID and BAR ID IE types respectively. \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Time Quota Mechanism", "numbering": "8.2.81", "title_level": 2, "desc": "8.2.81\tTime Quota Mechanism\nThe Time Quota Mechanism type shall be encoded as shown in Figure 8.2.81-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 115 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nBTIT\n\n\n                                  m to (m+3)\nBase Time Interval\n\n\nw to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\n\nFigure 8.2.81-1: Time Quota Mechanism \nBTIT (Base Time Interval Type) indicates the type of the interval to be provided in the Base Time Interval field.\nTable 8.2.81-1: Base Time Interval Type\nBase Time Interval Type \nValue (Decimal)\nCTP\n0\nDTP\n1\nSpare, for future use.\n2 to 3\n\nThe Base Time Interval, shall be encoded as Unsigned32 as specified in clause 7.2.29 of 3GPP TS 32.299 [18].\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "User Plane IP Resource Information", "numbering": "8.2.82", "title_level": 2, "desc": "8.2.82\tUser Plane IP Resource Information\nThe User Plane IP Resource Information IE type shall be encoded as shown in Figure 8.2.82-1. \n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 116 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                      5 \nSpare\nASSOSI\nASSONI\nTEIDRI\nV6\nV4\n\n\n                                      6  \nTEID Range\n\n\n                                  m to (m+3) \nIPv4 address\n\n\n                                 p to (p+15) \nIPv6 address\n\n\n                                    k to l\nNetwork Instance\n\n\n                                      r \nSpare\nSource Interface\n\n\ns to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.82-1: User Plane IP Resource Information\nThe following flags are coded within Octet 5:\n-\tBit 1  -  V4: If this bit is set to \"1\", then the IPv4 address field shall be present, otherwise the IPv4 address field shall not be present.\n-\tBit 2  -  V6: If this bit is set to \"1\", then the IPv6 address field shall be present, otherwise the IPv6 address field shall not be present.\n-\tBit 3-5  -  TEID Range Indication (TEIDRI): the value of this field indicates the number of bits in the most significant octet of a TEID that are used to partition the TEID range, e.g. if this field is set to \"4\", then the first 4 bits in the TEID are used to partition the TEID range. \n-\tBit 6  -  Associated Network Instance (ASSONI): if this bit is set to \"1\", then the Network Instance field shall be present, otherwise the Network Instance field shall not be present.\n-\tBit 7  -  Associated Source Interface (ASSOSI): if this bit is set to \"1\", then the Source Interface field shall be present, otherwise the Source Interface field shall not be present.\n-\tBit 8: Spare, for future use and set to 0.\nAt least one of the V4 and V6 flags shall be set to \"1\", and both may be set to \"1\". \nIf both the ASSONI and ASSOSI flags are set to \"0\", this shall indicate that the User Plane IP Resource Information provided can be used by CP function for any Network Instance and any Source Interface of GTP-U user plane in the UP function.\nOctet 6 (TEID Range) shall be present if the TEID Range Indication is not set to zero and shall contain a value of the bits which are used to partition the TEID range. E.g. if the TEID Range Indication is set to \"4\", then Octet 6 shall be one of values between 0 and 15. When TEID Range Indication is set to zero, the Octet 6 shall not be present, the TEID is not partitioned, i.e. all TEID values are available for use by the CP function.\nOctets \"m to (m+3)\" and/or \"p to (p+15)\" (IPv4 address / IPv6 address fields), if present, shall contain the respective IP address values.\nOctets \"k to l\", if present, shall contain a Network Instance value as encoded in octet \"5 to n+4\" of the Figure 8.2.4-1 in clause 8.2.4, identifying a Network Instance with which the IP address or TEID Range is associated.\nOctet r, if present, shall contain a Source Interface value as encoded in octet 5 of the Figure 8.2.2-1 in clause 8.2.2, identifying the Source Interface with which the IP address or TEID Range is associated.\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "User Plane Inactivity Timer", "numbering": "8.2.83", "title_level": 2, "desc": "8.2.83\tUser Plane Inactivity Timer\nThe User Plane Inactivity Timer IE contains the inactivity time period, in seconds, to be monitored by the UP function. It shall be encoded as shown in Figure 8.2.83-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 117 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nUser Plane Inactivity Timer\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.83-1: User Plane Inactivity Timer\nThe User Plane Inactivity Timer field shall be encoded as an Unsigned32 binary integer value. The timer value \"0\" shall be interpreted as an indication that user plane inactivity detection and reporting is stopped.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Multiplier", "numbering": "8.2.84", "title_level": 2, "desc": "8.2.84\tMultiplier\nThe Multiplier IE type shall be encoded as shown in Figure 8.2.84-1. It contains a Multiplier (see IETF RFC 4006 [16]) to measure the abstract service units the traffic of an aggregated URR consumes from the credit pool.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 119 (decimal)\n\n\n3 to 4\nLength = 12\n\n\n                                    5 to 12\nValue-Digits\n\n\n                                   13 to 16\nExponent\n\n\nFigure 8.2.84-1: Multiplier\nThe Value-Digit value and Exponent value shall be encoded as binary integer value, and set the value as in Value-Digit AVP and Exponent AVP as specified in 3GPP TS 32.299 [18].\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Aggregated URR ID IE", "numbering": "8.2.85", "title_level": 2, "desc": "8.2.85\tAggregated URR ID IE\nThe Aggregated URR ID IE type shall be encoded as shown in Figure 8.2.85-1. It contains a URR ID.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 120 (decimal)\n\n\n3 to 4\nLength = 4\n\n\n                                    5 to 8\nURR ID value \n\nFigure 8.2.85-1: Aggregated URR ID\nEach URR ID value shall be encoded as an Unsigned32 binary integer value.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Subsequent Volume Quota", "numbering": "8.2.86", "title_level": 2, "desc": "8.2.86\tSubsequent Volume Quota\nThe Subsequent Volume Quota IE type shall be encoded as shown in Figure 8.2.86-1. It contains the volume quota to be monitored by the UP function after the Monitoring Time.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 121 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nDLVOL\nULVOL\nTOVOL\n\n\n                                  m to (m+7)\nTotal Volume\n\n\n                                  p to (p+7)\nUplink Volume\n\n\n                                  q to (q+7)\nDownlink Volume\n\n\nS to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.86-1: Subsequent Volume Quota\nThe following flags are coded within Octet 5:\n-\tBit 1  -  TOVOL: If this bit is set to \"1\", then the Total Volume field shall be present, otherwise the Total Volume field shall not be present.\n-\tBit 2  -  ULVOL: If this bit is set to \"1\", then the Uplink Volume field shall be present, otherwise the Uplink Volume field shall not be present.\n-\tBit 3  -  DLVOL: If this bit is set to \"1\", then the Downlink Volume field shall be present, otherwise the Downlink Volume field shall not be present.\n-\tBit 4 to bit 8: Spare, for future use and set to 0.\nAt least one bit shall be set to 1. Several bits may be set to 1.\nThe Total Volume, Uplink Volume and Downlink Volume fields shall be encoded as an Unsigned64 binary integer value. They shall contain the total, uplink or downlink number of octets respectively.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Subsequent Time Quota", "numbering": "8.2.87", "title_level": 2, "desc": "8.2.87\tSubsequent Time Quota\nThe Subsequent Time Quota IE type shall be encoded as shown in Figure 8.2.87-1. It contains the time quota to be monitored by the UP function after the Monitoring Time.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 122 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nTime Quota value\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.87-1: Subsequent Time Quota\nThe Time Quota value shall be encoded as an Unsigned32 binary integer value. It contains a duration in seconds.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "RQI", "numbering": "8.2.88", "title_level": 2, "desc": "8.2.88\tRQI\nThe RQI IE shall be encoded as shown in Figure 8.2.88-1. It indicates if Reflective QoS applies for the UL.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 123 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nRQI\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.88-1: RQI\nThe value of RQI flag shall be set as specified in clause 5.5.3.4 of 3GPP TS 38.415 [34].\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "QFI", "numbering": "8.2.89", "title_level": 2, "desc": "8.2.89\tQFI\nThe QFI IE type shall be encoded as shown in Figure 8.2.89-1. It contains an QoS flow identifier identifying a QoS flow in a 5G system filter. \n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 124 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5\nSpare\nQFI value\n\n\np to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.89-1: QFI\nThe QFI value shall be encoded as binary integer value, as specified in clause 5.5.3.3 of 3GPP TS 38.415 [34].\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Query URR Reference", "numbering": "8.2.90", "title_level": 2, "desc": "8.2.90\tQuery URR Reference\nThe Query URR Reference IE type shall be encoded as shown in Figure 8.2.90-1. It shall contain the reference of a query request for URR(s).\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 125 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nQuery URR Reference value\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.90-1: Query URR Reference\nThe Query URR Reference value shall be encoded as an Unsigned32 binary integer value. \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Additional Usage Reports Information", "numbering": "8.2.91", "title_level": 2, "desc": "8.2.91\tAdditional Usage Reports Information\nThe Number of Additional Usage Reports IE type shall be encoded as shown in Figure 8.2.91-1. It shall either indicate that additional usage reports will follow, or contain the number of usage reports which need to be sent in additional PFCP Session Report Request messages, in response to a PFCP Session Modification Request querying URR(s).\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 126 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nAURI\nNumber of Additional Usage Reports value\n\n\n                                       6\nNumber of Additional Usage Reports value\n\n\n7 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.91-1: Additional Usage Reports Information\nThe Number of Additional Usage Reports value shall be encoded as an unsigned binary integer value on 15 bits. Bit 7 of Octet 5 is the most significant bit and bit 1 of Octet 6 is the least significant bit. \nThe bit 8 of octet 5 shall encode the AURI (Additional Usage Reports Indication) flag: \n-\twhen set to 1, it indicates that additional usage reports will follow. In this case, the Number of Additional Usage Reports value shall be set to 0 by the sender and ignored by the receiver;   \n-\twhen set to 0, the Number of Additional Usage Reports value shall be set to the total number of additional usage reports to be sent in PFCP Session Report Request messages.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Traffic Endpoint ID", "numbering": "8.2.92", "title_level": 2, "desc": "8.2.92\tTraffic Endpoint ID\nThe Traffic Endpoint ID IE type shall be encoded as shown in Figure 8.2.92-1. It shall contain a Traffic Endpoint ID.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 131 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                      5 \nTraffic Endpoint ID value\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.92-1: Traffic Endpoint ID\nThe Traffic Endpoint ID value shall be encoded as a binary integer value within the range of 0 to 255.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "MAC address", "numbering": "8.2.93", "title_level": 2, "desc": "8.2.93\tMAC address\nThe MAC address IE shall be encoded as shown in Figure 8.2.93-1. It shall contain a MAC address value.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 133 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5\nspare\nUDES\nUSOU\nDEST\nSOUR\n\n\nm to (m+5)\nSource MAC address value\n\n\nn to (n+5)\nDestination MAC address value\n\n\no to (o+5)\nUpper Source MAC address value\n\n\np to (p+5)\nUpper Destination MAC address value\n\n\ns to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.93-1: MAC address\nThe following flags are coded within Octet 5:\n-\tBit 1  -  SOUR (Source): If this bit is set to \"1\", then the source MAC address value is provided.\n-\tBit 2  -  DEST (Destination): If this bit is set to \"1\", then the destination MAC address value is provided.\n-\tBit 3  -  USOU (Source): If this bit is set to \"1\", then the source MAC address value contains the lower value and Upper Source MAC address value contains the upper value of an MAC address range.\n-\tBit 4  -  UDES (Destination): If this bit is set to \"1\", then the destination MAC address value contains the lower value and Upper Destination MAC address value contains the upper value of an MAC address range.-\tBit 5 to 8: Spare, for future use and set to 0.\nOctets \"m to (m+5)\" or \"n to (n+5)\" and \"o to (o+5)\" or \"p to (p+5)\", if present, shall contain a MAC address value (12-digit hexadecimal numbers).\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "C-TAG (Customer-VLAN tag)", "numbering": "8.2.94", "title_level": 2, "desc": "8.2.94\tC-TAG (Customer-VLAN tag)\nThe C-TAG IE shall be encoded as shown in Figure 8.2.94-1. It shall contain the Customer-VLAN tag (C-TAG) as defined in IEEE 802.1Q [30].\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 134 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5\nSpare\nVID\nDEI\nPCP\n\n\n6 \nC-VID value\nDEI Flag\nPCP value\n\n\n7\nC-VID Value\n\n\n8 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.94-1: C-TAG (Customer-VLAN tag)\nThe following flags are coded within Octet 5:\n-\tBit 1  -  PCP: If this bit is set to \"1\", then PCP Value field shall used by the receiver, otherwise the PCP Value field shall be ignored.\n-\tBit 2  -  DEI: If this bit is set to \"1\", then DEI flag field shall used by the receiver, otherwise the DEI flag field shall be ignored.\n-\tBit 3  -  VID: If this bit is set to \"1\", then C-VID value field shall used by the receiver, otherwise the VID Value field shall be ignored.\n-\tBit 4 to 8  -  spare and reserved for future use.\nThe PCP value, DEI flag and C-VID Value shall follow the encoded as specified in IEEE 802.1Q [30] tag format.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "S-TAG (Service-VLAN tag)", "numbering": "8.2.95", "title_level": 2, "desc": "8.2.95\tS-TAG (Service-VLAN tag)\nThe S-TAG IE type shall be encoded as shown in Figure 8.2.95-1. It shall contain Service-VLAN tag (S-TAG) as defined in IEEE 802.1Q [30]\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 135 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5\nSpare\nVID\nDEI\nPCP\n\n\n6\nS-VID value\nDEI Flag\nPCP value\n\n\n7\nS-VID value\n\n\n8 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.95-1: S-TAG (Service-VLAN tag)\nThe following flags are coded within Octet 5:\n-\tBit 1  -  PCP: If this bit is set to \"1\", then PCP Value field shall used by the receiver, otherwise the PCP Value field shall be ignored.\n-\tBit 2  -  DEI: If this bit is set to \"1\", then DEI flag field shall used by the receiver, otherwise the DEI flag field shall be ignored.\n-\tBit 3  -  VID: If this bit is set to \"1\", then VID value field shall used by the receiver, otherwise the VID Value field shall be ignored.\n-\tBit 4 to 8  -  spare and reserved for future use.\nThe PCP value, DEI flag and V-VID Value shall follow the encoded as specified in IEEE 802.1Q [30] tag format.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Ethertype", "numbering": "8.2.96", "title_level": 2, "desc": "8.2.96\tEthertype\nThe Ethertype IE type shall be encoded as shown in Figure 8.2.96-1. It contains an Ethertype as defined in IEEE 802.3 [31].\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 136 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5 to 6\nEthertype\n\n\n7 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.96-1: Ethertype\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Proxying", "numbering": "8.2.97", "title_level": 2, "desc": "8.2.97\tProxying\nThe Proxying IE shall be encoded as shown in Figure 8.2.97-1. It specifies if responding to Address Resolution Protocol (ARP) (see IETF RFC 826 [32]) and / or IPv6 Neighbour Solicitation (see IETF RFC 4861 [33]) as specified in clause 5.6.10.2 of 3GPP TS 23.501 [28], functionality for the Ethernet PDUs is performed in UPF.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 137 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nINS\nARP\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.97-1: Proxying\nThe following flags are coded within Octet 5:\n-\tBit 1  -  ARP: If this bit is set to \"1\", then responding ARP is performed in UPF based on local cache information.\n-\tBit 2  -  INS: If this bit is set to \"1\", then responding to IPv6 Neighbour Solicitation is performed in UPF based on local cache information.\n-\tBit 3 to 8  -  spare and reserved for future use.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Ethernet Filter ID", "numbering": "8.2.98", "title_level": 2, "desc": "8.2.98\tEthernet Filter ID\nThe Ethernet Filter ID IE type shall be encoded as shown in Figure 8.2.98-1. \n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 138 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5 to 8\nEthernet Filter ID value\n\n\n10 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.98-1: Ethernet Filter ID\n\nThe Ethernet Filter ID value shall be encoded as an Unsigned32 binary integer value. \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Ethernet Filter Properties", "numbering": "8.2.99", "title_level": 2, "desc": "8.2.99\tEthernet Filter Properties\nThe Ethernet Filter Properties IE type shall be encoded as shown in Figure 8.2.99-1. \n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 139 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nBIDE\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.99-1: Ethernet Filter Properties\n\nThe following flags are coded within Octet 5:\n-\tBit 1  -  BIDE (Bidirectional Ethernet Filter): If this bit is set to \"1\", then the Ethernet Filter identified by the Ethernet Filter ID is bidirectional.\n-\tBit 2 to 8  -  spare and reserved for future use.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Suggested Buffering Packets Count", "numbering": "8.2.100", "title_level": 2, "desc": "8.2.100\tSuggested Buffering Packets Count\nThe Suggested Buffering Packets Count IE indicates the number of packets (including both UL and DL packets) that are suggested to be buffered by the UP function while waiting for the new instruction from the CP function. It is coded as depicted in Figure 8.2.100-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 140 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5 \nPacket Count value\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.100-1: Suggested Buffering Packets Count\nThe Packet Count value is encoded in octet 5 and the range of the Packet Count value is from 0 to 255.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "User ID", "numbering": "8.2.101", "title_level": 2, "desc": "8.2.101\tUser ID\nThe User ID IE type shall be encoded as shown in Figure 8.2.101-1. \n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 141 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                      5 \nSpare\nNAIF\nMSISDNF\nIMEIF\nIMSIF\n\n\n                                      6  \nLength of IMSI\n\n\n                                    7 to a\nIMSI\n\n\n                                       b\nLength of IMEI\n\n\n                                  (b+1) to c\nIMEI\n\n\n                                       d\nLength of MSISDN\n\n\n                                  (d+1) to e\nMSISDN\n\n\n                                       f\nLength of NAI\n\n\n                                  (f+1) to g\nNAI\n\n\nh to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.101-1: User ID\nThe following flags are coded within Octet 5:\n-\tBit 1  -  IMSIF: If this bit is set to \"1\", then the Length of IMSI and IMSI fields shall be present, otherwise these fields shall not be present.\n-\tBit 2  -  IMEIF: If this bit is set to \"1\", then the Length of IMEI and IMEI fields shall be present, otherwise these fields shall not be present.\n-\tBit 3  -  MSISDNF: If this bit is set to \"1\", then the Length of MSISDN and MSISDN fields shall be present, otherwise these fields shall not be present.\n-\tBit 4  -  NAIF: If this bit is set to \"1\", then the Length of NAI and NAI fields shall be present, otherwise these fields shall not be present.\n-\tBit 5 to 8: Spare, for future use and set to 0.\nOne or more flags may be set to 1.\nThe coding of IMSI field, from octets 7 to 'a' shall be encoded as the octets 5 to n+4 of the IMSI IE type specified in clause 8.3 of 3GPP TS 29.274 [9].\nThe coding of IMEI field, in octets 'b+1' to 'c' shall be encoded as the octets 5 to n+4 of the MEI IE type specified in clause 8.10 of 3GPP TS 29.274 [9].\nThe coding of MSISDN field, in octets 'd+1' to 'e' shall be encoded as the octets 5 to n+4 of the MSISDN IE type specified in clause 8.11 of 3GPP TS 29.274 [9].\nThe NAI field, in octets 'f+1' to 'g' shall be encoded as an Octet String (see IETF RFC 4282 [36]).\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Ethernet PDU Session Information", "numbering": "8.2.102", "title_level": 2, "desc": "8.2.102\tEthernet PDU Session Information\nEthernet PDU Session Indication is coded as depicted in Figure 8.2.102-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 142 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5\nSpare\nETHI\n\n\nk to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.102-1: Ethernet PDU Session Information\nThe following flags are coded within Octet 5:\n-\tBit 1  -  ETHI (Ethernet Indication):  This bit shall be set to 1. This refers to all the DL traffic matching the Ethernet PDU session (see clause 5.13.1).\n-\tBit 2 to 8 are spare and reserved for future use.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "MAC Addresses Detected", "numbering": "8.2.103", "title_level": 2, "desc": "8.2.103\tMAC Addresses Detected\nThe MAC Addresses Detected IE shall be encoded as shown in Figure 8.2.103-1. It shall contain a list of MAC address values.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 144 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5\nNumber of MAC addresses (k)\n\n\n6 to 11\nMAC address value 1\n\n\no to (o+5)\nMAC address value 2\n\n\np to (p+5)\n...\n\n\nq to (q+5)\nMAC address value k\n\n\ns to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.103-1: MAC addresses Detected\n\nOctet 5 shall encode the number of 48-bit MAC addresses. \nMAC address values shall be encoded as 12-digit hexadecimal numbers.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "MAC Addresses Removed", "numbering": "8.2.104", "title_level": 2, "desc": "8.2.104\tMAC Addresses Removed\nThe MAC Addresses Removed IE shall be encoded as shown in Figure 8.2.104-1. It shall contain a list of MAC address values.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 145 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5\nNumber of MAC addresses (k)\n\n\n6 to 11\nMAC address value 1\n\n\no to (o+5)\nMAC address value 2\n\n\np to (p+5)\n...\n\n\nq to (q+5)\nMAC address value k\n\n\ns to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.104-1: MAC addresses Removed\n\nOctet 5 shall encode the number of 48-bit MAC addresses. \nMAC address values shall be encoded as 12-digit hexadecimal numbers.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Ethernet Inactivity Timer", "numbering": "8.2.105", "title_level": 2, "desc": "8.2.105\tEthernet Inactivity Timer\nThe Ethenet Inactivity Timer IE contains the inactivity time period, in seconds, to be monitored by the UP function, to detect that a UE MAC address is inactive. It shall be encoded as shown in Figure 8.2.105-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 146 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nEthernet Inactivity Timer\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.105-1: Ethernet Inactivity Timer\nThe Ethernet Inactivity Timer field shall be encoded as an Unsigned32 binary integer value.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Subsequent Event Quota", "numbering": "8.2.106", "title_level": 2, "desc": "8.2.106\tSubsequent Event Quota\nThe Subsequent Event Quota IE type shall be encoded as shown in Figure 8.2.106-1. It contains the event quota to be monitored by the UP function.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 150 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nSubsequent Event Quota\n\n\n13 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.106-1: Subsequent Event Quota\nThe Subsequent Event Quota field shall be encoded as an Unsigned32 binary integer value.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Subsequent Event Threshold", "numbering": "8.2.107", "title_level": 2, "desc": "8.2.107\tSubsequent Event Threshold\nThe Subsequent Event Threshold IE contains the Number of events after which the measurement report is to be generated by the UP function. It shall be encoded as shown in Figure 8.2.107-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 151 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nSubsequent Event Threshold\n\n\n13 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.107-1: Subsequent Event Threshold\nThe Subsequent Event Threshold field shall be encoded as an Unsigned32 binary integer value.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Trace Information", "numbering": "8.2.108", "title_level": 2, "desc": "8.2.108\tTrace Information\nThe Trace Information IE type shall be encoded as shown in Figure 8.2.108-1. It contains the trace control and configuration parameters to apply for the PFCP session.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 152 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5\nMCC digit 2\nMCC digit 1\n\n\n6\nMNC digit 3\nMCC digit 3\n\n\n7\nMNC digit 2\nMNC digit 1\n\n\n8 to10\nTrace ID\n\n\n11\nLength of Triggering Events\n\n\n12 to m\nTriggering Events\n\n\nm+1\nSession Trace Depth\n\n\nm+2\nLength of List of Interfaces\n\n\n(m+3) to p\nList of Interfaces\n\n\np+1\nLength of IP Address of Trace Collection Entity \n\n\n(p+2) to q\nIP Address of Trace Collection Entity \n\n\n(q+1) to (n-4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.108-1: Trace Information\nOctets 5 to 10 represent the Trace Reference parameter as defined in clause 5.6 of 3GPP TS 32.422 [35].\nTriggering Events, Session Trace Depth, List of Interfaces and IP Address of Trace Collection Entity are specified in 3GPP TS 32.422 [35].\nOctets \"(p+2) to q\" shall contain an IPv4 address value (4 octets) or IPv6 address value (16 octets).\nSee 3GPP TS 24.008 [5], clause 10.5.1.4, Mobile Identity, for the coding of MCC and MNC. If MNC is 2 digits long, bits 5 to 8 of octet 6 are coded as \"1111\".\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Framed-Route", "numbering": "8.2.109", "title_level": 2, "desc": "8.2.109\tFramed-Route\nThe Framed-Route IE describes a framed route. It shall be encoded as shown in Figure 8.2.109-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 153 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                  5 to (n+4)\nFramed-Route\n\nFigure 8.2.109-1: Framed-Route\nThe Framed-Route field shall be encoded as an Octet String as the value part of the Framed-Routing AVP specified in IETF RFC 2865 [37].\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Framed-Routing", "numbering": "8.2.110", "title_level": 2, "desc": "", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Framed-IPv-Route", "numbering": "8.2.111", "title_level": 2, "desc": "8.2.110\tFramed-Routing\nThe Framed-Routing IE describes the frame routing of a framed route. It shall be encoded as shown in Figure 8.2.110-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 154 (decimal)\n\n\n3 to 4\nLength = 4\n\n\n                                    5 to 8\nFramed-Routing\n\nFigure 8.2.110-1: Framed-Routing\nThe Framed-Routing field shall be encoded as the value part of the Framed-Routing AVP specified in IETF RFC 2865 [37].\n8.2.111\tFramed-IPv6-Route\nThe Framed-IPv6-Route IE describes a framed IPv6 route. It shall be encoded as shown in Figure 8.2.111-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 155 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                  5 to (n+4)\nFramed-IPv6-Route\n\nFigure 8.2.z-1: Framed-IPv6-Route\nThe Framed-IPv6-Route field shall be encoded as an Octet String as the value part of the Framed-IPv6-Route AVP specified in IETF RFC 3162 [38].\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Event Quota", "numbering": "8.2.112", "title_level": 2, "desc": "8.2.112\tEvent Quota\nThe Event Quota IE type shall be encoded as shown in Figure 8.2.112-1. It contains the event quota to be monitored by the UP function.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 148 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nSubsequent Event Quota\n\n\n13 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.112-1: Event Quota\nThe Event Quota field shall be encoded as an Unsigned32 binary integer value.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Event Threshold", "numbering": "8.2.113", "title_level": 2, "desc": "8.2.113\tEvent Threshold\nThe Event Threshold IE contains the Number of events after which the measurement report is to be generated by the UP function. It shall be encoded as shown in Figure 8.2.113-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 149 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nEvent Threshold\n\n\n13 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.113-1: Event Threshold\nThe Event Threshold field shall be encoded as an Unsigned32 binary integer value.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Event Time Stamp", "numbering": "8.2.114", "title_level": 2, "desc": "8.2.114\tEvent Time Stamp \nThe Event Time Stamp IE indicates the time stamp when the event occurs in a given usage report. It shall be encoded as shown in Figure 8.2.114-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 156 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nEvent Time Stamp \n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.114-1: Event Time Stamp \nThe Event Time Stamp field shall contain a UTC time. Octets 5 to 8 shall be encoded in the same format as the first four octets of the 64-bit timestamp format as defined in section 6 of IETF RFC 5905 [12]. \nNOTE:\tThe encoding is defined as the time in seconds relative to 00:00:00 on 1 January 1900.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Averaging Window", "numbering": "8.2.115", "title_level": 2, "desc": "8.2.115\tAveraging Window\nThe Averaging Window IE shall contain the duration over which the GFBR and MFBR is calculated (see clause 5.7.3.6 of 3GPP TS 23.501 [28]). It shall be encoded as shown in Figure 8.2.115-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 157 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nAveraging Window\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.115-1: Averaging Window\nThe Averaging Window field shall be encoded as an Unsigned32 binary integer value. It shall contain the duration in ms.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Paging Policy Indicator (PPI)", "numbering": "8.2.116", "title_level": 2, "desc": "8.2.116\tPaging Policy Indicator (PPI)\nThe Paging Policy Indicator (PPI) IE indicates a PPI value for paging policy differentation. It shall be encoded as shown in Figure 8.2.116-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 158 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                       5\nSpare\nPPI value\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.116-1: Paging Policy Indicator (PPI)\nThe PPI value shall be encoded as a value between 0 and 7, as specified in clause 5.5.3.7 of 3GPP TS 38.415 [34].\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "APN/DNN", "numbering": "8.2.117", "title_level": 2, "desc": "", "Keywords": "3GPP, EPC, PFCP"}, {"key": "GPP Interface Type", "numbering": "8.2.118", "title_level": 2, "desc": "8.2.117\tAPN/DNN\nAccess Point Name (APN) / Data Network Name (DNN) is transferred from CP function to UP function.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 159 (decimal)\n\n\n3 to 4\nLength = n\n\n\n5 to (n+4)\nAPN/DNN\n\nFigure 8.2.117-1: APN/DNN\nThe encoding the APN/DNN field follows 3GPP TS 23.003 [2] clause 9.1. The content of the APN/DNN field shall be the full APN/DNN with both the APN/DNN Network Identifier and APN/DNN Operator Identifier being present as specified in 3GPP TS 23.003 [2] clauses 9.1.1 and 9.1.2, 3GPP TS 23.060 [19] Annex A and 3GPP TS 23.401 [14] clauses 4.3.8.1. \nNOTE:\tThe APN/DNN field is not encoded as a dotted string as commonly used in documentation.\n8.2.118\t3GPP Interface Type\nThe 3GPP Interface Type IE shall be encoded as shown in Figure 8.2.118-1. It indicates the 3GPP interface type of the Source Interface within the PDR IE, or the 3GPP interface type of the Destination Interface within the FAR IE.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 160 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                      5 \nSpare\nInterface Type value\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.118-1: 3GPP Interface Type\nThe 3GPP Interface Type value shall be encoded as a 6 bits binary integer as specified in in Table 8.2.118-1.\nTable 8.2.118-1: Interface Type value\n     Interface value\n     Values (Decimal)\nS1-U\n0\nS5 /S8-U\n1\nS4-U\n2\nS11-U\n3\nS12-U\n4\nGn/Gp-U\n5\nS2a-U\n6\nS2b-U\n7\neNodeB GTP-U interface for DL data forwarding\n8\neNodeB GTP-U interface for UL data forwarding\n9\nSGW/UPF GTP-U interface for DL data forwarding\n10\nN3 3GPP Access\n11\nN3 Trusted Non-3GPP Access\n12\nN3 Untrusted Non-3GPP Access\n13\nN3 for data forwarding\n14\nN9\n15\nSpare\n16 to 64\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCPSRReq-Flags", "numbering": "8.2.119", "title_level": 2, "desc": "8.2.119\tPFCPSRReq-Flags\nThe PFCPSRReq-Flags IE indicates flags applicable to the PFCP Session Report Request message. It is coded as depicted in Figure 8.2.119-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 161 (decimal)\n\n\n3 to 4\nLength = n \n\n\n5\nSpare\nSpare\nSpare\nSpare\nSpare\nSpare\nSpare\nPSDBU\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.199-1: PFCPSRReq-Flags\nThe following bits within Octet 5 shall indicate:\n-\tBit 1  -  PSDBU (PFCP Session Deleted By the UP function): if this bit is set to 1, it indicates that the UP function has reported all non-zero Usage Reports for all URRs in the PFCP Session and the PFCP Session is being deleted in the UP function locally.\n-\tBit 2 to 8  -  Spare, for future use, shall be set to 0 by the sender and discarded by the receiver.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "PFCPAUReq-Flags", "numbering": "8.2.120", "title_level": 2, "desc": "8.2.120\tPFCPAUReq-Flags\nThe PFCPAUReq-Flags IE indicates flags applicable to the PFCP Association Update Request message. It is coded as depicted in Figure 8.2.120-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 162 (decimal)\n\n\n3 to 4\nLength = n \n\n\n5\nSpare\nSpare\nSpare\nSpare\nSpare\nSpare\nSpare\nPARPS\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.120-1: PFCPAUReq-Flags\nThe following bits within Octet 5 shall indicate:\n-\tBit 1  -  PARPS (PFCP Association Release Preparation Start): if this bit is set to 1, it indicates that the PFCP association is to be released and all non-zero usage reports for the PFCP Sessions affected by the release of the PFCP association shall be reported.\n-\tBit 2 to 8  -  Spare, for future use, shall be set to 0 by the sender and discarded by the receiver.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Activation Time", "numbering": "8.2.121", "title_level": 2, "desc": "8.2.121\tActivation Time\nThe Activation Time IE indicates the time that the PDR shall be set to be active in the UP function. It shall be encoded as shown in Figure 8.2.121-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 163 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nActivation Time\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.121-1: Activation Time\nThe Activation Time field shall indicate the activation time in UTC time. Octets 5 to 8 shall be encoded in the same format as the first four octets of the 64-bit timestamp format as defined in section 6 of IETF RFC 5905 [12].\nNOTE:\tThe encoding is defined as the time in seconds relative to 00:00:00 on 1 January 1900.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Deactivation Time", "numbering": "8.2.122", "title_level": 2, "desc": "8.2.122\tDeactivation Time\nThe Deactivation Time IE indicates the time that the PDR shall be set to be inactive in the UP function. It shall be encoded as shown in Figure 8.2.122-1.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 164 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 8\nDeactivation Time\n\n\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.122-1: Deactivation Time\nThe Deactivation Time field shall indicate the deactivation time in UTC time. Octets 5 to 8 shall be encoded in the same format as the first four octets of the 64-bit timestamp format as defined in section 6 of IETF RFC 5905 [12].\nNOTE:\tThe encoding is defined as the time in seconds relative to 00:00:00 on 1 January 1900.\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "MAR ID", "numbering": "8.2.123", "title_level": 2, "desc": "8.2.123\tMAR ID\nThe MAR ID IE type shall be encoded as shown in Figure 8.2.123-1. It shall contain a Multi-Access Rule ID.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 170 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                    5 to 6\nMAR ID value\n\n\n7 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.123-1: MAR ID\nThe MAR ID value field shall be encoded as an Unsigned16 binary integer value. \n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Steering Functionality", "numbering": "8.2.124", "title_level": 2, "desc": "8.2.124\tSteering Functionality\nThe Steering Functionality IE type shall be encoded as shown in Figure 8.2.124-1. It indicates the steering functionality to be used in a MAR.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 171 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                      5 \nSpare\nSteering Functionality Value\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.124-1: Steering Functionality\nThe Steering Functionality value shall be encoded as a 4 bits binary integer as specified in Table 8.2.124-1.\nTable 8.2.124-1: Steering Functionality value\n     Steering Functionality Value\n     Values (Decimal)\nATSSS-LL\n0\nMPTCP\n1\nSpare\n2 to 15\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Steering Mode", "numbering": "8.2.125", "title_level": 2, "desc": "8.2.125\tSteering Mode\nThe Steering Mode IE type shall be encoded as shown in Figure 8.2.125-1. It indicates the steering mode to be used in a MAR.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 172 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                      5 \nSpare\nSteering Mode Value\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.125-1: Steering Functionality\nThe Steering Mode value shall be encoded as a 4 bits binary integer as specified in Table 8.2.125-1.\nTable 8.2.125-1: Steering Mode value\n     Steering Mode Value\n     Values (Decimal)\nActive-Standby\n0\nSmallest Delay\n1\nLoad Balancing\n2\nPriority-based\n3\nSpare\n4 to 15\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Weight", "numbering": "8.2.126", "title_level": 2, "desc": "8.2.126\tWeight\nThe Weight IE shall be encoded as shown in Figure 8.2.126-1. It indicates the percentage of the traffic to be transferred over one access.\nThe Weight Value field shall take binary coded integer values from 0 up to 100. Other values shall be considered as 0.\n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 173 (decimal)\n\n\n3 to 4\nLength = 1\n\n\n                                       5\nWeight Value\n\nFigure 8.2.126-1: Weight\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Priority", "numbering": "8.2.127", "title_level": 2, "desc": "8.2.127\tPriority\nThe Priority IE type shall be encoded as shown in Figure 8.2.127-1. It indicates whether it is active or standby for a given access when the Steering Mode is set to Active-Standby, or whether it is high or low priority for a given access when the Steering Mode is set to Priority-based. \n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 174 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                      5 \nSpare\nPriority Value\n\n\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\n\nFigure 8.2.127-1: Priority\nThe Priority Value shall be encoded as a 4 bits binary integer as specified in Table 8.2.127-1.\nTable 8.2.127-1: Priority value\n     Priority Value\n     Values (Decimal)\nActive\n0\nStandby\n1\nHigh\n2\nLow\n3\nSpare\n4 to 15\n\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "UE IP address Pool Identity", "numbering": "8.2.128", "title_level": 2, "desc": "8.2.128\tUE IP address Pool Identity\nThe User Plane UE IP Pool Identity IE type shall be encoded as shown in Figure 8.2.128-1. \n\n\n\nBits\n\n\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n\n\n1 to 2\nType = 177 (decimal)\n\n\n3 to 4\nLength = n\n\n\n                                  5 to (n+4)\nUE IP address Pool Identity\n\nFigure 8.2.128-1: UE IP address Pool Identity\nThe UE IP address Pool Identity shall be encoded as an OctetString (see the Framed-Ipv6-Pool and Framed-Pool in clause 12.6.3 of 3GPP TS 29.561 [49]).\n", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Alternative SMF IP Address", "numbering": "8.2.129", "title_level": 2, "desc": "", "Keywords": "3GPP, EPC, PFCP"}, {"key": "Match Field", "desc": "a field of the Packet Detection Information of a Packet Detection Rule against which a packet is attempted to be matched."}, {"key": "Matching", "desc": "comparing the set of header fields of a packet to the match fields of the Packet Detection Information of a Packet Detection Rule."}, {"key": "CP function", "desc": "A node with a Control Plane function (see 3GPP TS 23.214[2]) supporting one or more PFCP entities. A Control Plane function, i.e. a Control Plane Node, is identified by the Node ID, that is set to either an FQDN or an IP address."}, {"key": "UP function", "desc": "A node with a User Plane function (see 3GPP TS 23.214[2]) supporting one or more PFCP entities. A User Plane function, i.e. a User Plane Node, is identified by the Node ID, that is set to either a FQDN or an IP address."}, {"key": "PFCP Entity", "desc": "An endpoint in a CP (or UP) function supporting PFCP, that is identified by the IP address. The IP address of a PFCP entity may or may not be the IP address included in the Node ID."}, {"key": "ADC", "desc": "Application Detection and Control"}, {"key": "BAR", "desc": "Buffering Action Rule"}, {"key": "CP", "desc": "Control Plane"}, {"key": "DDoS", "desc": "Distributed Denial of Service"}, {"key": "DEI", "desc": "Drop Eligible Indicator"}, {"key": "DSCP", "desc": "Differentiated Services Code Point"}, {"key": "eMPS", "desc": "enhanced Multimedia Priority Service"}, {"key": "FAR", "desc": "Forwarding Action Rule"}, {"key": "F-SEID", "desc": "Fully Qualified SEID"}, {"key": "F-TEID", "desc": "Fully Qualified TEID"}, {"key": "IP", "desc": "Internet Protocol"}, {"key": "IPv4", "desc": "Internet Protocol version 4"}, {"key": "IPv6", "desc": "Internet Protocol version 6"}, {"key": "LMISF", "desc": "LI Mirror IMS State Function"}, {"key": "NR", "desc": "New Radio"}, {"key": "PCC", "desc": "Policy and Charging Control"}, {"key": "PCP", "desc": "Priority Code Point"}, {"key": "PCEF", "desc": "Policy and Charging Enforcement Function"}, {"key": "PCRF", "desc": "Policy and Charging Rule Function"}, {"key": "PDI", "desc": "Packet Detection Information"}, {"key": "PDR", "desc": "Packet Detection Rule"}, {"key": "PFCP", "desc": "Packet Forwarding Control Protocol"}, {"key": "PFD", "desc": "Packet Flow Description"}, {"key": "PGW", "desc": "PDN Gateway"}, {"key": "PGW-C", "desc": "PDN Gateway Control plane function"}, {"key": "PGW-U", "desc": "PDN Gateway User plane function"}, {"key": "QER", "desc": "QoS Enforcement Rule"}, {"key": "S8HR", "desc": "S8 Home Routed"}, {"key": "SDF", "desc": "Service Data Flow"}, {"key": "SEID", "desc": "Session Endpoint Identifier"}, {"key": "SGW", "desc": "Serving Gateway"}, {"key": "SGW-C", "desc": "Serving Gateway Control plane function"}, {"key": "SGW-U", "desc": "Serving Gateway User plane function"}, {"key": "SX3LIF", "desc": "Split X3 LI Interworking Function"}, {"key": "TDF", "desc": "Traffic Detection Function"}, {"key": "TDF-C", "desc": "Traffic Detection Function Control plane function"}, {"key": "TDF-U", "desc": "Traffic Detection Function User plane function"}, {"key": "ToS", "desc": "Type of Service"}, {"key": "TSSF", "desc": "Traffic Steering Support Function"}, {"key": "UDP", "desc": "User Datagram Protocol"}, {"key": "UP", "desc": "User Plane"}, {"key": "URR", "desc": "Usage Reporting Rule"}, {"key": "VID", "desc": "VLAN Identifier"}]