[{"key": "Scope", "numbering": "1", "title_level": 0, "desc": "         1  Scope\n\nThe present document is part of a series of Technical Specifications (TSs)\nspecifying charging functionality and charging management in Packet\nSwitched networks (GSM/UMTS, EPS). The 3GPP core network charging\narchitecture and principles are specified in TS\u00a032.240\u00a0[1], which provides\nan umbrella for other charging management documents that specify:\n\n  -  the content of the CDRs per domain / subsystem / service (offline\n    charging);\n\n  -  the content of real-time charging messages per domain / subsystem\n    /service (online charging);\n\n  -  the functionality of online and offline charging for those domains /\n    subsystems / services;\n\n  -  the interfaces that are used in the charging framework to transfer the\n    charging information (i.e. CDRs or charging events).\n\nThe complete document structure for the charging TSs is defined in TS\n32.240\u00a0[1].\n\nThe present document specifies the offline and online charging description\nfor the Packet Switched (PS) domain based on the functional stage 2\ndescription in TS 23.060 [201], TS 23.401 [208] and TS 23.402 [209].\nThe offline and online charging description for the PS domain encompasses\nalso fixed broadband access in the convergent scenario deployment (i.e.\nboth the fixed broadband access network and Evolved Packet Core (EPC) owned\nby a single operator) based on the functional stage 2 description in the\ncorresponding Annex of TS 23.203 [215].\n\nThis charging description includes the offline and online charging\narchitecture and scenarios specific to the PS domain, as well as the\nmapping of the common 3GPP charging architecture specified in TS 32.240 [1]\nonto the PS domain.\nIt further specifies the structure and content of the CDRs for offline\ncharging, and the charging events for online charging. The present document\nis related to other 3GPP charging TSs as follows:\n\n  -  The common 3GPP charging architecture is specified in TS 32.240 [1];\n\n  -  The parameters, abstract syntax and encoding rules for the CDRs are\n    specified in TS 32.298 [51];\n\n  -  A transaction based mechanism for the transfer of CDRs within the\n    network is specified in TS 32.295 [54];\n\n  -  The file based mechanism used to transfer the CDRs from the network to\n    the operator's Billing Domain (e.g. the billing system or a mediation\n    device) is specified in TS 32.297 [52];\n\n  -  The 3GPP Diameter application that is used for PS domain offline and\n    online charging is specified in TS\u00a032.299 [50].\n\nNote that a CAMEL based prepaid function and protocol is also specified for\nthe PS domain (TS 23.078 [206] and TS\u00a029.078\u00a0[202]). CAMEL entities and\nfunctions are outside the scope of the present document.\n\nAll terms, definitions and abbreviations used in the present document,\nwhich are common across 3GPP TSs, are defined in TR 21.905 [100]. Those\nthat are common across charging management in PS domains, services or\nsubsystems are provided in the umbrella document TS 32.240\u00a0[1] and are\ncopied into clause 3 of the present document for ease of reading. Finally,\nthose items that are specific to the present document are defined\nexclusively in the present document.\n\nFurthermore, requirements that govern the charging work are specified in TS\n22.115 [101].\n\n\n"}, {"key": "References", "numbering": "2", "title_level": 0, "desc": "2  References\n\nThe following documents contain provisions which, through reference in this\ntext, constitute provisions of the present document.\n\n  References are either specific (identified by date of publication,\n    edition number, version number, etc.) or non-specific.\n\n  For a specific reference, subsequent revisions do not apply.\n\n  -  For a non-specific reference, the latest version applies. In the case\n    of a reference to a 3GPP document (including a GSM document), a non-\n    specific reference implicitly refers to the latest version of that\n    document in the same Release as the present document.\n\n  [1]  3GPP\u00a0TS 32.240: \"Telecommunication management; Charging management;\n             Charging architecture and principles\".\n\n  [2] - [9]   Void.\n\n  [10] 3GPP TS 32.250: \"Telecommunication management; Charging management;\n             Circuit Switched (CS) domain charging\".\n\n  [11] \u2013 [19] Void.\n\n  [20] 3GPP\u00a0TS 32.260: \"Telecommunication management; Charging management;\n             IP Multimedia Subsystem (IMS) charging\".\n\n  [21] - [29] Void.\n\n  [30] 3GPP TS 32.270: \"Telecommunication management; Charging management;\n             Multimedia Messaging Service (MMS) charging\".\n\n  [31] 3GPP TS 32.271: \"Telecommunication management; Charging management;\n             Location Services (LCS) charging\".\n\n  [32] void.\n\n  [33] 3GPP TS 32.273: \"Telecommunication management; Charging management;\n             Multimedia Broadcast and Multicast Service (MBMS) charging\"\n\n  [34]   3GPP TS 32.274: \"Telecommunication management; Charging\n             management; Short Message Service (SMS) charging\".\n\n  [35] - [49] Void.\n\n  [50] 3GPP TS 32.299: \"Telecommunication management; Charging management;\n             Diameter charging application\".\n\n  [51] 3GPP TS 32.298: \"Telecommunication management; Charging management;\n             Charging Data Record (CDR) encoding rules description\".\n\n  [52] 3GPP TS 32.297: \"Telecommunication management; Charging management;\n             Charging Data Records (CDR) file format and transfer\".\n\n  [53] 3GPP\u00a0TS 32.296: \"Telecommunication management; Charging management;\n             Online Charging System (OCS) applications and interfaces\".\n\n  [54] 3GPP\u00a0TS 32.295: \"Telecommunication management; Charging management;\n             Charging Data Record (CDR) transfer\".\n\n  [55] - [99] Void.\n\n  [100]  3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n\n  [101]  3GPP TS 22.115: \"Service aspects; Charging and billing\".\n\n  [102]  3GPP TS\u00a022.011: \"Service accessibility\".\n\n  [103]  3GPP TS 23.003: \"Numbering, Addressing and Identification\".\n\n  [104] - [199] Void.\n\n  [200]  3GPP\u00a0TS\u00a022.060: \"General Packet Radio Service (GPRS); Service\n             description; Stage 1\".\n\n  [201]  3GPP\u00a0TS\u00a023.060: \"General Packet Radio Service (GPRS); Service\n             description; Stage 2\".\n\n  [202]  3GPP\u00a0TS\u00a029.078: \"Customized Applications for Mobile network\n             Enhanced Logic (CAMEL)\n             Phase X;CAMEL Application Part (CAP) specification\".\n\n  [203]  3GPP TS 29.060: \"General Packet Radio Service (GPRS); GPRS\n             Tunnelling Protocol (GTP) across the Gn and Gp interface\".\n\n  [204]  Void.\n\n  [205]  3GPP TS 29.061: \"Interworking between the Public Land Mobile\n             Network (PLMN) supporting packet based services and Packet\n             Data Networks (PDN)\".\n\n  [206]  3GPP\u00a0TS\u00a023.078: \"Customized Applications for Mobile network\n             Enhanced Logic (CAMEL);\n             Phase 4; Stage 2\".\n\n  [207]  3GPP TS 23.246: \"Multimedia Broadcast/Multicast Service (MBMS);\n             Architecture and functional description\".\n\n  [208]  3GPP TS 23.401: \"General Packet Radio Service (GPRS) enhancements\n             for Evolved Universal Terrestrial Radio Access Network (E-\n             UTRAN) acces\".\n\n  [209]  3GPP TS 23.402: \"Architecture enhancements for non-3GPP accesses\".\n\n  [210]  3GPP TS 29.274: \"3GPP Evolved Packet System (EPS); Evolved General\n             Packet Radio Service (GPRS) Tunnelling Protocol for Control\n             plane (GTPv2-C); Stage 3\".\n\n  [211]  3GPP TS 29.275: \"Proxy Mobile IPv6 (PMIPv6) based Mobility and\n             Tunnelling protocols; Stage 3\".\n\n  [212]  3GPP TS 23.261: \"IP flow mobility and seamless Wireless Local Area\n             Network (WLAN) offload; Stage 2\".\n\n  [213]  3GPP TS 23.272: \"Circuit Switched (CS) fallback in Evolved Packet\n             System (EPS); Stage 2\".\n\n  [214]  Void.\n\n  [215]  3GPP TS 23.203: \"Policy and charging control architecture\".\n\n  [216]  3GPP TS 29.212: \"Policy and Charging Control (PCC); Reference\n             points\".\n\n  [217]  3GPP TS 29.281: \"General Packet Radio System (GPRS) Tunnelling\n             Protocol User Plane (GTPv1-U)\".\n\n  [218] - [241] Void.\n\n  [242]  3GPP\u00a0TS\u00a023.161: \"Network-based IP flow mobility and Wireless Local\n             Area Network (WLAN) offload; Stage 2\".\n\n  [243] - [399] Void.\n\n  [400]  Void.\n\n  [401]  Void.\n\n  [402]  IETF RFC 4006 (2005): \"Diameter Credit-Control Application\".\n\n  [403] - [599] Void.\n\n  [600]  Broadband Forum TR-146: \"Internet Protocol (IP) Sessions\".\n\n  [601]  Broadband Forum TR-134: \"Broadband Policy Control Framework\n             (BPCF)\".\n\n\n\n"}, {"key": "Definitions, symbols and abbreviations", "numbering": "3", "title_level": 0, "desc": "         3  Definitions, symbols and abbreviations\n\n\n"}, {"key": "Symbols", "numbering": "3.2", "title_level": 1, "desc": "3.2  Symbols\n\nFor the purposes of the present document the following symbols apply:\n\n  A  Interface between an MSC and a BSC\n  Bp Reference point for the CDR file transfer from the Packet Switched CGF\n             to the BD\n  C  Interface between a HLR and a SMSC\n  D  Interface between a MSC and a HLR\n  E  Interface between a MSC and a SMSC\n  Ga Reference point between a CDF and the CGF for CDR transfer\n  Gb Interface between an SGSN and a BSC\n  Gc Interface between an GGSN and an HLR\n  Gd Interface between an SMS-GMSC and an SGSN, and between a SMS-IWMSC and\n             an SGSN\n  Ge Interface between a SGSN and a CAMEL GSM SCF\n  Gf Interface between an SGSN and an EIR\n  Gi Interface between the Packet-Switched domain and an external packet\n             data network\n  Gn Interface between two GSNs within the same PLMN\n  Gp Interface between two GSNs in different PLMNs\n  Gr Interface between an SGSN and an HLR\n  Gs Interface between an SGSN and an MSC/VLR.\n  Gx Interface between a PCEF and a PCRF\n  Gxa  Interface between a HSGW and a PCRF\n  Gy Online charging reference point between a PCEF and an OCS\n  Gyn  Online charging reference point between a TDF and an OCS\n  Gz Offline charging reference point between a PCEF and anO FCS\n  Gzn  Offline charging reference point between a TDF and an OFCS\n  Iu Interface between the 3G SGSN and the UTRAN\n  kbit/s Kilobits per second. 1\u00a0kbit/s\u00a0= 210 bits per second\n  Mbit/s Megabits per second. 1\u00a0Mbit/s\u00a0= 220 bits per second\n  R  Reference point between a non-ISDN compatible TE and MT.\n             Typically this reference point supports a standard serial\n             interface.\n  Rf Offline charging reference point between a PCN network element and CDF\n  Ro Online charging reference point between a PCN network element and the\n             OCS\n  Um Interface between the Mobile Station (MS) and the GSM fixed network\n             part\n  Uu Interface between the User Equipment (UE) and the UMTS\u00a0fixed network\n             part\n\n"}, {"key": "Abbreviations", "numbering": "3.3", "title_level": 1, "desc": "3.3  Abbreviations\n\nFor the purposes of the present document, the abbreviations defined in\nTR\u00a021.905 [100] and the following apply:\n\n  3G 3rd Generation\n  ABC  Application Based Charging\n  ADC  Application Detection and Control\n  AoC  Advice of Charge\n  APN  Access Point Name\n  ARP  Allocation and Retention Priority\n  BD Billing Domain\n  CAMEL  Customised Applications for Mobile network Enhanced Logic\n  CCA  Credit-Control-Answer\n  CCR  Credit-Control-Request\n  CDF  Charging Data Function\n  CDR  Charging Data Record\n  CG Charging Gateway\n  CGF  Charging Gateway Function\n  CI Cell Identity\n  CIoT Cellular Internet of Things\n  CP Control PlaneCS  Circuit Switched\n  CSE  CAMEL Service Environment\n  CSG  Closed Subscriber Group\n  CSG ID Closed Subscriber Group Identity\n  CTF  Charging Trigger Function\n  DCCA Diameter Credit-Control Application\n  EPC  Evolved Packet Core\n  ePDG Evolved Packet Data Gateway\n  EPS  Evolved Packet System\n  ECUR Event Charging with Unit Reservation\n  E-UTRAN  Evolved Universal Terrestrial Radio Access Network\n  FBC  Flow Based bearer Charging\n  FQPC Fully Qualified Partial CDR\n  GERAN  GSM EDGE Radio Access Network\n  GGSN Gateway GPRS Support Node\n  GPRS General Packet Radio Service\n  GSM  Global System for Mobile communication\n  GTP  GPRS Tunnelling Protocol\n  GTP' The GPRS protocol used for CDR transport.\n             It is derived from GTP with enhancements to improve transport\n             reliability necessary for CDRs.\n  HeNB Home eNode B\n  HNB  Home Node B\n  H(e)NB HNB and HeNB\n  HLR  Home Location Register\n  HPLMN  Home PLMN\n  HRPD High Rate Packet Data\n  HSGW HRPD Serving Gateway\n  IE Information Element\n  IEC  Immediate Event Charging\n  IETF Internet Engineering Task Force\n  IFOM IP Flow Mobility\n  IMEI International Mobile Equipment Identity\n  IMSI International Mobile Subscriber Identity\n  IP Internet Protocol\n  IP-CAN IP Connectivity Access Network\n  IPv4 Internet Protocol version 4\n  IPv6 Internet Protocol version 6\n  ISDN Integrated Services Digital Network\n  ITU-T  International Telecommunication Union - Telecommunications\n             standardization sector\n  LAC  Location Area Code\n  LR Location Request\n  M-CDR  Mobility management generated CDR\n  MAPCON Multi Access PDN Connectivity\n  MCC  Mobile Country Code (part of IMSI)\n  ME Mobile Equipment\n  MLC  Mobile Location Center\n  MME  Mobility Management Entity\n  MMS  Multimedia Messaging Service\n  MNC  Mobile Network Code (part of IMSI)\n  MO Mobile Originated\n  MO-LR  Mobile Originated Location Request\n  MS Mobile Station\n  MSISDN Mobile Station ISDN number\n  MT Mobile Terminated\n  MT-LR  Mobile Terminated Location Request\n  NBIFOM Network-based IP flow mobility\n  NE Network Element\n  NI Network Identifier (part of the APN)\n  NI-LR  Network Induced - Location Request\n  NSWO Non-Seamless WLAN Offload\n  OAM&P  Operation, Administration, Maintenance and Provisioning\n  OCF  Online Charging Function\n  OCS  Online Charging System\n  OI Operator Identifier (part of the APN)\n  P-GW PDN Gateway\n  PCC  Policy and Charging Control\n  PCEF Policy and Charging Enforcement Function\n  PCN  Packet switched Core network Node (SGSN, GGSN, S\u2013GW, P\u2013GW, TDF)\n  PDN  Packet Data Network\n  PDP  Packet Data Protocol (e.g. IP)\n  PDU  Packet Data Unit\n  PGW-CDR  P-GW (enhanced by FBC) generated CDR\n  PLMN Public Land Mobile Network\n  PMIP Proxy Mobile IP\n  PPP  Point-to-Point Protocol\n  PRA  Presence Reporting Area\n  PS Packet Switched\n  QCI  QoS Class Identifier\n  QoS  Quality of Service\n  RAB  Radio Access Bearer\n  RAC  Routing Area Code\n  RANAP  Radio Access Network Application Part\n  RG Residential Gateway\n  RNC  Radio Network Controller\n  RPC  Reduced Partial CDR\n  SAC  Service Area Code\n  S-CDR  SGSN (IP-CAN bearer) generated CDR\n  S-GW Serving Gateway\n  SCUR Session Charging with Unit Reservation\n  SDF  Service Data Flow\n  SGSN Serving GPRS Support Node\n  SGW-CDR  S-GW (IP-CAN bearer) generated CDR\n  SIPTO  Selected IP Traffic Offload\n  SMS  Short Message Service\n  S-SMO-CDR   SGSN delivered Short message Mobile Originated CDR\n  S-SMT-CDR   SGSN delivered Short message Mobile Terminated CDR\n  T-PDU  Transport PDU\n  TDF  Traffic Detection Function\n  TDF-CDR  TDF generated CDR\n  TR Technical Report\n  TS Technical Specification\n  TWAG Trusted WLAN Access Gateway\n  TWAN Trusted WLAN Access Network\n  UMTS Universal Mobile Telecommunications System\n  UP User Plane\n  USIM Universal Subscriber Identity Module\n  UTRAN  UMTS Terrestrial Radio Access Network\n\n  UWAN Untrusted Wireless Access Network\n\n\n\n\n\n\n\n"}, {"key": "Architecture considerations", "numbering": "4", "title_level": 0, "desc": "         4  Architecture considerations\n\n\n"}, {"key": "General", "numbering": "4.0", "title_level": 1, "desc": "4.0  General\n\nThis clause describes the functional entities involved in the PS domain\ncharging architecture. It also presents the mappings of the ubiquitous\noffline and online charging architecture specified in TS 32.240 [1] onto\nphysical implementations that are standardized for the 3GPP PS domain.\n\n\n"}, {"key": "High-level EPS architecture", "numbering": "4.1", "title_level": 1, "desc": "4.1  High-level EPS architecture\n\nThe 3GPP PS domain provides procedures for packet core networks described\nin TS 23.060 [201], TS 23.401 [208],\nTS 23.402 [209] and TS 23.272 [213].\n\nFor offline charging the following Packet switched Core network Nodes (PCN)\nmay generate accounting metrics sets for PS domain CDRs:\n\n  -  the SGSN, to record a user's access to PLMN resources, mobility\n    management activities, SMS and LCS usage;\n\n  -  the S-GW, to record a user's access to PLMN resources;\n\n  -  the ePDG, to record a user's access to PLMN resources;\n\n  -  the TWAG, to record a user's access to PLMN resources (optional) ;\n\n  -  the P-GW, to record a user's access to external networks ;\n\n  -  the GGSN, to record a user's access to external networks;\n\n  -  the MME, to record a user's SMS;\n\n  -  the TDF, to record a user's access to external networks and\n    applications.\n\nThe PCNs send the CDRs to the CGF in near real-time. The responsibility of\nthe CGF is to provide non-volatile CDR storage and the Bp interface towards\nthe Billing Domain (BD). Further details on the CGF can be found in TS\n32.240 [1] and TS 32.297 [52].\n\nFor more information about online charging in PS domains see clause 4.3.\n\nWhen P-GW provides connectivity to GERAN/UTRAN (P-GW acts as a GGSN) it\nemploys P-GW charging defined in this specification. When the stand-alone\nGGSN provides connectivity to GERAN/UTRAN, it employs P-GW charging as\ndefined in the present document:\n\n  -  Stand-alone GGSN offline charging is based on FBC IP-CAN bearer\n    charging data in P-GW;\n\n  -  Stand-alone GGSN online charging is based on PS Information used for\n    online charging.\n\n\n\n"}, {"key": "PS domain offline charging architecture", "numbering": "4.2", "title_level": 1, "desc": "         4.2  PS domain offline charging architecture\n\nAs described in TS 32.240 [1], the CTF (an integrated component in each\ncharging relevant NE) generates charging events and forwards them to the\nCDF. The CDF, in turn, generates CDRs which are then transferred to the\nCGF.\nFinally, the CGF creates CDR files and forwards them to the BD.\n\nIf the PCN generating the charging information has an integrated CDF, then\nthe PCN can produce CDRs. The CGF may also be integrated in the PCN, or it\nmay exist as a physically separate entity.\nIf the CGF is external to the PCN, then the CDF forwards the CDRs to the\nCGF across the Ga interface.\nIn this case, the relationship between PCN/CDF and CGF is m:1.\nIf the CGF is integrated in the PCN, then there is only an internal\ninterface between the CDF and the CGF.\nIn this case, the relationship between PCN/CDF and CGF is 1:1. An\nintegrated CGF may support the Ga interface from other PCN/CDFs.\n\nIf the CDF is external to the PCN, the charging events are transferred from\nthe PCN to the CDF via the Rf interface specified in TS 32.299 [50]. In\nthis case, the relationship between PCN and CDF is m:1.\n\nWhen an external CGF is used, this CGF may also be used by other, i.e. non-\nPS, network elements, according to network design and operator decision. It\nshould be noted that the CGF may also be an integrated component of the BD\n\u2013 in this case, the Bp interface does not exist and is replaced by a\nproprietary solution internal to the BD.\n\nFigure 4.2.1 depicts the architectural options described above.\n\n\n\n                                    [pic]\n\n            Figure 4.2.1: PS domain offline charging architecture\n\nThe P-GW includes a Policy and Charging Enforcement Function (PCEF) to\nsupport Flow Based bearer Charging (FBC) functionality; this is not\ndepicted in figure 4.2.1. The Traffic Detection Function (TDF) supports\nApplication Based Charging (ABC) functionality. The Rf, Ga and Bp\ninterfaces include the required functionality, e.g. defined for the Gz/Gzn\nreference point in TS 23.203 [215]. Refer to clause 5.2.1.3, TS 32.240 [1]\nand TS 23.203 [215] for further details on FBC.\n\nThe PCNs may provide inter-operator charging functionality for Multimedia\nBroadcast/Multicast Services (MBMS) defined in TS 23.246 [207] and TS\n32.273 [33], not for subscriber charging.\n\nIt is mandatory to support at least one of the options Rf, Ga or Bp\ninterfaces from the PCN as described in the specification.\n\n  NOTE:  The Rf interface details are specified for S-GW, ePDG, TWAG, MME,\n         TDF and P-GW in this release.\n\n\n\n"}, {"key": "PS domain online charging architecture", "numbering": "4.3", "title_level": 1, "desc": "         4.3  PS domain online charging architecture\n\nPS domain online charging based on SGSN functions is implemented by CAMEL\ntechniques as described in TS 23.078 [206] and\u00a0TS\u00a029.078 [202], i.e.\noutside the scope of the 32-series of charging TSs. Note, however, that the\nCDRs described in the present document contains CAMEL information. This is\nbecause some of that information is relevant to offline charging in case of\nCAMEL control of (part of) the session, and thus needs to be captured in\nthe offline charging information. However, this is not related to the\nonline charging functions for the PS domain.\n\nMechanisms to enable PS domain online charging from the P-GW with included\nPCEF and theTDF are specified in the present document, utilising the Ro\ninterface and the associated Diameter application as specified in TS 32.299\n[50].\nThe reason for this alternative solution to CAMEL is that operators may\nenforce the use of HPLMN P-GWs and TDF in the case of roaming, hence P-GW\nor TDF service control and charging can be executed in the HPLMN in all\ncircumstances. The P-GW and TDF based PS domain online charging\narchitecture is depicted in figure 4.3.1.\n\n                                    [pic]\n\n            Figure 4.3.1: PS domain online charging architecture\n\nThe Ro reference point includes the functionality defined for the Gy\nreference point (required for the PCEF) and the Gyn reference point\n(required for the TDF) in TS\u00a023.203 [215]. Refer to clause 5.2.1.3, TS\n32.240 [1] and TS 23.203 [215] for further details on FBC.\n\nDetails on the interfaces and functions can be found in TS 32.240 [1] for\nthe general architecture components,\nTS\u00a032.296 [53] for the OCS, and TS 32.299 [50] for the Ro application.\n\n\n\n"}, {"key": "PS domain charging principles and scenarios", "numbering": "5", "title_level": 0, "desc": "         5  PS domain charging principles and scenarios\n\n\n"}, {"key": "PS charging principles", "numbering": "5.1", "title_level": 1, "desc": "5.1  PS charging principles\n\n\n"}, {"key": "General", "numbering": "5.1.0", "title_level": 2, "desc": "5.1.0  General\n\nThe charging functions specified for the PS domain relate to:\n\n  -  mobility management, refer to TS 23.060 [201];\n\n  -  SMS transmissions / receptions, refer to TS 23.060 [201] , and TS\n    23.272 [213];\n\n  -  IP-CAN bearers, refer to TS 23.060 [201], TS 23.401 [208] and TS\n    23.402 [209];\n\n  -  LCS events, refer to TS 32.271 [31];\n\n  -  service data flows, refer to TS 23.203 [215] , within IP-CAN session\n    and IP-CAN bearer;\n\n  -  TDF session, refer to TS 23.203 [215];\n\n  -  network usage for specific applications within a TDF session, refer to\n    TS 23.203 [215] ;\n\n  -  MBMS bearer contexts, refer to TS 23.246 [207] and TS 32.273 [33].\n\nIP-CAN bearer, when described for PS Charging in S-GW and P-GW, refers to\nbearer related to IP data and Non-IP data as well.\n\n\n\n"}, {"key": "Requirements", "numbering": "5.1.1", "title_level": 2, "desc": "         5.1.1  Requirements\n\nThe following are high-level charging requirements specific to the packet\ndomain, derived from the requirements in TS\u00a022.115 [101], TS\u00a023.060 [201],\nTS 23.401 [208], TS 23.402 [209] and TS 23.203 [215].\n\n  1) Every IP-CAN bearer shall be assigned a unique identity number for\n    billing purposes. (i.e. the Charging Id).\n\n  NOTE:  An IP-CAN session is identified by the unique identity number\n         assigned to the default bearer for the\n         IP-CAN session.\n\n  2) Data volumes on both the uplink and downlink directions shall be\n    counted separately. The data volumes shall reflect the data as\n    delivered to and from the user. When the P-GW includes PCEF, the data\n    volumes shall also reflect the data as delivered to and from the\n    serving node at the bearer level.\n\n  3) The charging mechanisms shall provide the duration of the IP-CAN\n    bearer with date and time information.\n\n  4) The network operator may define a subset of the charging information\n    specified by PS domain charging standards. This means that it shall be\n    possible to configure the PCN for the CDR information generated.\n\n  5) The PCNs shall be capable of handling the Charging Characteristics.\n    Charging Characteristics can be specific for a subscription, subscribed\n    IP-CAN bearer (i.e. per APN) or per TDF session, see annex A for\n    details.\n\n  6) The SGSN shall support charging of CAMEL services.\n\n  7) The SGSN shall support charging for location requests.\n\n  8) The SGSN may support online charging using CAMEL techniques.\n\n  9) The P-GW may support online charging using IETF based techniques.\n\n  10)  The P-GW may be capable of identifying data volumes, elapsed time or\n    events for individual service data flows (Flow Based bearer Charging).\n    One PCC rule identifies one service data flow.\n\n  11)  When online charging is used in the P-GW/TDF, the Credit-Control\n    shall be per rating group.\n\n  12)  P-GW/TDF shall allow reporting of the service or detected\n    application /detected application usage per rating group or per\n    combination of the rating group and service id. This reporting level\n    can be activated per PCC/ADC rule.\n\n  13)  The P-GW shall collect charging information\u00a0for IP\u00a0-CAN\u00a0session\u00a0as\n    it would for one IP-CAN bearer in case of PMIP based connectivity is\n    used.\n\n  14)  Charging support in the SGSN shall apply only for SGSN with Gn/Gp\n    connectivity.\n\n  15)  The data volume shall be counted regardless of whether the\n    subscriber's traffic has been offloaded from the mobile operator's\n    network.\n\n  Editor's Notes: This requirement should be rerefined after finalization\n         of the architecture for Selected IP Traffic Offload charging.\n\n  16)  The TDF may support online charging using IETF techniques.\n\n  17)  The TDF shall be capable of identifying data volumes, elapsed time\n    or events for specific applications (ABC).\n\n  18)  The charging mechanisms shall provide the duration of the TDF\n    session with date and time information.\n\n  19)  The P-GW/S-GW shall support charging for Non-IP PDN connection.\n\nThese requirements apply equally to PS domain online charging and offline\ncharging.\n\n\n\n"}, {"key": "Charging information", "numbering": "5.1.2", "title_level": 2, "desc": "         5.1.2  Charging information\n\nCharging information in the PS domain network is collected for each MS/UE\nby the SGSNs, MMEs, S-GWs, ePDG,\nTWAG, P-GWs and TDFs, which are serving that MS/UE. The SGSN, S-GW, ePDG\nand TWAG collect charging information for each MS/UE related with the radio\nnetwork usage, while the P-GW and TDF collect charging information for each\nMS related with the external data network usage. PCNs also collect charging\ninformation on usage of the PS domain network resources. For MBMS, charging\ninformation in the PS domain network is collected for each MBMS bearer\ncontext.\nThe following paragraphs list the charging information to be collected by\nthe PCNs for both online and offline charging.\n\nFor IP-CAN bearers, the PCNs shall collect the following charging\ninformation:\n\n  1. usage of the radio interface: the charging information shall describe\n    the amount of data transmitted in MO and MT directions categorized with\n    QoS,  user protocols, and use of Control Plane CIoT EPS Optimisation as\n    specified in TS 23.401[208];\n\n  2. usage duration: duration of IP-CAN bearer is counted as the time\n    interval from IP-CAN bearer activation to\n    IP-CAN bearer deactivation;\n\n  3. usage of the general PS domain resources: the charging information\n    shall describe the usage of other PS domain-related resources and the\n    MSs PS domain network activity (e.g. mobility management);\n\n  4. destination and source: the charging information shall provide the\n    actual source addresses used by the subscriber for the IP-CAN bearer.\n    The charging information shall describe the destination addresses with\n    a level of accuracy as determined by the Access Point Name (APN);\n\n  5. usage of the external data networks: the charging information shall\n    describe the amount of data sent and received to and from the external\n    data network. External networks can be identified by the APN.\n\n  NOTE:  When charging per IP-CAN session is deployed in the P-GW, the\n         usage of the external data networks is provided only at the session\n         level and not per bearer.\n\n  6. location of MS/UE: HPLMN, VPLMN, plus optional higher-accuracy\n    location information.\n\n  7. User CSG information: a user consumes network services via a CSG cell\n    or a hybrid cell according to the user CSG information. The charging\n    information shall include CSG ID, access mode and CSG membership\n    indication.\n\n  8. User inside/outside of a Presence Reporting Area: the charging\n    information shall include indication on whether the UE is inside or\n    outside of a Presence Reporting Area, and identification of the\n    Presence Reporting Area, and is collected by SGW and PGW\n\nFor service data flows defined for FBC, the P-GW shall collect the\nfollowing charging information:\n\n  1. the information described above for IP-CAN bearer charging;\n\n  2. the amount of data transmitted in MO and MT directions categorized by\n    rating group or combination of the rating group and service id when\n    volume based charging applies;\n\n  3. the duration of service data flows is counted and categorized by\n    rating group or combination of the rating group and service id when\n    time based charging applies;\n\n  4. the number of events and corresponding time stamps categorized by\n    rating group or combination of the rating group and service id when\n    event based charging applies.\n\nFor TDF sessions, the TDF shall collect the following charging information:\n\n  1. usage duration: duration of TDF sesion is counted as the time interval\n    from TDF session activation to TDF session deactivation;\n\n  2. usage of the general PS domain resources: the charging information\n    shall describe the usage of other PS domain-related resources and the\n    MSs PS domain network activity (e.g. mobility management);\n\n  3. destination and source: the charging information shall provide the\n    actual source addresses used by the subscriber for the TDF session. The\n    charging information shall describe the destination addresses with a\n    level of accuracy as determined by the APN;\n\n  4. usage of the external data networks: the charging information shall\n    describe the amount of data sent and received to and from the external\n    data network. External networks can be identified by the APN.\n\n  5. location of MS/UE: HPLMN, VPLMN, plus optional higher-accuracy\n    location information.\n\n  6. User CSG information: a user consumes network services via a CSG cell\n    or a hybrid cell according to the user CSG information. The charging\n    information shall include CSG ID, access mode and CSG membership\n    indication.\n\n7. voidFor application traffic defined for ABC, the TDF shall collect the\nfollowing charging information:\n\n  1. the information described above for TDF session charging;\n\n  2. the amount of data transmitted as specific application in MO and MT\n    directions categorized by rating group or combination of the rating\n    group and service identifier when volume based charging applies;\n\n  3. the duration of application traffic is counted and categorized by\n    rating group or combination of the rating group and service identifier\n    when time based charging applies;\n\n  4. the number of events and corresponding timestamps categorized by\n    rating group or combination of the rating group and service identifier\n    when event based charging applies.\n\nFor non-IP-CAN bearer related activities, the SGSN shall collect the\nfollowing charging information:\n\n  1. mobility management actions for GPRS attached UEs/MSs;\n\n  2. short messages passing through the SGSN in MO and MT directions;\n\n  3. location requests passing through the SGSN, triggered by the UE/MS, by\n    an external source, or by the network.\n\nFor MBMS bearer contexts, the PCNs shall collect the following charging\ninformation:\n\n  1. usage of the radio interface: the charging information shall describe\n    the amount of data transmitted categorized with QoS and MBMS specific\n    information defined in TS 32.273 [33];\n\n  2. usage duration: duration of MBMS bearer context is counted as the time\n    interval from the local creation of the MBMS bearer context to the\n    local deletion of the MBMS bearer context;\n\n  3. source: the charging information shall provide the source address used\n    by the MBMS bearer service for the MBMS bearer context. The charging\n    information may describe the destination addresses with a level of\n    accuracy as determined by the APN;\n\n  4. location information: the charging information shall describe a list\n    of the downstream nodes being sent the MBMS bearer service.\n\nThe MME shall collect short messages passing through the MME in MO and MT\ndirections.\n\n\n\n\n\n"}, {"key": "Identifiers and correlation", "numbering": "5.1.3", "title_level": 2, "desc": ""}, {"key": "UE Presence in Presence Reporting Area (PRA)", "numbering": "5.1.4", "title_level": 2, "desc": "         5.1.3  Identifiers and correlation\n\nThe EPC charging identifier assigned per IP-CAN bearer, is used for\ncorrelation purpose within PS domain, as specified in TS\u00a032.240\u00a0[1].\n\nWithin a single-access PDN connection, the EPS default bearer remains\nestablished throughout the lifetime of this PDN connection and is assigned\nwith its \"EPS default bearer charging identifier\". Other additional IP-CAN\nbearers (i.e. dedicated bearers) which may be activated and deactivated\nduring this PDN connection, are each assigned with their own \"IP-CAN bearer\ncharging identifier\". For correlation of charging information for the whole\nPDN connection, this \"EPS default bearer charging identifier\" is shared by\nall these IP-CAN bearers charging sessions activated during this PDN\nconnection, as the \"PDN connection charging identifier\".\n\nFor PMIP based connectivity, an \"unique Charging Id\" is assigned by the P-\nGW for the PDN connection (i.e. as it would be one IP-CAN bearer).\n\nFor ABC by the TDF:\n\n  -  in case of GTP based connectivity, an \"EPS default bearer charging\n    identifier\",\n\n  -  in case of PMIP based connectivity, an \"unique Charging Id\"\n\nis assigned by the P-GW and transferred to the TDF via the PCRF for the TDF\nsession.\n\nDuring handover of a PDN connection between a GTP based connectivity\naccess, and a PMIP based connectivity access for the P-GW (and reversely),\nthe \"EPS default bearer charging identifier\" and the \"unique Charging Id\"\nrespectively, are maintained in order to ensure charging continuity for the\nwhole PDN connection over the different accesses.\nUpon handover from GTP based connectivity to PMIP based connectivity, the\npreviously assigned \"EPS default bearer charging identifier\" is used as the\n\"unique Charging Id\". Upon handover from PMIP based connectivity to GTP\nbased connectivity, the previously assigned \"unique Charging Id\" is used as\nthe \"EPS default bearer charging identifier\".\n\nDuring handover of a PDN connection between a GTP based connectivity 3GPP\naccess, and a S2a/S2b GTP based connectivity non-3GPP access for the P-GW\n(and reversely), the \"EPS default bearer charging identifier\" is maintained\nfor the default bearer, and the \"Charging Id\" is maintained for the handed-\nover dedicated bearers (i.e. bearer with the same QCI and ARP in source and\ntarget systems). Depending on the active PCC rules, establishment of new\ndedicated bearers may be required after the handover. In this case each new\ndedicated bearer is assigned with a new \"Charging Id\" as per normal\nprocedures.\n\nWhen multiple simultaneous PDN connections are established for a given APN,\neach PDN connection is associated with its own \"PDN connection charging\nidentifier\" or \"unique Charging Id\" and processed independently from the\nother PDN connections.\n\nWhen a \"MAPCON capable UE\", as defined in TS 23.402 [209], has simultaneous\nPDN connections through different access networks, each PDN connection is\nassociated with its own \"PDN connection charging identifier\" or \"unique\ncharging Id\" over the selected access for the PDN connection.When selective\ntransfer of PDN connections between the different accesses is performed,\neach PDN connection is transferred, as for a single PDN connection.\n\nWhen an \"IFOM capable UE\", as defined in TS 23.402 [209], is simultaneously\nconnected to 3GPP access and WLAN access for different IP flows within the\nsame PDN connection, each service data flow is uniquely identified by a PCC\nRule within the PDN connection.\n\nFor a PDN connection with NBIFOM support, a \"PDN connection charging\nidentifier\" is assigned for the PDN connection and is shared by all the IP-\nCAN bearers for the present as well as for any future accesses used during\nthe PDN connection. Additional IP-CAN bearers (i.e. dedicated bearers as\nwell as any additional default bearer in a new access) which may be\nactivated during this PDN connection, are each assigned with their own \"IP-\nCAN bearer charging identifier.\"\n\n\n\nThe \"PDN connection charging identifier\" shall remain unchanged and be used\nby all serving nodes for the entire IP-CAN session. When a serving node is\nchanged, e.g. when UE moves PDN connection between LTE and WLAN or when\nserving gateway relocation is performed, the individual bearer charging\nidentifiers shall be maintained as for a single-access PDN connection.\n\n\n\nWhen SIPTO function applies, as defined in TS 23.060 [201] and TS 23.401\n[208] the standard charging behaviour for PDN connection\nactivation/deactivation applies on the respective GW.\n\nFor inter-level correlation when charging per IP-CAN session is not active,\nthe charging identifier assigned to the specific bearer serves as the PS\ndomain access network charging identifier used for a dynamic PCC rule. For\ninter-level correlation when Charging per IP-CAN session is active, the\ncharging identifier assigned to the PDN connection serves as the PS domain\naccess network charging identifier used for a dynamic PCC rule. Transport\nof PS domain access network charging identifier to an external application\nfunction are specified in TS\u00a029.212\u00a0[216].\n\nWith NBIFOM, specific service data flows can be moved from one access to\nanother. The transfer of the service data flow to the other access causes\nit to be bound to another bearer (either existing or to be created). When\nCharging per IP-CAN session is not active, the flow is then using a bearer\nwith a charging identifier which would be different than that originally\nnotified to the application function for inter-level correlation. To\nmaintain a single access network charging identifier for inter-level\ncorrelation, when NBIFOM is accepted for a PDN connection, then the\ncharging identifier assigned to the PDN connection serves as the PS domain\naccess network charging identifier used for a dynamic PCC rule.\n\n  NOTE:  When Charging per IP-CAN session is active the \"PDN connection\n         charging identifier\" remains unchanged so the information provided\n         to the application function remains unchanged throughout the IP-CAN\n         session.\n\n\n\nFor non-IP data, the PDN connection established with an unique IP-CAN\nbearer as specified in TS 23.401 [208], is assigned with an \"unique\nCharging Id\" by the P-GW.\n\n\n5.1.4  UE presence in Presence Reporting Area (PRA)\n\n\n"}, {"key": "Single Presence Reporting Area (PRA)", "numbering": "5.1.4.1", "title_level": 3, "desc": "5.1.4.1  Single Presence Reporting Area (PRA)\n\nThe Single Presence Reporting Area is not supported.\n\nNon-support of single Presence Reporting Area is determined by the release\nincluded in Service-Context-Id AVP.\n\n\n"}, {"key": "Multiple Presence Reporting Areas (PRAs)", "numbering": "5.1.4.2", "title_level": 3, "desc": ""}, {"key": "GPP PS Data Off", "numbering": "5.1.5", "title_level": 2, "desc": "5.1.4.2  Multiple Presence Reporting Areas (PRAs)\n\nUE presence in multiple presence reporting area (s) charging information,\nas defined in TS\u00a023.401\u00a0[208] and TS\u00a023.203\u00a0[215], is collected for each UE\nby S-GWs, P-GWs which are serving that UE.\n\nDuring IP-CAN session establishment/modification, and independently from\nthe PCRF, the OCS may provide to the P-GW, a list of:\n\n  -  Presence Reporting Area (PRA) Identifiers to be activated for Core\n    Network pre-configured Presence Reporting Areas,\n\n  -  Presence Reporting Area (PRA) Identifiers and their elements for UE-\n    dedicated Presence Reporting Areas.\n\nBy providing the corresponding above lists in Presence-Reporting-Area-\nInformation AVP(s), the OCS subscribes to the notifications of change of UE\npresence status in the PRA(s) through the Trigger-Type AVP. UE presence\nstatus in the PRA(s) describes whether the UE is entering or leaving\nPresence Reporting Area (s) and if the corresponding Presence Reporting\nArea(s) is set to inactive by the serving node.\n\nThe OCS may change the notifications of whether the UE is entering or\nleaving Presence Reporting Area (s) through Trigger-Type AVP in a CCA, with\nthe Presence-Reporting-Area-Information AVP(s) to replace previous provided\nlist.\n\nThe OCS may unsubscribe to the change of UE presence in Presence Reporting\nArea through Trigger-Type AVP in a CCA without the value of\nCHANGE_OF_UE_PRESENCE_IN_PRESENCE_REPORTING_AREA_REPORT (73), if it has\nbeen provided in the previous CCA.\n\nThe UE presence initial status in the PRA(s) at the time of the\nsubscription shall be reported by the P-GW to the OCS for online charging\nin Debit / Reserve Units Request[Update] when the subscription is\nactivated. The UE presence initial status in the PRA(s) at the time of the\nsubscription shall be reported by the S-GW and P-GW for offline charging in\nCharging Data Request[Start] / [Interim] when the subscription is\nactivated. Subsequently, whether the UE enters or leaves the PRA(s), shall\nbe reported by the P-GW to the OCS for online charging, and by the S-GW and\nP-GW for offline charging.\n\nWhen a PRA set i.e. PRA Identifier was subscribed to, the SGW/PGW\nadditionally receives the PRA Identifier of the PRA set from the serving\nnode, along with the individual PRA Identifier(s) belonging to the PRA set\nand indication(s) of whether the UE is inside or outside the individual\nPresence Reporting Area(s) , as described in TS 23.401[208]. Only the\nindividual PRA Identifier(s) belonging to the PRA set and UE presence\nstatus(es) are reported to the OCS according to the corresponding\nsubscription.\n\nFor offline charging, the initial status of UE presence in the PRA(s) shall\nbe captured in current counts and reported on first charging event. For\nonline charging, this initial status shall be reported when received by the\nPCEF if quota have already been requested for the service usage, otherwise\nthis initial status shall be reported on the first quota request.\n\nFor PRA(s) subscribed-to by the OCS, the PRA(s) and their UE presence\nstatus(es) which are reported to OCS are captured in offline charging from\nP-GW, with an indication for each PRA, the PRA was subscribed-to by OCS.\n\nFor PRA(s) subscribed-to by the PCRF, the PRA(s) and their UE presence\nstatus(es) which are reported to PCRF are captured in offline charging from\nP-GW, with an indication for each PRA, the PRA was subscribed-to by PCRF.\n\nIn the S-GW the PRA(s) and their UE presence status(es) are captured in\noffline charging without any differentiation between OCS and PCRF\nsubscription, since the S-GW is unaware about this difference.\n\n\n5.1.5  3GPP PS Data Off\n\nWhen 3GPP PS Data off is activated by the user, PGW prevents downlink\ntraffic except for 3GPP PS Data Off Exempt Services. The 3GPP PS Data Off\nExempt Services are a set of operator services, defined in TS\u00a022.011\u00a0[102].\nAnd if 3GPP PS Data Off is activated, the UE prevents the sending of uplink\nIP packets except those related to 3GPP PS Data Off Exempt Services, based\non the pre-configured list of Data Off Exempt Services.\n\nThe UE reports its 3GPP PS Data Off status in PCO (Protocol Configuration\nOption) to PGW during Initial Attach procedure and report a change of its\n3GPP PS Data Off status in PCO by using Bearer Resource Modification\nprocedure, described in TS 23.401 [208]. The 3GPP PS Data Off status is\nsent transparently through the MME and the Serving GW from UE to PGW. If\nthe PGW detects that the 3GPP PS Data Off Status has changed, the PGW shall\nindicate this event to the charging system for offline and online charging.\n\n\n"}, {"key": "Flexible Mobile Service Steering", "numbering": "5.1.6", "title_level": 2, "desc": "5.1.6  Flexible Mobile Service Steering\n\nThe PGW/PCEF/TDF shall send the Traffic Steering Policy Identifier which\nhas been used by the PGW/PCEF/TDF for sending the service data flow to a\nspecific set of service functions(based on the PCC rule), to the offline\ncharging system for information.\n\n\n\n\n\n"}, {"key": "PS domain offline charging scenarios", "numbering": "5.2", "title_level": 1, "desc": "         5.2  PS domain offline charging scenarios\n\n\n"}, {"key": "Basic principles", "numbering": "5.2.1", "title_level": 2, "desc": "5.2.1  Basic principles\n\n\n"}, {"key": "General", "numbering": "5.2.1.0", "title_level": 3, "desc": "5.2.1.0  General\n\nIn order to provide the data required for the management activities\noutlined in TS 32.240 [1] (billing, accounting, statistics etc.), the SGSN\nshall be able to produce CDRs, and the MME, S-GW, ePDG, TWAG, P-GW and TDF\nshall be able to produce CDRs or report charging events for CDRs generation\nby CDF, as specified for each node type in the following:\n\n  -  Charging data related to IP-CAN bearers in the SGSN (S-CDR), S-GW (SGW-\n    CDR), ePDG (ePDG-CDR) , TWAG (TWAG-CDR) and P-GW (PGW-CDR);\n\n  -  Charging data related to service data flows in the P-GW (PGW-CDR);\n\n  -  Charging data related to MM contexts (Mobile Station Mobility\n    Management Data) in SGSN (M-CDR);\n\n  -  SMS Mobile Originated data (S-SMO-CDR) and SMS Mobile Terminated Data\n    (SMS-SMT-CDR) in the SGSN;\n\n  -  Charging data related to mobile originated location requests (LCS-MO-\n    CDR), mobile terminated location request (LCS-MT-CDR), and network\n    induced location request (LCS-NI-CDR) passing through the SGSN;\n\n  -  Charging data related to MBMS bearer contexts (S-MB-CDR, G-MB-CDR, and\n    MBMS-GW-CDR).\n\n  -  SMS Mobile Originated data (S-SMO-CDR) and SMS Mobile Terminated Data\n    (S-SMT-CDR) in the MME;\n\n  -  Charging data related to TDF session (TDF-CDR) in the TDF;\n\n  -  Charging data related to application traffic in the TDF (TDF-CDR).\n\nThe contents and purpose of each of these CDRs, as well as the chargeable\nevents that trigger CDR creation, information addition, or closure are\ndescribed in the following clauses. A detailed formal description of the\nCDR parameters defined in the present document is to be found in TS\u00a032.298\n[51].\n\nWhen the CDF is implemented as a separate entity (for the MME, S-GW, ePDG,\nTWAG, P-GW and TDF), the charging events triggering and contents for CDRs\nhandling by the  CDF, are described in clause 5.2.2.\n\n\n\n"}, {"key": "IP-CAN bearer charging", "numbering": "5.2.1.1", "title_level": 3, "desc": "           5.2.1.1  IP-CAN bearer charging\n\nSGSN, ePDG, TWAG, P-GW, and S-GW collect charging information per user per\nIP-CAN bearer. In case of P-GW is not aware of IP-CAN bearers, i.e. in case\nof PMIP based connectivity, P-GW collects charging information per IP-CAN\nsession as it would be one IP-CAN bearer. IP-CAN bearer charging allows the\nPCNs to collect charging information related to data volumes sent to and\nreceived by the UE/MS, categorised by the QCI and ARP applied to the IP-CAN\nbearer. The user can be identified by MSISDN and/or IMSI, while the IP-CAN\nbearer can be determined by a unique identifier generated by the P-GW when\ncreating a IP-CAN bearer. This identifier is also forwarded to the S-GW/\nePDG/ TWAG/SGSN so as to allow correlation of S-GW/ ePDG/ TWAG/SGSN IP-CAN\nbearer CDRs with the matching P-GW CDRs in the BD.\n\n  NOTE1: The control plane IP address of SGSN or P-GW(acting as GGSN) is\n         the IP address used at Gn/Gp interface.\n\n         The control plane IP address of  S-GW or P-GW is the IP address\n                used at S5/S8 interface.\n\n         The control plane IP address of ePDG or P-GW is the IP address used\n                at S2b interface.\n\n         The control plane IP address of TWAG or P-GW is the IP address used\n                at S2a interface.\n\nIP-CAN bearer specific offline charging in P-GW, is achieved by FBC offline\ncharging, with specific rating group/service identifier, see clause\n5.2.1.3.\n\nThe main collected information items are duration of the IP-CAN bearer and\ndata volume transferred during the lifetime of the IP-CAN bearer. The\nfollowing chargeable events are defined for SGSN, S-GW, ePDG and TWAG IP-\nCAN bearer charging:\n\n  -  Start of IP-CAN bearer. Upon encountering this event, a new CDR for\n    this IP-CAN bearer is created and the data volume is captured for the\n    IP-CAN bearer.\n\n  -  Access of a multi-access PDN connection becomes unusable: when this\n    event is encountered, the current volume count is captured for the IP-\n    CAN bearer of the unusable access.\n\n  -  Access of a multi-access PDN connection becomes usable: when this\n    event is encountered, new volume counts are started for the IP-CAN\n    bearer of the access that has become usable.\n\n  -  End of IP-CAN bearer in the SGSN/S-GW/ePDG/TWAG. The CDR is closed\n    upon encountering this trigger.\n\n  -  Tracking Area Update of:\n\n    -  Inter-SGSN/inter S-GW. The IP-CAN bearer CDR is closed in SGSN/S-GW\n       upon encountering this trigger.\n\n    -  Inter-MME. In S-GW a new MME address is added to CDR upon\n       encountering this trigger.\n\n    -  S4-SGSN to MME. In S-GW a new MME address is added to CDR upon\n       encountering this trigger.\n\n    -  MME to S4-SGSN. In S-GW a new S4-SGSN address is added to CDR upon\n       encountering this trigger.\n\n  -  Intersystem change (e.g. change of radio interface from GSM to UMTS\u00a0or\n    vice versa). This event closes the CDR. A new one is opened if the IP-\n    CAN bearer is still active.\n\n  -  PLMN change visible in the P-GW. This event closes the  CDR. A new one\n    is opened if the IP-CAN bearer is still active.\n\n  -  MS Timezone change visible in the P-GW. This event closes the CDR. A\n    new one is opened if the IP-CAN bearer is still active.\n\n  -  Expiry of an operator configured time limit per IP-CAN bearer. This\n    event closes the CDR, and a new one is opened if the IP-CAN bearer is\n    still active.\n\n  -  Expiry of an operator configured data volume limit per IP-CAN bearer.\n    This event closes the CDR, and a new one is opened if the IP-CAN bearer\n    is still active.\n\n  -  Change of charging condition in the SGSN: e.g. QoS change, tariff time\n    change, user CSG information change or direct tunnel\n    establishment/removal. When this event is encountered, the current\n    volume count is captured and a new volume count is started.\n\n  -  Change of charging condition in the S-GW: e.g. QoS change, tariff time\n    change, user location change, user CSG information change, change of UE\n    presence in Presence Reporting Area(s), change in User Plane to UE,\n    Serving PLMN Rate Control change. When this event is encountered, the\n    current volume counts are captured and a new volume counts are started.\n\n\n\n  -  MO exception data counter receipt in the S-GW: This event closes the\n    CDR. A new one is opened if the IP-CAN bearer is still active.\n\n  -  Change of charging condition in the ePDG: e.g. QoS change, tariff time\n    change. When this event is encountered, the current volume counts are\n    captured and a new volume counts are started.\n\n  -  Change of charging condition in the TWAG: e.g. QoS change, tariff time\n    change. When this event is encountered, the current volume counts are\n    captured and a new volume counts are started.\n\n  -  Expiry of an operator configured change of charging condition limit\n    per IP-CAN bearer. This event closes the CDR, and a new one is opened\n    if the IP-CAN bearer is still active.\n\n  -  Management intervention may also force trigger a chargeable event.\n\nWhen the CDF is implemented as a separate entity, all these chargeable\nevents defined for IP-CAN bearer, trigger charging events reporting, for\nCDRs (S-GW, ePDG, TWAG and P-GW CDRs) to be constructed, enriched or closed\nby CDF, according to description in clause 5.2.2.\n\n  NOTE 2:  For non-IP type PDN connection in the S-GW:\n\n         -  Access of a multi-access PDN connection does not apply;\n\n         -  Mobility occurs between MMEs.\n\n\n"}, {"key": "MM context charging", "numbering": "5.2.1.2", "title_level": 3, "desc": "5.2.1.2  MM context charging\n\nThe SGSN collects charging information for mobility management actions per\nattached UE/MS, i.e. per user. The user can be identified by MSISDN and/or\nIMSI. There can be only one MM context per UE/MS at a time, and only the\nSGSN is involved. Therefore there is no need for special MM context\nidentifiers. The main information items collected are changes of location\npertaining to the UE/MS. The following chargeable events are defined for MM\ncontext charging:\n\n  -  Start of MM context (UE/MS attaches to a SGSN). A new M-CDR is created\n    upon encountering this event.\n\n  -  End of MM context: explicit or implicit GPRS detach, including SGSN\n    change (inter-SGSN routing area update including intersystem change).\n    This event triggers the closure of the M-CDR.\n\n  -  Mobility Change, i.e. a change in the Routing Area. The new location\n    information is captured for the M-CDR.\n\n  -  Expiry of an operator configured time limit. This event triggers the\n    closure of the M-CDR.\n\n  -  Expiry of an operator configured mobility change limit. This event\n    triggers the closure of the M-CDR.\n\n  -  Intra-SGSN intersystem change (change of radio interface from GSM to\n    UMTS\u00a0or vice versa). This event triggers the closure of the M-CDR.\n\nManagement intervention may also force trigger a chargeable event.\n\n\n\n"}, {"key": "Flow Based bearer Charging (FBC)", "numbering": "5.2.1.3", "title_level": 3, "desc": "           5.2.1.3  Flow Based bearer Charging (FBC)\n\nIP-CAN bearer charging allows the P-GW to collect charging information\nrelated to data volumes sent to and received by the UE/MS, categorised by\nthe QoS applied to the IP-CAN bearer. FBC is supported by the P-GW by the\nintegration of a PCEF. With PCEF, the normal IP-CAN bearer charging is\nenhanced by the capability to categorise the service data flows within IP-\nCAN bearer data traffic by rating group or combination of the rating group\nand service id, i.e., while there is only one uplink an one downlink data\nvolume count per IP-CAN bearer in IP-CAN bearer charging, FBC provides one\ncount per each rating group or combination of the rating group and service\nid. In case that sponsored connectivity level reporting is active, FBC\ncategorise within IP-CAN bearer data traffic by combination of rating\ngroup, sponsor identity and application service provider identity. The\nlevel of the reporting is defined per PCC rule. Details of this\nfunctionality are specified in TS\u00a023.203 [215] and TS 32.240 [1].\n\n  NOTE:  The P-GW can only include one QoS Information occurrence per\n         service data container. This implies if an operator wishes to be\n         able to separate usage according to QCI and ARP within their\n         billing system they will need to ensure that services having\n         different QCI and ARP do not have the same:\n\n         -  rating group in cases where rating reporting is used;\n\n         -  rating group/service id where rating group/service id reporting\n           is used;\n\n         -  rating group/sponsor identity/application service provider\n           identity where sponsored connectivity level reporting charging\n           is used.\n\nIP-CAN bearer specific offline charging is achieved with IP-CAN bearer\nspecific rating group/service identifier defined in clause 5.3.1.1.\n\nAccording to TS 23.203 [215], FBC shall support different charging models\nper PCC rule. These charging models may be based on volume and/or time and\non number of events matching a specific service data flow template in PCC\nrule.\nIn general the charging of a service data flow shall be linked to the IP-\nCAN bearer under which the service data flow has been activated.  The\nfollowing chargeable events are defined for FBC:\n\n  -  Start of IP-CAN bearer. Upon encountering this event, a new PGW-CDR\n    for this context is created.\n\n  -  Start of service data flow. If service identifier level reporting is\n    required by the PCC rule new counts and time stamps for this\n    combination of the rating group and service id are started. If rating\n    group level reporting is required by the PCC rule needed new counts and\n    time stamps for this rating group are started. If sponsored\n    connectivity level reporting is required by the PCC rule needed new\n    counts and time stamps for this rating group, sponsor identity and\n    application service provider identity are started. The type of counters\n    shall depend on the measurement method configured for the PCC rule.\n    When event based charging applies, the first occurrence of an event\n    matching a service data flow template in PCC rule shall imply that a\n    new count is started. When new events occur, the counter shall be\n    increased. Each event shall be time stamped.\n\n  -  Termination of service data flow. If service identifier level\n    reporting is required by the PCC rule and this was the last active\n    service data flow for this combination of the rating group and service\n    id or if rating group level reporting is required by the PCC rule and\n    this was the last active service data flow for this rating group, or if\n    sponsored connectivity level reporting is required by the PCC rule and\n    this was the last active service data flow for this combination of\n    rating group, sponsor identity and application service provider\n    identity, the counters and time stamps are closed and added to the PGW-\n    CDR. For information on how the termination of service data flows is\n    detected, refer to TS\u00a023.203 [72].\n\n  -  Access of a multi-access PDN connection becomes unusable: the\n    Termination of service data flow chargeable event applies for all the\n    service data flows carried under the IP-CAN bearer of the unusable\n    access.\n\n  -  Access of a multi-access PDN connection becomes usable: the Start of\n    service data flow chargeable event applies for all the service data\n    flows carried under the IP-CAN bearer of the access that has become\n    usable.\n\n  -  End of IP-CAN bearer in the P-GW. The PGW-CDR is closed upon\n    encountering this trigger.\n\n  -  Serving node (e.g. SGSN/S-GW/ePDG/TWAG) change in the P-GW. New SGSN/S-\n    GW/ePDG/TWAG address is added to PGW-CDR.\n\n  -  Expiry of an operator configured time limit per IP-CAN bearer. This\n    event closes the PGW-CDR, and a new one is opened if the IP-CAN bearer\n    is still active.\n\n  -  Expiry of an operator configured time limit per rating group. The\n    counters and time stamps are closed and added to the PGW-CDR. A new\n    service data flow container is opened if any matching service data flow\n    is still active.\n\n  -  Expiry of an operator configured data volume limit per IP-CAN bearer.\n    This event closes the PGW-CDR, and a new one is opened if the IP-CAN\n    bearer is still active.\n\n  -  Expiry of an operator configured data volume limit per rating group.\n    The counters and time stamps are closed and added to the PGW-CDR. A new\n    service data flow container is opened if any matching service data flow\n    is still active.\n\n  -  Expiry of an operator configured data event limit per rating group.\n    The counters and time stamps are closed and added to the PGW-CDR. A new\n    service data flow container is opened if any matching service data flow\n    is still active.\n\n  -  Change of charging condition: IP-CAN bearer modification (e.g. QoS\n    change, SGSN change, S-GW change, user location change,user CSG\n    information change, change of UE presence in Presence Reporting\n    Area(s), change of 3GPP PS Data Off status, Serving PLMN Rate Control\n    change, APN Rate Control change), tariff time change or failure\n    handling procedure triggering. When this event is encountered, all\n    current configured counts and time stamps are captured and new counts\n    and time stamps for all active service data flows are started.\n\n  -  Intersystem change (e.g. change of radio interface from GSM to UMTS,\n    RAT change) visible in the P-GW. This event closes the PGW-CDR, and a\n    new one is opened if the IP-CAN bearer is still active.\n\n  -  PLMN change visible in the P-GW. This event closes the PGW-CDR. A new\n    one is opened if the IP-CAN bearer is still active.\n\n  -  MS Timezone change visible in the P-GW. This event closes the PGW-CDR.\n    A new one is opened if the IP-CAN bearer is still active.\n\n  -  MO exception data counter receipt in the P-GW: This event closes the\n    CDR. A new one is opened if the IP-CAN bearer is still active.\n\n  -  SGSN change in the P-GW. New SGSN address is added to PGW-CDR.\n\n  -  Expiry of an operator configured report of service flow data limit per\n    IP-CAN bearer. This event closes the PGW-CDR, and a new one is opened\n    if the IP-CAN bearer is still active.\n\n  -  Completion of a time envelope as defined in TS 32.299 [50]. This event\n    closes a service data flow container. Further details are described in\n    clause 5.2.3.4.1 \"Triggers for PGW-CDR Charging Information Addition\"'.\n    The need for reporting time envelopes may be statically configured for\n    each rating group or dynamically controlled by online charging.\n\nManagement intervention may also force trigger a chargeable event.\n\nRelevant service data flows for a certain IP-CAN bearer are determined when\nFBC is applied. PCC rules are used for this determination. One PCC rule\nidentifies service data flow to be measured but it can also include certain\ncharacteristics related to that service data flow.\n\nPCC rules can be activated, deactivated and modified any time during the IP-\nCAN bearer lifetime. PCC rule activation, deactivation and modification are\nnot chargeable events. However these PCC rule changes may lead to \"start of\nservice data flow\" and \"termination of service data flow\" chargeable\nevents.\n\nA PCC rule can contain e.g.:\n\n  -  service data flow template (service data flow filters or application\n    identifier) to identify packets belonging to certain service data flow,\n\n\n\n  -  charging method to identify whether online/offline/both/neither\n    charging interface is used,\n\n  -  measurement method for offline charging to identify whether\n    time/volume/events are measured for this service data flow,\n\n  -  Charging key (i.e. rating group) for that service data flow,\n\n  -  service identifier for that service data flow,\n\n  -  Sponsor Identifier (offline charging only),\n\n  -  Application Service Provider Identifier (offline charging only),\n\n  -  application function record information to correlate the measurement\n    with application level reports,\n\n  -  reporting level for the service data flow (rating group, combination\n    of the rating group and service id or combination of the rating group,\n    sponsor identity and application service provider identity),\n\n  -  precedence to the situations where two or more PCC rules are\n    overlapping,\n\n  -  allowed access type (for NBIFOM control) See clause 5.2.1.7A..\n\nPCC rules can be:\n\n  -  pre-defined in P-GW (can be activated either by the PCRF or PCEF\n    itself) or,\n\n  -  dynamically provisioned and activated by the PCRF over the Gx\n    interface.\n\nThis is specified in TS 23.203 [215] and TS 29.212 [216].\n\nAccording to TS 23.203 [215] , the PCRF can modify the following charging\ninformation in a dynamic PCC rule which is active in the PCEF: Charging\nkey, Service identifier, Sponsor Identifier, Application Service Provider\nIdentifier, Measurement method, and reporting level The PCRF can also\nmodify the allowed access type in the case of NBIFOM.. A change of any of\nthis charging or allowed access type information will trigger a \"start of\nservice data flow\" chargeable event when a valid counter does not exist\ncorresponding to that changed PCC rule. A change of any of this charging or\nallowed access type information will trigger a \"termination of service data\nflow\" chargeable event when this was the last active service data flow for\nthe counter corresponding to the original PCC rule.\n\nWhen the CDF is implemented as a separate entity,  all these FBC related\nchargeable events,  trigger charging events  reporting, for P-GW CDRs to be\nconstructed, enriched or closed by CDF, according to description in clause\n5.2.2.\n\nExtended packet inspection can be done in the PCEF with pre-defined PCC\nrules. The PCEF also have the possibility to output service specific\ninformation related to the packet inspection in the CDR.\n\nThe capability of P-GW to support ABC is achieved with PCRF providing\nappropriate PCC rules to the P-GW. Such PCC Rule shall be defined with\nservice data flow template including an Application Identifier for the\napplication which needs to be detected, enforced and charged.\n\nFor non-IP type PDN connection in the P-GW:\n\n  -  non-3GPP access types are not supported, a multi-access PDN\n    connections do not apply;\n\n  -  A single PCC Rule is used with the service data flow descriptor\n    matching the whole non-IP data traffic, and can contain e.g.:\n\n    -  service data flow template matching all the packets;\n\n    -  charging method to identify whether online/offline/both/neither\n       charging interface is used;\n\n    -  measurement method for offline charging to identify whether\n       time/data volume/events are measured for this service data flow;\n\n    -  Charging key (i.e. rating group) for that service data flow;\n\n    -  service identifier for that service data flow;\n\n    -  reporting level for that service data flow:\n\n       -  rating group level in case a specific rating group is used for non-\n         IP traffic charging;\n\n       -  combination of the rating group and service id in case a specific\n         rating group/service Id is used for non-IP traffic charging.\n\n\n\n\n"}, {"key": "SMS charging", "numbering": "5.2.1.4", "title_level": 3, "desc": "5.2.1.4  SMS charging\n\nThe SGSN and the MME collect charging information for each Short Message\nsent to, or received by, a MS/UE.\nThere are two chargeable events for SMS charging in the SGSN and MME:\n\n  -  the transfer of a SM through the SGSN and MME in MO direction;\n\n  -  the transfer of a SM through the SGSN and MME in MT direction.\n\nManagement intervention may also force trigger a chargeable event.\n\n\n"}, {"key": "LCS charging", "numbering": "5.2.1.5", "title_level": 3, "desc": "5.2.1.5  LCS charging\n\nThe SGSN collects charging information for each Location Request for a\nMS/UE.\nThe following chargeable events are specified for LCS:\n\n  -  A location request for a MS/UE triggered by that MS/UE (LCS-MO);\n\n  -  A location request for a MS/UE triggered by an external entity (LCS-\n    MT);\n\n  -  A location request for a MS/UE triggered by the network (LCS-NI).\n\nManagement intervention may also force trigger a chargeable event.\n\n\n\n"}, {"key": "MBMS context charging for GPRS", "numbering": "5.2.1.6", "title_level": 3, "desc": "           5.2.1.6  MBMS context charging for GPRS\n\nThe SGSN and GGSN collects charging information for each MBMS bearer\nservice activated.\nThe following chargeable events are specified for MBMS:\n\n  -  Start of MBMS bearer context. Upon encountering this event, a new CDR\n    for this MBMS bearer context is created and the data volume is captured\n    for the MBMS bearer context.\n\n  -  End of MBMS bearer context in the SGSN/GGSN. For the SGSN only, this\n    trigger includes inter-SGSN routing area update (e.g. the last UE using\n    the MBMS bearer context leaves the routeing area).\n    The MBMS bearer context CDR is closed upon encountering this trigger.\n\n  -  Expiry of an operator configured time limit per MBMS bearer context.\n    This event closes the MBMS bearer context CDR, and a new one is opened\n    if the MBMS bearer context is still active.\n\n  -  Expiry of an operator configured data volume limit per MBMS bearer\n    context. This event closes the MBMS bearer context CDR, and a new one\n    is opened if the MBMS bearer context is still active.\n\n  -  Change of charging condition: tariff time change. When this event is\n    encountered, the current volume count is captured and a new volume\n    count is started.\n\n  -  Expiry of an operator configured change of charging condition limit\n    per MBMS bearer context. This event closes the MBMS bearer context CDR,\n    and a new one is opened if the MBMS bearer context is still active.\n\nManagement intervention may also force trigger a chargeable event.\n\n\n"}, {"key": "MBMS context charging for EPS", "numbering": "5.2.1.6A", "title_level": 3, "desc": "5.2.1.6A MBMS context charging for EPS\n\nIn EPS, MBMS GW is the function entity which may be stand alone or co-\nlocated with other network elements such as BM-SC or combined S-GW/PDN-GW.\nThe MBMS GW collects charging information for each MBMS bearer service\nactivated. The following chargeable events are specified for MBMS:\n\n  -  Start of MBMS bearer context. Upon encountering this event, a new CDR\n    for this MBMS bearer context is created and the data volume is captured\n    for the MBMS bearer context.\n\n  -  End of MBMS bearer context in the MBMS GW.\n\n  -  Expiry of an operator configured time limit per MBMS bearer context.\n    This event closes the MBMS bearer context CDR, and a new one is opened\n    if the MBMS bearer context is still active.\n\n  -  Expiry of an operator configured data volume limit per MBMS bearer\n    context. This event closes the MBMS bearer context CDR, and a new one\n    is opened if the MBMS bearer context is still active.\n\n  -  Change of charging condition: tariff time change. When this event is\n    encountered, the current volume count is captured and a new volume\n    count is started.\n\n  -  Expiry of an operator configured change of charging condition limit\n    per MBMS bearer context. This event closes the MBMS bearer context CDR,\n    and a new one is opened if the MBMS bearer context is still active.\n\nManagement intervention may also force trigger a chargeable event.\n\nThe MBMS control plane function is supported by MME for E-UTRAN access and\nby SGSN for UTRAN access.\n\n\n\n"}, {"key": "IP Flow Mobility (IFOM) charging", "numbering": "5.2.1.7", "title_level": 3, "desc": "           5.2.1.7  IP Flow Mobility (IFOM) charging\n\nAn \"IFOM capable UE\", as defined in TS 23.402 [209], may be simultaneously\nconnected to 3GPP access and WLAN access for different IP flows within the\nsame PDN connection, as described in TS\u00a023.261\u00a0[212].\nIn the P-GW, FBC (as described in clause 5.2.1.3) applies to the\ncorresponding service data flows, carried by appropriate IP-CAN bearer(s)\nactivated for both accesses.\n\nFor a PDN connection, charging for each service data flow, is performed\nwithin the IP-CAN bearer charging session of the IP-CAN bearer it belongs\nto, according to its associated PCC Rule.\n\nAs described in TS\u00a023.261\u00a0[212], the UE may also move one or more IP\nflow(s) from 3GPP access to WLAN access (and reversely). The transfer of\nthe corresponding service data flow(s) from one access to the other access,\nresults in PCC Rule(s) removed from the IP-CAN bearer(s) of the source\naccess, leading to termination of service data flow\", and PCC Rule(s)\ninstalled into the IP-CAN bearer(s) of the target access.\n\nFor each service data flow, identified by its PCC Rule, this PCC Rule may\nbe provided with a different description depending on the access type where\nit has to be enforced. In particular, the rating group may differ, as a way\nto apply charging differentiation per-access type. The charging method,\nmeasurement method, reporting level may also potentially be different, in\ncase charging behaviour is not expected to be unified between both domains.\n\nIn order to ensure the accurate level of granularity of service data flows\ncharging, the associated PCC Rule shall be defined with the service\nidentifier level reporting.\n\nFor the case where dynamic PCC is not deployed, per-access Charging\nCharacteristics and pre-defined  PCC Rule(s) in\nP-GW may be used as a way to apply charging differentiation.\n\n\n"}, {"key": "Network-Based IP Flow Mobility (NBIFOM) charging", "numbering": "5.2.1.7A", "title_level": 3, "desc": "5.2.1.7A Network-Based IP Flow Mobility (NBIFOM) charging\n\nTo support Network-Based IP Flow Mobility (NBIFOM), multi-radio (i.e. 3GPP\nand WLAN) capable UEs establish and maintain a PDN connection over both\n3GPP access and WLAN access simultaneously for both S2b and S2a\nconnectivity, as specified in TS 23.161 [242]. When such a multi-access PDN\nconnection is established, there is one default bearer for each access. On\na multi-access PDN connection established over both 3GPP access and WLAN\naccess, it is possible to move individual IP flows from one access network\nto another, when policies determine that flows should be moved and the\ntarget access is available for the UE. As described in TS 23.203 [215], it\nshall be possible to apply different rates depending on the access used to\ncarry a service data flow.\n\nFor a multi-access PDN connection, IP-CAN bearer charging as defined in\nclause 5.2.1.1 and FBC as defined in clause 5.2.1.3 apply for each bearer\nunder each access for this PDN connection, and IP-CAN bearer charging as\ndefined in clauses 5.2.1.10.1 and FBC as defined in clauses 5.2.1.10.2\napply when charging per IP-CAN session is active for this PDN connection,\nbased on:\n\n  -  Establishment of a multi-access PDN connection and addition of access\n    to a multi-access PDN connection result in the default bearer and\n    potential dedicated bearer(s) creation for this access, to carry the\n    service data flows based on PCC Rule(s).\n\n  -  Release of a multi-access PDN connection and removal of an access from\n    a multi-access PDN connection result in release of all the IP-CAN\n    bearer(s) for this access.\n\n  -  Access change for service data flow(s), results in corresponding PCC\n    Rule(s) removed from the IP-CAN bearer(s) of the source access, and PCC\n    Rule(s) installed into the IP-CAN bearer(s) of the target access.\n\n  -  Access of a multi-access PDN connection becomes unusable: for the\n    service data flows maintained as result from PCC Rules decision, under\n    the IP-CAN bearer that becomes unusable, no traffic will be detected.\n\n  -  Access of a multi-access PDN connection becomes usable: for the\n    service data flows which were maintained as result from PCC Rules\n    decision under the IP-CAN bearer when detected as usable, the new\n    traffic will be counted.\n\n\n\nFor each service data flow, identified by its PCC Rule, a different access\ntype is specified where it has to be enforced. A different rating group may\nbe used as a way to apply charging differentiation per-access type. The\ncharging method, measurement method, reporting level may also potentially\nbe different, in case charging behaviour is not expected to be unified\nbetween both domains.\n\nFor the case where dynamic PCC is not deployed, per-access Charging\nCharacteristics and pre-defined  PCC Rule(s) in\nP-GW may be used as a way to apply charging differentiation.\n\n\n"}, {"key": "Sponsored data connectivity charging", "numbering": "5.2.1.8", "title_level": 3, "desc": "5.2.1.8  Sponsored data connectivity charging\n\nAccording to TS 23.203 [215] two deployment scenarios exist for sponsored\ndata connectivity. The Sponsor Identifier and Application Service Provider\nIdentifier are provided for sponsored services to the PCRF from the AF over\nthe Rx interface.\n\nIn the first scenario the PCRF assigns a service specific Charging Key\n(i.e. r atingg roup) for a sponsored IP flow. The Charging Key is used by\nthe PCEF to collect separate charging information for offline charging for\nthe sponsored flows. Correlation of charging information for offline\ncharging from multiple users per sponsor and/or application service\nprovider is then performed using the Charging Key.\n\nIn a second scenario the Sponsor Identifier and Application Service\nProvider Identity is included in PCC-rules from the PCRF to the PCEF. For\nthis scenario, the same Charging Key may be used both for IP flows that are\nsponsored and for flows that are not sponsored. Charging information\ngenerated by the PCEF for offline charging include the Sponsor Identity and\nthe Application Service Provider Identity. Correlation of charging\ninformation from multiple users per sponsor and/or application service\nprovider can then be based on Sponsor Identity and Application Service\nProvider Identity instead of the Charging Key.\n\n\n\n"}, {"key": "Application Based Charging (ABC)", "numbering": "5.2.1.9", "title_level": 3, "desc": "           5.2.1.9  Application Based Charging (ABC)\n\n\n"}, {"key": "Introduction", "numbering": "5.2.1.9.0", "title_level": 4, "desc": "5.2.1.9.0   Introduction\n\nFor the sub-clauses that follow, a single CDR is defined to handle both TDF\nsession and ABC information when both are to be used. E ither TDF session\ncharging, ABC or both may be active as determined by Charging\nCharacteristics. For ABC the opening and closing of CDRs is bound to the\nTDF session start and end respectively. Many application containers per TDF\nsession can be active simultaneously within the TDF CDR see clause\n5.2.3.9.1.\n\nWhen the CDF is implemented as a separate entity,  all of these TDF session\nand ABC related chargeable events, trigger charging events  reporting, for\nCDRs to be constructed, enriched or closed by CDF, according to clause\n5.2.2.\n\n\n"}, {"key": "Charging per application", "numbering": "5.2.1.9.1", "title_level": 4, "desc": "5.2.1.9.1   Charging per application\n\nABC allows collection of charging information for network usage of\napplication traffic, categorized  within the TDF session by rating group or\ncombination of rating group and service identifier. ABC supported by TDF is\nbased on ADC rules. Details of this functionality are specified in\nTS\u00a023.203 [215].\n\n  NOTE:  ABC is supported by the P-GW embedding PCEF enhanced with\n         application detection and control functionality as defined in TS\n         23.203 [215], by mean of appropriate PCC Rules, and therefore\n         specified under FBC clause 5.2.1.3 and clause 5.2.1.10.2.\n\nAccording to TS 23.203 [215], ABC shall support different charging models\nper ADC rule.\nThese charging models may be based on volume and/or time and on number of\nevent matching specific detected application traffic in ADC rule. The\nfollowing chargeable events are defined for ABC when offline charging is\nactivated:\n\n  -  Start of TDF session. Upon encountering this event, a new TDF-CDR for\n    this context is created.\n\n  -  Start of application traffic. If service identifier level reporting is\n    required by the ADC rule, new counts and time stamps for this\n    combination of the rating group and service identifier are started. If\n    rating group level reporting is required by the ADC rule new counts and\n    time stamps for this rating group are started. The type of counters\n    shall depend on the measurement method configured for the ADC rule.\n    When event based charging applies, the first occurrence of an event\n    detected by the pre-defined ADC rules shall imply that a new count is\n    started.\n    When new events occur, the counter shall be increased. Each event shall\n    be time stamped.\n\n  -  Termination of application traffic. If service identifier level\n    reporting is required by the ADC rule or if rating group level\n    reporting is required by the ADC rule, the counters and time stamps are\n    closed and added to the TDF-CDR.\n\n  -  End of TDF session in the TDF. The TDF-CDR is closed upon encountering\n    this trigger.\n\n  -  Expiry of an operator configured time limit for keeping a CDR open.\n    This event closes all counters. The resulting containers are data to\n    the CDR and the CDR is closed. A new CDR is opened if the TDF session\n    is still active.\n\n  -  Expiry of an operator configured time limit per rating group. The\n    counters and time stamps are closed and added to the TDF-CDR. A new\n    application traffic container is opened if any application related to\n    the rating group is still active.\n\n  -  Expiry of an operator configured data volume limit per TDF session.\n    This event closes the TDF-CDR, and a new one is opened if the TDF\n    session is still active.\n\n  -  Expiry of an operator configured data volume limit per rating group.\n    The counters and time stamps are closed and added to the TDF-CDR. A new\n    one is opened if any application related to the rating group is still\n    active.\n\n  -  Expiry of an operator configured data event limit per rating group.\n    The counters and time stamps are closed and added to the TDF-CDR. A new\n    one is opened if any application related to the rating group is still\n    active.\n\n  -  Expiry of an operator configured data event limit per TDF session.\n    This event closes the TDF-CDRs, and new one is opened if the TDF\n    session is still active.\n\n  -  Change of charging condition: TDF session modification (e.g. SGSN\n    change, S-GW change, user location change, user CSG information\n    change), tariff time change or failure handling procedure triggering.\n    When this event is encountered, all current configured counts and time\n    stamps are captured and new counts and time stamps for all active\n    applications are started.\n\n  -  Intersystem change (e.g. change of radio interface from GSM to UMTS,\n    RAT change) visible in the TDF. This event closes the TDF-CDR, and a\n    new one is opened if the TDF session is still active.\n\n  -  PLMN change visible in the TDF. This event closes the TDF-CDR. A new\n    one is opened if the TDF session is still active.\n\n  -  MS Timezone change visible in the TDF. This event closes the TDF-CDR.\n    A new one is opened if the TDF session is still active.\n\n  -  Completion of a time envelope as defined in TS 32.299 [50]. This event\n    closes an application traffic container. Further details are described\n    in clause 5.2.3.9.2 \"Triggers for TDF-CDR Charging Information\n    Addition\". The need for reporting time envelopes may be statically\n    configured for each rating group or dynamically controlled by online\n    charging.\n\nManagement intervention may also force trigger a chargeable event.\n\nADC rules can be activated, deactivated and modified any time during the\nTDF session lifetime. ADC rule activation, deactivation and modification\nare not chargeable events of ABC. However these rule changes may lead to\n\"start of application traffic\" and \"termination of application traffic\"\nchargeable events.\n\nApplication Detection and Control rule can contain e.g.:\n\n  -  Application Identifier to identify or service data flow filters to\n    identify the packets belonging to an application detected application,\n\n  -  charging method to identify whether online/offline/both/neither\n    charging interface is used,\n\n  -  measurement method for online/offline charging to identify whether\n    time/volume/events are measured for this application,\n\n  -  Charging key (i.e. rating group) for that application,\n\n  -  service identifier for that application,\n\n  -  reporting level for the application (rating group or combination of\n    the rating group and Service identifier),\n\n  -  precedence to the situations where two or more ADC rules are\n    overlapping.\n\nApplication Detection and Control rule can be:\n\n  -  pre-defined in TDF (can be activated by the PCRF) or,\n\n  -  dynamically provisioned and activated by the PCRF over the Sd\n    interface.\n\nThis is specified in TS 23.203 [215] and TS 29.212 [216].\n\nAccording to TS 23.203 [215], the PCRF can modify the following charging\ninformation in a dynamic ADC rule: Charging key, Service identifier,\nMeasurement method, and Service identifier level reporting. A change of any\nof this charging information triggers a \"start of application traffic\"\nchargeable event when a valid counter does not exist corresponding to that\nchanged ADC rule. A change of any of this charging information triggers a\n\"termination of application traffic\" chargeable event when this was the\nlast active application for the counter corresponding to the original ADC\nrules.\n\n\n\n"}, {"key": "Charging per TDF session", "numbering": "5.2.1.9.2", "title_level": 4, "desc": "             5.2.1.9.2   Charging per TDF session\n\nTDF collects charging information per user per TDF session. TDF session\ncharging allows the TDF to collect charging information related to data\nvolumes sent to and received by the UE/MS for the timeframe since the\nestablishment till the termination of TDF session. The user can be\nidentified by MSISDN and/or IMSI, while the TDF session can be determined\nby a unique identifier generated by the P-GW (an \"EPS default bearer\nCharging Identifier\" for GTP based connectivity or an \"unique Charging Id\"\nfor PMIP based connectivity  when establishing TDF session.\n\nTDF session specific offline charging in TDF is achieved by ABC offline\ncharging, with a vendor specific rating group/service identifier associated\nwith the TDF session.The main collected information items are duration of\nthe TDF session and data volume transferred during the lifetime of the TDF\nsession. When Charging per TDF session is active, the following chargeable\nevents are defined:\n\n  -  Start of TDF session. Upon encountering this event, a new TDF-CDR for\n    this context is created.\n\n  -  End of TDF session in the TDF. The TDF-CDR is closed upon encountering\n    this trigger.\n\n  -  Expiry of an operator configured time limit for keeping a CDR open.\n    This event closes all counters. The resulting containers are data to\n    the CDR and the CDR is closed. A new CDR is opened if the TDF session\n    is still active.\n\n  -  Expiry of an operator configured time limit per TDF session. This\n    event closes the  CDR, and a new one is opened if the TDF session is\n    still active.\n\n  -  Expiry of an operator configured data volume limit per TDF session.\n    This event closes the TDF-CDR, and a new one is opened if the TDF\n    session is still active.\n\n  -  Change of charging condition: TDF session modification (e.g. SGSN\n    change, S-GW change, user location change, user CSG information\n    change), tariff time change or failure handling procedure triggering.\n    When this event is encountered, all current configured counts and time\n    stamps are captured and new counts and time stamps for all active\n    applications are started.\n\n  -  Intersystem change (e.g. change of radio interface from GSM to UMTS,\n    RAT change) visible in the TDF.\n    This event closes the TDF-CDR, and a new one is opened if the TDF\n    session is still active.\n\n  -  PLMN change visible in the TDF. This event closes the TDF-CDR. A new\n    one is opened if the TDF session is still active.\n\n  -  MS Timezone change visible in the TDF. This event closes the TDF-CDR.\n    A new one is opened if the TDF session is still active.\n\n     Expiry of an operator configured change of charging condition limit\n    per TDF session. This event closes the CDR, and a new one is opened if\n    the TDF session is still active.\n\n  NOTE:  All the events defined above are a shared events with ABC in\n         clause 5.2.1.9.1 for the single shared CDR.\n\nManagement intervention may also force trigger a chargeable event.\n\n\n\n"}, {"key": "Charging per IP-CAN session", "numbering": "5.2.1.10", "title_level": 3, "desc": "           5.2.1.10 Charging per IP-CAN session\n\n\n"}, {"key": "General", "numbering": "5.2.1.10.0", "title_level": 4, "desc": "5.2.1.10.0  General\n\nCharging per IP-CAN session is an optional capability in the P-GW that\nprovides for a consolidated view of the charging information across all\nbearers in the IP-CAN session. When charging per IP-CAN session is active,\nthe basic principles in this clause apply to the P-GW instead of the\nprinciples in clause 5.2.1.1 and clause 5.2.1.3 above.\n\nFor the sub-clauses that follow, a single PGW-CDR is defined to handle both\ntypes of charging information when both are to be used. When Charging per\nIP-CAN session is active, either IP-CAN bearer charging, FBC or both may be\nactive as determined by Charging Characteristics.\n\nWhen the CDF is implemented as a separate entity, all of these IP-CAN\nbearer and FBC related chargeable events,  trigger charging events\nreporting, for CDRs to be constructed, enriched or closed by CDF, according\nto description in clause 5.2.2.\n\n\n"}, {"key": "IP-CAN bearer charging", "numbering": "5.2.1.10.1", "title_level": 4, "desc": "5.2.1.10.1  IP-CAN bearer charging\n\nFor the purpose of interoperator charging, the P-GW collects charging\ninformation per user per IP-CAN bearer.\nIn case the P-GW is not aware of IP-CAN bearers, i.e. in case of PMIP based\nconnectivity, P-GW collects charging information per IP-CAN session as it\nwould be one IP-CAN bearer. IP-CAN bearer charging allows the P-GW to\ncollect charging information related to data volumes sent to and received\nby the UE/MS, categorised by the QCI and ARP applied to the IP-CAN bearer.\nThe user can be identified by MSISDN and/or IMSI, while the IP-CAN bearer\ncan be determined by a unique identifier generated by the P-GW when\ncreating an IP-CAN bearer. This identifier is forwarded to the S-GW/ePDG/\nTWAG/SGSN so as to allow correlation of S-GW/ePDG/ TWAG/SGSN IP-CAN bearer\nCDRs with the matching P-GW charging information in the BD.\n\nThe amount of data counted in P-GW shall be based on:\n\n  -  in case of GTP based tunnelling and interworking with external IP\n    networks; the inner IP packets in the GTP-U packet (T-PDU, see TS\n    29.281 [217])\n\n  -  in case of GTP based tunnelling and interworking with external\n    networks handling other data services (e.g. non-IP, PPP); the T-PDU\n    packets (see TS 29.281 [217])\n\n  -  In case of PMIP based protocol; the payload of the GRE tunnel\n\n  -  In case of DSMIPv6 based protocol; the payload of the tunnelling\n    layer.\n\nAs minimum behaviour, the full payload shall be included. Time metering is\nstarted when IP-CAN bearer is activated.\n\n  NOTE 1:  The control plan address of the P-GW, together with the unique\n         charging identifier assigned by the P-GW, enables the correlation\n         of charging information. The control plane IP address of SGSN or P-\n         GW (acting as GGSN) is the IP address used at Gn/Gp interface.\n         The control plane IP address of S-GW or P-GW is the IP address used\n         at S5/S8 interface.\n         The control plane IP address of ePDG or P-GW is the IP address used\n         at S2b interface.\n         The control plane IP address of TWAG or P-GW is the IP address used\n         at S2a interface.\n\nWhen Charging per IP-CAN session is active and measurements for IP-CAN\nbearers are captured in the same CDR as FBC measurements, the following\nchargeable events are defined:\n\n  -  Start of the default bearer for an IP-CAN session when single access\n    is used or start of the first default bearer for a multi-access PDN\n    connection (i.e., when NBIFOM is accepted by PCRF).\n    Upon encountering this event, a new CDR for the IP-CAN session is\n    created and the data volume counts\n    (i.e., uplink and downlink) are started and captured for the IP-CAN\n    bearer.\n\n  NOTE 2:  Start of the default bearer or start of the first default bearer\n         for an IP-CAN session is a shared event for FBC in clause\n         5.2.1.10.2 for the single shared CDR.\n\n  -  Addition of access to a PDN connection.\n    Additional volume counts are started and captured for IP-CAN bearers of\n    the access. New SGSN/S-GW/ePDG/TWAG address is added to data for the IP-\n    CAN bearer in the CDR.\n\n  -  Start of a dedicated bearer for an IP-CAN session.\n    Additional volume counts are started and captured for the dedicated\n    bearer.\n\n  -  End of dedicated bearer in the P-GW.\n    The counters and time stamps for the IP-CAN bearer are closed and\n    resulting container added to the CDR.\n\n  -  Removal of access from a multi-access PDN connection.\n    The counters and time stamps for the IP-CAN bearers of the removed\n    access are closed and resulting containers added to CDR.\n\n  -  Access of a multi-access PDN connection becomes unusable.\n    The counters and time stamps for the IP-CAN bearers of the unusable\n    access are closed and resulting containers added to the CDR.\n\n  -  Access of a multi-access PDN connection becomes usable.\n    New volume counts are started and captured for all bearers of the\n    access that has become usable. These may not be the same as those that\n    were previously active when the access became unusable due to changes\n    in PCC Rules.\n\n  -  End of IP-CAN session (i.e. end of the default bearer for a single\n    access PDN connection or end of the last default bearer for a multi-\n    access PDN connection) in the P-GW.\n    The counters and time stamps for all IP-CAN bearers and the resulting\n    containers added to the CDR. The CDR is closed.\n\n  NOTE 3:  The End of IP-CAN session event is a shared event for FBC in\n         clause 5.2.1.10.2 for the single shared CDR.\n\n  -  Serving node (e.g. SGSN/S-GW/ePDG/TWAG) change in the P-GW.\n    New SGSN/S-GW/ePDG/TWAG address is added to data for the IP-CAN bearer\n    in the CDR.\n\n  -  Expiry of an operator configured time limit for keeping a CDR open.\n    This event closes all counters. The resulting containers are added to\n    the CDR and the CDR is closed.\n    A new CDR is opened if the IP-CAN session is still active.\n\n  NOTE 4:  The expiry of an operator configured time limit for keeping a\n         CDR open event is a shared event for FBC in clause 5.2.1.10.2 for\n         the single shared CDR.\n\n  -  Expiry of an operator configured time limit per IP-CAN bearer.\n    The counters and time stamps for the IP-CAN bearer are closed and added\n    to the CDR. A new IP-CAN bearer traffic volume container is opened if\n    the IP-CAN bearer is still active.\n\n  -  Expiry of an operator configured data volume limit per IP-CAN session.\n\n    This event closes the CDR and a new one is opened if the IP-CAN session\n    is still active.\n\n  NOTE 5:  The expiry of an operator configured data volume limit per IP-\n         CAN session event is a shared event for FBC in clause 5.2.1.10.2\n         for the single shared CDR.\n\n  -  Expiry of an operator configured data volume limit per IP-CAN bearer.\n    The counters and time stamps are closed and added to the CDR. A new IP-\n    CAN bearer traffic volume container is opened if the IP-CAN bearer is\n    still active.\n\n  -  Change of charging condition specific to APN-AMBR change.\n    This event closes the CDR, and a new one is opened if the IP-CAN\n    session is still active.\n\n  -  Change of charging condition specific to IP-CAN bearer modification\n    QoS change.\n    When this event is encountered, all counts and time stamps for the\n    modified bearer are captured and new counts and time stamps for the\n    specific bearer are started.\n\n  -  Change of charging condition.\n    IP-CAN bearer modification except QoS change (e.g. SGSN change, S-GW\n    change, user location change, user CSG information change, change of UE\n    presence in Presence Reporting Area(s) , change of 3GPP PS Data Off\n    status, Serving PLMN Rate Control change, APN Rate Control change), or\n    tariff time change. When this event is encountered, all current\n    configured counts and time stamps are captured and new counts and time\n    stamps for all active bearers are started.\n    IP-CAN bearer modification except QoS change events are associated with\n    one access of a multi-access PDN connection and all counts associated\n    with affected access are identified with the specific event. All counts\n    associated with the other access of a multi-access PDN connection are\n    identified as an indirect change of charging condition.\n\n  NOTE 7:  The change of charging condition event is a shared event for FBC\n         in clause 5.2.1.10.2 for the single shared CDR.\n\n  Editor\u2019s Note: whether the special case of user location reporting on\n         dedicated bearer release triggers a change of charging condition\n         for the IP-CAN session is ffs.\n\n  -  Intersystem change (e.g. change of radio interface from GSM to UMTS,\n    RAT change) for any connected access visible in the P-GW.\n    This event closes the CDR, and a new one is opened if the IP-CAN\n    session is still active.\n\n  NOTE 8:  The intersystem change event is a shared event for FBC in clause\n         5.2.1.10.2 for the single shared CDR.\n\n  -  PLMN change visible in the P-GW. This event closes the CDR.\n    A new one is opened if the IP-CAN session is still active.\n\n  NOTE 9:  The PLMN change event is a shared event for FBC in clause\n         5.2.1.10.2 for the single shared CDR.\n\n  -  MS Timezone change visible in the P-GW. This event closes the CDR.\n    A new one is opened if the IP-CAN session is still active.\n\n  NOTE 10: The MS Timezone change event is a shared event for FBC in clause\n         5.2.1.10.2 for the single shared CDR.\n\n  -  Expiry of an operator configured limit of number of charging condition\n    changes per IP-CAN session.\n    This event closes the CDR, and a new one is opened if the IP-CAN\n    session is still active.\n\n  NOTE 11: The expiry of an operator configured limit of number of charging\n         condition changes event is a shared event for FBC in clause\n         5.2.1.10.2 for the single shared CDR.\n\nManagement intervention may also force trigger a chargeable event.\n\n  NOTE 12: For non-IP type PDN connection, the following do not apply:\n\n         -  Addition of access to a PDN connection;\n\n         -  Start of a dedicated bearer for an IP-CAN session;\n\n         -  End of dedicated bearer in the P-GW;\n\n         -  Removal of access from a multi-access PDN connection;\n\n         -  Access of a multi-access PDN connection becomes unusable;\n\n         -  Access of a multi-access PDN connection becomes usable.\n\n\n\n\n\n"}, {"key": "Flow Based Charging (FBC)", "numbering": "5.2.1.10.2", "title_level": 4, "desc": "             5.2.1.10.2  Flow Based Charging (FBC)\n\nFor the purpose of end-user charging, FBC is supported by the P-GW by the\nintegration of a PCEF. With PCEF, charging is enhanced by the capability to\ncategorise the service data flows within IP-CAN session data traffic by\nrating group or combination of the rating group and service id. FBC\nprovides separate counts per each rating group, combination of the rating\ngroup and service id or combination of rating group, sponsor identity and\napplication service provider identity. The level of the reporting is\ndefined per PCC rule. Details of this functionality are specified in\nTS\u00a023.203 [215] and TS 32.240 [1].\n\n  NOTE 1:  Even though an individual service data flow template is bound to\n         a specific IP-CAN bearer, the assigned rating group or combination\n         of rating group and service id applies to the entire IP-CAN\n         session.\n         As a result, data traffic from multiple bearers can be included in\n         the count maintained for the rating group or combination of the\n         rating group and service id. This implies if an operator wishes to\n         be able to separate usage according to IP-CAN bearer within their\n         billing system they will need to ensure that services having\n         different QCI and ARP do not have the same:\n\n         -  rating group in cases where rating group reporting is used;\n\n         -  rating group/service id where rating group/service id reporting\n           is used;\n\n         -  rating group/sponsor identity/application service provider\n           identity where sponsored connectivity level reporting is used.\n\n  NOTE 2:  The P-GW can only include one QoS Information occurrence per\n         service data container.\n         This implies if an operator wishes to be able to separate usage\n         according to QCI and ARP within their billing system they will need\n         to ensure that services having different QCI and ARP do not have\n         the same:\n\n         -  rating group in cases where rating group reporting is used;\n\n         -  rating group/service id where rating group/service id reporting\n           is used ;\n\n         -  rating group/sponsor identity/application service provider\n           identity where sponsored connectivity level reporting is used.\n\n  NOTE 2a: The P-GW can only include one RAT type per service data\n         container.\n         This implies if an operator wishes to be able to separate usage\n         according to RAT type within their billing system they will need to\n         ensure that services having different RAT type do not have the\n         same:\n\n         -  rating group in cases where rating group reporting is used;\n\n         -  rating group/service id where rating group/service id reporting\n           is used;\n\n         -  rating group/sponsor identity/application service provider\n           identity where sponsored connectivity level reporting is used.\n\nAccording to TS 23.203 [215], FBC shall support different charging models\nper PCC rule. These charging models may be based on volume and/or time and\non number of events matching a specific service data flow template in PCC\nrule.\n\nWhen Charging per IP-CAN session is active and FBC measurements are\ncaptured in the same CDR as measurements for IP-CAN bearers, the following\nchargeable events are defined:\n\n  -  Start of the default bearer for an IP-CAN session when single access\n    is used ors tart of the first default bearer for a multi-access PDN\n    connection(i.e., when NBIFOM is accepted by PCRF). Upon encountering\n    this event, a new CDR for the IP-CAN session is created. No service\n    data flow counters are started.\n\n  NOTE 3:  The start of the default bearer or the start of the first\n         default bearer for an IP-CAN session event is a shared trigger for\n         IP-CAN bearer charging in clause 5.2.1.10.1 for the single shared\n         CDR.\n\n  -  Start of service data flow.\n    If service identifier level reporting is required by the PCC rule, and\n    no counts are present already for this combination of the rating group\n    and service id, then new counts and time stamps for this combination of\n    the rating group and service id are started. If rating group level\n    reporting is required by the PCC rule, and no counts are present\n    already for this rating group, then new counts and time stamps for this\n    rating group are started. If sponsored connectivity level reporting is\n    required by the PCC rule, and no counts are present already for this\n    combination of rating group, sponsor identity and application service\n    provider identity, then new counts and time stamps for this rating\n    group are started. The type of counters shall be according to the\n    measurement method configured for the PCC rule. When event based\n    charging applies, the first occurrence of an event matching a service\n    data flow template in PCC rule shall imply that a new count is started.\n    When new events occur, the counter shall be increased. Each event shall\n    be time stamped.\n\n  -  Access change of service data flow.\n    If service identifier level reporting is required by the PCC rule and\n    all service data flows for this combination of the rating group and\n    service id are changing from one access to another, or if rating group\n    level reporting is required by the PCC rule and all service data flows\n    for this rating group are changing from one access to another, or if\n    sponsored connectivity level reporting is required by the PCC rules and\n    all service data flows for this combination of rating group, sponsor\n    identity and application service provider identity are changing from\n    one access to another, the counters and time stamps are closed and the\n    resulting containers added to the CDR.\n\n  -  Termination of service data flow. If service identifier level\n    reporting is required by the PCC rule and this was the last active\n    service data flow for this combination of the rating group and service\n    id or if rating group level reporting is required by the PCC rule and\n    this was the last active service data flow for this rating group, or if\n    sponsored connectivity level reporting is required by the PCC rule and\n    this was the last active service data flow for this combination of\n    rating group, sponsor identity and application service provider\n    identity, the counters and time stamps are closed and the resulting\n    containers added to the CDR. For information on how the termination of\n    service data flows is detected, refer to TS\u00a023.203 [215].\n\n  -  End of IP-CAN session (i.e. end of the default bearer for a single\n    access PDN connection or end of the last  bearer for a multi-access PDN\n    connection) in the P-GW.\n    The counters and time stamps for all rating groups and all combinations\n    of rating group and service id are closed and the resulting containers\n    added to the CDR. The CDR is closed.\n\n  NOTE 4:  The end of IP-CAN session event is a shared event for IP-CAN\n         Bearer Charging in clause 5.2.1.10.1 for the single shared CDR.\n\n  -  Expiry of an operator configured time limit for keeping a CDR open.\n    This event closes all counters. The resulting containers are added to\n    the CDR and the CDR is closed.\n    A new CDR is opened if the IP-CAN session is still active.\n\n  NOTE 5:  The end of operator configured time limit for keeping a CDR open\n         event is a shared event for IP-CAN Bearer Charging in clause\n         5.2.1.10.1 for the single shared CDR.\n\n  -  Expiry of an operator configured time limit per rating group.\n    The counters and time stamps are closed and added to the CDR.\n    A new service data flow container is opened if any matching service\n    data flow is still active.\n\n  -  Expiry of an operator configured data volume limit per IP-CAN session.\n\n    This event closes the CDR and a new one is opened if the IP-CAN session\n    is still active.\n\n  NOTE 6:  The expiry of an operator configured data volume limt per IP-CAN\n         session event is a shared event for\n         IP-CAN bearer charging in clause 5.2.1.10.1 for the single shared\n         CDR.\n\n  -  Expiry of an operator configured data volume limit per rating group.\n    The counters and time stamps are closed and added to the CDR.\n    A new service data flow container is opened if any matching service\n    data flow is still active.\n\n  -  Expiry of an operator configured data event limit per IP-CAN session.\n    This event closes the CDR and a new one is opened if the IP-CAN session\n    is still active.\n\n  NOTE 7:  The expiry of an operator configured data event limit per IP-CAN\n         session event is a shared event for IP-CAN bearer charging in\n         clause 5.2.1.10.1 for the single shared CDR.\n\n  -  Expiry of an operator configured data event limit per rating group.\n    The counters and time stamps are closed and added to the CDR.\n    A new service data flow container is opened if any matching service\n    data flow is still active.\n\n  -  Change of charging condition.\n    IP-CAN bearer modification except QoS change (e.g. SGSN change, S-GW\n    change, user location change,\n    user CSG information change, change of UE presence in Presence\n    Reporting Area(s)), tariff time change or failure handling procedure\n    triggering.\n    When this event is encountered, all current configured counts and time\n    stamps are captured and new counts and time stamps for all service data\n    flows are started.\n    IP-CAN bearer modification except QoS change events are associated with\n    one access of a multi-access PDN connection and all counts associated\n    with affected access are identified with the specific event.A ll counts\n    associated with the other access of a multi-access PDN connection are\n    identified as an indirect change of charging condition.\n\n  Editor\u2019s Note: The handling of  \"Serving PLMN Rate Control change\", \"APN\n         Rate Control change\" events when charging per IP-CAN session\n         applies is FFS.\n\n  NOTE 8:  The change of charging condition event is a shared event for IP-\n         CAN bearer charging in clause 5.2.1.10.1 for the single shared CDR.\n\n\n\n  Editor\u2019s Note: whether the special case of user location reporting on\n         dedicated bearer release triggers a change of charging condition\n         for the IP-CAN session is ffs.\n\n  -  Intersystem change (e.g. change of radio interface from GSM to UMTS,\n    RAT change) for any connected access visible in the P-GW.\n    This event closes the CDR, and a new one is opened if the IP-CAN\n    session is still active.\n\n  NOTE 9:  The intersystem change event is a shared event for IP-CAN bearer\n         charging in clause 5.2.1.10.1 for the single shared CDR.\n\n  -  PLMN change visible in the P-GW.\n    This event closes the CDR. A new one is opened if the IP-CAN session is\n    still active.\n\n  NOTE 10: The PLMN change event is a shared event for IP-CAN bearer\n         charging in clause 5.2.1.10.1 for the single shared CDR.\n\n  -  MS Timezone change visible in the P-GW.\n    This event closes the CDR. A new one is opened if the IP-CAN session is\n    still active.\n\n  NOTE 11: The MS Timezone change event is a shared event for IP-CAN bearer\n         charging in clause 5.2.1.10.1 for the single shared CDR.\n\n  -  Expiry of an operator configured limit of charging condition changes\n    per IP-CAN session.\n    This event closes the CDR, and a new one is opened if the IP-CAN\n    session is still active.\n\n  NOTE 12: The expiry of an operator configured limit of charging condition\n         changes per IP-CAN session event is a shared event for IP-CAN\n         bearer charging in clause 5.2.1.10.1 for the single shared CDR.\n\n  -  Completion of a time envelope as defined in TS 32.299 [50].\n    This event closes a service data flow container. Further details are\n    described in clause 5.2.3.10.1 \"Triggers for PGW-CDR charging\n    information addition'\".\n    The need for reporting time envelopes may be statically configured for\n    each rating group or dynamically controlled by online charging.\n\nManagement intervention may also force trigger a chargeable event.\n\nRelevant service data flows for an IP-CAN session are determined when FBC\nis applied. PCC rules are used for this determination. One PCC rule\nidentifies service data flow to be measured but it can also include certain\ncharacteristics related to that service data flow.\n\nPCC rules can be activated, deactivated and modified any time during the IP-\nCAN session lifetime.\nIP-CAN bearer deactivation also leads to deactivation of all PCC rules\nassociated with that bearer.\nPCC rule activation, deactivation and modification are not chargeable\nevents.\nHowever these PCC rule changes may lead to \"start of service data flow'\"and\n\"termination of service data flow'\" chargeable events.\n\nAccording to TS 23.203 [215], the PCRF can modify the following charging\ninformation in a dynamic PCC rule which is active in the PCEF: Charging\nkey, Service identifier, Sponsor Identifier, Application Service Provider\nIdentifier, IP-CAN types, Measurement method and reporting level. The PCRF\ncan also modify the allowed access type in the case of NBIFOM.\nA change of allowed access type in the case of NBIFOM will trigger an\n\"access change for service data flow\" chargeable event when all service\ndata flows for the associated counter are changed from one access to\nanother and takes priority over change of charging information.\nA change of any of this charging information will trigger a \"start of\nservice data flow'\" chargeable event when a valid counter does not exist\ncorresponding to that changed PCC rule.\nA change of any of this charging information will trigger a \"termination of\nservice data flow'\" chargeable event when this was the last active service\ndata flow for the counter corresponding to the original PCC rule.\n\nRemoval of an access from a PDN connection is not a trigger for FBC.\nSubsequent PCC rule handling, may lead to the \"access change for a service\ndata flow\" or \"termination of service data flow\" events for the service\ndata flows that were active on the removed access.\n\nExtended packet inspection can be done in the PCEF with pre-defined PCC\nrules.\nThe PCEF also have the possibility to output service specific information\nrelated to the packet inspection in the CDR.\n\nThe capability of P-GW to support ABC is achieved with PCRF providing\nappropriate PCC rules to the P-GW. Such PCC Rule shall be defined with\nservice data flow template including an Application Identifier for the\napplication which needs to be detected, enforced and charged.\n\nFor non-IP type PDN connection:\n\n  -  non-3GPP access types are not supported;\n\n  -  multi-access PDN connections do not apply;\n\n  -  A single PCC Rule is used with the service data flow descriptor\n    matching the whole non-IP data traffic, and can contain e.g.:\n\n    -  service data flow template matching all the packets;\n\n    -  charging method to identify whether online/offline/both/neither\n       charging interface is used;\n\n    -  measurement method for offline charging to identify whether\n       time/data volume/events are measured for this service data flow;\n\n    -  Charging key (i.e. rating group) for that service data flow;\n\n    -  service identifier for that service data flow;\n\n    -  reporting level for that service data flow:\n\n       -  rating group level in case a specific rating group is used for non-\n         IP traffic charging;\n\n       -  combination of the rating group and service id in case a specific\n         rating group/service Id is used for non-IP traffic charging.\n\n\n"}, {"key": "Data Volume Reporting for Secondary RAT usage", "numbering": "5.2.1.11", "title_level": 3, "desc": "5.2.1.11 Data Volume Reporting for Secondary RAT usage\n\n\n"}, {"key": "General", "numbering": "5.2.1.11.1", "title_level": 4, "desc": "5.2.1.11.1  General\n\nVolume reporting for Secondary RAT is an optional capability in the S-GW\nand P-GW that provides accounting functionality when a Secondary RAT is\nused in conjunction with E-UTRAN. This is valid for both HPLMN and VPLMN.\n\nTo align with existing per IP-CAN bearer accounting procedures, the\nfollowing principles are used:\n\n   - The reporting of Secondary RAT Data Volume is controlled by the E-\n    UTRAN.\n\n   - The uplink and downlink data volumes for the Secondary RAT are\n    reported (from E-UTRAN to EPC) on a per EPS bearer basis. The report\n    contains Secondary RAT (e.g. NR) resources used for transport of user\n    data and indicated separately for uplink and downlink per EPS bearer\n    and per time interval. The time interval used for the measurements\n    reported (from RAN) may be partitioned to indicate usage that occurred\n    before respectively after an absolute time (that occurs while\n    measurement for secondary RAT usage report is ongoing). For example,\n    the RAN is configured to partition reports in usage, that occurred\n    before respectively after midnight.\n\n   - The reporting (performed by E-UTRAN) in association with UE-related\n    control signaling and via standalone reporting is internally triggered\n    by E-UTRAN.\n\n\n\n"}, {"key": "Rf message flows", "numbering": "5.2.2", "title_level": 2, "desc": "         5.2.2  Rf message flows\n\n\n"}, {"key": "General", "numbering": "5.2.2.0", "title_level": 3, "desc": "5.2.2.0  General\n\nWhen the CDF is implemented as a separate entity, the offline charging\nfunctionality is based on the PCN nodes (MME, S-GW, ePDG, TWAG, P-GW and\nTDF) reporting charging information for chargeable events. This reporting\nis achieved by sending Charging Data Request [start, interim, stop and\nevent] from the PCN network elements to the CDF.\n\nThe PCNs shall use the Charging Characteristics profiles to determine\nwhether Charging events (Charging Data Request[start, interim, stop and\nevent]) reporting has to be activated or not.\n\nThe trigger conditions for the chargeable events described in 5.2.3.5 for\nthe MME, 5.2.3.3 for the S-GW, 5.2.3.8 for the ePDG, 5.2.3.11 for the TWAG,\n5.2.3.9 for the TDF and in 5.2.3.4 for the P-GW are also applicable, and\ncharging events are reported to the external CDF when these trigger\nconditions are met.\n\nThe following clauses provide the charging events reporting description for\nMME, S-GW, ePDG, TWAG, P-GW and TDF.\n\n\n"}, {"key": "Triggers for charging events from S-GW", "numbering": "5.2.2.1", "title_level": 3, "desc": "5.2.2.1  Triggers for charging events from S-GW\n\nWhen a Charging Event is reported to the CDF, it includes details such as\nSubscription id (e.g. IMSI..), Charging-id, SGW address etc. and also a\ncontainer identifying, for the IP-CAN bearer, the volume count (separated\nfor uplink and downlink traffic), with charging condition change\ninformation.\n\n  As stated above, the same trigger conditions described in 5.2.3.3 are\n    applicable for charging information addition and Charging Data Request\n    closure.\n\n  Charging Data Request[Start] is sent at IP-CAN bearer activation.\n\n  For an Charging Data Request[Interim] to be sent with only one container\n    reported, the Partial Record Reason \"Maximum number of charging\n    condition changes\" should be set to value 1.\n\n\n"}, {"key": "Triggers for charging events from P-GW", "numbering": "5.2.2.2", "title_level": 3, "desc": "5.2.2.2  Triggers for charging events from P-GW\n\nWhen a Charging Event is reported to the CDF, it includes details such as\nSubscription id (e.g. IMSI), Charging-id, SGW address, ePDG address, TWAG\naddress, FBC specific charging data etc.,and also a container identifying\nper rating group or combination of the rating group and service id within\nthe same IP-CAN bearer; the volume counts (separated for uplink and\ndownlink traffic), elapsed time and/or number of events, with associated\ncharging condition change information.\n\n  As stated above, the same trigger conditions described in clause 5.2.3.4\n    are applicable for charging information addition and Charging Data\n    Request closure.\n\n  Charging Data Request[Start] is sent at IP-CAN bearer activation.\n\n  For an Charging Data Request[Interim] to be sent with only one container\n    reported, the Partial Record Reason \"Maximum number of charging\n    condition changes\" should be set to value 1.\n\n  Editor's Note : tight interworking with online charging and DCCA failure\n         handling is FFS.\n\n\n"}, {"key": "Triggers for charging events from ePDG", "numbering": "5.2.2.3", "title_level": 3, "desc": "5.2.2.3  Triggers for charging events from ePDG\n\nWhen a Charging Event is reported to the CDF, it includes details such as\nSubscription id (e.g. IMSI), Charging-id, ePDG address etc. and also a\ncontainer identifying for the IP-CAN bearer, the volume count (separated\nfor uplink and downlink traffic), with charging condition change\ninformation.\n\n  As stated above, the same trigger conditions described in clause 5.2.3.8\n    are applicable for charging information addition and Charging Data\n    Request closure.\n\n  Charging Data Request[Start] is sent at IP-CAN bearer activation.\n\n  For an Charging Data Request[Interim] to be sent with only one container\n    reported, the Partial Record Reason \"Maximum number of charging\n    condition changes\" should be set to value 1.\n\n\n"}, {"key": "Triggers for charging events from MME", "numbering": "5.2.2.4", "title_level": 3, "desc": "5.2.2.4  Triggers for charging events from MME\n\nEach Short Message transferred through the MME to/from the SMSC, triggers a\nCharging Event towards the CDF:\n\n  -  Short Message received by a UE via the MME (MT direction) from the\n    SMSC;\n\n  -  Short Message sent by a UE via the MME (MO direction) to the SMSC.\n\nThis Charging event reporting is achieved by the MME in Event mode, by\nsending Charging Data Request[event] to the CDF, on successful or\nunsuccessful Short Message transfert transaction with UE.\n\n\n"}, {"key": "Triggers for charging events from TDF", "numbering": "5.2.2.5", "title_level": 3, "desc": "5.2.2.5  Triggers for charging events from TDF\n\nWhen a Charging Event is reported to the CDF, it includes details such as\nSubscription id (e.g. IMSI.), Charging-id, SGW address, ePDG address, TWAG\naddress, ABC specific charging data etc., and also a container identifying\nper rating group or combination of the rating group and service id within\nthe same TDF session; the volume counts (separated for uplink and downlink\ntraffic), elapsed time and/or number of events, with associated charging\ncondition change information TDF session charging is achieved by ABC\noffline charging with vendor specific rating group or a combination of\nvendor specific rating group and service id within the same TDF session,\nsee clause 5.2.1.9..\n\nAs stated above, the same trigger conditions described in 5.2.3.9 are\napplicable for charging information addition and Charging Data Request\nclosure.\n\nCharging Data Request Start] is sent at TDF session activation.\n\nFor an Charging Data Request[Interim] to be sent with only one container\nreported, the Partial Record Reason \"Maximum number of charging condition\nchanges\" should be set to value 1.\n\n\n"}, {"key": "Triggers for charging events from P-GW when charging per IP-CAN", "numbering": "5.2.2.6", "title_level": 3, "desc": "5.2.2.6  Triggers for charging events from P-GW when charging per IP-CAN\n           session is active\n\nWhen a Charging Event is reported to the CDF and charging per IP-CAN\nsession is active, it includes details such as Subscription id (e.g. IMSI),\nCharging-id, SGW address, ePDG address, TWAG address, FBC specific charging\ndata etc.,and contains either one or both of the following different types\nof containers:\n\n  -  traffic volumes, used for IP-CAN bearer charging, identifying per\n    QCI/ARP combination, the volume counts (separated for uplink and\n    downlink traffic) with associated charging condition change information\n\n  -  service data, used for FBC, identifying per rating group or\n    combination of the rating group and service id within the IP-CAN\n    session, the volume counts (separated for uplink and downlink traffic),\n    elapsed time and/or number of events, with associated charging\n    condition change information.\n\nThe trigger conditions described in clause 5.2.3.10 are applicable for\ncharging information addition and Charging Data Request closure.\n\nCharging Data Request[Start]  is sent at IP-CAN session activation.\n\nFor an Charging Data Request[Interim] to be sent with only one container\nreported, the Partial Record Reason \"Maximum number of charging condition\nchanges\" should be set to value 1.\n\n\n"}, {"key": "Triggers for charging events from TWAG", "numbering": "5.2.2.7", "title_level": 3, "desc": "5.2.2.7  Triggers for charging events from TWAG\n\nWhen a Charging Event is reported to the CDF, it includes details such as\nSubscription id (e.g. IMSI), Charging-id, TWAG address etc. and also a\ncontainer identifying for the IP-CAN bearer, the volume count (separated\nfor uplink and downlink traffic), with charging condition change\ninformation.\n\n  As stated above, the same trigger conditions described in clause 5.2.3.11\n    are applicable for charging information addition and Charging Data\n    Request closure.\n\n  Charging Data Request [Start] is sent at IP-CAN bearer activation.\n\n  For an Charging Data Request [Interim] to be sent with only one container\n    reported, the Partial Record Reason \"Maximum number of charging\n    condition changes\" should be set to value 1.\n\n\n\n\n\n"}, {"key": "CDR generation", "numbering": "5.2.3", "title_level": 2, "desc": "         5.2.3  CDR generation\n\n\n"}, {"key": "Introduction", "numbering": "5.2.3.0", "title_level": 3, "desc": "5.2.3.0  Introduction\n\nThe S-CDR, M-CDR, S-SMO-CDR, S-SMT-CDR, LCS-MO-CDR, LCS-MT-CDR, LCS-NI-CDR\nand S-MB-CDR are generated by the SGSN, the S-SMO-CDR, S-SMT-CDR by the\nMME,the SGW-CDR by the S-GW, the ePDG-CDR by the ePDG, the TWAG-CDR by the\nTWAG, the PGW-CDR and G-MB-CDR by the P-GW, the TDF-CDR by the TDF to\ncollect charging information that they subsequently transfer to the\nCharging Gateway Function (CGF).\n\nThe PCNs shall use the Charging Characteristics to determine whether to\nactivate or deactivate CDR generation.\nThe Charging Characteristics are also used to set the coherent chargeable\nevent conditions (e.g. time/volume limits that trigger CDR generation or\ninformation addition). Multiple Charging Characteristics \"profiles\" may be\nconfigured on the PCNs to allow different sets of trigger values. Further\ndetails of this functionality, including the mechanism of conveying the\nCharging Characteristics data item (HLR -> SGSN -> P-GW, HSS -> MME/ S4-\nSGSN -> S-GW -> P-GW, AAA -> ePDG -> P-GW, or AAA -> TWAG -> PGW), are\nspecified and then in case of TDF, P-GW -> PCRF -> TDF in annex A.\nCharging Characteristics are not applicable to MBMS CDR generation.\n\nIf CDR generation is activated, it shall be possible to define separate\ntrigger conditions values per Charging Characteristics profile for the\nfollowing triggers:\n\n  -  data volume limit;\n\n  -  time (duration limit);\n\n  -  maximum number of charging conditions changes (QoS change, Tariff Time\n    change).\n\nThe following clauses describe the trigger conditions for the chargeable\nevents described in clause 5.2.1.1 \u2013 5.2.1.6A.\nIn EPC offline charging, these chargeable events correspond to the triggers\nfor collection of charging information and CDR generation by the SGSN/\nMME/S-GW/ePDG/ TWAG/P-GW/TDF.\n\n\n\n"}, {"key": "Triggers for S-CDR charging information collection", "numbering": "5.2.3.1", "title_level": 3, "desc": "           5.2.3.1  Triggers for S-CDR charging information collection\n\n\n"}, {"key": "General", "numbering": "5.2.3.1.0", "title_level": 4, "desc": "5.2.3.1.0   General\n\nAn S-CDR is used to collect charging information related to the IP-CAN\nbearer data information for a MS/UE in the SGSN.\n\nIf according to the Charging Characteristics, CDR generation is activated\nan S-CDR shall be opened at IP-CAN bearer activation, and the volume for\nthe context is counted separately in uplink and downlink direction. When a\nchange of charging condition occurs, the volume count is added to the S-CDR\nand a new count is started. The S-CDR includes details such as Record Type,\nServed IMSI, Sequence Number etc. Not all of the charging information to be\ncollected is static, and other charging information is directly depending\non dynamic Packet-Switched service usage.\n\nThe subsequent clauses identify in detail the conditions for adding\ninformation to, and closing the S-CDR for generation towards the CGF.\n\n\n"}, {"key": "Triggers for S-CDR charging information addition", "numbering": "5.2.3.1.1", "title_level": 4, "desc": "5.2.3.1.1   Triggers for S-CDR charging information addition\n\nThe \"List of Traffic Volumes\" attribute of the S-CDR consists of a set of\ncontainers, which are added when specific trigger conditions are met, and\nidentify the volume count per IP-CAN bearer, separated for uplink and\ndownlink traffic, on encountering that trigger condition. Table 5.2.3.1.1.1\nidentifies which conditions are supported to trigger S-CDR charging\ninformation addition.\n\n     Table 5.2.3.1.1.1: Triggers for S-CDR charging information addition\n\n|Trigger       |Description/Behaviour                                      |\n|Conditions    |                                                           |\n|QoS Change    |A change in the QoS shall result in a \"List of Traffic Data|\n|              |Volumes\" container being added to the CDR.                 |\n|Tariff Time   |On reaching the Tariff Time Change a \"List of Traffic Data |\n|Change        |Volumes\" container shall be added to the CDR.              |\n|User CSG      |A change in user CSG information shall result in a \"List of|\n|Information   |Traffic Data Volumes\" container being added to the CDR, if |\n|change        |CSG information reporting is required, and a report of User|\n|              |CSG information change is received.                        |\n|Direct Tunnel |When the SGSN establishes or removes a Direct Tunnel a     |\n|establishment/|\"List of Traffic Data Volumes \" container shall be added to|\n|removal       |the CDR. See NOTE.                                         |\n|CDR Closure   |A list of \"List of Traffic Data Volumes\" container shall be|\n|              |added to the S-CDR.                                        |\n|NOTE: When a direct tunnel is established, the SGSN will no longer be able |\n|to count data volumes associated with the IP-CAN bearer for which the      |\n|direct tunnel is established                                               |\n\n\nThe first volume container of a IP-CAN bearer identifies the\nuplink/downlink volume since the IP-CAN bearer was opened. Subsequent\nvolume containers store the volume count accrued since the closure of the\nlast container.\n\n\n\n"}, {"key": "Triggers for S-CDR closure", "numbering": "5.2.3.1.2", "title_level": 4, "desc": "             5.2.3.1.2   Triggers for S-CDR closure\n\nThe S-CDR shall be closed on encountering some trigger conditions.\nTable 5.2.3.1.2.1 identifies which conditions are supported to permit\nclosure of the S-CDR.\n\n                Table 5.2.3.1.2.1: Triggers for S-CDR closure\n\n|Closure        |Description/Behaviour                                      |\n|Conditions     |                                                           |\n|End of IP-CAN  |Deactivation of the IP-CAN bearer in the SGSN shall result |\n|bearer within  |in the CDR being closed.                                   |\n|the SGSN       |The trigger condition covers:                              |\n|               |- termination of IP-CAN bearer;                            |\n|               |- SGSN change (inter-SGSN routing area update including    |\n|               |intersystem change);                                       |\n|               |- any abnormal release.                                    |\n|Partial Record |OAM&P reasons permit the closure of the CDR for internal   |\n|Reason         |reasons.                                                   |\n|               |The trigger condition covers:                              |\n|               |- data volume limit;                                       |\n|               |- time (duration) limit;                                   |\n|               |- maximum number of charging condition changes (QoS/tariff |\n|               |time change);                                              |\n|               |- management intervention;                                 |\n|               |- Intra-SGSN intersystem change (change of radio interface |\n|               |from GSM to UMTS\u00a0or vice versa).                           |\n\n\nThe Partial Record generation trigger thresholds are those associated with\nthe Charging Characteristics.\nThe Partial Record generation trigger thresholds are GSN configuration\nparameters defined per Charging Characteristics profile by the operator\nthrough OAM&P means, as specified in annex A.\n\nIn the event that the S-CDR is closed and the IP-CAN bearer remains active,\na further S-CDR shall be opened with an incremented Sequence Number in the\nSGSN.\n\n\n\n"}, {"key": "Triggers for M-CDR charging information collection", "numbering": "5.2.3.2", "title_level": 3, "desc": "           5.2.3.2  Triggers for M-CDR charging information collection\n\n\n"}, {"key": "General", "numbering": "5.2.3.2.0", "title_level": 4, "desc": "5.2.3.2.0   General\n\nAn M-CDR is used to collect charging information related to the mobility\nmanagement of a mobile in the SGSN.\n\nAn M-CDR shall be opened for each mobile upon GPRS Attach, indicating the\ncurrent location information for that MS/UE. When a location change occurs\nfor the attached MS/UE, the new location information is added to the M-CDR.\nThe M-CDR records details such as Record Type, Served IMSI, Sequence Number\netc.\nNot all of the charging information to be collected is static, and other\ncharging information is directly dependent on the mobility of the MS as\nprovided by the Radio Access Network (RAN). Subsequent partial records may\nbe opened if the M-CDR is closed and the MS is still attached to the\nnetwork.\n\nThe subsequent clauses identify in detail the conditions for adding\ninformation to, and closing of the M-CDR for generation towards the CGF.\n\n\n"}, {"key": "Triggers for M-CDR charging information addition", "numbering": "5.2.3.2.1", "title_level": 4, "desc": "5.2.3.2.1   Triggers for M-CDR charging information addition\n\nThe \"Change of Location\" attribute of the M-CDR consists of a set of\ncontainers, which are added when specific trigger conditions are met, and\nidentify the time stamped routing area on encountering that trigger\ncondition.\nTable 5.2.3.2.1.1 identifies which conditions are supported to trigger M-\nCDR charging information addition.\n\n     Table 5.2.3.2.1.1: Triggers for M-CDR charging information addition\n\n|Trigger     |Description/Behaviour                      |\n|Conditions  |                                           |\n|Mobility    |The first \"Change of Location\" container   |\n|Change      |shall be captured                          |\n|            |when the MM context is created.            |\n|            |Subsequent changes in the Routing Area     |\n|            |shall result in a                          |\n|            |\"Change of Location\" container being added |\n|            |to the M-CDR.                              |\n\n\n\n"}, {"key": "Triggers for M-CDR closure", "numbering": "5.2.3.2.2", "title_level": 4, "desc": "5.2.3.2.2   Triggers for M-CDR closure\n\nThe M-CDR shall be closed on encountering some trigger conditions.\nTable 5.2.3.2.2.1 identifies which conditions are supported to permit\nclosures of the M-CDR.\n\n                Table 5.2.3.2.2.1: Triggers for M-CDR closure\n\n|Closure Conditions  |Description/Behaviour                             |\n|End of MM Context   |Deactivation of the MM context in the SGSN shall  |\n|within SGSN         |result in the CDR being closed.                   |\n|                    |The trigger condition covers:                     |\n|                    |- SGSN change (inter-SGSN routing area update     |\n|                    |including intersystem change);                    |\n|                    |- GPRS detach;                                    |\n|                    |- any abnormal release.                           |\n|Partial Record      |OAM&P reasons permit the closure of the CDR for   |\n|Reason              |internal reasons.                                 |\n|                    |The trigger condition covers:                     |\n|                    |- time (duration) limit;                          |\n|                    |- maximum number of mobility changes; and         |\n|                    |- Management intervention;                        |\n|                    |- Intra-SGSN intersystem change (change of radio  |\n|                    |interface                                         |\n|                    |from GSM to UMTS\u00a0or vice versa).                  |\n\n\nThe Partial Record generation trigger thresholds are those associated with\nthe Charging Characteristics.\nThe Partial Record generation trigger thresholds are SGSN configuration\nparameters defined per Charging Characteristics profile by the operator\nthrough OAM&P means, as specified in annex A.\n\nIn the event that the M-CDR is closed and the mobile is still known to the\nSGSN, a further M-CDR shall be opened with an incremented Sequence Number\nin the SGSN.\n\n\n\n"}, {"key": "Triggers for SGW-CDR charging information collection", "numbering": "5.2.3.3", "title_level": 3, "desc": "           5.2.3.3  Triggers for SGW-CDR charging information collection\n\n\n"}, {"key": "Introduction", "numbering": "5.2.3.3.0", "title_level": 4, "desc": "5.2.3.3.0   Introduction\n\nA SGW-CDR is used to collect charging information related to the IP-CAN\nbearer data information for a UE/MS in\nthe S-GW.\n\nSGW-CDR separates collected charging information per QCI/ARP pair. SGW-CDR\ncan include:\n\n  - IP-CAN bearer specific container reporting the usage and authorized\n    QCI/ARP for IP-CAN bearer.\n\nEach SGW-CDR includes at least IP-CAN bearer specific container(s).\n\nIf, according to the Charging Characteristics, CDR generation is activated\na SGW-CDR shall be opened at IP-CAN bearer activation and IP-CAN bearer\nspecific container is opened..\n\nWhen a change of charging condition occurs, the volume counts are added to\nthe SGW-CDR and new counts are started. The SGW-CDR includes details such\nas Record Type, Served IMSI, Sequence Number etc.\nNot all of the charging information to be collected is static, and other\ncharging information is directly dependent on dynamic Packet-Switched\nservice usage.\n\nThe subsequent clauses identify in detail the conditions for adding\ninformation to, and closing the SGW-CDR for generation towards the CGF.\n\n\n"}, {"key": "Triggers for SGW-CDR charging information addition", "numbering": "5.2.3.3.1", "title_level": 4, "desc": "5.2.3.3.1   Triggers for SGW-CDR charging information addition\n\nThe \"List of Traffic Data Volumes\" attribute of the SGW-CDR consists of a\nset of containers, which are added when specific trigger conditions are\nmet, and identify the volume count per QCI/ARP pair, separated for uplink\nand downlink traffic, on encountering that trigger condition.\nTable 5.2.3.3.1.1 identifies which conditions are supported to trigger SGW-\nCDR charging information addition.\n\n    Table 5.2.3.3.1.1: Triggers for SGW-CDR charging information addition\n\n|Trigger        |Description/Behaviour                                      |\n|Conditions     |                                                           |\n|QoS Change     |A change in the QoS shall result that open \"List of Traffic|\n|               |Data Volumes\" containers being closed and added to the CDR |\n|               |and new IP-CAN bearer specific container is opened.        |\n|Tariff Time    |On reaching the Tariff Time Change open \"List of Traffic   |\n|Change         |Data Volumes\" containers shall be closed and added to the  |\n|               |CDR.                                                       |\n|User Location  |A change in the User Location Info (e.g. ECGI, TAI, RAI,   |\n|Change         |SAI or CGI) shall result that open \"List of Traffic Data   |\n|               |Volumes\" containers being closed and added to the CDR, if  |\n|               |location reporting is required, and a report of User       |\n|               |Location Change is received.                               |\n|User CSG       |A change in the User CSG info (e.g. CSG ID, access mode or |\n|Information    |CSG membership indication) shall result that open \"List of |\n|change         |Traffic Data Volumes\" containers being closed and added to |\n|               |the CDR, if CSG information reporting is required, and a   |\n|               |report of User CSG information change is received.         |\n|Change of UE   |A change of UE presence in Presence Reporting Area(s) shall|\n|presence in    |result that open \"List of Traffic Data Volumes\" containers |\n|Presence       |being closed and added to the CDR, if such reporting is    |\n|Reporting Area |required, and a report that user enters/leaves the area or |\n|               |the Presence Reporting Area(s) is set to inactive by the   |\n|               |serving node , are received.                               |\n|Change in UP to|A change in the User Plane to UE (i.e. switch between S11-U|\n|UE             |and S1-U) shall result that open \"List of Traffic Data     |\n|               |Volumes\" containers being closed and added to the CDR and  |\n|               |new IP-CAN bearer specific container is opened.            |\n|Serving PLMN   |A change in the Serving PLMN Rate Control shall result that|\n|Rate Control   |open \"List of Traffic Data Volumes\" containers being closed|\n|Change         |and added to the CDR and new IP-CAN bearer specific        |\n|               |container is opened.                                       |\n|CDR Closure    |Open \"List of Traffic Data Volumes\" containers shall be    |\n|               |closed and added to the SGW-CDR.                           |\n\n\nVolume container identifies the uplink/downlink volume since the closure of\nthe last container.\nThe \"Serving Node Address\" attribute of the SGW-CDR consists of a list of\nserving node (e.g. S4-SGSN/MME) addresses. New serving node address is\nadded to the list when e.g. S4-SGSN/MME changes.\n\nWhen Charging Event (ACR) is triggered by table 5.2.3.3.1.1 conditions, the\nChange-Condition sub-field associated to the added volume container,\nindicating the appropriate condition shall be present, excluding CDR\nClosure case.\nWhen Charging Event (ACR) is triggered by CDR Closure condition, this\nChange-Condition sub-field associated to the added volume container shall\nbe omitted, except when CDR closure is due to \"maximum number of charging\ncondition changes\", where it shall be present with the original condition\nchange.\n\nWhen Charging Event (ACR) is triggered by \"User CSG Information change\" as\na Change condition, the following shall apply for the added volume\ncontainer:\n\n  -  When User enters in a CSG cell or a hybrid cell: the CSG ID, access\n    mode and CSG membership indication (when hybrid), shall be provided\n    together with this \"User CSG Information change\" Change-Condition.\n\n  -  User leaves a CSG cell or a hybrid cell: this \"User CSG Information\n    change\" Change-Condition shall be provided without any CSG ID, access\n    mode and CSG membership indication, unless the user is entering a new\n    CSG cell or hybrid cell.\n\n\n\n"}, {"key": "Triggers for SGW-CDR closure", "numbering": "5.2.3.3.2", "title_level": 4, "desc": "             5.2.3.3.2   Triggers for SGW-CDR closure\n\nThe SGW-CDR shall be closed on encountering some trigger conditions.\nTable 5.2.3.3.2.1 identifies which conditions are supported to permit\nclosure of the SGW-CDR.\n\n               Table 5.2.3.3.2.1: Triggers for SGW-CDR closure\n\n|Closure Conditions |Description/Behaviour                                  |\n|End of IP-CAN      |Deactivation of the IP-CAN bearer in the S-GW shall    |\n|bearer within the  |result in the CDR being closed.  The trigger condition |\n|S-GW               |covers:                                                |\n|                   |- termination of IP-CAN bearer;                        |\n|                   |- inter serving node change;                           |\n|                   |- any abnormal release.                                |\n|Partial Record     |OAM&P reasons permit the closure of the CDR for        |\n|Reason             |internal reasons.                                      |\n|                   |The trigger condition covers:                          |\n|                   |- data volume limit;                                   |\n|                   |- time (duration) limit;                               |\n|                   |- maximum number of charging condition changes         |\n|                   |(QoS/tariff time change);                              |\n|                   |- management intervention;                             |\n|                   |- MS time zone change;                                 |\n|                   |- PLMN change;                                         |\n|                   |- radio access technology change (RAT Type).           |\n|                   |- MO exception data counter receipt.                   |\n\n\n\nThe Partial Record generation trigger thresholds are those associated with\nthe Charging Characteristics.\nThe Partial Record generation trigger thresholds are S-GW configuration\nparameters defined per Charging Characteristics profile by the operator\nthrough OAM&P means, as specified in annex A.\n\nIn the event that the SGW-CDR is closed and the IP-CAN bearer remains\nactive, a further SGW-CDR is opened with an incremented Sequence Number in\nthe S-GW.\n\nWhen Charging Event (ACR) is triggered by table 5.2.3.3.2.1conditions, the\nChange-Condition (at PS information level) associated to the CDR Closure,\nindicating the appropriate condition shall be present, and it shall be\nomitted otherwise.\n\n\n\n"}, {"key": "Triggers for PGW-CDR charging information collection", "numbering": "5.2.3.4", "title_level": 3, "desc": "           5.2.3.4  Triggers for PGW-CDR charging information collection\n\n\n"}, {"key": "Introduction", "numbering": "5.2.3.4.0", "title_level": 4, "desc": "5.2.3.4.0   Introduction\n\nAn PGW-CDR is used to collect charging information related to the IP-CAN\nbearer data information for a UE/MS in the P-GW, where the data volumes,\nelapsed time or number of events within each PGW-CDR are separately counted\nper rating group or per combination of the rating group and service id. In\ncase of P-GW is not aware of IP-CAN bearers, i.e. in case of PMIP based\nconnectivity, P-GW collects charging information per IP-CAN session as it\nwould be one IP-CAN bearer.\n\nMany service data flow containers per IP-CAN bearer can be active\nsimultaneously in PGW-CDR. A service data flow container is activated when\ntraffic is detected and no matching active service data flow container\nexist; a service data flow container is closed when the termination of the\nlast service data flow matching to the service data flow container is\ndetected by the P-GW. When event based charging applies, the first\noccurrence of an event matching a service data flow template shall imply\nservice data flow start. Details on FBC can be found in TS 23.203 [215] and\nTS 32.240 [1].\n\nIf, according to the Charging Characteristics profile, CDR generation is\nactivated an PGW-CDR shall be opened at\nIP-CAN bearer activation, and the volume (separately in uplink and downlink\ndirection), elapsed time and/or number of events are counted. When a change\nof charging condition occurs, all containers are added to the PGW-CDR.\nThe PGW-CDR includes details such as Record Type, Served IMSI, Sequence\nNumber etc. and the FBC specific charging data. Not all of the charging\ninformation to be collected is static, and other charging information is\ndirectly dependent on dynamic Packet-Switched service usage.\n\nIt shall be possible to activate both online and offline charging\ninterfaces for the same IP-CAN bearer.\nThe default online and offline charging shall work independently of each\nother. Optionally it may be possible to operate in a tight interworking\nbetween online and offline charging mechanism i.e. only the specified quota\nre-authorisation triggers armed by OCS (including e.g. tariff time change,\nreturned quotas, etc.) are used to close the service data flow containers\nfor the PGW-CDR charging information addition.\n\nThe subsequent clauses identify in detail the conditions for adding\ninformation to, and closing the PGW-CDR for generation towards the CGF.\n\n"}, {"key": "Triggers for PGW-CDR charging information addition", "numbering": "5.2.3.4.1", "title_level": 4, "desc": "             5.2.3.4.1   Triggers for PGW-CDR charging information addition\n\nIP-CAN bearer specific offline charging is achieved with IP-CAN bearer\nspecific rating group/service identifier defined in clause 5.3.1.1.\n\nThe \"List of Service Data\" attribute of the PGW-CDR consists of a set of\ncontainers, which are added when specific trigger conditions are met. Each\ncontainer identifies the configured counts (volume separated for uplink and\ndownlink, elapsed time or number of events) per rating group or combination\nof the rating group and service id within the same\nIP-CAN bearer, on encountering that trigger condition. For envelope\nreporting, the containers represent complete and closed time envelopes\ndetermined by mechanisms defined in TS 32.299 [50].\n Table 5.2.3.4.1.1 identifies conditions that may be supported as recording\ntriggers under consideration of additional Debit / Reserve Units triggers.\n\nSome of the triggers are non-exclusive (e.g. IP-CAN bearer modification\nwith a couple of reasons, IP-CAN bearer modification reasons that cause PGW-\nCDR closure).\n\n Table 5.2.3.4.1.1: Triggers for PGW-CDR charging information addition \"List\n                              of Service Data\"\n\n|Trigger        |Description/Behaviour                                      |\n|Conditions     |                                                           |\n|IP-CAN bearer  |A change of IP-CAN bearer conditions (e.g. QoS change,     |\n|modification   |SGSN/S-GW/ePDG/TWAG change, user location change, user CSG |\n|               |information change, change of UE presence in a Presence    |\n|               |Reporting Area(s), Serving PLMN Rate Control, APN Rate     |\n|               |Control, change of 3GPP PS Data off Status) shall result in|\n|               |a set of \"List of Service Data\" containers, i.e. all active|\n|               |service data flow containers, being added to the CDR as    |\n|               |described in clause 5.2.1.3.                               |\n|               |In a tight interworking between online and offline charging|\n|               |the specified quota re-authorisation triggers armed by OCS |\n|               |are supported.                                             |\n|Tariff Time    |On reaching the Tariff Time Change a set of \"List of       |\n|Change         |Service Data\" containers, i.e. all active service data flow|\n|               |containers, shall be added to the CDR.                     |\n|               |In a tight interworking between online and offline charging|\n|               |the Debit / Reserve Units tariff time change from OCS is   |\n|               |supported.                                                 |\n|Failure        |When the Credit Control Failure Handling mechanism is      |\n|Handling       |triggered a \"List of Service Data'\u201d, i.e. all active       |\n|procedure      |service data flow containers shall be added to the CDR.    |\n|triggering     |The causes are only relevant in case of simultaneously     |\n|               |usage of an active Debit / Reserve Units session.          |\n|Service data   |In case of independent online and offline charging a \"List |\n|flow report    |of Service Data\" container for the service data flow shall |\n|               |be added when:                                             |\n|               |- expiry of time limit;                                    |\n|               |- expiry of volume limit;                                  |\n|               |- expiry of unit limit;                                    |\n|               |- termination of service data flow.                        |\n|               |In case of tight interworking online and offline charging a|\n|               |\"List of Service Data\" container for the service data flow |\n|               |shall be added when:                                       |\n|               |- time threshold reached;                                  |\n|               |- volume threshold reached;                                |\n|               |- unit threshold reached;                                  |\n|               |- time quota exhausted;                                    |\n|               |- volume quota exhausted;                                  |\n|               |- unit quota exhausted;                                    |\n|               |- expiry of quota validity time;                           |\n|               |- termination of service data flow:                        |\n|               |- re-authorization request by OCS.                         |\n|               |- access of a multi-access PDN connection becomes unusable |\n|CDR Closure    |All active \"List of Service Data\" containers shall be added|\n|               |to the PGW-CDR.                                            |\n|               |                                                           |\n|               |Note:  The trigger condition is a common value that has to |\n|               |be used for CDR closure together with detailed reason.     |\n\n\nThe first traffic container identifies the data traffic since the IP-CAN\nbearer was opened. Subsequent data traffic containers store the configured\ncounts accrued since the closure of the last container.\n\nFor envelope reporting, each envelope contains information about the data\nvolume transferred in both uplink and downlink and / or the number of\nevents that occurred for the duration that envelope is open. Only completed\ntime envelopes shall be added to the PGW-CDR. The determination of\ncompleted envelopes are defined in TS 32.299 [50]. The triggers listed in\nthe previous table 5.2.3.4.1.1 shall not apply to envelope reporting.\nEnvelopes that are not complete when a partial PGW-CDR is closed shall be\nadded to the next PGW-CDR.\n\nThe \"Serving node Address\" attribute of the PGW-CDR consists of a list of\nSGSN/S-GW/ePDG/TWAG addresses.\nNew SGSN/S-GW/ePDG/TWAG address is added to the list when SGSN/S-\nGW/ePDG/TWAG changes.\n\nWhen Charging Event (ACR) is triggered by table 5.2.3.4.1.1conditions, the\nChange-Condition sub-field associated to the added container, indicating\nthe appropriate condition, shall be present, excluding CDR Closure case.\n\nWhen Charging Event (ACR) is triggered by CDR Closure condition, this\nChange-Condition sub-field associated to the added container shall be\nomitted, except when CDR closure is due to \"maximum number of charging\ncondition changes\", where it shall be present with the original condition\nchange.\n\nWhen Charging Event (ACR) is triggered by \"User CSG Information change\" as\na Change condition, the following shall apply for the added volume\ncontainer:\n\n  -  When User enters in a CSG cell or a hybrid cell: the CSG ID, access\n    mode and CSG membership indication (when hybrid), shall be provided\n    together with this \"User CSG Information change\" Change-Condition.\n\n  -  User leaves a CSG cell or a hybrid cell: this \"User CSG Information\n    change\" Change-Condition shall be provided without any CSG ID, access\n    mode and CSG membership indication, unless the user is entering a new\n    CSG cell or hybrid cell.\n\n\n\n\n"}, {"key": "Triggers for PGW-CDR closure", "numbering": "5.2.3.4.2", "title_level": 4, "desc": "5.2.3.4.2   Triggers for PGW-CDR closure\n\nThe PGW-CDR shall be closed on encountering trigger conditions.\n\nTable 5.2.3.4.2.1 identifies which conditions are supported to permit\nclosure of the PGW-CDR.\n\n               Table 5.2.3.4.2.1: Triggers for PGW-CDR closure\n\n|Closure Conditions   |Description/Behaviour                               |\n|End of IP-CAN bearer |Deactivation of the IP-CAN bearer in the P-GW shall |\n|within the P-GW      |result in the CDR being closed.                     |\n|                     |The trigger condition covers:                       |\n|                     |- termination of IP-CAN bearer;                     |\n|                     |- any abnormal release.                             |\n|Partial Record Reason|OAM&P reasons permit the closure of the CDR for     |\n|                     |internal reasons.                                   |\n|                     |The trigger condition covers:                       |\n|                     |- data volume limit;                                |\n|                     |- time (duration) limit;                            |\n|                     |- maximum number of charging condition changes (i.e.|\n|                     |number of service containers);                      |\n|                     |- management intervention;                          |\n|                     |- MS time zone change;                              |\n|                     |- PLMN change;                                      |\n|                     |- radio access technology change (RAT Type).        |\n|                     |- MO exception data counter receipt.                |\n\n\nThe Partial Record generation trigger thresholds are those associated with\nthe Charging Characteristics.\nThe Partial Record generation trigger thresholds are P-GW configuration\nparameters defined per Charging Characteristics profile by the operator\nthrough OAM&P means, as specified in annex A.\n\nIn the event that the PGW-CDR is closed and the IP-CAN bearer remains\nactive, a further PGW-CDR is opened with an incremented Sequence Number in\nthe P-GW.\n\nWhen Charging Event (ACR) is triggered by table 5.2.3.4.2.1 conditions, the\nChange-Condition (at PS information level) associated to the CDR Closure,\nindicating the appropriate condition shall be present, and it shall be\nomitted otherwise.\n\n"}, {"key": "Triggers for SMS-CDR charging information collection", "numbering": "5.2.3.5", "title_level": 3, "desc": "           5.2.3.5  Triggers for SMS-CDR charging information collection\n\nThe generation of the SMS related CDRs is based on the observation and\ncapture of simple events, i.e. the transfer of Short Messages through the\nSGSN and MME, in MO or MT direction.\n\nA S-SMO-CDR is used to collect charging information related to the\ntransmission of a SM in MO direction via the SGSN or MME. If, according to\nthe Charging Characteristics, CDR generation is activated a S-SMO-CDR shall\nbe created when the SGSN or MME has successfully forwarded a SM to the SMSC\non behalf of the UE/MS. The S-SMO-CDR includes details such as Record Type,\nServed IMSI, Sequence Number etc.\n\nA S-SMT-CDR is used to collect charging information related to the\ntransmission of a SM in MT direction via the SGSN or MME. If, according to\nthe Charging Characteristics, CDR generation is activated a S-SMT-CDR shall\nbe created when the SGSN or MME has successfully forwarded a SM from the\nSMSC to the UE/MS. The S-SMT-CDR includes details such as Record Type,\nServed IMSI, Sequence Number etc.\n\nNote that the above CDR types only capture the SMS events when transferred\nthrough the SGSN and MME.\nEquivalent charging functionality for the CS domain is specified in TS\n32.250 [10].\n3GPP specifications do not define service specific charging functionality\nfor SMS.\n\n\n"}, {"key": "Triggers for LCS-CDR charging information collection", "numbering": "5.2.3.6", "title_level": 3, "desc": ""}, {"key": "Triggers for S-MB-CDR and G-MB-CDR charging information collection", "numbering": "5.2.3.7", "title_level": 3, "desc": "5.2.3.6  Triggers for LCS-CDR charging information collection\n\nThe generation of the LCS related CDRs is based on the observation and\ncapture of simple events, i.e. the invocation of location requests from the\nUE/MS (LCS-MO-CDR), an external entity (LCS-MT-CDR) or the network (LCS-NI-\nCDR).\n\nA LCS-MO-CDR is used to collect charging information related to the\ntransmission of a location request, originating from the UE/MS to be\nlocated, via the SGSN. If, according to the Charging Characteristics, CDR\ngeneration is activated a LCS-MO-CDR shall be created when the SGSN has\nreceived the RANAP \"Location Report\" message from the RNC.\nThe LCS-MO-CDR includes details such as Record Type, Served IMSI, Sequence\nNumber etc.\n\nA LCS-MT-CDR is used to collect charging information related to the\ntransmission of a location request for a UE via the SGSN where the location\nrequest originates from an external entity. If, according to the Charging\nCharacteristics, CDR generation is activated a LCS-MT-CDR shall be created\nwhen the SGSN has received the RANAP \"Location Report\" message from the\nRNC. The LCS-MT-CDR includes details such as Record Type, Served IMSI,\nSequence Number etc.\n\nA LCS-NI-CDR is used to collect charging information related to the\ntransmission of a network induced location request via the SGSN. If,\naccording to the Charging Characteristics, CDR generation is activated a\nLCS-NI-CDR shall be created when the SGSN has received the RANAP \"Location\nReport\" message from the RNC. The LCS-MO-CDR includes details such as\nRecord Type, Served IMSI, Sequence Number etc.\n\nNote that the above CDR types only capture the LCS events when transferred\nthrough the SGSN.\nEquivalent charging functionality for the CS domain is specified in TS\n32.250 [10]. Service specific charging functionality for LCS is specified\nin TS 32.271 [31].\n\n\n\n           5.2.3.7  Triggers for S-MB-CDR and G-MB-CDR charging information\n           collection for MBMS context charging for GPRS\n\n\n"}, {"key": "Triggers for S-MB-CDR and G-MB-CDR charging information", "numbering": "5.2.3.7.1", "title_level": 4, "desc": "5.2.3.7.1   Triggers for S-MB-CDR and G-MB-CDR charging information\n             creation\n\nS-MB-CDR and G-MB-CDR are used to collect charging information related to\nthe MBMS bearer context data information for a MBMS bearer service in the\nGSN. The triggers for both S-MB-CDR and G-MB-CDR to start collecting\ncharging information are the same.\n\nS-MB-CDR and G-MB-CDR shall be opened at MBMS bearer context creation. Not\nall of the charging information to be collected is static, and other\ncharging information is directly dependent on dynamic Packet-Switched\nservice usage.\n\nThe subsequent clauses identify in detail the conditions for adding\ninformation to, and closing the S-MB-CDR and\nG-MB-CDR for generation towards the CGF.\n\n\n"}, {"key": "Triggers for S-MB-CDR and G-MB-CDR charging information", "numbering": "5.2.3.7.2", "title_level": 4, "desc": "5.2.3.7.2   Triggers for S-MB-CDR and G-MB-CDR charging information\n             addition\n\nThe \"List of Traffic Data Volumes\" attribute consists of a set of\ncontainers, which are added when specific trigger conditions are met, and\nidentify the volume count per MBMS bearer context, for downlink traffic, on\nencountering that trigger condition.\nTable 5.2.3.7.2.1 identifies which conditions are supported to trigger S-MB-\nCDR and G-MB-CDR charging information addition.\n\n Table 5.2.3.7.2.1: Triggers for S-MB-CDR and G-MB-CDR charging information\n                                  addition\n\n|Trigger       |Description/Behaviour                                      |\n|Conditions    |                                                           |\n|Tariff Time   |On reaching the Tariff Time Change a \"List of Traffic Data |\n|Change        |Volumes\" container shall be added to the CDR.              |\n|CDR Closure   |A list of \"List of Traffic Data Volumes\" container shall be|\n|              |added to the relevant CDR.                                 |\n\n\nThe first volume container of a MBMS bearer context identifies the volume\nsince the record was opened.\nSubsequent volume containers store the volume count accrued since the\nclosure of the last container.\n\n\n"}, {"key": "Triggers for S-MB-CDR and G-MB-CDR closure", "numbering": "5.2.3.7.3", "title_level": 4, "desc": ""}, {"key": "Triggers for MBMS-GW-CDR charging information collection for MBMS", "numbering": "5.2.3.7A", "title_level": 3, "desc": "5.2.3.7.3   Triggers for S-MB-CDR and G-MB-CDR closure\n\nThe S-MB-CDR and G-MB-CDR shall be closed on encountering the trigger\nconditions identified in table 5.2.3.7.3.1.\n\n        Table 5.2.3.7.3.1: Triggers for S-MB-CDR and G-MB-CDR closure\n\n|Closure Conditions   |Description/Behaviour                                |\n|End of MBMS Bearer   |Deactivation of the MBMS bearer context in the GSN   |\n|Context within the   |shall result in the CDR being closed. The trigger    |\n|GSN                  |condition covers:                                    |\n|                     |- termination of MBMS bearer context;                |\n|                     |- any abnormal release.                              |\n|Partial Record Reason|OAM&P reasons permit the closure of the CDR for      |\n|                     |internal reasons.                                    |\n|                     |The trigger condition covers:                        |\n|                     |- data volume limit;                                 |\n|                     |- time (duration) limit;                             |\n|                     |- change in list of downstream nodes;                |\n|                     |- management intervention.                           |\n\n\nThe Partial Record generation trigger thresholds are those associated with\nGSN configured information.\nIn the event that the CDR is closed and the MBMS bearer context remains\nactive, a further CDR is opened with an incremented Sequence Number in the\nGSN.\n\n\n\n           5.2.3.7A Triggers for MBMS-GW-CDR charging information\n           collection for MBMS context charging for EPS\n\n\n"}, {"key": "Triggers for MBMS-GW-CDR charging information creation", "numbering": "5.2.3.7A.1", "title_level": 4, "desc": "5.2.3.7A.1  Triggers for MBMS-GW-CDR charging information creation\n\nMBMS-GW-CDR is used to collect charging information related to the MBMS\nbearer context data information for a MBMS bearer service in EPS.\n\nMBMS-GW-CDR shall be opened at MBMS bearer context creation. Not all of the\ncharging information to be collected is static, and other charging\ninformation is directly dependent on dynamic Evolved Packet System service\nusage.\n\nThe subsequent clauses identify in detail the conditions for adding\ninformation to, and closing the MBMS-GW-CDR for generation towards the CGF.\n\n\n"}, {"key": "Triggers for MBMS-GW-CDR charging information addition", "numbering": "5.2.3.7A.2", "title_level": 4, "desc": "5.2.3.7A.2  Triggers for MBMS-GW-CDR charging information addition\n\nThe \"List of Traffic Data Volumes\" attribute consists of a set of\ncontainers, which are added when specific trigger conditions are met, and\nidentify the volume count per MBMS bearer context, for downlink traffic, on\nencountering that trigger condition.\nTable 5.2.3.7A.2.1 identifies which conditions are supported to trigger\nMBMS-GW-CDR charging information addition.\n\n Table 5.2.3.7A.2.1: Triggers for MBMS-GW-CDR charging information addition\n\n|Trigger       |Description/Behaviour                                      |\n|Conditions    |                                                           |\n|Tariff Time   |On reaching the Tariff Time Change a \"List of Traffic Data |\n|Change        |Volumes\" container shall be added to the CDR.              |\n|CDR Closure   |A list of \"List of Traffic Data Volumes\" container shall be|\n|              |added to the relevant CDR.                                 |\n\n\nThe first volume container of a MBMS bearer context identifies the volume\nsince the record was opened.\nSubsequent volume containers store the volume count accrued since the\nclosure of the last container.\n\n\n"}, {"key": "Triggers for MBMS-GW-CDR closure", "numbering": "5.2.3.7A.3", "title_level": 4, "desc": "5.2.3.7A.3  Triggers for MBMS-GW-CDR closure\n\nThe MBMS-GW-CDR shall be closed on encountering the trigger conditions\nidentified in table 5.2.3.7A.3.1.\n\n            Table 5.2.3.7A.3.1: Triggers for MBMS-GW-CDR closure\n\n|Closure        |Description/Behaviour                                      |\n|Conditions     |                                                           |\n|End of MBMS    |Deactivation of the MBMS bearer context in the MBMS GW     |\n|Bearer Context |shall result in the CDR being closed. The trigger condition|\n|within the MBMS|covers:                                                    |\n|GW             |- termination of MBMS bearer context;                      |\n|               |- any abnormal release.                                    |\n|Partial Record |OAM&P reasons permit the closure of the CDR for internal   |\n|Reason         |reasons. The trigger condition covers:                     |\n|               |- data volume limit;                                       |\n|               |- time (duration) limit;                                   |\n|               |- maximum number of charging condition changes;            |\n|               |- change in list of downstream nodes;                      |\n|               |- management intervention.                                 |\n\n\nThe Partial Record generation trigger thresholds are those associated with\nMBMS GW configured information. In the event that the CDR is closed and the\nMBMS bearer context remains active, a further CDR is opened with an\nincremented Sequence Number in the MBMS GW.\n\n\n\n"}, {"key": "Triggers for ePDG-CDR charging information collection", "numbering": "5.2.3.8", "title_level": 3, "desc": "           5.2.3.8  Triggers for ePDG-CDR charging information collection\n\n\n"}, {"key": "Introduction", "numbering": "5.2.3.8.0", "title_level": 4, "desc": "5.2.3.8.0   Introduction\n\nA ePDG-CDR is used to collect charging information related to the IP-CAN\nbearer data information for a UE/MS in the ePDG.\n\nIf, according to the Charging Characteristics, CDR generation is activated\nan ePDG-CDR shall be opened at IP-CAN bearer activation and IP-CAN bearer\nspecific container is opened.\n\nWhen a change of charging condition occurs, the volume counts are added to\nthe ePDG-CDR and new counts are started. The ePDG-CDR includes details such\nas Record Type, Served IMSI, Sequence Number etc. Not all of the charging\ninformation to be collected is static, and other charging information is\ndirectly dependent on dynamic Packet-Switched service usage.\n\nThe subsequent clauses identify in detail the conditions for adding\ninformation to, and closing the ePDG-CDR for generation towards the CGF.\n\n\n"}, {"key": "Triggers for ePDG-CDR charging information addition", "numbering": "5.2.3.8.1", "title_level": 4, "desc": "5.2.3.8.1   Triggers for ePDG-CDR charging information addition\n\nThe \"List of Traffic Data Volumes\" attribute of the ePDG-CDR consists of a\nset of containers, which are added when specific trigger conditions are\nmet, and identify the volume count per Qos, separated for uplink and\ndownlink traffic, on encountering that trigger condition.\nTable 5.2.3.8.1.1 identifies which conditions are supported to trigger ePDG-\nCDR charging information addition.\n\n   Table 5.2.3.8.1.1: Triggers for ePDG-CDR charging information addition\n\n|Trigger        |Description/Behaviour                                      |\n|Conditions     |                                                           |\n|QoS Change     |A change in the QoS shall result that open \"List of Traffic|\n|               |Data Volumes\" containers being closed and added to the CDR |\n|               |and new IP-CAN bearer specific container is opened.        |\n|Tariff Time    |On reaching the Tariff Time Change open \"List of Traffic   |\n|Change         |Data Volumes\" containers shall be closed and added to the  |\n|               |CDR.                                                       |\n|User Location  |A change in UWAN User Location Information (e.g. change in |\n|Change         |UE local IP address within the ePDG) shall result that open|\n|               |\"List of Traffic Data Volumes\" containers being closed and |\n|               |added to the CDR and new IP-CAN bearer specific container  |\n|               |is opened.                                                 |\n|CDR Closure    |Open \"List of Traffic Data Volumes\" containers shall be    |\n|               |closed and added to the ePDG-CDR.                          |\n\n\nVolume container identifies the uplink/downlink volume since the closure of\nthe last container.\n\nWhen Charging Event (ACR) is triggered by table 5.2.3.8.1.1 conditions, the\nChange-Condition sub-field associated to the added volume container,\nindicating the appropriate condition, shall be present, excluding CDR\nClosure case.\n\nWhen Charging Event (ACR) is triggered by CDR Closure condition, this\nChange-Condition sub-field associated to the added volume container shall\nbe omitted, except when CDR closure is due to \"maximum number of charging\ncondition changes\", where it shall be present with the original condition\nchange.\n\n\n"}, {"key": "Triggers for ePDG-CDR closure", "numbering": "5.2.3.8.2", "title_level": 4, "desc": "5.2.3.8.2   Triggers for ePDG-CDR closure\n\nThe ePDG-CDR shall be closed on encountering some trigger conditions.\nTable 5.2.3.8.2.1 identifies which conditions are supported to permit\nclosure of the ePDG-CDR.\n\n              Table 5.2.3.8.2.1: Triggers for ePDG-CDR closure\n\n|Closure Conditions |Description/Behaviour                                  |\n|End of IP-CAN      |Deactivation of the IP-CAN bearer in the ePDG shall    |\n|bearer within the  |result in the CDR being closed. The trigger condition  |\n|ePDG               |covers:                                                |\n|                   |- termination of IP-CAN bearer;                        |\n|                   |- any abnormal release;                                |\n|                   |-    inter serving node change.                        |\n|Partial Record     |OAM&P reasons permit the closure of the CDR for        |\n|Reason             |internal reasons.                                      |\n|                   |The trigger condition covers:                          |\n|                   |- data volume limit;                                   |\n|                   |- time (duration) limit;                               |\n|                   |- maximum number of charging condition changes         |\n|                   |(QoS/tariff time change);                              |\n|                   |- management intervention;                             |\n\n\nThe Partial Record generation trigger thresholds are those associated with\nthe Charging Characteristics.\nThe Partial Record generation trigger thresholds are ePDG configuration\nparameters defined per Charging Characteristics profile by the operator\nthrough OAM&P means, as specified in annex A.\n\nIn the event that the ePDG-CDR is closed and the IP-CAN bearer remains\nactive, a further ePDG-CDR is opened with an incremented Sequence Number in\nthe ePDG.\n\nWhen Charging Event (ACR) is triggered by table 5.2.3.8.2.1 conditions, the\nChange-Condition (at PS information level) associated to the CDR Closure,\nindicating the appropriate condition shall be present, and it shall be\nomitted otherwise.\n\n\n\n"}, {"key": "Triggers for TDF-CDR charging information collection", "numbering": "5.2.3.9", "title_level": 3, "desc": "           5.2.3.9  Triggers for TDF-CDR charging information collection\n\n\n"}, {"key": "Triggers for TDF-CDR charging information creation", "numbering": "5.2.3.9.1", "title_level": 4, "desc": "5.2.3.9.1   Triggers for TDF-CDR charging information creation\n\nA TDF-CDR is used to collect charging information related to the TDF\nsession information for a UE/MS in the TDF, where the data volumes, elapsed\ntime or number of events within each TDF-CDR are separately counted per\nrating group or per combination of the rating group and service id.\n\nMany application containers per TDF session can be active simultaneously in\nTDF-CDR. An application container is activated when application traffic is\ndetected and no matching active application container exist; an application\ncontainer is closed when the application traffic of the matching\napplication container is terminated as detected by the TDF.\nWhen event based charging applies, the first occurrence of an event\nmatching an application shall imply application traffic start. Details on\nABC can be found in TS 23.203 [215] and TS 32.240 [1].\n\nIf, according to the Charging Characteristics profile, CDR generation is\nactivated, a TDF-CDR shall be opened at TDF session establishment, and the\nvolume (separately in uplink and downlink direction), elapsed time and/or\nnumber of events are counted. When a change of charging condition occurs,\nall containers are added to the TDF-CDR.\nThe TDF-CDR includes details such as Record Type, Served IMSI, Sequence\nNumber etc. and the ABC specific charging data. Not all of the charging\ninformation to be collected is static, and other charging information is\ndirectly dependent on dynamic Packet-Switched service usage.\n\nIt shall be possible to activate both online and offline charging\ninterfaces for the same TDF session.\nThe default online and offline charging shall work independently of each\nother. Optionally it may be possible to operate with tight interworking\nbetween the online and offline charging mechanisms such that only the\nspecified quota re-authorisation triggers armed by the OCS (including e.g.\ntariff time change, returned quotas, etc.) are used to close the\napplication containers for the TDF-CDR charging information addition, this\ninformation would be provided by the OCS in the Offline-Charging AVP. In\nthis case, the information provided by the OCS shall take precedence over\nthe default configuration at the TDF.\n\nThe subsequent clauses identify in detail the conditions for adding\ninformation to, and closing the TDF-CDR for generation towards the CGF.\n\n\n"}, {"key": "Triggers for TDF-CDR charging information addition", "numbering": "5.2.3.9.2", "title_level": 4, "desc": "5.2.3.9.2   Triggers for TDF-CDR charging information addition\n\nTDF session specific offline charging is achieved with TDF session specific\nrating group/service identifier defined in clause 5.2.1.9.2.\n\nThe \"List of Service Data\" attribute of the TDF-CDR consists of a set of\ncontainers, which are added when specific trigger conditions are met. Each\ncontainer identifies the configured counts (volume separated for uplink and\ndownlink, elapsed time or number of events) per rating group or combination\nof the rating group and service id within the same TDF session, on\nencountering that trigger condition. For envelope reporting, the containers\nrepresent complete and closed time envelopes determined by mechanisms\ndefined in TS 32.299 [50].\nTable 5.2.3.9.2.1 identifies conditions that may be supported as recording\ntriggers under consideration of additional Debit / Reserve Units triggers.\n\nSome of the triggers are non-exclusive (e.g. TDF session modification with\na couple of reasons, TDF session modification reasons that cause TDF-CDR\nclosure).\n\n Table 5.2.3.9.2.1: Triggers for TDF-CDR charging information addition \"List\n                              of Service Data\"\n\n|Trigger        |Description/Behaviour                                      |\n|Conditions     |                                                           |\n|TDF session    |A change of TDF session conditions (e.g.                   |\n|modification   |SGSN/S-GW/ePDG/TWAG change, user location change, user CSG |\n|               |information change) shall result in a set of \"List of      |\n|               |Service Data\" containers, i.e. all active application      |\n|               |containers, being added to the CDR as described in clause  |\n|               |5.2.1.9.                                                   |\n|               |In a tight interworking between online and offline charging|\n|               |the specified quota re-authorisation triggers armed by OCS |\n|               |are supported.                                             |\n|Tariff Time    |On reaching the Tariff Time Change a set of \"List of       |\n|Change         |Service Data\" containers, i.e. all active application      |\n|               |containers, shall be added to the CDR.                     |\n|               |In a tight interworking between online and offline charging|\n|               |the Debit / Reserve Units tariff time change from OCS is   |\n|               |supported.                                                 |\n|Failure        |When the Failure Handling mechanism is triggered a \"List of|\n|Handling       |Service Data'\u201d, i.e. all active application containers     |\n|procedure      |shall be added to the CDR.                                 |\n|triggering     |The causes are only relevant in case of simultaneously     |\n|               |usage of an active Debit / Reserve Units session.          |\n|Application    |In case of independent online and offline charging a \"List |\n|traffic report |of Service Data\" container for the application shall be    |\n|               |added when:                                                |\n|               |- expiry of time limit;                                    |\n|               |- expiry of volume limit;                                  |\n|               |- expiry of unit limit;                                    |\n|               |- termination of application traffic.                      |\n|               |In case of tight interworking online and offline charging a|\n|               |\"List of Service Data\" container for the application shall |\n|               |be added when:                                             |\n|               |- time threshold reached;                                  |\n|               |- volume threshold reached;                                |\n|               |- unit threshold reached;                                  |\n|               |- time quota exhausted;                                    |\n|               |- volume quota exhausted;                                  |\n|               |- unit quota exhausted;                                    |\n|               |- expiry of quota validity time;                           |\n|               |- termination of application traffic:                      |\n|               |- re-authorization request by OCS.                         |\n|CDR Closure    |All active \"List of Service Data\" containers shall be added|\n|               |to the TDF-CDR.                                            |\n|               |                                                           |\n|               |NOTE:  The trigger condition is a common value that has to |\n|               |be used for CDR closure together with detailed reason.     |\n\n\nThe first traffic container identifies the data traffic since the TDF\nsession was opened.\nSubsequent data traffic containers store the configured counts accrued\nsince the closure of the last container.\n\nFor envelope reporting, each envelope contains information about the data\nvolume transferred in both uplink and downlink and / or the number of\nevents that occurred for the duration that envelope is open. Only completed\ntime envelopes shall be added to the TDF-CDR. The determination of\ncompleted envelopes are defined in TS 32.299 [50]. The triggers listed in\nthe previous table 5.2.3.9.2.1 shall not apply to envelope reporting.\nEnvelopes that are not complete when a partial TDF-CDR is closed shall be\nadded to the next TDF-CDR.\n\nThe \"Serving node Address\" attribute of the TDF-CDR consists of a list of\nSGSN/S-GW/ePDG/TWAG addresses.\nNew SGSN/S-GW/ePDG/TWAG address is added to the list when SGSN/S-\nGW/ePDG/TWAG changes.\n\nWhen Charging Event (ACR) is triggered by table 5.2.3.9.2.1 conditions, the\nChange-Condition sub-field associated to the added container, indicating\nthe appropriate condition shall be present, excluding CDR Closure case.\n\nWhen Charging Event (ACR) is triggered by CDR Closure condition, this\nChange-Condition sub-field associated to the added container shall be\nomitted, except when CDR closure is due to \"maximum number of charging\ncondition changes\", where it shall be present with the original condition\nchange.\n\nWhen Charging Event (ACR) is triggered by \"User CSG Information change\" as\na Change condition, the following shall apply for the added volume\ncontainer:\n\n  -  When User enters in a CSG cell or a hybrid cell: the CSG ID, access\n    mode and CSG membership indication (when hybrid), shall be provided\n    together with this \"User CSG Information change\" Change-Condition.\n\n  -  User leaves a CSG cell or a hybrid cell: this \"User CSG Information\n    change\" Change-Condition shall be provided without any CSG ID, access\n    mode and CSG membership indication, unless the user is entering a new\n    CSG cell or hybrid cell.\n\n\n\n\n"}, {"key": "Triggers for TDF-CDR closure", "numbering": "5.2.3.9.3", "title_level": 4, "desc": ""}, {"key": "Triggers for PGW-CDR charging information collection when IP-CAN", "numbering": "5.2.3.10", "title_level": 3, "desc": "5.2.3.9.3   Triggers for TDF-CDR closure\n\nThe TDF-CDR shall be closed on encountering specified trigger conditions.\n\nTable 5.2.3.9.3.1 identifies which conditions are supported to permit\nclosure of the TDF-CDR.\n\n               Table 5.2.3.9.3.1: Triggers for TDF-CDR closure\n\n|Closure        |Description/Behaviour                                      |\n|Conditions     |                                                           |\n|End of TDF     |TDF session termination shall result in the CDR being      |\n|session        |closed. The trigger condition covers:                      |\n|               |- termination of TDF session by the PCRF;                  |\n|               |- any abnormal release.                                    |\n|Partial Record |OAM&P reasons permit the closure of the CDR for internal   |\n|Reason         |reasons. The trigger condition covers:                     |\n|               |- data volume limit;                                       |\n|               |- time (duration) limit;                                   |\n|               |- maximum number of charging condition changes (i.e. number|\n|               |of service containers);                                    |\n|               |- management intervention;                                 |\n|               |- MS time zone change;                                     |\n|               |- PLMN change;                                             |\n|               |- radio access technology change (RAT Type).               |\n\n\nThe Partial Record generation trigger thresholds are those associated with\nthe Charging Characteristics.\nThe Partial Record generation trigger thresholds are TDF configuration\nparameters defined per Charging Characteristics profile by the operator\nthrough OAM&P means, as specified in Annex A.\n\nIn the event that the TDF-CDR is closed and the TDF session remains active,\na further TDF-CDR is opened with an incremented Sequence Number in the TDF.\n\nWhen Charging Event (ACR) is triggered by table 5.2.3.9.3.1 conditions, the\nChange-Condition (at PS information level) associated to the CDR Closure,\nindicating the appropriate condition shall be present, and it shall be\nomitted otherwise.\n\n\n\n           5.2.3.10 Triggers for PGW-CDR charging information collection\n           when IP-CAN session charging is active\n\n\n"}, {"key": "General", "numbering": "5.2.3.10.1", "title_level": 4, "desc": "5.2.3.10.1  General\n\nA PGW-CDR is used to collect charging information related to the IP-CAN\nbearer data information for a UE/MS in\nthe P-GW. When IP-CAN session charging is active, as described in clause\n5.2.2.6, two types of data can be collected: traffic volumes used for IP-\nCAN bearer charging and service data used for FBC.\n\nMany traffic volume and service data flow containers per IP-CAN session can\nbe active simultaneously in PGW-CDR.\n\nA new traffic volume container is activated when an IP-CAN bearer is\nactivated.\n\nA service data flow container is activated when traffic is detected and no\nmatching active service data flow container exist; a service data flow\ncontainer is closed when the termination of the last service data flow\nmatching to the service data flow container is detected by the P-GW. When\nevent based charging applies, the first occurrence of an event matching a\nservice data flow template shall imply service data flow start. Details on\nFBC can be found in TS 23.203 [215] and TS 32.240 [1].\n\nIf, according to the Charging Characteristics profile, CDR generation is\nactivated, a PGW-CDR shall be opened at\nIP-CAN session activation, and the volume (separately in uplink and\ndownlink direction), elapsed time and/or number of events are counted.\n\nWhen a change of charging condition occurs, all containers are added to the\nPGW-CDR. The PGW-CDR includes details such as Record Type, Served IMSI,\nSequence Number etc. and both the traffic data and FBC specific charging\ndata.\nNot all of the charging information to be collected is static, and other\ncharging information is directly dependent on dynamic Packet-Switched\nservice usage.\n\nIt shall be possible to activate both online and offline charging\ninterfaces for the same IP-CAN bearer.\nThe default online and offline charging shall work independently of each\nother. Optionally it may be possible to operate in a tight interworking\nbetween online and offline charging mechanism i.e. only the specified quota\nre-authorisation triggers armed by OCS (including e.g. tariff time change,\nreturned quotas, etc.) are used to close the service data flow containers\nfor the PGW-CDR charging information addition.\n\nThe subsequent clauses identify in detail the conditions for adding\ninformation to, and closing the PGW-CDR for generation towards the CGF.\n\n\n"}, {"key": "Triggers for PGW-CDR charging information addition when IP-CAN", "numbering": "5.2.3.10.2", "title_level": 4, "desc": "5.2.3.10.2  Triggers for PGW-CDR charging information addition when IP-CAN\n             session charging is active\n\nThe \"List of Traffic Data Volumes\" attribute of the PGW-CDR consists of a\nset of containers, which are added when specific trigger conditions are\nmet, and identify the volume counter per QCI/ARP pair, separated for uplink\nand downlink traffic, on encountering that trigger conditions. Table\n5.2.3.10.2.1 identifies which conditions are supported to trigger PGW-CDR\ncharging information addition for the \"List of Traffic Data Volumes\"\nattribute.\n\nThe \"List of Service Data\" attribute of the PGW-CDR consists of a set of\ncontainers, which are added when specific trigger conditions are met. Each\ncontainer identifies the configured counts (volume separated for uplink and\ndownlink, elapsed time or number of events) per rating group or combination\nof the rating group and service id within the same\nIP-CAN bearer, on encountering that trigger condition. For envelope\nreporting, the containers represent complete and closed time envelopes\ndetermined by mechanisms defined in TS 32.299 [50]. Table 5.2.3.10.2.2\nidentifies conditions that may be supported as recording triggers under\nconsideration of additional Debit / Reserve Units triggers.\n\nSome of the triggers are non-exclusive (e.g. IP-CAN bearer modification\nwith a couple of reasons, IP-CAN bearer modification reasons that cause PGW-\nCDR closure).\n\n Table 5.2.3.10.2.1: Triggers for PGW-CDR charging information addition for\n     List of Traffic Volumes when charging per IP-CAN session is active\n\n|Trigger        |Description/Behaviour                                      |\n|Conditions     |                                                           |\n|End of         |The end of a dedicated bearer in P-GW shall result that    |\n|dedicated      |open \"List of Traffic Data Volumes\" containers for the     |\n|bearer in P-GW |dedicated bearer are closed and added to the CDR.          |\n|Serving node   |A serving node (e.g., SGSN/S-GW/ePDG/TWAG) change in the   |\n|change         |P-GW shall result that all open \"List of Traffic Data      |\n|               |Volumes\" containers are closed and added to the CDR. New   |\n|               |containers are opened for each bearer.                     |\n|QoS Change     |A change in the QoS shall result that open \"List of Traffic|\n|               |Data Volumes\" containers for the effected bearer being     |\n|               |closed and added to the CDR and new IP-CAN bearer specific |\n|               |container is opened if the IP-CAN bearer is still active.  |\n|Tariff Time    |On reaching the Tariff Time Change open \"List of Traffic   |\n|Change         |Data Volumes\" containers shall be closed and added to the  |\n|               |CDR.                                                       |\n|User Location  |A change in the User Location Info (e.g. ECGI, TAI, RAI,   |\n|Change         |SAI or CGI) shall result that open \"List of Traffic Data   |\n|               |Volumes\" containers being closed and added to the CDR, if  |\n|               |location reporting is required, and a report of User       |\n|               |Location Change is received.                               |\n|User CSG       |A change in the User CSG info (e.g. CSG ID, access mode or |\n|Information    |CSG membership indication) shall result that open \"List of |\n|change         |Traffic Data Volumes\" containers being closed and added to |\n|               |the CDR, if CSG information reporting is required, and a   |\n|               |report of User CSG information change is received.         |\n|Change of UE   |A change of UE presence in Presence Reporting Area(s) shall|\n|presence in    |result that open \"List of Traffic Data Volumes\" containers |\n|Presence       |being closed and added to the CDR, if such reporting is    |\n|Reporting Area |required, and a report that user enters/leaves the area or |\n|               |the Presence Reporting Area(s) is set to inactive by the   |\n|               |serving node are  received.                                |\n|Addition of    |New SGSN/S-GW/ePDG/TWAG address is added to data for the   |\n|access to a PDN|IP-CAN bearer in the CDR.                                  |\n|connection     |                                                           |\n|Removal of     |The counters and time stamps for the IP-CAN bearers of the |\n|access from a  |removed access are closed and resulting containers added to|\n|multi-access   |CDR                                                        |\n|PDN connection |                                                           |\n|Access of a    |The counters and time stamps for the IP-CAN bearers of the |\n|multi-access   |unusable access are closed and resulting containers added  |\n|PDN connection |to the CDR.                                                |\n|becomes        |                                                           |\n|unusable       |                                                           |\n|Traffic volume |A \"List of Traffic Data Volumes\" container for an IP-CAN   |\n|report         |bearer shall be added when:                                |\n|               |- expiry of time limit per IP-CAN bearer;                  |\n|               |- expiry of data volume limit per IP-CAN bearer.           |\n|Rate Control   |A \"List of Traffic Data Volumes\" container for an IP-CAN   |\n|Change         |bearer shall be added when:                                |\n|               |- Serving PLMN Rate Control Change                         |\n|               |- APN Rate Control Change.                                 |\n|CDR Closure    |Open \"List of Traffic Data Volumes\" containers shall be    |\n|               |closed and added to the PGW-CDR.                           |\n\n\n  Editor\u2019s Note: The individual events associated with change of charging\n         condition must be re-evaluated in the context of NBIFOM. Changes to\n         this event are FFS.\n\n\n\n Table 5.2.3.10.2.2: Triggers for PGW-CDR charging information addition for\n      \"List of Service Data\" when charging per IP-CAN session is active\n\n|Trigger        |Description/Behaviour                                      |\n|Conditions     |                                                           |\n|IP-CAN bearer  |A change of IP-CAN bearer conditions (e.g.                 |\n|modification   |SGSN/S-GW/ePDG/TWAG change, user location change, user CSG |\n|except QoS     |information change, change in UE presence in Presence      |\n|change         |Reporting Area, Serving PLMN Rate Control Change, APN Rate |\n|               |Control Change) shall result in a set of \"List of Service  |\n|               |Data\" containers, i.e. all active service data flow        |\n|               |containers, being added to the CDR as described in clause  |\n|               |5.2.1.10.2.                                                |\n|               |In a tight interworking between online and offline charging|\n|               |the specified quota re-authorisation triggers armed by OCS |\n|               |are supported.                                             |\n|Tariff Time    |On reaching the Tariff Time Change a set of \"List of       |\n|Change         |Service Data\" containers, i.e. all active service data flow|\n|               |containers, shall be added to the CDR.                     |\n|               |In a tight interworking between online and offline charging|\n|               |the Debit / Reserve Units tariff time change from OCS is   |\n|               |supported.                                                 |\n|ASR or Failure |When the Debit / Reserve Units session is terminated with  |\n|Handling       |ASR or Failure Handling mechanism is triggered a \"List of  |\n|procedure      |Service Data'\u201d, i.e. all active service data flow          |\n|triggering     |containers shall be added to the CDR.                      |\n|               |The causes are only relevant in case of simultaneously     |\n|               |usage of an active Debit / Reserve Units session.          |\n|Service data   |In case of independent online and offline charging a \"List |\n|flow report    |of Service Data\" container for the service data flow shall |\n|               |be added when:                                             |\n|               |- expiry of time limit per rating group;                   |\n|               |- expiry of volume limit per rating group;                 |\n|               |- expiry of unit or data event limit per rating group;     |\n|               |- access change of service data flow and all service data  |\n|               |flows for the rating group,  combination of rating group   |\n|               |and service identifier, or combination of rating group,    |\n|               |sponsor identity and application service provider identity |\n|               |are moved from one access to another;                      |\n|               |- termination of service data flow and this is the last    |\n|               |service data flow for the rating group or combination of   |\n|               |rating group and service identifier, or combination of     |\n|               |rating group, sponsor identity and application service     |\n|               |provider identity.                                         |\n|               |In case of tight interworking online and offline charging a|\n|               |\"List of Service Data\" container for the service data flow |\n|               |shall be added when:                                       |\n|               |- time threshold reached;                                  |\n|               |- volume threshold reached;                                |\n|               |- unit threshold reached;                                  |\n|               |- time quota exhausted;                                    |\n|               |- volume quota exhausted;                                  |\n|               |- unit quota exhausted;                                    |\n|               |- expiry of quota validity time;                           |\n|               |- access change of service data flow;                      |\n|               |- termination of service data flow:                        |\n|               |- re-authorization request by OCS.                         |\n|CDR Closure    |All active \"List of Service Data\" containers shall be added|\n|               |to the PGW-CDR.                                            |\n|               |                                                           |\n|               |Note:  The trigger condition is a common value that has to |\n|               |be used for CDR closure together with detailed reason.     |\n\n\n  Editor\u2019s Note: The individual events associated with change of charging\n         condition must be re-evaluated in the context of NBIFOM. Changes to\n         this event are FFS.\n\nThe first traffic container identifies the data traffic since the IP-CAN\nsession was opened.\nSubsequent data traffic containers store the configured counts accrued\nsince the closure of the last container.\n\nFor envelope reporting, each envelope contains information about the data\nvolume transferred in both uplink and downlink and / or the number of\nevents that occurred for the duration that envelope is open. Only completed\ntime envelopes shall be added to the PGW-CDR. The determination of\ncompleted envelopes are defined in TS 32.299 [50]. The triggers listed in\nthe previous table shall not apply to envelope reporting. Envelopes that\nare not complete when a partial PGW-CDR is closed shall be added to the\nnext PGW-CDR.\n\nThe \"Serving node Address\" attribute of the PGW-CDR consists of a list of\nSGSN/S-GW/ePDG/TWAG addresses.\nNew SGSN/S-GW/ePDG/TWAG address is added to the list when SGSN/S-\nGW/ePDG/TWAG changes.\n\nWhen Charging Event (ACR) is triggered by table 5.2.3.10.2.1 or\n5.2.3.10.2.2 conditions, the Change-Condition sub-field associated to the\nadded container, indicating the appropriate condition, shall be present,\nexcluding CDR Closure case.\n\nWhen Charging Event (ACR) is triggered by CDR Closure condition, this\nChange-Condition sub-field associated to the added container shall be\nomitted, except when CDR closure is due to \"maximum number of charging\ncondition changes\", where it shall be present with the original condition\nchange.\n\nWhen Charging Event (ACR) is triggered by \"User CSG Information change\" as\na Change condition, the following shall apply for the added volume\ncontainer:\n\n  -  When User enters in a CSG cell or a hybrid cell: the CSG ID, access\n    mode and CSG membership indication (when hybrid), shall be provided\n    together with this \"User CSG Information change\" Change-Condition.\n\n  -  User leaves a CSG cell or a hybrid cell: this \"User CSG Information\n    change\" Change-Condition shall be provided without any CSG ID, access\n    mode and CSG membership indication, unless the user is entering a new\n    CSG cell or hybrid cell.\n\n\n\n\n"}, {"key": "Triggers for PGW-CDR closure when charging per IP-CAN session", "numbering": "5.2.3.10.3", "title_level": 4, "desc": "5.2.3.10.3  Triggers for PGW-CDR closure when charging per IP-CAN session\n             charging is active\n\nThe PGW-CDR shall be closed on encountering trigger conditions.\n\nTable 5.2.3.10.3.1 identifies which conditions are supported to permit\nclosure of the PGW-CDR.\n\n              Table 5.2.3.10.3.1: Triggers for PGW-CDR closure\n\n|Closure Conditions |Description/Behaviour                                 |\n|End of IP-CAN      |Deactivation of the IP-CAN session in the P-GW shall  |\n|session within the |result in the CDR being closed. The trigger condition |\n|P-GW               |covers:                                               |\n|                   |- termination of last IP-CAN bearer for the IP-CAN    |\n|                   |session;                                              |\n|                   |- any abnormal release.                               |\n|Partial Record     |OAM&P reasons permit the closure of the CDR for       |\n|Reason             |internal reasons.                                     |\n|                   |The trigger condition covers:                         |\n|                   |- data volume limit per IP-CAN session;               |\n|                   |- time (duration) limit for keeping a CDR open;       |\n|                   |- data event limit per IP-CAN session;                |\n|                   |- maximum number of charging condition changes;       |\n|                   |- management intervention;                            |\n|                   |- APN-AMBR change;                                    |\n|                   |- MS time zone change;                                |\n|                   |- PLMN change;                                        |\n|                   |- radio access technology change (RAT Type).          |\n\n\nThe Partial Record generation trigger thresholds are those associated with\nthe Charging Characteristics.\nThe Partial Record generation trigger thresholds are P-GW configuration\nparameters defined per Charging Characteristics profile by the operator\nthrough OAM&P means, as specified in annex A.\n\nIn the event that the PGW-CDR is closed and the IP-CAN session remains\nactive, a further PGW-CDR is opened with an incremented Sequence Number in\nthe P-GW.\n\nWhen Charging Event (ACR) is triggered by table 5.2.3.10.3.1 conditions,\nthe Change-Condition (at PS information level) associated to the CDR\nClosure, indicating the appropriate condition shall be present, and it\nshall be omitted otherwise.\n\n\n"}, {"key": "Triggers for TWAG-CDR charging information collection", "numbering": "5.2.3.11", "title_level": 3, "desc": "5.2.3.11 Triggers for TWAG-CDR charging information collection\n\n\n"}, {"key": "Introduction", "numbering": "5.2.3.11.0", "title_level": 4, "desc": "5.2.3.11.0  Introduction\n\nA TWAG-CDR is used to collect charging information related to the IP-CAN\nbearer data information for a UE/MS in the TWAG.\n\nIf, according to the Charging Characteristics, CDR generation is activated\na TWAG-CDR shall be opened at IP-CAN bearer activation and IP-CAN bearer\nspecific container is opened.\n\nWhen a change of charging condition occurs, the volume counts are added to\nthe TWAG-CDR and new counts are started. The TWAG-CDR includes details such\nas Record Type, Served IMSI, Sequence Number etc. Not all of the charging\ninformation to be collected is static, and other charging information is\ndirectly dependent on dynamic Packet-Switched service usage.\n\nThe subsequent clauses identify in detail the conditions for adding\ninformation to, and closing the TWAG-CDR for generation towards the CGF.\n\n\n"}, {"key": "Triggers for TWAG-CDR charging information addition", "numbering": "5.2.3.11.1", "title_level": 4, "desc": "5.2.3.11.1  Triggers for TWAG-CDR charging information addition\n\nThe \"List of Traffic Data Volumes\" attribute of the TWAG-CDR consists of a\nset of containers, which are added when specific trigger conditions are\nmet, and identify the volume count per Qos, separated for uplink and\ndownlink traffic, on encountering that trigger condition.\nTable 5.2.3.11.1.1 identifies which conditions are supported to trigger\nTWAG-CDR charging information addition.\n\n   Table 5.2.3.11.1.1: Triggers for TWAG-CDR charging information addition\n\n|Trigger        |Description/Behaviour                                      |\n|Conditions     |                                                           |\n|QoS Change     |A change in the QoS shall result that open \"List of Traffic|\n|               |Data Volumes\" containers being closed and added to the CDR |\n|               |and new IP-CAN bearer specific container is opened.        |\n|Tariff Time    |On reaching the Tariff Time Change open \"List of Traffic   |\n|Change         |Data Volumes\" containers shall be closed and added to the  |\n|               |CDR.                                                       |\n|CDR Closure    |Open \"List of Traffic Data Volumes\" containers shall be    |\n|               |closed and added to the TWAG-CDR.                          |\n\n\nVolume container identifies the uplink/downlink volume since the closure of\nthe last container.\n\nWhen Charging Event (ACR) is triggered by table 5.2.3.11.1.1 conditions,\nthe Change-Condition sub-field associated to the added volume container,\nindicating the appropriate condition, shall be present, excluding CDR\nClosure case.\nWhen Charging Event (ACR) is triggered by CDR Closure condition, this\nChange-Condition sub-field associated to the added volume container shall\nbe omitted, except when CDR closure is due to \"maximum number of charging\ncondition changes\", where it shall be present with the original condition\nchange.\n\n\n"}, {"key": "Triggers for TWAG-CDR closure", "numbering": "5.2.3.11.2", "title_level": 4, "desc": "5.2.3.11.2  Triggers for TWAG-CDR closure\n\nThe TWAG-CDR shall be closed on encountering some trigger conditions.\nTable 5.2.3.11.2.1 identifies which conditions are supported to permit\nclosure of the TWAG-CDR.\n\n              Table 5.2.3.11.2.1: Triggers for TWAG-CDR closure\n\n|Closure Conditions |Description/Behaviour                                  |\n|End of IP-CAN      |Deactivation of the IP-CAN bearer in the TWAG shall    |\n|bearer within the  |result in the CDR being closed. The trigger condition  |\n|TWAG               |covers:                                                |\n|                   |- termination of IP-CAN bearer;                        |\n|                   |- any abnormal release;                                |\n|                   |-    inter serving node change.                        |\n|Partial Record     |OAM&P reasons permit the closure of the CDR for        |\n|Reason             |internal reasons.                                      |\n|                   |The trigger condition covers:                          |\n|                   |- data volume limit;                                   |\n|                   |- time (duration) limit;                               |\n|                   |- maximum number of charging condition changes         |\n|                   |(QoS/tariff time change);                              |\n|                   |- management intervention;                             |\n\n\nThe Partial Record generation trigger thresholds are those associated with\nthe Charging Characteristics.\nThe Partial Record generation trigger thresholds are TWAG configuration\nparameters defined per Charging Characteristics profile by the operator\nthrough OAM&P means, as specified in annex A.\n\nIn the event that the TWAG-CDR is closed and the IP-CAN bearer remains\nactive, a further TWAG-CDR is opened with an incremented Sequence Number in\nthe TWAG.\n\nWhen Charging Event (ACR) is triggered by table 5.2.3.11.2.1 conditions,\nthe Change-Condition (at PS information level) associated to the CDR\nClosure, indicating the appropriate condition shall be present, and it\nshall be omitted otherwise.\n\n\n\n\n"}, {"key": "Void", "numbering": "5.2.4", "title_level": 2, "desc": "5.2.4  Void\n\n\n"}, {"key": "Ga record transfer flows", "numbering": "5.2.5", "title_level": 2, "desc": "5.2.5  Ga record transfer flows\n\nIn EPC, both fully qualified partial CDRs (FQPC) and reduced partial CDRs\n(RPC), as specified in TS 32.240 [1] may be supported on the Ga interface.\nIn line with TS 32.240 [13], the support of FQPCs is mandatory, the support\nof RPCs is optional. For further details on the Ga protocol application\nrefer to TS 32.295 [54].\n\n\n"}, {"key": "Bp CDR file transfer", "numbering": "5.2.6", "title_level": 2, "desc": "5.2.6  Bp CDR file transfer\n\nIn EPC, both fully qualified partial CDRs (FQPC) and reduced partial CDRs\n(RPC), as specified in TS 32.240 [1] may be supported on the Bp interface.\nIn line with TS 32.240 [13], the support of FQPCs is mandatory, the support\nof RPCs is optional. For further details on the Bp protocol application\nrefer to TS 32.297 [52].\n\n\n\n\n\n"}, {"key": "PS domain online charging scenarios", "numbering": "5.3", "title_level": 1, "desc": "         5.3  PS domain online charging scenarios\n\n\n"}, {"key": "Basic principles", "numbering": "5.3.1", "title_level": 2, "desc": "5.3.1  Basic principles\n\n\n"}, {"key": "General", "numbering": "5.3.1.0", "title_level": 3, "desc": "5.3.1.0  General\n\nPS domain online charging may be performed in the SGSN using CAMEL\ntechniques.\nThis functionality is specified in TS 23.078 [206] and TS 29.078 [202] and\nis outside the scope of the present document.\n\nPS domain online charging may be performed by the PCEF in the P-GW and by\nthe TDF using the common Ro based Credit-Control application specified in\nTS 32.299 [50]. In order to provide the data required for the management\nactivities outlined in TS 32.240 [1] (Credit-Control, accounting,\nstatistics etc.), the PCEF shall be able to perform online charging for\neach of the following:\n\n  -  Charging data related to IP-CAN bearers;\n\n  -  Charging data related to service data flows.\n\nThe above items both pertain to sessions (IP-CAN bearers), hence session\nbased online charging (SCUR) with centralized rating and centralized unit\ndetermination is required in the PCEF.\n\nThe TDF shall be able to perform online charging each of the following:\n\n  -  Charging data related to TDF session;\n\n  -  Charging data related to detected application traffic.\n\nThe above items pertain to sessions (application traffic), hence SCUR is\nrequired in the TDF with centralized or decentralized unit determination\nand centralized rating.\n\nThe Debit / Reserve Units Request and Debit / Reserve Units Response\nspecified for SCUR in TS\u00a032.299 [50] (initial/update/termination) are\nissued towards the OCS / received from the OCS when certain conditions\n(chargeable events) are met. The PS domain specific contents and purpose of\neach of these messages, as well as the chargeable events that trigger them,\nare described in the following sub-clauses. A detailed formal description\nof the online charging parameters defined in the present document is to be\nfound in TS\u00a032.299 [50]. Further information on the general principles of\nthe common 3GPP online charging application can also be found in TS 32.299\n[50] and TS\u00a032.240 [1].\n\nThe Credit-Control is always per rating group but the reporting level can\nbe either per rating group or per combination of the rating group and\nservice id. Reporting level is defined per PCC rule in case of PCEF\nintegrated in the P-GW or per ADC rule in case of TDF.In order to avoid\nthat charging sessions remain inactive for a long period of time, the PCEF\nor OCS may terminate the online charging session under the condition that\nno granted quota has been consumed for a certain period of time. The PCEF\nstarts a new online charging session when there is a need for new quota,\nfor the same IP-CAN bearer or IP-CAN session, and the same Charging id as\nthe initial session shall be used.\n\n\n"}, {"key": "IP-CAN bearer charging", "numbering": "5.3.1.1", "title_level": 3, "desc": "5.3.1.1  IP-CAN bearer charging\n\nIP-CAN bearer online charging is achieved by FBC online charging, see\nclause 5.3.1.2. When the IP-CAN bearer is online charged by means of FBC,\nthe quota handling shall also be based on the use of a Rating Group/Service\nIdentifier.\nThe value of this IP-CAN bearer specific Rating Group/Service Identifier\nshall be vendor specific.\n\nThe amount of data counted with IP-CAN bearer specific Rating Group/Service\nIdentifier shall be based on:\n\n  -  In case of GTP based tunnelling and nterworking with external IP\n    networks: the inner IP packets in the GTP-U packet (T-PDU, see TS\n    29.281 [217]).\n\n  -  In case of GTP based tunnelling and interworking with external\n    networks handling other data services (e.g. non-IP, PPP): the T-PDU\n    packets (see TS 29.281 [217]).\n\n  -  In case of PMIP based protocol: the payload of the GRE tunnel.\n\n  -  In case of DSMIPv6 based protocol: the payload of the tunnelling\n    layer.\n\nAs minimum behaviour, the full payload shall be included. Time metering is\nstarted when IP-CAN bearer is activated.\n\n  NOTE 1:  P-GW is aware of bearers in case of GTP based connectivity. In\n         case of any other PMIP based connectivity, P-GW is aware of IP-CAN\n         sessions only. If P-GW is not aware of IP-CAN bearers, P-GW\n         collects charging information per IP-CAN session as it would be\n         just one IP-CAN bearer.\n\n  NOTE 2:  The control plane IP address of SGSN or P-GW (acting as GGSN) is\n         the IP address used at Gn/Gp interface.\n\n     The control plane IP address of  S-GW or P-GW is the IP address used\n         at S5/S8 interface.\n         The control plane IP address of ePDG or P-GW is the IP address used\n         at S2b interface.\n\n         The control plane IP address of TWAG or P-GW is the IP address used\n                at S2a interface.\n\n\n\n\n"}, {"key": "Flow Based bearer Charging", "numbering": "5.3.1.2", "title_level": 3, "desc": "5.3.1.2  Flow Based bearer Charging\n\nIP-CAN bearer charging allows the P-GW to collect charging information\nrelated to data volumes sent to and received by the UE/MS, categorised by\nthe QoS applied to the IP-CAN bearer. FBC is supported by the P-GW by the\nintegrated PCEF. When the PCEF is present, the normal IP-CAN bearer\ncharging is enhanced by the capability to categorise the service data flows\nwithin IP-CAN bearer data traffic by rating group or combination of the\nrating group and service id. I.e., while there is only one uplink and one\ndownlink data volume count per IP-CAN bearer in IP-CAN bearer charging, FBC\nmay provide one count per each rating group or combination of the rating\ngroup and service id. The level of the reporting is defined per PCC rule.\nDetails of this functionality are specified in TS\u00a023.203 [215] and TS\n32.240 [1].\n\n  NOTE:  The P-GW can only include one QoS Information occurrence per\n         Multiple Unit Operation.\n         This implies if an operator wishes to be able to separate usage\n         according to QCI and ARP within their charging system they will\n         need to ensure that services having different QCI and ARP do not\n         have the same:\n\n         -  rating group in cases where rating reporting is used;\n\n         -  rating group/service id where rating group/service id reporting\n           is used.\n\nExtended packet inspection can be done in the PCEF with pre-defined PCC\nrules. The PCEF also have the possibility to output service specific\ninformation related to the packet inspection in the online charging\ninformation.\n\nAn Application Function (AF) may provide an external charging identifier to\nbe delivered to the PCEF by the PCRF with a dynamic PCC rule. The PCEF\nincludes this AF correlation information in the online charging information\nfor the rating group and service identifier associated with the dynamic PCC\nrule when service identifier level reporting is requested.\n\nThe capability of P-GW to support ABC is achieved with PCRF providing\nappropriate PCC Rules to the P-GW. Such PCC Rule shall be defined with\nservice data flow template including an Application Identifier for the\napplication which needs to be detected, enforced and charged.\n\nAccording to TS 23.203 [215], FBC shall support different charging models\nper PCC rule. These charging models may be based on volume and/or time and\non number of events matching a specific service data flow template in PCC\nrule.\nIn general the charging of a service data flow shall be linked to the IP-\nCAN bearer under which the service data flow has been activated.  In online\ncharging the PCEF shall request the reservation of units  prior to service\ndelivery.\n\nThe following chargeable events are defined for FBC when online charging is\nactivated:\n\n  -  Network request for IP-CAN bearer activation before the Initiate IP-\n    CAN bearer Activation message is sent. Associated with the network\n    requested dedicated IP-CAN bearer activation procedure, as defined in\n    TS 23.203 [215] and TS 23.060 [201], upon encountering this event, a\n    Debit / Reserve Units Request[Initial], indicating the request for\n    activation of dedicated IP-CAN bearer is sent toward the OCS. For\n    network requested dedicated IP-CAN bearer activation, if known by the\n    PCEF, the PCEF may provide status of UE presence in Presence Reporting\n    Area(s).\n\n  -  Start of IP-CAN bearer. Upon encountering this event, a Debit /\n    Reserve Units Request[Initial], indicating the start of the IP-CAN\n    bearer, is sent towards the OCS to authorize the IP-CAN bearer. For\n    network requested dedicated IP-CAN bearer activation, this event\n    triggers a Debit / Reserve Units Request[Update], when the PCEF\n    receives an Update PDP Context Request message with the RAN Procedures\n    Ready flag. If known by the PCEF, the PCEF may provide status of UE\n    presence in Presence Reporting Area(s). PCEF may request quota later\n    when service usage is started.\n\n  -  Start of service data flow. In case valid quota does not exist a Debit\n    / Reserve Units Request[Update] is generated to request quota. In case\n    charging session does not exist, the request is a Debit/ Reserve Units\n    Request[Initial] sent towards the OCS.\n    The type of requested quota shall depend on measurement method\n    configured for the PCC rule in case of decentralized unit\n    determination. When event based charging applies, the first occurrence\n    of an event matching a service data flow template in PCC rule shall be\n    considered as the start of a service.\n\n  -  Termination of service data flow. If reporting is per rating group and\n    this is the last service data flow utilizing that specific rating group\n    or if reporting is per combination of the rating group and service id\n    and this is the last service data flow utilizing that specific rating\n    group and service id, the required counters are updated.\n    Termination of the service data flow itself does not trigger Debit /\n    Reserve Units Request[Update].\n\n  -- Access of a multi-access PDN connection becomes unusable: the\n    Termination of service data flow chargeable event applies for all the\n    service data flows carried under the IP-CAN bearer of the unusable\n    access.\n\n  -  Access of a multi-access PDN connection becomes usable: the Start of\n    service data flow chargeable event applies for all the service data\n    flows carried under the IP-CAN bearer of the access that has become\n    usable.\n\n  -  Expiry of Unused Quota timer for the charging session in PCEF, a Debit\n    / Reserve Units Request[Terminate] is sent to OCS indicating that\n    charging session is terminated, and the IP-CAN bearer is still active.\n    In this case the OCS shall allow for a new session to be started with\n    the same Charging Id.\n\n  -  End of IP-CAN bearer. Upon encountering this event, a Debit / Reserve\n    Units Request[Terminate], indicating the end of the IP-CAN bearer, is\n    sent towards the OCS together with the final counts.\n\n  -  Ro specific chargeable events (e.g. threshold reached, QHT expires,\n    quota exhaustion, validity time reached, forced re-authorization).\n    Corresponding counts for the rating group(s) are closed and Debit /\n    Reserve Units Request[Update] is triggered according the rules defined\n    in TS 32.299 [50].\n\n  -  Change of charging condition: E.g. QoS change, user location change,\n    user CSG information change, change of UE presence in Presence\n    Reporting Area(s), change of 3GPP PS Data Off status, Serving PLMN Rate\n    Control change, and APN Rate Control change.\n    When this event is encountered and the corresponding re-authorization\n    trigger is armed, all current counts are captured and sent towards the\n    OCS with a Debit / Reserve Units Request[Update].\n\n  -  Tariff time change. When this event is encountered, all current counts\n    are captured and a new counts are started. The counts are sent to the\n    OCS in next Debit / Reserve Units Request.\n\nManagement intervention may also force trigger a chargeable event.\n\nIf the PCEF supports the Unused Quota timer it may send its locally\nconfigured value to the OCS. The OCS may in this case respond with a new\nvalue of the Unused Quota timer to the PCEF, to be used instead of the PCEF\nconfigured value.\n\nPCC rules can be activated, deactivated and modified any time during the IP-\nCAN bearer lifetime. PCC rule activation, deactivation and modification are\nnot chargeable events. However these PCC rule changes may lead to \"start of\nservice data flow\" and \"termination of service data flow\" chargeable\nevents.\n\nAccording to TS 23.203 [215] , the PCRF can modify the following charging\ninformation in a dynamic PCC rule which is active in the PCEF: Charging\nkey, Service identifier, Measurement method, Service identifier level\nreporting. The PCRF can also modify the allowed access type in the case of\nNBIFOM.\nChange of Charging key, ServiceIdentifier, IP-CAN type,  measurement method\nor allowed access type will trigger a \"start of service data flow\"\nchargeable event when valid quota does not exist corresponding to that\nchanged PCC rule. Change of Charging key, Service Identifier, IP-CAN type,\nmeasurement method,  Service identifier level reporting or allowed access\ntype will trigger a\"termination of service data flow'\" chargeable event\nwhen this is the last service data flow utilizing the quota used for the\noriginal PCC rule.\n\nFor non-IP type PDN connection in the P-GW:\n\n  -  non-3GPP access types are not supported, multi-access PDN connections\n    do not apply;\n\n  -  A single PCC Rule is used with the service data flow descriptor\n    matching the whole non-IP data traffic, and can contain e.g.:\n\n    -  service data flow template matching all the packets;\n\n    -  charging method to identify whether online/offline/both/neither\n       charging interface is used;\n\n    -  measurement method to identify whether time/volume/events are\n       measured for this service data flow;\n\n    -  Charging key (i.e. rating group) for that service data flow;\n\n    -  service identifier for that service data flow,\n\n    -  reporting level for that service data flow:\n\n       -  rating group level in case a specific rating group is used for non-\n         IP traffic charging.\n\n       -  combination of the rating group and service id in case a specific\n         rating group/service Id is used for non-IP traffic charging.\n\n\n\n\n\n"}, {"key": "PS Furnish Charging Information procedure", "numbering": "5.3.1.3", "title_level": 3, "desc": "           5.3.1.3  PS Furnish Charging Information procedure\n\nThe OCS online charging function may use this procedure to add online\ncharging session specific information to the PGW-CDR and to the TDF-CDR.\nThe information can be sent per online session and in case FBC is enabled\nfor a specific APN, or ABC is enabled in case of the TDF, the OCS online\ncharging function may also send specific information per each online\ncharged service by means of this procedure.\n\n\n"}, {"key": "Support of Failure Situations", "numbering": "5.3.1.4", "title_level": 3, "desc": "5.3.1.4  Support of Failure Situations\n\nIn case the OCS fails, the P-GW and the TDF shall support the Failure\nHandling procedure and Failover mechanism described in TS 32.299 [50].\nThese mechanisms give flexibility to have different failure handling\nscenarios when the OCS fails.\n\nThree different actions are described in RFC 4006 [402].\n\nP-GW shall support the following actions when the failure handling\nmechanism is executed:\n\n  -  Terminate: The online session is finished. The associated IP-CAN\n    bearer session is released (ongoing sessions) or not established (new\n    sessions). Failover for ongoing sessions is not supported. Failover for\n    new sessions is always supported.\n\n  -  Retry&Terminate: The online session is finished. The associated IP-CAN\n    bearer session is released (ongoing sessions) or not established (new\n    sessions). Failover for ongoing sessions is supported. Failover for new\n    sessions is always supported.\n\n  -  Continue: The online session is finished. The associated IP-CAN bearer\n    session is established (new sessions) or not released (ongoing\n    sessions). Failover for ongoing sessions is supported. Failover for new\n    sessions is always supported.\n\nTDF shall support the following actions when the failure handling mechanism\nis based on the directives received previously from the OCS:\n\n  -  Terminate: This is the default behaviour. The TDF indicates to the\n    PCRF that the charging session was terminated and the OCS does not\n    allow the service to continue. The PCRF determines whether to continue\n    or terminate the associated TDF session.\n\n  -  Retry&Terminate: If the OCS and TDF support failover procedures and\n    there is an alternate OCS available , the TDF shall attempt to failover\n    to an alternative OCS. Otherwise, the TDF indicates to the PCRF that\n    the charging session was terminated and the OCS does not allow the\n    service to continue. The PCRF determines whether to continue or\n    terminate the associated TDF session.\n\n  -  Continue: If the OCS and TDF support failover procedures and there is\n    an alternate OCS available , the TDF shall attempt to failover to an\n    alternative OCS. Otherwise, the TDF indicates to the PCRF that the\n    charging session was terminated and the OCS allows the service to\n    continue. The PCRF determines whether to continue or terminate the\n    associated TDF session.\n\nIf the user is simultaneously online and offline charged, the failure\nsituation shall be registered in the PGW-CDR/TDF-CDR. When the user is only\nonline charged, the execution of the Failure Handling mechanism with value\nequal to Continue shall imply that a new PGW-CDR/TDF-CDR is opened.\n\n\n\n"}, {"key": "Application Based Charging (ABC)", "numbering": "5.3.1.5", "title_level": 3, "desc": "           5.3.1.5  Application Based Charging (ABC)\n\n\n"}, {"key": "Introduction", "numbering": "5.3.1.5.0", "title_level": 4, "desc": "5.3.1.5.0   Introduction\n\nFor the sub-clauses that follow, a single Debit / Reserve Units  session is\ndefined to handle both TDF session and application based charging\ninformation when both are to be used. Either TDF session charging or ABC\nbut not both may be active as determined by Charging Characteristics.\n\nFor ABC the opening and closing of the Debit / Reserve Units session is\nbound by the TDF session start and end respectively.\n\n\n"}, {"key": "Charging per application", "numbering": "5.3.1.5.1", "title_level": 4, "desc": "5.3.1.5.1   Charging per application\n\nABC allows collecting charging information related to data volumes sent to\nand received by the UE/MS, based on the application detection. ABC\nsupported by the TDF, i.e. ADC rules based charging defined in TS 23.203\n[215] and TS 29.212 [216], is based on ADC rules. The application traffic\nwithin TDF session is categorised by rating group or combination of the\nrating group and service identifier. The level of the reporting is defined\nper ADC rule. Details of this functionality are specified in TS\u00a023.203\n[215] and TS 32.240 [1].\n\n  NOTE:  ABC is supported by the P-GW embedding PCEF enhanced with\n         application detection and control functionality as defined in TS\n         23.203 [215], by mean of appropriate PCC Rules, and therefore\n         specified under FBC clause 5.3.1.2 and clause 5.3.1.6.2.\n\nAccording to TS 23.203 [215], ABC shall support different charging models\nper ADC rule. These charging models may be based on volume and/or time or\non number of events as the application referred by either application\nidentifier or service data flow filters to identify the packets belonging\nto an application in ADC rule. In online charging the TDF shall request the\nreservation of units prior to service delivery.\n\nThe following chargeable events are defined for ABC when online charging is\nactivated:\n\n  -  Start of TDF session. Upon encountering this event, a Debit / Reserve\n    Units Request[Initial]  indicating the establishment of the TDF\n    session, is sent towards the OCS to activate the online charging\n    session with the TDF. The quota for each activated ADC rule may be\n    requested in such Debit / Reserve Units Request[Initial]  or later when\n    application traffic is detected .\n\n  -  Start of application traffic. In case valid quota does not exist for\n    the rating group, a Debit / Reserve Units Request[Update]  is generated\n    to request quota. The type of requested quota shall depend on\n    measurement method configured for the ADC rule in case of decentralized\n    unit determination. When event based charging applies, the first\n    occurrence of an event detected according to the pre-defined ADC rule\n    shall be considered as the start of a application.\n\n  -  Termination of application traffic. If reporting is per rating group\n    and this is the last application traffic utilizing that specific rating\n    group or if reporting is per combination of the rating group and\n    service identifier and this is the last application traffic utilizing\n    that specific rating group and service identifier, the required\n    counters are updated.\n\n  -  End of TDF session in the TDF. Upon encountering this event, a Debit /\n    Reserve Units Request[Terminate], indicating the end of the TDF\n    session, is sent towards the OCS together with the final counts.\n\n  -  Ro specific chargeable events (e.g. threshold reached, QHT expires,\n    quota exhaustion, validity time reached, forced re-authorization).\n    Corresponding counts for the rating group(s) are closed and Debit /\n    Reserve Units Request[Update]  is triggered according the rules defined\n    in TS 32.299 [50].\n\n  -  Change of charging condition: e.g. user location change, user CSG\n    information change. When this event is encountered and the\n    corresponding re-authorization trigger is armed, all current counts are\n    captured and sent towards the OCS with a Debit / Reserve Units\n    Request[Update].\n\n  -  Tariff time change. When this event is encountered, all current counts\n    are captured and a new counts are started. The counts are sent to the\n    OCS in next Debit / Reserve Units Request.\n\nManagement intervention may also force trigger a chargeable event.\n\nADC rules can be activated, deactivated and modified any time during the\nTDF session lifetime. ADC rules activation, deactivation and modification\nare not chargeable events. However these ADC rules changes may lead to\n\"start of application traffic'\" and \"termination of application traffic'\"\nchargeable events.\n\nApplication Detection and Control rule can contain e.g.:\n\n  -  Application Identifier to identify detected application or service\n    data flow filters to identify the packets belonging to an application,\n\n  -  charging method to identify whether online/offline/both/neither\n    charging interface is used,\n\n  -  measurement method for online/offline charging to identify whether\n    time/volume/events are measured for this application,\n\n  -  Charging key (i.e. rating group) for that application,\n\n  -  service identifier for that application,\n\n  -  reporting level for the application (rating group or combination of\n    the rating group and service id),\n\n  -  precedence to the situations where two or more ADC rules are\n    overlapping.\n\nApplication Detection and Control rule can be:\n\n  - pre-defined in TDF  (can be activated by the PCRF) or,\n\n  - dynamically provisioned and activated by the PCRF over the Sd\n    interface.\n\nThis is specified in TS 23.203 [215] and TS 29.212 [216].\n\n\nAccording to TS 23.203 [215] , the PCRF can modify the following charging\ninformation in a dynamic ADC rule which is active in the TDF: Charging key,\nService identifier, Measurement method, Service identifier level reporting.\nChange of Charging key, Service Identifier, or measurement method will\ntrigger a \"start of application traffic'\" chargeable event when valid quota\ndoes not exist. Change of Charging key, Service Identifier or measurement\nmethod, or Service identifier level reporting will trigger a\"termination of\napplication traffic'\" chargeable event when this is the last application\ntraffic utilizing the quota used for the Charging key or combination of\nCharging key and Service identifier of original ADC rule.\n\n\n"}, {"key": "Charging per TDF session", "numbering": "5.3.1.5.2", "title_level": 4, "desc": "5.3.1.5.2   Charging per TDF session\n\nTDF session online charging is achieved by ABC online charging such that\nthe quota handling for the TDF session shall be based on associating  a\nspecific Rating Group/Service Identifier with the TDF session . The value\nof this TDF session specific Rating Group/Service Identifier shall be\nvendor specific.\n\nThe amount of data counted with TDF session specific Rating Group/Service\nIdentifier shall be the user plane payload. Time metering is started when\nTDF session is activated.\n\n\n\n"}, {"key": "Charging per IP-CAN session", "numbering": "5.3.1.6", "title_level": 3, "desc": "           5.3.1.6  Charging per IP-CAN session\n\n\n"}, {"key": "General", "numbering": "5.3.1.6.0", "title_level": 4, "desc": "5.3.1.6.0   General\n\nCharging per IP-CAN session is an optional capability in the P-GW that\nprovides for a consolidated view of the service data flow charging\ninformation across all bearers in the IP-CAN session. When charging per IP-\nCAN session is active, the basic principles in this clause apply to the P-\nGW instead of the principles in clause 5.3.1.1 and clause 5.3.1.2 above.\n\nFor the sub-clauses that follow, a single Debit / Reserve Units session is\ndefined to handle both types of charging information when both are to be\nused. When Charging per IP-CAN session is active, either IP-CAN bearer\ncharging or FBC but not both may be active as determined by Charging\nCharacteristics.\n\n\n"}, {"key": "IP-CAN bearer charging", "numbering": "5.3.1.6.1", "title_level": 4, "desc": "5.3.1.6.1   IP-CAN bearer charging\n\nIP-CAN bearer online charging is achieved by FBC online charging, see\nclause 5.3.1.6.2. When the IP-CAN session is online charged by means of\nFBC, the quota handling shall also be based on the use of a Rating Group.\nThe value of this IP-CAN bearer specific Rating Group or combination of the\nRating Group and Service Identifier shall be vendor specific.\n\nThe amount of data counted with IP-CAN bearer specific Rating Group/Service\nIdentifier shall be based on:\n\n  -  In case of GTP based tunnelling and interworking with external IP\n    networks: the inner IP packets in the GTP-U packet (T-PDU, see TS\n    29.281 [217])\n\n  -  In case of GTP based tunnelling and interworking with external\n    networks handling other data services (e.g. non-IP, PPP): the T-PDU\n    packets (see TS 29.281 [217])\n\n  -  In case of PMIP based protocol: the payload of the GRE tunnel\n\n  -  In case of DSMIPv6 based protocol: the payload of the tunnelling layer\n\nAs minimum behaviour, the full payload shall be included. Time metering is\nstarted when IP-CAN session is activated.\nAll bearers in the IP-CAN session are included in the single vendor-\nspecific Rating Group/Service Identifier.\n\n  NOTE 1:  P-GW is aware of bearers in case of GTP based connectivity. In\n         case of any other PMIP based connectivity, P-GW is aware of IP-CAN\n         sessions only. If P-GW is not aware of IP-CAN bearers, P-GW\n         collects charging information per IP-CAN session as it would be\n         just one IP-CAN bearer.\n\n  NOTE 2:  The control plane IP address of SGSN or P-GW (acting as GGSN) is\n         the IP address used at Gn/Gp interface.\n         The control plane IP address of S-GW or P-GW is the IP address used\n         at S5/S8 interface.\n         The control plane IP address of ePDG or P-GW is the IP address used\n         at S2b interface.\n         The control plane IP address of TWAG or P-GW is the IP address used\n         at S2a interface.\n\n  NOTE 3:  The vendor-specific Rating Group/Service Identifier may be\n         configurable through the use of a predefined PCC rule in the P-GW.\n\n\n"}, {"key": "Flow Based Charging (FBC)", "numbering": "5.3.1.6.2", "title_level": 4, "desc": "5.3.1.6.2   Flow Based Charging (FBC)\n\nFBC is supported by the P-GW by the integration of a PCEF. With PCEF,\ncharging is enhanced by the capability to categorise the service data flows\nwithin IP-CAN session data traffic by rating group or combination of the\nrating group and service id. For online charging, FBC provides credit\nmanagement for each rating group and may provide reporting (i.e., counts)\nper each rating group or combination of the rating group and service id.\nThe level of the reporting is defined per PCC rule. Details of this\nfunctionality are specified in TS\u00a023.203 [215] and TS 32.240 [1].\n\n  NOTE 1:  Even though an individual service data flow template is bound to\n         a specific IP-CAN bearer, the assigned rating group or combination\n         of rating group and service id applies to the entire IP-CAN\n         session.\n         As a result, data traffic from multiple bearers can be included in\n         the count maintained for the rating group or combination of the\n         rating group and service id. This implies if an operator wishes to\n         be able to separate usage according to IP-CAN bearer within their\n         charging system they will need to ensure that services having\n         different QCI and ARP do not have the same:\n\n         -  rating group in cases where rating group reporting is used;\n\n         -  rating group/service id where rating group/service id reporting\n           is used.\n\n  NOTE 2:  The P-GW can only include one QoS Information occurrence per\n         Multiple Unit Operation.\n         This implies if an operator wishes to be able to separate usage\n         according to QCI and ARP within their charging system they will\n         need to ensure that services having different QCI and ARP do not\n         have the same:\n\n         -  rating group in cases where rating group reporting is used;\n\n         -  rating group/service id where rating group/service id reporting\n           is used.\n\n  NOTE 2a: The P-GW can only include one RAT type per service data\n         container.\n         This implies if an operator wishes to be able to separate usage\n         according to RAT type within their billing system they will need to\n         ensure that services having different RAT type do not have the\n         same:\n\n         -  rating group in cases where rating group reporting is used;\n\n         -  rating group/service id where rating group/service id reporting\n           is used.\n\nExtended packet inspection can be done in the PCEF with pre-defined PCC\nrules. The PCEF also have the possibility to output service specific\ninformation related to the packet inspection in the online charging\ninformation.\n\nThe capability of P-GW to support ABC is achieved with PCRF providing\nappropriate PCC Rules to the P-GW. Such PCC Rule shall be defined with\nservice data flow template including an Application Identifier for the\napplication which needs to be detected, enforced and charged.\n\nAccording to TS 23.203 [215], FBC shall support different charging models\nper PCC rule. These charging models may be based on volume and/or time and\non number of events matching a specific service data flow template in PCC\nrule.\nIn online charging the PCEF shall request the reservation of units  prior\nto service delivery.\n\nThe following chargeable events are defined for FBC when online charging\nand Charging per IP-CAN session is activated:\n\n  -  Start of IP-CAN session. Upon encountering this event, a Debit /\n    Reserve Units Request[Initial], indicating the start of the IP-CAN\n    session, is sent towards the OCS to authorize the IP-CAN session. PCEF\n    may request quota later when service usage is started.\n\n  -  Start of service data flow. If no valid quota has been granted for the\n    rating group, a Debit / Reserve UnitsRequest[Update]  is generated to\n    request quota. In case charging session does not exist, the request is\n    a Debit / Reserve Units Request[Initial] sent towards the OCS. The type\n    of requested quota shall depend on measurement method configured for\n    the PCC rule in case of decentralized unit determination. When event\n    based charging applies, the first occurrence of an event matching a\n    service data flow template in PCC rule shall be considered as the start\n    of a service.\n\n  -  Access change of service data flow.\n    If service identifier level reporting is required by the PCC rule and\n    all service data flows for this combination of the rating group and\n    service id are changing from one access to another, or if rating group\n    level reporting is required by the PCC rule and all service data flows\n    for this rating group are changing from one access to another,\n    corresponding counts are closed and Debit / Reserve Units\n    Request[Update] is triggered.\n\n  -  Termination of service data flow. If reporting is per rating group and\n    this is the last service data flow utilizing that specific rating group\n    or if reporting is per combination of the rating group and service id\n    and this is the last service data flow utilizing that specific rating\n    group and service id, the required counters are updated. Termination of\n    the service data flow itself does not trigger Debit / Reserve Units\n    Request[Update].\n\n  -  Expiry of Unused Quota timer for the charging session in PCEF, a Debit\n    / Reserve Units Request[Terminate] is sent to OCS indicating that\n    charging session is terminated, and the IP-CAN bearer is still active.\n    In this case the OCS shall allow for a new session to be started with\n    the same Charging Id.\n\n  -  End of IP-CAN session. Upon encountering this event, a Debit / Reserve\n    Units Request[Terminate], indicating the end of the IP-CAN session, is\n    sent towards the OCS together with the final counts.\n\n  -  Ro specific chargeable events (e.g. threshold reached, QHT expires,\n    quota exhaustion, validity time reached, forced re-authorization).\n    Corresponding counts for the rating group(s) are closed and Debit /\n    Reserve Units Request[Update] is triggered according the rules defined\n    in TS 32.299 [50].\n\n  -  Change of charging condition specific to APN-AMBR change: When this\n    event is encountered and the corresponding re-authorization trigger is\n    armed, all current counts are captured and sent towards the OCS with a\n    Debit / Reserve Units Request[Update].\n\n  -  Change of charging condition other than QoS change: E.g. user location\n    change, user CSG information change, change of UE presence in Presence\n    Reporting Area(s) , change of 3GPP PS DataOff status, Serving PLMN Rate\n    Control change, APN Rate Control Change. When this event is encountered\n    and the corresponding re-authorization trigger is armed, all current\n    counts are captured and sent towards the OCS with a Debit / Reserve\n    Units Request[Update].\n    Change of charging condition other than QoS change events are\n    associated with one access of a multi-access PDN connection and all\n    counts associated with affected access are identified with the specific\n    event. All counts associated with the other access of a multi-access\n    PDN connection are identified as an indirect change of charging\n    condition.\n\n  -  Tariff time change. When this event is encountered, all current counts\n    are captured and new counts are started.\n    The counts are sent to the OCS in next Debit / Reserve Units Request.\n\nManagement intervention may also force trigger a chargeable event.\n\nIf the PCEF supports the Unused Quota timer it may send its locally\nconfigured value to the OCS. The OCS may in this case respond with a new\nvalue of the Unused Quota timer to the PCEF, to be used instead of the PCEF\nconfigured value.\n\nPCC rules can be activated, deactivated and modified any time during the IP-\nCAN session lifetime. PCC rule activation, deactivation and modification\nare not chargeable events. However these PCC rule changes may lead to\n\"start of service data flow'\" and \"termination of service data flow'\"\nchargeable events.\n\nAccording to TS\u00a023.203\u00a0[215], the PCRF can modify the following charging\ninformation in a dynamic PCC rule which is active in the PCEF: Charging\nkey, Service identifier, Measurement method, Service identifier level\nreporting. The PCRF can also modify the allowed access type in the case of\nNBIFOM.\nA change of allowed access type in the case of NBIFOM will trigger an\n\"access change for service data flow\" chargeable event when all service\ndata flows for the associated counter are changed from one access to\nanother and takes priority over change of charging information.\nChange of Charging key, ServiceIdentifier, IP-CAN type or measurement\nmethod will trigger a \"start of service data flow'\" chargeable event when\nvalid quota does not exist corresponding to that changed PCC rule. Change\nof Charging key, Service Identifier, IP-CAN type or measurement method, or\nService identifier level reporting will trigger a \"termination of service\ndata flow\" chargeable event when this is the last service data flow\nutilizing the quota used for the original PCC rule.\n\nRemoval of an access from a PDN connection is not a trigger for FBC.\nSubsequent PCC rule handling, may lead to the \"access change for a service\ndata flow\" or \"termination of service data flow\" events for the service\ndata flows that were active on the removed access.\n\nFor non-IP type PDN connection:\n\n  -  non-3GPP access types are not supported;\n\n  -  multi-access PDN connections do not apply;\n\n  -  A single PCC Rule is used with the service data flow descriptor\n    matching the whole non-IP data traffic, and can contain e.g.:\n\n    -  service data flow template matching all the packets;\n\n    -  charging method to identify whether online/offline/both/neither\n       charging interface is used;\n\n    -  measurement method for offline charging to identify whether\n       time/data volume/events are measured for this service data flow;\n\n    -  Charging key (i.e. rating group) for that service data flow;\n\n    -  service identifier for that service data flow;\n\n    -  reporting level for that service data flow:\n\n       -  rating group level in case a specific rating group is used for non-\n         IP traffic charging;\n\n       -  combination of the rating group and service id in case a specific\n         rating group/service Id is used for non-IP traffic charging.\n\n\n\n\n"}, {"key": "Sponsored data connectivity charging", "numbering": "5.3.1.7", "title_level": 3, "desc": "5.3.1.7  Sponsored data connectivity charging\n\nAccording to TS 23.203 [215] two deployment scenarios exist for sponsored\ndata connectivity. The Sponsor Identifier and Application Service Provider\nIdentifier are provided for sponsored services to the PCRF from the AF over\nthe Rx interface.\n\nIn the first scenario, the PCRF assigns a service specific Charging Key\n(i.e. rating group) for a sponsored IP flow. The Charging Key is used by\nthe PCEF to collect charging information for online charging scenarios for\nthe sponsored flows on which the quota allocation in OCS shall be based.\nCorrelation of charging information for online charging from multiple users\nper sponsor and/or application service provider is then performed using the\nCharging Key.\n\nThe second scenario utilizing explicit reporting of the Sponsor Identity\nand Application Service Provider Identity for online charging from PCEF has\nnot been specified in this release of the specification.\n\n\n"}, {"key": "Network-Based IP Flow Mobility (NBIFOM) charging", "numbering": "5.3.1.8", "title_level": 3, "desc": "5.3.1.8  Network-Based IP Flow Mobility (NBIFOM) charging\n\nTo support Network-Based IP Flow Mobility (NBIFOM), multi-radio (i.e. 3GPP\nand WLAN) capable UEs establish and maintain a PDN connection over both\n3GPP access and WLAN access simultaneously for both S2b and S2a\nconnectivity, as specified in TS 23.161 [242]. When such a multi-access PDN\nconnection is established, there is one default bearer for each access. On\na multi-access PDN connection established over both 3GPP access and WLAN\naccess, it is possible to move individual IP flows from one access network\nto another, when policies determine that flows should be moved and the\ntarget access is available for the UE. As described in TS 23.203 [215], it\nshall be possible to apply different rates depending on the access used to\ncarry a service data flow.\n\nFor a multi-access PDN connection, IP-CAN bearer charging as defined in\nclause 5.3.1.1 and FBC as defined in clause 5.3.1.2 apply for each bearer\nunder each access for this PDN connection, and IP-CAN bearer charging as\ndefined in clause 5.3.1.6.1 and FBC as defined in clause 6.3.1.6.2 apply\nwhen charging per IP-CAN session is active for this PDN connection, based\non:\n\n  -  Establishment of a multi-access PDN connection and addition of access\n    to a multi-access PDN connection result in the default bearer and\n    potential dedicated bearer(s) creation for this access, to carry the\n    service data flows based on PCC Rule(s).\n\n  -  Release of a multi-access PDN connection and removal of an access from\n    a multi-access PDN connection result in release of all the IP-CAN\n    bearer(s) for this access.\n\n  -  Access change for service data flow(s), results in corresponding PCC\n    Rule(s) removed from the IP-CAN bearer(s) of the source access, and PCC\n    Rule(s) installed into the IP-CAN bearer(s) of the target access.\n\n  -  Access of a multi-access PDN connection becomes unusable: for the\n    service data flows maintained as result from PCC Rules decision, under\n    the IP-CAN bearer that becomes unusable, no traffic will be detected.\n\n  -  Access of a multi-access PDN connection becomes usable: for the\n    service data flows which were maintained as result from PCC Rules\n    decision under the IP-CAN bearer when detected as usable, the new\n    traffic will be counted.\n\nFor each service data flow, identified by its PCC Rule, a different access\ntype is specified where it has to be enforced. A different rating group may\nbe used as a way to apply charging differentiation per-access type. The\ncharging method, measurement method, reporting level may also potentially\nbe different, in case charging behaviour is not expected to be unified\nbetween both domains.\n\nFor the case where dynamic PCC is not deployed, per-access Charging\nCharacteristics and pre-defined  PCC Rule(s) in\nP-GW may be used as a way to apply charging differentiation.\n\n\n\n\n\n"}, {"key": "Ro message flows", "numbering": "5.3.2", "title_level": 2, "desc": "         5.3.2  Ro message flows\n\n\n"}, {"key": "General", "numbering": "5.3.2.0", "title_level": 3, "desc": "5.3.2.0  General\n\n Debit / Reserve Units Request[Initial], update and termination, as defined\nin TS 32.299 [50], are used by the P-GW/TDF to transfer the collected\ncharging information towards the OCS. Debit / Reserve Units Response is\nused by the OCS to assign quotas for the rating groups, and to instruct the\nP-GW whether to continue or terminate a service data flow(s) or IP-CAN\nbearer. Debit / Reserve Units Response is used by the OCS to assign quotas\nfor the rating groups and to instruct the TDF whether to continue or\nterminate an application's traffic.\n\nDebit / Reserve Units Response is also used to communicate to the PCEF/TDF\nfor the Termination Action, i.e. the P-GW/TDF behaviour when the user has\nconsumed the final granted units. The Termination Action is specified in TS\n32.299 [50].\n\nThe P-GW and TDF uses Charging Characteristics profile to determine whether\nto activate or deactivate online charging. Further details of this\nfunctionality, including the mechanism of conveying the Charging\nCharacteristics data item (HLR -> SGSN -> P-GW, or HSS->MME/S4-SGSN ->S-GW-\n>P-GW, AAA -> ePDG -> P-GW, or AAA -> TWAG -> P-GW and then in case of TDF,\nP-GW -> PCRF -> TDF), are specified in annex A.\n\nThe following clauses describe the trigger conditions for the chargeable\nevents described in clauses 5.3.1.1, 5.3.1.2, 5.3.1.5 and 5.3.1.6. In FBC\nand ABC online charging, these chargeable events correspond to the triggers\nfor collection of charging information and Debit / Reserve Units Request\nemission towards the OCS.\nThe responses from the OCS and the detailed behaviour of the PCEF/TDF upon\nreceiving those responses are also specified in the sub-clauses below.\n\n\n"}, {"key": "Triggers for IP-CAN bearer online charging", "numbering": "5.3.2.1", "title_level": 3, "desc": "5.3.2.1  Triggers for IP-CAN bearer online charging\n\nIP-CAN bearer online charging is achieved by FBC online charging, see\nclause 5.3.2.2 below.\n\n\n"}, {"key": "Void", "numbering": "5.3.2.1.1", "title_level": 4, "desc": "5.3.2.1.1   Void\n\n\n"}, {"key": "Void", "numbering": "5.3.2.1.2", "title_level": 4, "desc": "5.3.2.1.2   Void\n\n\n\n"}, {"key": "Triggers for FBC online charging", "numbering": "5.3.2.2", "title_level": 3, "desc": "           5.3.2.2  Triggers for FBC online charging\n\n\n"}, {"key": "Introduction", "numbering": "5.3.2.2.0", "title_level": 4, "desc": "5.3.2.2.0   Introduction\n\nDebit / Reserve Units Request[Initial] / [Update] / [Termination] is used\nto convey charging information related to the IP-CAN bearer and service\ndata flows collected in the PCEF. Debit / Reserve Units Response is used by\nthe OCS to return quotas for rating groups or to instruct the PCEF on the\nfurther handling of the IP-CAN bearer (terminate, continue, reroute, etc.).\nThe Debit / Reserve Units Request includes details such as Credit-Control\nType, Served IMSI, Sequence Number etc. The Debit / Reserve Units Response\nincludes details such as Credit-Control quotas and session management\ninstructions (continue, terminate, interim interval, etc). Not all of the\ncharging information to be collected is static, and other charging\ninformation is directly dependent on dynamic Packet-Switched service usage.\n\nFBC online charging is employed if it is activated for the IP-CAN bearer.\nThe charging method in the PCC rule defines whether service data flow\nrequires the online charging. The PCEF shall request the quota prior to\nservice delivery.\nIf only certain quotas are authorised by the OCS (e.g. due to insufficient\ncredit), the rating groups for which no quota was authorised are handled\naccording the received Result Code value. The quota supervision mechanism\nis further described in TS 32.299 [50]. Details on FBC can be found in TS\n23.203 [215] and TS 29.212 [216].\n\nDebit / Reserve Units Request[Initial] is sent to the OCS during the IP-CAN\nbearer activation. The OCS supplies a IP-CAN bearer authorisation and may\nsupply volume, time or events quotas for the rating groups, based on the\ninformation provided by the PCEF, e.g. QoS, APN.\n\nWhen start of the service data flow is detected and no valid quota exist, a\nDebit / Reserve Units Request[Update] is sent to request quota for the\nrating group, unless the rating group is e.g. blacklisted. In case charging\nsession does not exist, a Debit/Reserve Units Request[Initial] is sent. See\nTS 32.299 [50] for further information.\n\nWhen a change of charging condition occurs, and corresponding re-\nauthorization trigger is armed, all MSCC instances are reported to the OCS\nwith a Debit / Reserve Units Request[Update] with Reporting-Reason AVP\nvalue set to RATING_CONDITION_CHANGE together with Trigger-Type AVP\nindicating the accurate reason for the change.\nWhen \"User CSG Information change\" occurs as a change of charging\ncondition, how the changes (i.e. User entering/leaving a CSG cell or a\nhybrid cell he is member or not) are reported is further detailed in TS\n32.299 [50].\n\nAt IP-CAN default bearer establishment, the OCS may provide the \"Presence\nReporting Area identifier\" to be activated for Core Network pre-configured\nPresence Reporting Area(s) and additionally all of PRA Identifier(s) and\nlist(s) of its elements for UE-dedicated Presence Reporting Area(s) to be\nreported when it subscribes to \"Change of UE presence in Presence Reporting\nArea\". The Presence Reporting Area(s) to be reported are applicable at IP-\nCAN session level.\n\nThe OCS may change (activate/modify/remove) the Presence Reporting Area(s)\nto be reported by providing the updated PRA Identifier(s) to PCEF during\nany IP-CAN dedicated bearer establishment or during any IP-CAN bearer\nupdate.\n\nThe OCS may subscribe/unsubscribe to \"Change of UE presence in Presence\nReporting Area\" re-authorization event trigger, during IP-CAN bearer\nestablishment (i.e. CCA answer to CCR initial), or during the lifetime of\nthe IP-CAN bearer. When the initial UE presence status in PRA(s) resulting\nfrom subscription by the OCS is received by the PCEF, and the PCEF has\npreviously requested quota, all MSCC instances are reported to the OCS with\na CCR update, indicating this initial status. If PCEF has not previously\nrequested quota, this initial status of UE presence in Presence Reporting\nArea(s) will be sent towards the OCS on CCR update triggered for quota\nrequest when service usage is started.\n\nWhen Ro specific chargeable event (e.g. threshold reached, QHT expires,\nquota exhaustion, validity time reached, forced re-authorization) occurs\nrequired MSCC instances are reported to OCS with a Debit / Reserve Units\nRequest[Update] with corresponding Reporting Reason value. See TS 32.299\n[50] for further information.\n\nWhen tariff time change is encountered, the Tariff Change Usage is used\nwithin the Used Service Units to distinguish usage before and after the\ntariff time change. The MSCC instances are sent to the OCS in next Debit /\nReserve Units Request.\n\nThe OCS may specify the behaviour on consumption of the final granted units\nknown as termination action.\nThe required termination action is indicated with Final Unit Action and\npossible values are TERMINATE and REDIRECT. See TS 32.299 [50] for further\ninformation.\n\nTS 23.203 [215] specifies that it shall be possible to request online\ncharging quotas for each charging key.\nEach quota allocated to a Debit / Reserve Units session has a unique Rating\nGroup value. TS 23.203 [215] also specifies that PCEF shall report charging\ninformation for each combination of the charging key and service identifier\nwhen service identifier level reporting is present. As defined in TS 23.203\n[215] the service identifier is a piece of information which provides the\nmost detailed identification, specified for FBC, of a service data flow.\nThe charging key is a piece of information used for rating purposes as\ndefined in TS 23.203 [215].\nThe charging key and Service Identifier are mapped into the Rating Group\nand the Service Identifier respectively as defined in RFC 4006 [402].\n\nThe subsequent clauses identify in detail the conditions for reporting\nonline charging information, management of user and Credit-Control sessions\nand PS domain quota supervision.\n\n\n"}, {"key": "Triggers for starting and stopping an FBC Credit-Control", "numbering": "5.3.2.2.1", "title_level": 4, "desc": "5.3.2.2.1   Triggers for starting and stopping an FBC Credit-Control\n             session\n\n Debit / Reserve Units Request[Initial] is sent to OCS when:\n\n  -  IP-CAN bearer is activated. For network requested dedicated IP-CAN\n    bearer activation, the  Debit / Reserve Units Request[Initial]  is sent\n    to the OCS when the PCEF determines a need for the IP-CAN bearer and\n    before any signalling towards a mobile is initiated.\n\n  -  Start of service data flow is detected and no charging session exists.\n\nDebit / Reserve Units Request[Terminate] is sent to OCS when:\n\n  -  IP-CAN bearer is deactivated.\n\n  -  Unused Quota timer expiry.\n\n  -  Session termination is indicated by the OCS (e.g. Credit Limit\n    Reached, Credit Control Not Applicable)\n\n  -  Abort-Session-Request is received from the OCS, this also results in\n    network initiated IP-CAN bearer deactivation.\n\n  -  A Debit / Reserve Units Request[Terminate] sent due to Unused Quota\n    timer expiry shall include an indication to the OCS that the IP-CAN\n    bearer continues and the OCS can expect a later Debit / Reserve Units\n    Request[Initial] request for the same IP-CAN bearer.\n\n\n"}, {"key": "Triggers for providing interim information for an FBC Credit-", "numbering": "5.3.2.2.2", "title_level": 4, "desc": "5.3.2.2.2   Triggers for providing interim information for an FBC Credit-\n             Control session\n\n Debit / Reserve Units Request[Update]  is sent to OCS when:\n\n  -  User starts to use certain service or application\n\n  -  Start of service data flow (refer to clause 5.3.1.2)\n\n  -  Termination of service data flow and this is the last service data\n    flow utilizing corresponding to report level(refer to clause 5.3.1.2)\n\n  -  Active service or application is removed from the allowed services or\n    applications\n\n  -  Granted quota runs out\n\n  -  Validity time for granted quota expires\n\n  -  Update is requested by the OCS\n\n  -  Change of charging conditions occur and according re-authorisation\n    trigger re-authorisation is needed\n\n  -  Management intervention\n\n  -  Quota Holding Timer is expired\n\n  -  For network requested dedicated IP-CAN bearer activation, reception of\n    an Update PDP Context Request message with the RAN Procedures Ready\n    flag.\n\n\n"}, {"key": "Triggers for ABC online charging", "numbering": "5.3.2.2A", "title_level": 3, "desc": "5.3.2.2A Triggers for ABC online charging\n\n\n"}, {"key": "Introduction", "numbering": "5.3.2.2A.0", "title_level": 4, "desc": "5.3.2.2A.0  Introduction\n\nFor ABC supported within the TDF, i.e. ADC rules based charging defined in\nTS 23.203 [215] and TS 29.212 [216],  Debit / Reserve Units\nRequest[Initial]  / update / termination is used to convey charging\ninformation related to the application traffic detected in the TDF. Debit /\nReserve Units Response is used by the OCS to return quotas for rating\ngroups or to instruct the TDF on the further handling of the application\ntraffic (terminate, continue, reroute, etc.). The Debit / Reserve Units\nRequest includes details such as Credit-Control Type, Served IMSI and\nSequence Number etc. The Debit / Reserve Units Response includes details\nsuch as Credit-Control quotas and session management instructions\n(continue, terminate, interim interval, etc).\n\nABC online charging is employed if it is activated for the TDF session\ndefined in TS 23.203[215].\nThe charging method in the ADC rule defines whether application traffic\nrequires online charging. The TDF shall request the quota prior to service\ndelivery. If only certain quotas are authorised by the OCS (e.g. due to\ninsufficient credit), the rating groups for which no quota was authorised\nare handled according the received Result Code value. The quota supervision\nmechanism is further described in TS 32.299 [50].\n\n Debit / Reserve Units Request[Initial]  is sent to the OCS during the TDF\nsession activation. The OCS supplies application traffic authorisation and\nmay supply volume, time or event quotas for the rating groups, based on the\ninformation provided by the TDF, e.g. APN.\n\nWhen start of the application traffic is detected and no valid quota exist\nin current Ro session, a  Debit / Reserve Units Request[Update]  is sent to\nrequest quota for the rating group unless the rating group is e.g.\nblacklisted. See TS 32.299 [50] for further information.\n\nWhen a change of charging condition occurs and corresponding re-\nauthorization trigger is armed, all MSCC instances are reported to the OCS\nwith a Debit / Reserve Units Request[Update]  with Reporting Reason value\nset to RATING_CONDITION_CHANGE together with Trigger-Type AVP indicating\nthe accurate reason for the change.\nWhen \"User CSG Information change\" occurs as a change of charging\ncondition, how the changes (i.e. User entering/leaving a CSG cell or a\nhybrid cell he is member or not) are reported is further detailed in TS\n32.299 [50].\n\nWhen Ro specific chargeable event (e.g. threshold reached, QHT expires,\nquota exhaustion, validity time reached, forced re-authorization) occurs\nrequired MSCC instances are reported to OCS with a  Debit / Reserve Units\nRequest[Update]  with corresponding Reporting-Reason AVP value. See TS\n32.299 [50] for further information.\n\nWhen tariff time change is encountered, the Tariff Change Usage is used\nwithin the Used Service Units to distinguish usage before and after the\ntariff time change. The MSCC instances are sent to the OCS in next CCR.\n\nThe OCS may specify the behaviour on consumption of the final granted units\nknown as termination action. The required termination action is indicated\nwith Final Unit Action and possible values are TERMINATE and REDIRECT.\nSee TS 32.299 [50] for further information.\n\nTS 23.203 [215] specifies that it shall be possible to request online\ncharging quotas for each charging key. Each quota allocated to a Debit /\nReserve Units session has a unique Rating Group value. TS 23.203 [215] also\nspecifies that TDF shall report charging information for each combination\nof the charging key and service identifier when service identifier level\nreporting is present. As defined in TS 23.203 [215] the service identifier\nis a piece of information which provides the most detailed identification,\nspecified for ABC. The charging key is a piece of information used for\nrating purposes as defined in TS 23.203 [215]. The charging key and Service\nIdentifier are mapped into the Rating Group and the Service Identifier\nrespectively as defined in RFC 4006 [402].\n\nThe subsequent clauses identify in detail the conditions for reporting\nonline charging information, management of user and Credit-Control sessions\nand PS domain quota supervision.\n\n\n"}, {"key": "Triggers for starting and stopping an ABC Credit-Control", "numbering": "5.3.2.2A.1", "title_level": 4, "desc": "5.3.2.2A.1  Triggers for starting and stopping an ABC Credit-Control\n             session\n\n Debit / Reserve Units Request[Initial]  is sent to OCS when TDF session is\nactivated.\n\n Debit / Reserve Units Request[Terminate]  is sent to OCS when:\n\n  -  TDF session is deactivated\n\n  -  Session termination is indicated by the OCS (e.g. Credit Limit\n    Reached)\n\n  -  Abort-Session-Request is received from the OCS.\n\n\n"}, {"key": "Triggers for providing interim information for an ABC Credit-", "numbering": "5.3.2.2A.2", "title_level": 4, "desc": "5.3.2.2A.2  Triggers for providing interim information for an ABC Credit-\n             Control session\n\n Debit / Reserve Units Request[Update]  is sent to OCS when:\n\n  -  Start of application traffic, when no valid quota exists\n\n  -  Granted quota runs out\n\n  -  Validity time for granted quota expires\n\n  -  Update is requested by the OCS\n\n  -  Change of charging conditions occur and according re-authorisation\n    trigger re-authorisation is needed\n\n  -  Management intervention\n\n  -  Quota Holding Timer is expired\n\n\n\n"}, {"key": "Triggers for TDF session online charging", "numbering": "5.3.2.2B", "title_level": 3, "desc": "           5.3.2.2B Triggers for TDF session online charging\n\nTDF session online charging is achieved by ABC online charging, see clause\n5.3.2.2A.\n\n\n"}, {"key": "Triggers for P-GW when charging per IP-CAN session is active", "numbering": "5.3.2.2C", "title_level": 3, "desc": "5.3.2.2C Triggers for P-GW when charging per IP-CAN session is active\n\n\n"}, {"key": "General", "numbering": "5.3.2.2C.1", "title_level": 4, "desc": "5.3.2.2C.1  General\n\nThe triggers identified in clause 5.3.2.2 are utilized when charging per IP-\nCAN session is active with the following changes:\n\n  1. When IP-CAN bearer charging is active, the Debit / Reserve Units\n    Response is used by the OCS to return quotas for rating groups or to\n    instruct the PCEF on the further handling of the IP-CAN session or\n    service data flow, not a specific IP-CAN bearer.\n\n  2. Charging per IP-CAN session is employed if it is activated for the\n    default IP-CAN bearer. Charging characteristics determine if the IP-CAN\n    bearer charging is active or if the FBC is active. When IP-CAN bearer\n    charging is active, a vendor-specific rating group and, optionally,\n    service identifier, is used to signify that the IP-CAN session traffic\n    is being monitored as per clause 5.3.1.6.1. This vendor-specific rating\n    group is the only rating for which quota is requested from the OCS\n    using the same mechanism as for FBC. When FBC is active, the charging\n    method in the PCC rule defines whether a service data flow requires\n    online charging.\n\n  3. In either case in which FBC is utilized, the PCEF shall request the\n    quota prior to service delivery as in clause 5.3.2.2.\n\n  4.  Debit / Reserve Units Request[Initial] is sent to the OCS during the\n    IP-CAN session activation. No indication is provided to the OCS when an\n    individual IP-CAN bearer is activated.\n\n  5. When IP-CAN bearer charging using the vendor-specific rating group,\n    the OCS may only provide volume quotas.\n\n  6. At IP-CAN session establishment, the OCS may provide the \"Presence\n    Reporting Area identifier(s)\" to be activated for Core Network pre-\n    configured Presence Reporting Area(s) and additionally all of PRA\n    Identifier(s) and list(s) of its elements for UE-dedicated Presence\n    Reporting Area(s) to be reported when it subscribes to \"Change of UE\n    presence in Presence Reporting Area\". OCS subscription to and PCEF\n    reporting of \"Change of UE presence in Presence Reporting Area\" re-\n    authorization event trigger is the same as in clause 5.3.2.2.\n\n  7. When start of the IP-CAN session traffic (if IP-CAN bearer charging is\n    active) or the service data flow is detected and no valid quota exists,\n    a Debit / Reserve Units Request[Update] is sent to request quota for\n    the rating group as in clause 5.3.2.2C.3.\n\n\n"}, {"key": "Triggers for starting and stopping an FBC Credit-Control", "numbering": "5.3.2.2C.2", "title_level": 4, "desc": "5.3.2.2C.2  Triggers for starting and stopping an FBC Credit-Control\n             session when charging per IP-CAN session is active\n\nDebit / Reserve Units Request[Initial] is sent to OCS when:\n\n  -  IP-CAN session (i.e., default bearer) is activated.\n\n  -  Start of service data flow is detected and no charging session exists.\n\n Debit / Reserve Units Request[Terminate] is sent to OCS when:\n\n  -  IP-CAN session is deactivated.\n\n  -  Unused Quota timer expiry.\n\n  -  Session termination is indicated by the OCS (e.g. Credit Limit\n    Reached, Credit Control Not Applicable)\n\n  -  Abort-Session-Request is received from the OCS, this also results in\n    network-initiated IP-CAN session deactivation.\n\nA Debit / Reserve Units Request[Terminate] sent due to Unused Quota timer\nexpiry shall include an indication to the OCS that the IP-CAN session\ncontinues and the OCS can expect a later Debit / Reserve Units\nRequest[Initial] request for the same IP-CAN session.\n\n\n\n\n\n"}, {"key": "Triggers for providing interim information for an FBC Credit-", "numbering": "5.3.2.2C.3", "title_level": 4, "desc": "5.3.2.2C.3  Triggers for providing interim information for an FBC Credit-\n             Control session when charging per IP-CAN session is active\n\n Debit / Reserve Units Request[Update]  is sent to OCS when:\n\n  -  User starts to use certain service\n\n  -  Start of service data flow (refer to 5.3.1.2)\n\n  -  Access change of service data flow (refer to 5.3.1.6.2)\n\n  -  Active service is removed from the allowed services\n\n  -  Granted quota runs out\n\n  -  Validity time for granted quota expires\n\n  -  Update is requested by the OCS\n\n  -  Change of charging conditions occur and re-authorisation trigger is\n    set\n\n  -  Management intervention\n\n  -  Quota Holding Timer is expired\n\n\n\n\n\n"}, {"key": "PS Furnish Charging Information procedure", "numbering": "5.3.2.3", "title_level": 3, "desc": "           5.3.2.3  PS Furnish Charging Information procedure\n\nThe OCS online charging function may use this procedure to add online\ncharging session specific information to the PGW-CDR/TDF-CDR by means of\nthe Debit / Reserve Units operation in the Ro interface. The data can be\nsent either in one Debit / Reserve Units Response message or several Debit\n/ Reserve Units Response messages with append indicator.\n\nThe OCS online charging function can send multiple concatenated PS Furnish\nCharging Information elements per online charging session in the Ro\ninterface. The OCS online charging function can also send multiple\nconcatenated PS Furnish Information Element per each quota (i.e. per rating\ngroup).\n\nThe total maximum of free format data is 160 octets per service so the\ntotal maximum of free format data per online session is n*160 octets, where\nn indicates the number of rating groups activated per online session.\n\nIn the OCS online charging function, a PS online charging session shall be\nidentified by the P-GW control plane address and the ChargingId. In the P-\nGW, the PS online charging session and the PS offline charging session\nshall be identified by the same ChargingId. Therefore the ChargingId shall\nallow the P-GW to correlate an online charging session with an offline\ncharging session. In the TDF, the PS online charging session and the PS\noffline charging session shall be identified by the combination of P-GW\ncontrol plane address and ChargingId. Therefore the P-GW address/Charging\nId shall allow the TDF to correlate an online charging session with an\noffline charging session.\n\nThis procedure can only apply when online and offline charging is performed\nsimultaneously for the same session (IP-CAN bearer or TDF session) or\nrating group. In any other case, the P-GW/TDF shall discard the additional\ncharging information sent by the OCS in the Debit / Reserve Units Response\nmessages.\n\nWhen the OCS sends session specific charging information, it must send the\nPS Furnish Charging Information at command level in the Debit / Reserve\nUnits Response. In this case, the information is added to the main body of\nthe PGW-CDR. When the OCS sends service specific charging information, it\nmust send the PS Furnish Charging Information at MSCC level in the Debit /\nReserve Units Response. In this case, the information is added to the\nspecific service container in the PGW-CDR/TDF-CDR.\n\nThe PS Furnish Charging Information is described in TS 32.299 [50].\n\n\n"}, {"key": "Support of Failure Situations", "numbering": "5.3.2.4", "title_level": 3, "desc": "5.3.2.4  Support of Failure Situations\n\nIn case the OCS fails the P-GW/TDF must support the Failure Handling\nprocedure and Failover mechanism described in TS 32.299 [50].\n\nThe Failure Handling Procedure affects the whole online session so in case\nFBC/ABC is enabled, the procedure shall affect all services activated\nduring the IP-CAN bearer/TDF session triggering the online charging\nsession.\n\nAccording to TS 32.299 [50], timer Tx determines the maximum interval the P-\nGW/TDF shall wait for an answer to each Debit / Reserve Units Request sent\nto the OCS. In case FBC/ABC is enabled, it is possible that several\nconcurrent Debit / Reserve Units Request messages are triggered for the\nsame online charging session. In this case, each Debit / Reserve Units\nRequest message shall reset the Tx timer. When Tx expires, P-GW/TDF shall\nexecute the Failover and Failure Handling mechanisms according to the\nbehaviour described in Annex B.\n\nThree different actions are described in RFC 4006 [402].\n\nP-GW shall support the following actions when the failure handling\nmechanism is executed:\n\n  -  Terminate: The online session is finished. The associated IP-CAN\n    bearer session is released (ongoing sessions) or not established (new\n    sessions). Failover for ongoing sessions is not supported. Failover for\n    new sessions is always supported.\n\n  -  Retry&Terminate: The online session is finished. The associated IP-CAN\n    bearer session is released (ongoing sessions) or not established (new\n    sessions). Failover for ongoing sessions is supported. Failover for new\n    sessions is always supported.\n\n  -  Continue: The online session is finished. The associated IP-CAN bearer\n    session is established (new sessions) or not released (ongoing\n    sessions). Failover for ongoing sessions is supported. Failover for new\n    sessions is always supported. It shall be operator configurable to\n    limit the maximum duration of the IP-CAN bearer in this situation.\n\nWhen charging per IP-CAN session is active, the actions above apply to the\nentire IP-CAN session instead of the individual IP-CAN bearer.\n\nTDF shall support the following actions when the failure handling mechanism\nis based on the directives received previously from the OCS:\n\n  -  Terminate: This is the default behaviour. The TDF indicates to the\n    PCRF that the charging session was terminated and the OCS does not\n    allow the service to continue. The PCRF determines whether to continue\n    or terminate the associated TDF session.\n\n  -  Retry&Terminate: If the OCS and TDF support failover procedures and\n    there is an alternate OCS available, the TDF shall attempt to failover\n    to an alternative OCS. Otherwise, the TDF indicates to the PCRF that\n    the charging session was terminated and the OCS does not allow the\n    service to continue. The PCRF determines whether to continue or\n    terminate the associated TDF session.\n\n  -  Continue: If the OCS and TDF support failover procedures and there is\n    an alternate OCS available, the TDF shall attempt to failover to an\n    alternative OCS. Otherwise, the TDF indicates to the PCRF that the\n    charging session was terminated and the OCS allows the service to\n    continue. The PCRF determines whether to continue or terminate the\n    associated TDF session.\n\nIn case the user is simultaneously online and offline charged, the failure\nsituation must be registered in the PGW-CDR/TDF-CDR. When the user is only\nonline charged, the execution of the Failure Handling mechanism with value\nequal to Continue shall imply that a new PGW-CDR/TDF-CDR is opened.\n\n\n\n"}, {"key": "Definition of charging information", "numbering": "6", "title_level": 0, "desc": "         6  Definition of charging information\n\n\n"}, {"key": "Rf message content", "numbering": "6.1A", "title_level": 1, "desc": "6.1A Rf message content\n\n\n"}, {"key": "General", "numbering": "6.1A.0", "title_level": 2, "desc": "6.1A.0 General\n\nThis clause is applicable to the ePDG, TWAG, MME, S-GW, P-GW and TDF, when\nthe CDF is provided as an external entity.\n\n\n"}, {"key": "Summary of offline charging message formats", "numbering": "6.1A.1", "title_level": 2, "desc": "6.1A.1 Summary of offline charging message formats\n\nThe PS Offline Charging and \"\"SMS over MME Charging\" utilises the Charging\nData Transfer that is specified in the 3GPP accounting application\ndescribed in TS\u00a032.299 [50].\n\nThe Charging Data Transfer operation employs the Charging Data Request and\nCharging Data Response messages.\n\nThe Charging Data Request can be of type [Start, Interim, Stop and Event]\nand includes all charging information. The Charging Data Response is an\nacknowledgement of the Charging Data Request.\n\nTable 6.1A.1.1 describes the use of these messages for offline charging.\n\n          Table 6.1A.1.1: Offline charging messages reference table\n\n|Message        |Source                 |Destination            |\n|Charging Data  |ePDG, TWAG, MME,       |CDF                    |\n|Request        |S-GW,P-GW,TDF          |                       |\n|Charging Data  |CDF                    |ePDG, TWAG, MME, S-GW, |\n|Response       |                       |P-GW, TDF              |\n\n\n\n"}, {"key": "Structure for the charging data message formats", "numbering": "6.1A.2", "title_level": 2, "desc": "6.1A.2 Structure for the charging data message formats\n\n\n"}, {"key": "General", "numbering": "6.1A.2.0", "title_level": 3, "desc": "6.1A.2.0 General\n\nThis clause describes the Information Elements (IE) used in the charging\ndata messages.\n\nCategory in table 6.1A.2.1.1 and table 6.1A.2.2.1 shall use the categories\naccording to the charging data configuration defined in clause 5.4 of TS\n32.240 [1].\n\n\n\n"}, {"key": "Charging Data Request message", "numbering": "6.1A.2.1", "title_level": 3, "desc": "           6.1A.2.1 Charging Data Request message\n\nTable 6.1A.2.1.1 illustrates the basic structure of a Charging Data Request\nmessage from the MME, S-GW, ePDG, TWAG, P-GW and TDF as used for PS offline\ncharging and \"\"SMS over MME Charging\".\n\n          Table 6.1A.2.1.1: Charging Data Request message contents\n\n|Information       |Categor|Description                                   |\n|Element           |y      |                                              |\n|Session Identifier|M      |Described in TS 32.299 [50]                   |\n|Originator Host   |M      |Described in TS 32.299 [50]                   |\n|Originator Domain |M      |Described in TS 32.299 [50]                   |\n|Destination Domain|M      |Described in TS 32.299 [50]                   |\n|Operation Type    |M      |Described in TS 32.299 [50]                   |\n|Operation Number  |M      |Described in TS 32.299 [50]                   |\n|Operation         |OC     |Described in TS 32.299 [50]                   |\n|Identifier        |       |                                              |\n|User Name         |OC     |The content of the field corresponds to the   |\n|                  |       |Protocol Configuration Options (PCO) field of |\n|                  |       |the Create IP-CAN bearer Request message.     |\n|                  |       |(ffs)                                         |\n|Destination Host  |OC     |Described in TS 32.299 [50]                   |\n|Operation Interval|OC     |Described in TS 32.299 [50]                   |\n|Origination State |OC     |Described in TS 32.299 [50]                   |\n|Origination       |OC     |Described in TS 32.299 [50]                   |\n|Timestamp         |       |                                              |\n|Proxy Information |OC     |Described in TS 32.299 [50]                   |\n|Route Information |OC     |Described in TS 32.299 [50]                   |\n|Operation Token   |OM     |This field identifies the PS domain.          |\n|Service           |OM     |This field holds the PS charging specific     |\n|Information       |       |parameters described in clause 6.3.           |\n\n\n  NOTE:  Detailed descriptions of the fields are provided in TS 32.299\n         [50].\n\n\n"}, {"key": "Charging Data Response message", "numbering": "6.1A.2.2", "title_level": 3, "desc": "6.1A.2.2 Charging Data Response message\n\nTable 6.1A.2.2.1 illustrates the basic structure of a Charging Data\nResponse message as used for the ePDG, TWAG, MME, S-GW, P-GW and TDF.\n\n         Table 6.1A.2.2.1 : Charging Data Response message contents\n\n|AVP                      |Category |Description         |\n|Session Identifier       |M        |Described in TS     |\n|                         |         |32.299 [50]         |\n|Operation Result         |M        |Described in TS     |\n|                         |         |32.299 [50]         |\n|Originator Host          |M        |Described in TS     |\n|                         |         |32.299 [50]         |\n|Originator Domain        |M        |Described in TS     |\n|                         |         |32.299 [50]         |\n|Operation Type           |M        |Described in TS     |\n|                         |         |32.299 [50]         |\n|Operation Number         |OC       |Described in TS     |\n|                         |         |32.299 [50]         |\n|Operation Identifier     |OC       |Described in TS     |\n|                         |         |32.299 [50]         |\n|Operation Interval       |OC       |Described in TS     |\n|                         |         |32.299 [50]         |\n|Error Reporting Host     |OC       |Described in TS     |\n|                         |         |32.299 [50]         |\n|Origination State        |OC       |Described in TS     |\n|                         |         |32.299 [50]         |\n|Origination Timestamp    |OC       |Described in TS     |\n|                         |         |32.299 [50]         |\n|Proxy Information        |OC       |Described in TS     |\n|                         |         |32.299 [50]         |\n\n\n  NOTE:  Detailed descriptions of the fields are provided in TS 32.299\n         [50].\n\n\n\n"}, {"key": "CDR content description on Bp interface", "numbering": "6.1B", "title_level": 1, "desc": "         6.1B CDR content description on Bp interface\n\n\n"}, {"key": "General", "numbering": "6.1B.0", "title_level": 2, "desc": "6.1B.0 General\n\nThis clause describes the CDR parameters used in the CDRs.\n\nThe tables in the subsequent parts of this clause specify the designations\nfor  the category of a CDR parameter (\"field categories\") according to the\ncharging data configuration defined in clause 5.4 of TS 32.240 [1].\n\nThe following tables 6.1.1.1 - 6.1.14.1 provide a brief description of each\nCDR parameter. Full definitions of the CDR parameters, sorted by the name\nin alphabetical order, are provided in TS 32.298 [51].\n\n\n\n"}, {"key": "IP-CAN bearer charging data in SGSN (S-CDR)", "numbering": "6.1.1", "title_level": 2, "desc": "         6.1.1  IP-CAN bearer charging data in SGSN (S-CDR)\n\nIf the collection of CDR data is enabled then the SGSN data specified in\ntable 6.1.1.1 shall be available for each IP-CAN bearer.\n\n               Table 6.1.1.1: SGSN IP-CAN bearer data (S-CDR)\n\n|Field                     |Catego|Description                              |\n|                          |ry    |                                         |\n|Record Type               |M     |SGSN IP-CAN bearer record.               |\n|Network Initiated PDP     |OC    |A flag that is present if this is a      |\n|Context                   |      |network initiated IP-CAN bearer.         |\n|Served IMSI               |C     |IMSI of the served party, if available.  |\n|IMSI Unauthenticated Flag |OC    |This field indicates the provided served |\n|                          |      |IMSI is not authenticated (emergency     |\n|                          |      |bearer service situation).               |\n|Served IMEI               |OC    |The IMEI or IMEISV of the ME, if         |\n|                          |      |available. It is used for identifying the|\n|                          |      |user in case Served IMSI is not present  |\n|                          |      |during emergency bearer service.         |\n|SGSN Address              |OM    |The IP address of the current SGSN.      |\n|MS Network Capability     |OM    |The mobile station Network Capability.   |\n|Routing Area Code (RAC)   |OM    |RAC at the time of \"Record Opening Time\".|\n|Location Area Code (LAC)  |OM    |LAC at the time of \"Record Opening Time\".|\n|User CSG information      |OC    |This field contains the User CSG         |\n|                          |      |information of the UE, if available,     |\n|                          |      |including CSG ID, access mode and CSG    |\n|                          |      |membership indication.                   |\n|Cell Identifier           |OM    |Cell identity for GSM or Service Area    |\n|                          |      |Code (SAC) for UMTS at the time of       |\n|                          |      |\"Record Opening Time\".                   |\n|Charging ID               |M     |IP-CAN bearer identifier used to identify|\n|                          |      |this IP-CAN bearer in different records  |\n|                          |      |created by PCNs.                         |\n|GGSN Address Used         |M     |The control plane IP address of the P-GW |\n|                          |      |currently used. The P-GW address is      |\n|                          |      |always the same for an activated IP-CAN  |\n|                          |      |bearer.                                  |\n|Access Point Name Network |OM    |The logical name of the connected access |\n|Identifier                |      |point to the external packet data network|\n|                          |      |(network identifier part of APN).        |\n|PDP Type                  |OM    |PDP type, i.e. IPv4, IPv6, IPv4v6, PPP.  |\n|Served PDP Address        |OC    |PDP address of the served IMSI, i.e. IPv4|\n|                          |      |address when PDP Type is IPv4 or IPv6    |\n|                          |      |prefix when PDP Type is IPv6 or IPv4v6.  |\n|                          |      |This parameter shall be present except   |\n|                          |      |when both the PDP type is PPP and dynamic|\n|                          |      |PDP address assignment is used.          |\n|Served PDP Address prefix |OC    |PDP/PDN Address prefix length of an IPv6 |\n|length                    |      |typed Served PDP Address. The field needs|\n|                          |      |not available for prefix length of 64    |\n|                          |      |bits.                                    |\n|Served PDP/PDN Address    |OC    |This field holds IPv4 address of the     |\n|extension                 |      |served IMSI, if available, when PDP type |\n|                          |      |is IPv4v6.                               |\n|List of Traffic Data      |OM    |A list of changes in charging conditions |\n|Volumes                   |      |for this IP-CAN bearer, each change is   |\n|                          |      |time stamped. Charging conditions are    |\n|                          |      |used to categorize traffic volumes, such |\n|                          |      |as per tariff period. Initial and        |\n|                          |      |subsequently changed QoS and             |\n|                          |      |corresponding data volumes are also      |\n|                          |      |listed.                                  |\n|Record Opening Time       |M     |Time stamp when IP-CAN bearer is         |\n|                          |      |activated in this SGSN or record opening |\n|                          |      |time on subsequent partial records.      |\n|Duration                  |M     |Duration of this record in the SGSN.     |\n|SGSN Change               |C     |Present if this is first record after    |\n|                          |      |SGSN change.                             |\n|Cause for Record Closing  |M     |The reason for closure of the record from|\n|                          |      |this SGSN.                               |\n|Diagnostics               |OM    |A more detailed reason for the release of|\n|                          |      |the connection.                          |\n|Record Sequence Number    |C     |Partial record sequence number in this   |\n|                          |      |SGSN. Only present in case of partial    |\n|                          |      |records.                                 |\n|Node ID                   |OM    |Name of the recording entity.            |\n|Local Record Sequence     |OM    |Consecutive record number created by this|\n|Number                    |      |node. The number is allocated            |\n|                          |      |sequentially including all CDR types.    |\n|APN Selection Mode        |OM    |An index indicating how the APN was      |\n|                          |      |selected.                                |\n|Access Point Name Operator|OM    |The Operator Identifier part of the APN. |\n|Identifier                |      |                                         |\n|Served MSISDN             |OC    |The primary MSISDN of the subscriber, if |\n|                          |      |available.                               |\n|Charging Characteristics  |M     |The Charging Characteristics applied to  |\n|                          |      |the IP-CAN bearer.                       |\n|Serving Node PLMN         |Oc    |This field holds the PLMN Identifier (MCC|\n|Identifier                |      |and MNC) serving the UE during this      |\n|                          |      |record. Only one value is included in    |\n|                          |      |case multiple PLMN Ids are supported by  |\n|                          |      |the SGSN.                                |\n|CN Operator Selection     |OC    |This field indicates whether the Serving |\n|Entity                    |      |Network identified by the \"Serving Node  |\n|                          |      |PLMN Identifier\u201d has been selected by the|\n|                          |      |UE or by the network, as defined in      |\n|                          |      |TS\u00a029.060\u00a0[203] for GPRS, and in TS      |\n|                          |      |29.274 [210] for EPC, if available.      |\n|RAT Type                  |OC    |This field indicates the Radio Access    |\n|                          |      |Technology (RAT) type currently used by  |\n|                          |      |the Mobile Station as defined in TS      |\n|                          |      |29.061 [205], when available.            |\n|CAMEL Information         |OC    |Set of CAMEL information related to      |\n|                          |      |IP-CAN bearer. For more information see  |\n|                          |      |Description of Record Fields. This field |\n|                          |      |is present if CAMEL service is activated.|\n|RNC Unsent Downlink Volume|OC    |The downlink data volume, which the RNC  |\n|                          |      |has not sent to MS. This field is present|\n|                          |      |when the RNC has provided unsent downlink|\n|                          |      |volume count at RAB release.             |\n|Charging Characteristics  |OM    |Holds information about how Charging     |\n|Selection Mode            |      |Characteristics were selected.           |\n|Dynamic Address Flag      |OC    |Indicates whether served PDP address is  |\n|                          |      |dynamic, which is allocated during IP-CAN|\n|                          |      |bearer activation. This field is missing |\n|                          |      |if address is static.                    |\n|Low Priority Indicator    |OC    |This field indicates if this IP-CAN      |\n|                          |      |bearer has a low priority, i.e. for      |\n|                          |      |Machine Type Communication.              |\n|Record Extensions         |OC    |A set of network operator/manufacturer   |\n|                          |      |specific extensions to the record.       |\n|                          |      |Conditioned upon the existence of an     |\n|                          |      |extension.                               |\n\n\n\n\n"}, {"key": "IP-CAN bearer charging data in S-GW (SGW-CDR)", "numbering": "6.1.2", "title_level": 2, "desc": "         6.1.2  IP-CAN bearer charging data in S-GW (SGW-CDR)\n\nIf the collection of CDR data is enabled then the S-GW data specified in\ntable 6.1.2.1 shall be available for each IP-CAN bearer.\n\n              Table 6.1.2.1: S-GW IP-CAN bearer data (SGW-CDR)\n\n|Field                     |Catego|Description                              |\n|                          |ry    |                                         |\n|Record Type               |M     |S-GW IP-CAN bearer record.               |\n|Retransmission            |OC    |This parameter, when present, indicates  |\n|                          |      |that information from retransmitted      |\n|                          |      |Charging Data Request has been used in   |\n|                          |      |this CDR.                                |\n|Served IMSI               |C     |IMSI of the served party, if available.  |\n|IMSI Unauthenticated Flag |OC    |This field indicates the provided served |\n|                          |      |IMSI is not authenticated (emergency     |\n|                          |      |bearer service situation).               |\n|Served IMEI               |OC    |The IMEI or IMEISV of the ME, if         |\n|                          |      |available. It is used for identifying the|\n|                          |      |user in case Served IMSI is not present  |\n|                          |      |during emergency bearer service.         |\n|S-GW Address used         |M     |The control plane IP address of the S-GW |\n|                          |      |used.                                    |\n|S-GW Address IPv6         |OC    |The control plane IPv6 address, in case  |\n|                          |      |of IPv4v6 dual stack, of the S-GW.       |\n|Charging ID               |M     |IP-CAN bearer Charging identifier used to|\n|                          |      |identify this IP-CAN bearer in different |\n|                          |      |records created by PCNs                  |\n|PDN Connection Charging Id|OM    |This field holds the explicit Charging Id|\n|                          |      |for the PDN connection if received from  |\n|                          |      |the P-GW.                                |\n|                          |      |Otherwise, the field holds the Charging  |\n|                          |      |Id of the EPS default bearer in GTP case,|\n|                          |      |or the unique Charging Id of the IP-CAN  |\n|                          |      |session in PMIP case.                    |\n|                          |      |This field is used to identify different |\n|                          |      |records belonging to same PDN connection.|\n|Serving Node Address      |M     |List of serving node control plane IP    |\n|                          |      |addresses (e.g. S4-SGSN, MME, \u2026) used    |\n|                          |      |during this record.                      |\n|Serving Node IPv6 Address |OC    |List of serving node control plane IPv6  |\n|                          |      |addresses, in case of IPv4v6 dual stack, |\n|                          |      |(e.g. S4-SGSN, MME, \u2026) used during this  |\n|                          |      |record.                                  |\n|Serving node Type         |M     |List of serving node types in control    |\n|                          |      |plane. The serving node types listed here|\n|                          |      |map to the serving node addresses listed |\n|                          |      |in the field \"Serving node Address\" in   |\n|                          |      |sequence.                                |\n|S-GW Change               |OC    |Present if this is first record after a  |\n|                          |      |change from another serving node (i.e.   |\n|                          |      |SGW, ePDG, HSGW).                        |\n|PGW PLMN Identifier       |Oc    |PLMN identifier (MCC MNC) of the P-GW    |\n|                          |      |used.                                    |\n|Access Point Name Network |OM    |The logical name of the connected access |\n|Identifier                |      |point to the external packet data network|\n|                          |      |(network identifier part of APN).        |\n|PDP/PDN Type              |OM    |This field indicates PDN type (i.e. IPv4,|\n|                          |      |IPv6 or IPv4v6).                         |\n|PDP/PDN Type extension    |OM    |This field indicates Non-IP PDN type.    |\n|Served PDP/PDN Address    |OC    |IP address allocated for the PDP context |\n|                          |      |/ PDN connection, if available, i.e. IPv4|\n|                          |      |address when PDN Type is IPv4 or IPv6    |\n|                          |      |prefix when PDN Type is IPv6 or IPv4v6.  |\n|                          |      |For non-IP PDN connection, this field is |\n|                          |      |not present                              |\n|Served PDP/PDN Address    |OC    |PDP/PDN Address prefix length of an IPv6 |\n|prefix length             |      |typed Served PDP Address. The field needs|\n|                          |      |not available for prefix length of 64    |\n|                          |      |bits.                                    |\n|                          |      |For non-IP PDN connection, this field is |\n|                          |      |not present.                             |\n|Served PDP/PDN Address    |OC    |This field holds IPv4 address of the     |\n|extension                 |      |served IMSI, if available, when PDN type |\n|                          |      |is IPv4v6.                               |\n|                          |      |For non-IP PDN connection, this field is |\n|                          |      |not present.                             |\n|Dynamic Address Flag      |OC    |Indicates whether served PDP/PDN address |\n|                          |      |is dynamic, which is allocated during    |\n|                          |      |IP-CAN bearer activation, initial attach |\n|                          |      |(E-UTRAN or over S2x) and UE requested   |\n|                          |      |PDN connectivity. This field is missing  |\n|                          |      |if IPv4 address is static when PDN Type  |\n|                          |      |is IPv4, or if IPv6 address is static    |\n|                          |      |when PDN Type is IPv6 or IPv4v6.         |\n|Dynamic Address Flag      |OC    |Indicates whether served IPv4 PDP/PDN    |\n|extension                 |      |address is dynamic, which is allocated   |\n|                          |      |during IP-CAN bearer activation, initial |\n|                          |      |attach (E-UTRAN or over S2x) and UE      |\n|                          |      |requested PDN connectivity with PDP/PDN  |\n|                          |      |type IPv4v6. This field is missing if    |\n|                          |      |IPv4 address is static.                  |\n|List of Traffic Data      |OM    |A list of changes in charging conditions |\n|Volumes                   |      |for this QCI/ARP pair, each change is    |\n|                          |      |time stamped. Charging conditions are    |\n|                          |      |used to categorize traffic volumes, such |\n|                          |      |as per tariff period. Initial and        |\n|                          |      |subsequently changed QoS and             |\n|                          |      |corresponding data values are also       |\n|                          |      |listed.                                  |\n|Record Opening Time       |M     |Time stamp when IP-CAN bearer is         |\n|                          |      |activated in this S-GW or record opening |\n|                          |      |time on subsequent partial records.      |\n|MS Time Zone              |OC    |This field contains the MS Time Zone the |\n|                          |      |MS is currently located as defined in    |\n|                          |      |TS\u00a029.060 [203], if available.           |\n|Last MS Time Zone         |OC    |This field contains the UE Time Zone the |\n|                          |      |UE is located at IP-CAN bearer           |\n|                          |      |deactivation, or at default bearer       |\n|                          |      |deactivation when IP-CAN session charging|\n|                          |      |is active, when available.               |\n|Duration                  |M     |Duration of this record in the S-GW.     |\n|Cause for Record Closing  |M     |The reason for the release of record from|\n|                          |      |this S-GW.                               |\n|Diagnostics               |OM    |A more detailed reason for the release of|\n|                          |      |the IP-CAN bearer, when a single cause is|\n|                          |      |applicable.                              |\n|Enhanced Diagnostics      |OC    |This field holds a more detailed reason  |\n|                          |      |for the release of the IP-CAN bearer,    |\n|                          |      |when a set of causes is applicable.      |\n|Record Sequence Number    |C     |Partial record sequence number, only     |\n|                          |      |present in case of partial records.      |\n|Node ID                   |OM    |Name of the recording entity.            |\n|Local Record Sequence     |OM    |Consecutive record number created by this|\n|Number                    |      |node. The number is allocated            |\n|                          |      |sequentially including all CDR types.    |\n|APN Selection Mode        |OM    |An index indicating how the APN was      |\n|                          |      |selected.                                |\n|Served MSISDN             |OC    |The primary MSISDN of the subscriber, if |\n|                          |      |available.                               |\n|User Location Information |OC    |This field contains the User Location    |\n|                          |      |Information of the MS as defined in      |\n|                          |      |TS\u00a029.060\u00a0[203] for GPRS case, and in TS |\n|                          |      |29.274 [210] for EPC case, if available. |\n|User Location Information |OC    |This field contains the time at which the|\n|Time                      |      |user location information was acquired.  |\n|Last User Location        |OC    |This field contains the User Location    |\n|Information               |      |Information of the UE at IP-CAN bearer   |\n|                          |      |deactivation, or at default bearer       |\n|                          |      |deactivation when IP-CAN session charging|\n|                          |      |is active, when available.               |\n|User CSG information      |OC    |This field contains the User CSG         |\n|                          |      |information of the UE, if available,     |\n|                          |      |including CSG ID, access mode and CSG    |\n|                          |      |membership indication.                   |\n|Presence Reporting Area   |OC    |This grouped field contains the Presence |\n|Information               |      |Reporting Area Identifierfor the UE PDN  |\n|                          |      |connection and the initial status of the |\n|                          |      |UE presence in the Presence Reporting    |\n|                          |      |Area, if available.                      |\n|                          |      |This field is not applicable to multiple |\n|                          |      |PRA(s)                                   |\n|Charging Characteristics  |M     |The Charging Characteristics applied to  |\n|                          |      |the IP-CAN bearer.                       |\n|Charging Characteristics  |OM    |Holds information about how Charging     |\n|Selection Mode            |      |Characteristics were selected.           |\n|IMS Signalling Context    |OC    |Included if the IM-CN Subsystem          |\n|                          |      |Signalling Flag is set, see TS 23.060    |\n|                          |      |[201] IP-CAN bearer is used for IMS      |\n|                          |      |signalling.                              |\n|P-GW Address used.        |OC    |This field is the P-GW IP Address for the|\n|                          |      |Control Plane                            |\n|P-GW Address IPv6         |OC    |This field is the P-GW IPv6 Address, in  |\n|                          |      |case of IPv4v6 dual stack, for the       |\n|                          |      |Control Plane                            |\n|Serving Node PLMN         |OC    |This field holds the PLMN Identifier (MCC|\n|Identifier                |      |and MNC) serving the UE during this      |\n|                          |      |record, as received in the \"Serving      |\n|                          |      |Network\u201d IE over S4/S11, if available.   |\n|CN Operator Selection     |OC    |This field indicates whether the Serving |\n|Entity                    |      |Network identified by the \"Serving Node  |\n|                          |      |PLMN Identifier\u201d has been selected by the|\n|                          |      |UE or by the network, as defined in      |\n|                          |      |TS\u00a029.060\u00a0[203] for GPRS, and in TS      |\n|                          |      |29.274 [210] for EPC, if available.      |\n|RAT Type                  |OC    |This field indicates the Radio Access    |\n|                          |      |Technology (RAT) type currently used by  |\n|                          |      |the Mobile Station as defined in TS      |\n|                          |      |29.061 [205], when available.            |\n|Start Time                |OC    |This field holds the time when User      |\n|                          |      |IP-CAN session starts, available in the  |\n|                          |      |CDR for the first bearer in an IP-CAN    |\n|                          |      |session.                                 |\n|Stop Time                 |OC    |This field holds the time when User      |\n|                          |      |IP-CAN session is terminated, available  |\n|                          |      |in the CDR for the last bearer in an     |\n|                          |      |IP-CAN session.                          |\n|Low Priority Indicator    |OC    |This field indicates if this IP-CAN      |\n|                          |      |session has a low priority, i.e. for     |\n|                          |      |Machine Type Communication.              |\n|CP CIoT EPS Optimisation  |OC    |This field indicates whether CP CIoT EPS |\n|indicator                 |      |Optimisation is used during data transfer|\n|                          |      |with the UE (i.e. Control Plane NAS PDU  |\n|                          |      |via S11-U between SGW and MME) or not    |\n|                          |      |(i.e.User Plane via S1-U between SGW and |\n|                          |      |eNB), if enabled.                        |\n|UNI PDU CP Only Flag      |OC    |This field indicates whether this PDN    |\n|                          |      |connection is applied with \"Control Plane|\n|                          |      |Only Flag\" for UNI PDU transfer, i.e.    |\n|                          |      |transfer only using Control Plane NAS PDU|\n|                          |      |(Control Plane CIoT EPS optimisation).   |\n|Serving PLMN Rate Control |Oc    |This field holds the Serving PLMN Rate   |\n|                          |      |Control used by the MME during this      |\n|                          |      |record.                                  |\n|MO exception data counter |Oc    |This field holds the MO exception data   |\n|                          |      |counter value with the timestamp         |\n|                          |      |indicating the time at which the counter |\n|                          |      |value increased from 0 to 1, as defined  |\n|                          |      |in TS 29.274 [210].                      |\n|Record Extensions         |OC    |A set of network operator/manufacturer   |\n|                          |      |specific extensions to the record.       |\n|                          |      |Conditioned upon the existence of an     |\n|                          |      |extension.                               |\n|List of RAN Secondary RAT |OC    |A list of containers with volumes        |\n|Usage Reports             |      |reported from RAN for secondary RAT      |\n|                          |      |usage, each container is time stamped.   |\n\n\n\n\n"}, {"key": "FBC IP-CAN bearer charging data in P-GW (PGW-CDR)", "numbering": "6.1.3", "title_level": 2, "desc": "         6.1.3  FBC IP-CAN bearer charging data in P-GW (PGW-CDR)\n\nIf FBC is enabled and the collection of CDR data is enabled then the P-GW\ndata specified in table 6.1.3.1 shall be available for each IP-CAN bearer\nwhen charging per IP-CAN session is not active, or for each IP-CAN session\nwhen charging per IP-CAN session is active.\n\n              Table 6.1.3.1: P-GW IP-CAN bearer data (PGW-CDR)\n\n|Field                     |Catego|Description                                |\n|                          |ry    |                                           |\n|Record Type               |M     |P-GW IP-CAN bearer record.                 |\n|Retransmission            |OC    |This parameter, when present, indicates    |\n|                          |      |that information from retransmitted        |\n|                          |      |Charging Data Request has been used in this|\n|                          |      |CDR.                                       |\n|Served IMSI               |C     |IMSI of the served party, if available.    |\n|IMSI Unauthenticated Flag |OC    |This field indicates the provided served   |\n|                          |      |IMSI is not authenticated (emergency bearer|\n|                          |      |service situation).                        |\n|Served IMEI               |OC    |The IMEI or IMEISV of the ME, if available.|\n|                          |      |It is used for identifying the user in case|\n|                          |      |Served IMSI is not present during emergency|\n|                          |      |bearer service.                            |\n|Served 3GPP2 MEID         |OC    |MEID of the served party's terminal        |\n|                          |      |equipment for 3GPP2 access.                |\n|Served MN NAI             |OC    |Mobile Node Identifier in NAI format (based|\n|                          |      |on IMSI), if available.                    |\n|P-GW Address used         |M     |The control plane IP address of the P-GW   |\n|                          |      |used.                                      |\n|P-GW Address IPv6         |OC    |The control plane IPv6 address, in case of |\n|                          |      |IPv4v6 dual stack, of the P-GW used.       |\n|Charging ID               |M     |IP-CAN bearer Charging identifier used to  |\n|                          |      |identify this IP-CAN bearer in different   |\n|                          |      |records created by PCNs.                   |\n|                          |      |This field holds the unique Charging Id in |\n|                          |      |the PMIP case.                             |\n|                          |      |When charging per IP-CAN session is active,|\n|                          |      |this field holds the Charging Id of the EPS|\n|                          |      |default bearer. It is the same as the PDN  |\n|                          |      |Connection Charging Id.                    |\n|Charging per IP-CAN       |Oc    |This field indicates whether charging per  |\n|Session Indicator         |      |IP-CAN session is active. If this field is |\n|                          |      |not present, charging per IP-CAN session is|\n|                          |      |not active.                                |\n|PDN Connection Charging Id|OM    |This field holds the explicit Charging Id  |\n|                          |      |for the PDN connection. When NBIFOM is     |\n|                          |      |supported, the PGW will assign an explicit |\n|                          |      |PDN Connection Charging ID for the PDN     |\n|                          |      |connection.                                |\n|                          |      |Otherwise the field holds the Charging Id  |\n|                          |      |of the EPS default bearer.                 |\n|                          |      |This field is used to identify different   |\n|                          |      |records belonging to same PDN connection.  |\n|Serving node Address      |M     |List of SGSN/S-GW/TWAG control plane IP    |\n|                          |      |addresses, or the ePDG address used during |\n|                          |      |this record.                               |\n|Serving node IPv6 Address |OC    |List of SGSN/S-GW/TWAG control plane IPv6  |\n|                          |      |addresses, in case of IPv4v6 dual stack,   |\n|                          |      |used during this record.                   |\n|Serving node Type         |M     |List of serving node types in control plane|\n|                          |      |(SGSN, SGW, ePDG, AGW, TWAG). The serving  |\n|                          |      |node types listed here map to the serving  |\n|                          |      |node addresses listed in the field \"Serving|\n|                          |      |node Address\" in sequence.                 |\n|PGW PLMN Identifier       |Oc    |PLMN identifier (MCC MNC) of the P-GW.     |\n|Access Point Name Network |OM    |The logical name of the connected access   |\n|Identifier                |      |point to the external packet data network  |\n|                          |      |(network identifier part of APN).          |\n|PDP/PDN Type              |OM    |PDP/PDN type, i.e. IPv4, IPv6, IPv4v6 , or |\n|                          |      |PDP type PPP.                              |\n|PDP/PDN Type extension    |OM    |This field indicates Non-IP PDN type.      |\n|SGi PtP Tunnelling Method |OC    |This field indicates whether SGi PtP       |\n|                          |      |tunnelling method based on UDP/IP or other |\n|                          |      |methods are used for this PDN connection   |\n|                          |      |when non-IP PDN connection.                |\n|SCS/AS Address            |OC    |This field holds the Address of SCS/AS for |\n|                          |      |SGi PtP tunnelling.                        |\n|Served PDP/PDN Address    |OC    |IP address allocated for the PDP context / |\n|                          |      |PDN connection, i.e. IPv4 address when     |\n|                          |      |PDP/PDN Type is IPv4 or IPv6 prefix when   |\n|                          |      |PDP/PDN Type is IPv6 or IPv4v6, or assigned|\n|                          |      |IP address if any when PDP/PDN Type        |\n|                          |      |extension is Non-IP.                       |\n|                          |      |This parameter shall be present except:    |\n|                          |      |-  when both the PDP type is PPP and       |\n|                          |      |dynamic IP-CAN bearer address assignment is|\n|                          |      |used or                                    |\n|                          |      |-  when PDP/PDN Type extension is Non-IP,  |\n|                          |      |and no IP address has been assigned by the |\n|                          |      |PGW for the PDN connection.                |\n|Served PDP/PDN Address    |OC    |PDP/PDN Address prefix length of an IPv6   |\n|prefix length             |      |typed Served PDP Address. The field needs  |\n|                          |      |not available for prefix length of 64 bits.|\n|Served PDP/PDN Address    |OC    |This field holds IPv4 address of the served|\n|extension                 |      |IMSI, if available, when PDP/PDN type is   |\n|                          |      |IPv4v6.                                    |\n|Dynamic Address Flag      |OC    |Indicates whether served PDP/PDN address is|\n|                          |      |dynamic, which is allocated during IP-CAN  |\n|                          |      |bearer activation, initial attach (E-UTRAN |\n|                          |      |or over S2x) and UE requested PDN          |\n|                          |      |connectivity. This field is missing if IPv4|\n|                          |      |address is static when PDN Type is IPv4, or|\n|                          |      |if IPv6 address is static when PDN Type is |\n|                          |      |IPv6 or IPv4v6.                            |\n|Dynamic Address Flag      |OC    |Indicates whether served IPv4 PDP/PDN      |\n|extension                 |      |address is dynamic, which is allocated     |\n|                          |      |during IP-CAN bearer activation, initial   |\n|                          |      |attach (E-UTRAN or over S2x) and UE        |\n|                          |      |requested PDN connectivity with PDP/PDN    |\n|                          |      |type IPv4v6. This field is missing if IPv4 |\n|                          |      |address is static.                         |\n|List of Traffic Data      |OC    |A list of changes in charging conditions   |\n|Volumes                   |      |for all bearers within the IP-CAN session. |\n|                          |      |Each change is time stamped. Charging      |\n|                          |      |conditions are used to categorize traffic  |\n|                          |      |volumes, such as per tariff period. Initial|\n|                          |      |and subsequently changed QoS and           |\n|                          |      |corresponding data values are also listed. |\n|                          |      |Applicable only for IP-CAN bearer charging |\n|                          |      |when IP-CAN session charging is active. See|\n|                          |      |table 6.1.3.1 for a description of List of |\n|                          |      |Traffic Data Volumes handling.             |\n|List of Service Data      |OM    |A list of changes in charging conditions   |\n|                          |      |for all service data flows within this     |\n|                          |      |IP-CAN bearer categorized per rating group |\n|                          |      |or per combination of the rating group and |\n|                          |      |service id or per combination of rating    |\n|                          |      |group, sponsor identity and application    |\n|                          |      |service provider identity. Each change is  |\n|                          |      |time stamped. Charging conditions are used |\n|                          |      |to categorize traffic volumes, elapsed time|\n|                          |      |and number of events, such as per tariff   |\n|                          |      |period. Initial and subsequently changed   |\n|                          |      |QoS and corresponding data values are also |\n|                          |      |listed.                                    |\n|                          |      |Online charging information (PS Furnish    |\n|                          |      |Charging Information) may be added per each|\n|                          |      |service data flow container in case it is  |\n|                          |      |sent by the OCS.                           |\n|                          |      |External charging identifiers may be added |\n|                          |      |per each service data flow container in    |\n|                          |      |case sent by the PCRF.                     |\n|                          |      |Failure-Handling: This field shall be      |\n|                          |      |present in case P-GW triggers the          |\n|                          |      |Failure-Handling procedure. It shall       |\n|                          |      |indicate the Failure Handling scenario and |\n|                          |      |the instant the Failure Action is triggered|\n|                          |      |(see annex B). Scenarios: Continue/New     |\n|                          |      |Session; Continue/Ongoing Session;         |\n|                          |      |Retry&Terminate/Ongoing Session;           |\n|                          |      |Terminate/Ongoing Session.                 |\n|                          |      |When charging per IP-CAN session is active,|\n|                          |      |see table 6.1.3.2 for a description of List|\n|                          |      |of Service Data handling.                  |\n|Record Opening Time       |M     |Time stamp when IP-CAN bearer is activated |\n|                          |      |in this P-GW or record opening time on     |\n|                          |      |subsequent partial records.                |\n|MS Time Zone              |OC    |This field contains the MS Time Zone the MS|\n|                          |      |is currently located as defined in         |\n|                          |      |TS\u00a029.060 [203], if available.             |\n|Last MS Time Zone         |OC    |This field contains the UE Time Zone the UE|\n|                          |      |is located at IP-CAN bearer deactivation,  |\n|                          |      |or at default bearer deactivation when     |\n|                          |      |IP-CAN session charging is active, when    |\n|                          |      |available.                                 |\n|Duration                  |M     |Duration of this record in the P-GW.       |\n|Cause for Record Closing  |M     |The reason for the release of record from  |\n|                          |      |this P-GW.                                 |\n|Diagnostics               |OM    |A more detailed reason for the release of  |\n|                          |      |the IP-CAN bearer, when a single cause is  |\n|                          |      |applicable                                 |\n|                          |      |When charging per IP-CAN session is active,|\n|                          |      |this field holds a more detailed reason for|\n|                          |      |the release of the IP-CAN session, when a  |\n|                          |      |single cause is applicable.  .             |\n|Enhanced Diagnostics      |OC    |This field holds a more detailed reason for|\n|                          |      |the release of the IP-CAN bearer, when a   |\n|                          |      |set of causes is applicable.               |\n|                          |      |When charging per IP-CAN session is active,|\n|                          |      |this field holds a more detailed reason for|\n|                          |      |the release of the IP-CAN session, when a  |\n|                          |      |set of causes is applicable.               |\n|Record Sequence Number    |C     |Partial record sequence number, only       |\n|                          |      |present in case of partial records.        |\n|Node ID                   |OM    |Name of the recording entity.              |\n|Local Record Sequence     |OM    |Consecutive record number created by this  |\n|Number                    |      |node. The number is allocated sequentially |\n|                          |      |including all CDR types.                   |\n|APN Selection Mode        |OM    |An index indicating how the APN was        |\n|                          |      |selected.                                  |\n|Served MSISDN             |OC    |The primary MSISDN of the subscriber, if   |\n|                          |      |available.                                 |\n|User Location Information |OC    |This field contains the User Location      |\n|                          |      |Information of the MS when the CDR is      |\n|                          |      |opened as defined in TS\u00a029.060\u00a0[203] for   |\n|                          |      |GPRS case, and in TS 29.274 [210] for EPC  |\n|                          |      |case, if available.                        |\n|Last User Location        |OC    |This field contains the User Location      |\n|Information               |      |Information of the UE at IP-CAN bearer     |\n|                          |      |deactivation, or at default bearer         |\n|                          |      |deactivation when IP-CAN session charging  |\n|                          |      |is active, when available.                 |\n|User Location Information |OC    |This field contains the time at which the  |\n|Time                      |      |user location information was acquired, if |\n|                          |      |available.                                 |\n|User CSG information      |OC    |This field contains the User CSG           |\n|                          |      |Information of the UE, if available,       |\n|                          |      |including CSG ID, access mode and CSG      |\n|                          |      |membership indication.                     |\n|3GPP2 User Location       |OC    |This field contains the User Location      |\n|information               |      |Information of the MS when the CDR is      |\n|                          |      |opened as defined in TS\u00a029.212\u00a0[71] for    |\n|                          |      |3GPP2 access, if available.                |\n|TWAN User Location        |OC    |This field contains the UE location in a   |\n|Information               |      |Trusted WLAN Access Network (TWAN) , if    |\n|                          |      |available:                                 |\n|                          |      |-  \"TWAN identifier\" as defined in TS      |\n|                          |      |29.274 [210] for S2a GTP-based case, or,   |\n|                          |      |-\"Access Network Identifier Option IE\" as  |\n|                          |      |defined in 29.275 [211] for S2a PMIP-based |\n|                          |      |case.                                      |\n|UWAN User Location        |OC    |This field contains the UE location in an  |\n|Information               |      |Untrusted Wireless Access Network (UWAN)   |\n|                          |      |which includes the UE local IP address and |\n|                          |      |optionally UDP source port number (if NAT  |\n|                          |      |is detected) as defined in TS 29.274 [210].|\n|                          |      |It may also include WLAN location          |\n|                          |      |information (SSID and, when available,     |\n|                          |      |BSSID of the access point) the ePDG may    |\n|                          |      |have received from the 3GPP AAA server     |\n|                          |      |about the UE as defined in TS 29.274 [210].|\n|Presence Reporting Area   |OC    |This grouped field contains the Presence   |\n|Information               |      |Reporting Area Identifier for the UE PDN   |\n|                          |      |connection, additional the list(s) of      |\n|                          |      |elements comprising the Presence Reporting |\n|                          |      |Area for a UE-dedicated Presence Reporting |\n|                          |      |Area, and the initial status of the UE     |\n|                          |      |presence in the Presence Reporting Area, if|\n|                          |      |available.                                 |\n|                          |      |This field is not applicable to multiple   |\n|                          |      |PRA(s).                                    |\n|Charging Characteristics  |M     |The Charging Characteristics applied to the|\n|                          |      |IP-CAN bearer.                             |\n|Charging Characteristics  |OM    |Holds information about how Charging       |\n|Selection Mode            |      |Characteristics were selected.             |\n|IMS Signalling Context    |OC    |Included if the IP-CAN default bearer IM-CN|\n|                          |      |Subsystem Signalling Flag is set, see TS   |\n|                          |      |23.060 [201] is used for IMS signalling.   |\n|Serving node PLMN         |OM    |This fields holds the PLMN Identifier (MCC |\n|Identifier                |      |and MNC) serving the UE during this record,|\n|                          |      |as received in the \"Serving Network\u201d IE    |\n|                          |      |over S5/S8 or retrieved from the RAI       |\n|                          |      |received over Gn/Gp.                       |\n|                          |      |When the Serving node is TWAG, this field  |\n|                          |      |includes the PLMN identifier used for UE   |\n|                          |      |authentication, i.e. the VPLMN in roaming  |\n|                          |      |case, and the HPLMN in non-roaming case.   |\n|CN Operator Selection     |OC    |This field indicates whether the Serving   |\n|Entity                    |      |Network identified by the \"Serving Node    |\n|                          |      |PLMN Identifier\u201d has been selected by the  |\n|                          |      |UE or by the network, as defined in        |\n|                          |      |TS\u00a029.060\u00a0[203] for GPRS, and in TS 29.274 |\n|                          |      |[210] for EPC, if available.               |\n|PS Furnish Charging       |OC    |Online charging session specific           |\n|Information               |      |information                                |\n|CAMEL Information         |OC    |Set of CAMEL information related to IP-CAN |\n|                          |      |bearer, if available. This field applies   |\n|                          |      |only for GPRS.                             |\n|                          |      |When charging per IP-CAN session is active,|\n|                          |      |this field is not applicable.              |\n|RAT Type                  |OC    |This field indicates the Radio Access      |\n|                          |      |Technology (RAT) type currently used by the|\n|                          |      |Mobile Station as defined in TS 29.061     |\n|                          |      |[205], when available.                     |\n|                          |      |When NBIFOM is accepted by PCRF, this field|\n|                          |      |holds the first default bearer\u2019s RAT type  |\n|                          |      |when charging per IP-CAN session is active.|\n|Start Time                |OC    |This field holds the time when User IP-CAN |\n|                          |      |session starts, available in the CDR for   |\n|                          |      |the first bearer in an IP-CAN session.     |\n|                          |      |When charging per IP-CAN session is active,|\n|                          |      |this field holds the time when User IP-CAN |\n|                          |      |session starts.                            |\n|Stop Time                 |OC    |This field holds the time when User IP-CAN |\n|                          |      |session is terminated, available in the CDR|\n|                          |      |for the last bearer in an IP-CAN session.  |\n|                          |      |When charging per IP-CAN session is active,|\n|                          |      |this field holds the time when User IP-CAN |\n|                          |      |session is terminated.                     |\n|Low Priority Indicator    |OC    |This field indicates if this IP-CAN session|\n|                          |      |has a low priority, i.e. for Machine Type  |\n|                          |      |Communication.                             |\n|QoS Information           |OC    |This field indicates the APN-AMBR uplink   |\n|                          |      |and downlink information for the IP-CAN    |\n|                          |      |session.                                   |\n|                          |      |Applicable only when charging per IP-CAN   |\n|                          |      |session is active.                         |\n|NBIFOM Support            |OC    |This field indicates that NBIFOM was       |\n|                          |      |requested by the UE, supported and accepted|\n|                          |      |by the network for the IP-CAN session or if|\n|                          |      |NBIFOM is not supported for the IP-CAN     |\n|                          |      |session.                                   |\n|NBIFOM Mode               |OC    |This field indicates the NBIFOM mode       |\n|                          |      |selected for the PDN connection, when      |\n|                          |      |NBIFOM is supported for the IP-CAN session.|\n|                          |      |This field is only present when NBIFOM is  |\n|                          |      |accepted.                                  |\n|UNI PDU CP Only Flag      |OC    |This field indicates whether this PDN      |\n|                          |      |connection is applied with \"Control Plane  |\n|                          |      |Only Flag\" for UNI PDU transfer, i.e.      |\n|                          |      |transfer only using Control Plane NAS PDU  |\n|                          |      |(Control Plane CIoT EPS optimisation).     |\n|Serving PLMN Rate Control |Oc    |This field holds the Serving PLMN Rate     |\n|                          |      |Control used by the MME during this record |\n|APN Rate Control          |Oc    |This field holds the APN Rate Controls     |\n|                          |      |enforced in the PGW during this record.    |\n|MO exception data counter |Oc    |This field holds the MO exception data     |\n|                          |      |counter value with the timestamp indicating|\n|                          |      |the time at which the counter value        |\n|                          |      |increased from 0 to 1, as defined in TS    |\n|                          |      |29.274 [210].                              |\n|Record Extensions         |OC    |A set of network operator/manufacturer     |\n|                          |      |specific extensions to the record.         |\n|                          |      |Conditioned upon the existence of an       |\n|                          |      |extension.                                 |\n|3GPP PS Data Off Status   |Oc    |This field holds the 3GPP PS Data Off      |\n|                          |      |Status.                                    |\n|List of RAN Secondary RAT |OC    |A list of containers with volumes reported |\n|Usage Reports             |      |from RAN for secondary RAT usage, each     |\n|                          |      |container is time stamped.                 |\n\n\nTable 6.1.3.2 contains special handling for the fields in the List of\nTraffic Data Volumes in PGW-CDR when charging per IP-CAN session is active\nand IP-CAN bearer charging is performed.\n\nTable 6.1.3.2: List of Traffic Data Volumes in PGW-CDR when charging per IP-\n                            CAN session is active\n\n|Field                     |Catego|Description                                |\n|                          |ry    |                                           |\n|Data Volume Uplink        |OC    |This field includes the number of octets   |\n|                          |      |transmitted during the use of the packet   |\n|                          |      |data services in the uplink direction.     |\n|Data Volume Downlink      |OC    |This field includes the number of octets   |\n|                          |      |transmitted during the use of the packet   |\n|                          |      |data services in the downlink direction.   |\n|Change Condition          |M     |This field defines the reason for closing  |\n|                          |      |the container as specified in clause       |\n|                          |      |5.2.1.10.1.                                |\n|Change Time               |M     |This field is a time stamp, which defines  |\n|                          |      |the moment when the volume container is    |\n|                          |      |closed.                                    |\n|User Location Information |OC    |This field contains the location (e.g.     |\n|                          |      |CGI/SAI, ECGI/TAI or RAI) where the UE is  |\n|                          |      |located and used during the transfer of the|\n|                          |      |data volume captured by the container. This|\n|                          |      |is included in the Traffic data container  |\n|                          |      |only if previous container's change        |\n|                          |      |condition is \"user location change\".       |\n|UWAN User Location        |OC    |This field contains the UE location in an  |\n|Information               |      |Untrusted Wireless Access Network (UWAN)   |\n|                          |      |which includes the UE local IP address and |\n|                          |      |optionally UDP or TCP source port number   |\n|                          |      |(if NAT is detected) as defined in TS      |\n|                          |      |29.274 [210]. It may also include WLAN     |\n|                          |      |location information  the ePDG may have    |\n|                          |      |received from the 3GPP AAA server about the|\n|                          |      |UE as \"WLAN location information\" defined  |\n|                          |      |in TS 29.274 [210].                        |\n|TWAN User Location        |OC    |This field contains the UE location in a   |\n|Information               |      |Trusted WLAN Access Network (TWAN), if     |\n|                          |      |available:                                 |\n|                          |      |- as \"TWAN identifier\" defined in TS 29.274|\n|                          |      |[210] for S2a GTP-based case, or,          |\n|                          |      |-  as \"Access Network Identifier Option IE\"|\n|                          |      |defined in 29.275 [211] for S2a PMIP-based |\n|                          |      |case.                                      |\n|Presence Reporting Area   |OC    |This field contains the status of the UE   |\n|Status                    |      |presence in Presence Reporting Area.       |\n|                          |      |This field is not applicable to multiple   |\n|                          |      |PRA(s).                                    |\n|List of Presence Reporting|OC    |This field contains a list of Presence     |\n|Area Information          |      |Reporting Area Identifier(s) for the UE PDN|\n|                          |      |connection, and the Presence Reporting     |\n|                          |      |Area(s) status (UE presence or not,        |\n|                          |      |inactive), differentiated between PCRF and |\n|                          |      |OCS subscription.                          |\n|EPC QoS Information       |OC    |This field contains the authorized QoS for |\n|                          |      |the IP-CAN bearer. First container for each|\n|                          |      |QCI/ARP pair includes this field. In       |\n|                          |      |following containers this field is present |\n|                          |      |if previous change condition is \"QoS       |\n|                          |      |change\".                                   |\n|                          |      |This field includes: QCI and ARP. For GBR  |\n|                          |      |QCI values, this field also includes GBR   |\n|                          |      |for the downlink and uplink direction. If  |\n|                          |      |the MBR is different than the GBR, then    |\n|                          |      |this field also includes the MBR for the   |\n|                          |      |downlink and uplink direction.             |\n|                          |      |This field does not include the APN-AMBR,  |\n|                          |      |which is contained in a separate field in  |\n|                          |      |the CDR for the IP-CAN session.            |\n|Charging Id               |OC    |IP-CAN bearer Charging identifier used to  |\n|                          |      |identify this IP-CAN bearer in different   |\n|                          |      |records created by PCNs.                   |\n|                          |      |Charging Id is generated by P-GW at IP-CAN |\n|                          |      |bearer activation and is included in all   |\n|                          |      |containers in order to identify the        |\n|                          |      |containers which pertain to the IP-CAN     |\n|                          |      |bearer.                                    |\n|RAT Type                  |OC    |This field contains the RAT type for the   |\n|                          |      |current IP-CAN bearer.                     |\n|Access Availability Change|OC    |This field indicates the reason why the    |\n|Reason                    |      |availability of an access is changed by the|\n|                          |      |PCEF, i.e. RAN rule indication or Access   |\n|                          |      |usable/unusable. This field is only present|\n|                          |      |when one access of a multi-access PDN      |\n|                          |      |connection becomes unusable.               |\n|Related Change Condition  |OC    |This field indicates the change condition  |\n|Information               |      |associated with an alternate access of a   |\n|                          |      |multi-access PDN connection that indirectly|\n|                          |      |caused closure of the container. This field|\n|                          |      |includes optional supplemental information |\n|                          |      |associated with the change event (e.g.,    |\n|                          |      |user location information).                |\n|Diagnostics               |OM    |A more detailed reason for the release of  |\n|                          |      |the IP-CAN bearer, when a single cause is  |\n|                          |      |applicable.                                |\n|Enhanced Diagnostics      |OC    |This field holds a more detailed reason for|\n|                          |      |the release of the IP-CAN bearer, when a   |\n|                          |      |set of causes is applicable.               |\n|3GPP PS Data Off Status   |OC    |This field contains the status of the UE\u2019s |\n|                          |      |3GPP PS Data off Status.                   |\n|Serving PLMN Rate Control |OC    |This field holds the Serving PLMN Rate     |\n|                          |      |Control used by the MME                    |\n|APN Rate Control          |OC    |This field holds the APN Rate Controls     |\n|                          |      |enforced in the PGW                        |\n\n\nTable 6.1.3.3 contains special handling for fields in the List of Service\nData when charging per IP-CAN session is active. The complete set of fields\nin the List of Service Data is defined in TS 32.298 [51].\n\n   Table 6.1.3.3: List of Service Data in PGW-CDR when charging per IP-CAN\n                              session is active\n\n|Field                     |Catego|Description                                |\n|                          |ry    |                                           |\n|AF Record Information     |OC    |As specified in TS 32.298 [51].            |\n|Charging Rule Base Name   |OC    |As specified in TS 32.298 [51].            |\n|ADC Rule Base Name        |OC    |Not applicable to PGW-CDR.                 |\n|Data Volume Downlink      |OC    |As specified in TS 32.298 [51].            |\n|Data Volume Uplink        |OC    |As specified in TS 32.298 [51].            |\n|Event Based Charging      |OC    |As specified in TS 32.298 [51].            |\n|Information               |      |                                           |\n|Local Sequence Number     |OC    |As specified in TS 32.298 [51].            |\n|PS Furnish Charging       |OC    |As specified in TS 32.298 [51].            |\n|Information               |      |                                           |\n|EPC QoS Information       |OC    |This field contains the authorized QoS for |\n|                          |      |the IP-CAN bearer that is first reported   |\n|                          |      |for the Rating Group or Rating Group /     |\n|                          |      |Service Identifier in the container. If    |\n|                          |      |traffic from multiple bearers is included  |\n|                          |      |in the report for the container, only one  |\n|                          |      |field is included.                         |\n|                          |      |                                           |\n|                          |      |This field includes: QCI and ARP. For      |\n|                          |      |non-GBR QCI values, this field also        |\n|                          |      |includes the MBR for the downlink and      |\n|                          |      |uplink direction. For GBR QCI values, this |\n|                          |      |field also includes GBR for the downlink   |\n|                          |      |and uplink direction. If the MBR is        |\n|                          |      |different than the GBR, then this field    |\n|                          |      |also includes the MBR for the downlink and |\n|                          |      |uplink direction.                          |\n|                          |      |                                           |\n|                          |      |This field does not include the APN-AMBR,  |\n|                          |      |which is contained in a separate field in  |\n|                          |      |the CDR for the IP-CAN session.            |\n|Rating Group              |M     |As specified in TS 32.298 [51].            |\n|Report Time               |M     |As specified in TS 32.298 [51].            |\n|Result Code               |OC    |As specified in TS 32.298 [51].            |\n|Service Condition Change  |M     |As specified in TS 32.298 [51].            |\n|                          |      |Only those values specified for the events |\n|                          |      |in clause 5.3.2.X apply.                   |\n|Service Identifier        |OC    |As specified in TS 32.298 [51].            |\n|Service Specific Info     |OC    |As specified in TS 32.298 [51].            |\n|Serving Node Address      |OC    |As specified in TS 32.298 [51].            |\n|Time of First Usage       |OC    |As specified in TS 32.298 [51].            |\n|Time of Last Usage        |OC    |As specified in TS 32.298 [51].            |\n|Tme Usage                 |OC    |As specified in TS 32.298 [51].            |\n|User Location Information |OC    |As specified in TS 32.298 [51].            |\n|3GPP2 User Location       |OC    |As specified in TS 32.298 [51].            |\n|Information               |      |                                           |\n|UWAN User Location        |OC    |This field contains the UE location in an  |\n|Information               |      |Untrusted Wireless Access Network (UWAN)   |\n|                          |      |which includes the UE local IP address and |\n|                          |      |optionally UDP or TCP source port number   |\n|                          |      |(if NAT is detected) as defined in TS      |\n|                          |      |29.274 [210]. It may also include WLAN     |\n|                          |      |location information  the ePDG may have    |\n|                          |      |received from the 3GPP AAA server about the|\n|                          |      |UE as \"WLAN location information\" defined  |\n|                          |      |in TS 29.274 [210].                        |\n|Presence Reporting Area   |OC    |This field contains the status of the UE   |\n|Status                    |      |presence in Presence Reporting Area as     |\n|                          |      |defined in TS 29.274[210].                 |\n|                          |      |This field is not applicable to multiple   |\n|                          |      |PRA(s).                                    |\n|List of Presence Reporting|OC    |This field contains a list of Presence     |\n|Area Information          |      |Reporting Area Identifier(s) for the UE PDN|\n|                          |      |connection, and the Presence Reporting     |\n|                          |      |Area(s) status (UE presence or not,        |\n|                          |      |inactive), differentiated between PCRF and |\n|                          |      |OCS subscription.                          |\n|RAT Type                  |OC    |This field contains the RAT type for the   |\n|                          |      |IP-CAN bearer that is first reported for   |\n|                          |      |the Rating Group or Rating Group / Service |\n|                          |      |Identifier in the container. If traffic    |\n|                          |      |from multiple bearers is included in the   |\n|                          |      |report for the container, only one field is|\n|                          |      |included.                                  |\n|Sponsor Identity          |OC    |As specified in TS 32.298 [51].            |\n|Application Service       |OC    |As specified in TS 32.298 [51].            |\n|Provider Identity         |      |                                           |\n|Time Quota Mechanism      |OC    |As specified in TS 32.298 [51].            |\n|Related Change Condition  |OC    |This field indicates the change condition  |\n|Information               |      |associated with an alternate access of a   |\n|                          |      |multi-access PDN connection that indirectly|\n|                          |      |caused closure of the container. This field|\n|                          |      |includes optional supplemental information |\n|                          |      |associated with the change event (e.g.,    |\n|                          |      |user location information).                |\n|3GPP PS Data Off Status   |OC    |This field contains the status of the UE\u2019s |\n|                          |      |3GPP PS Data Off Status.                   |\n|Traffic Steering Policy   |OC    |This field contains the traffic steering   |\n|Identifier Uplink         |      |policy identifier in the uplink direction. |\n|Traffic Steering Policy   |OC    |This field contains the traffic steering   |\n|Identifier Downlink       |      |policy identifier in the downlink          |\n|                          |      |direction.                                 |\n|Serving PLMN Rate Control |OC    |This field holds the Serving PLMN Rate     |\n|                          |      |Control used by the MME                    |\n|APN Rate Control          |OC    |This field holds the APN Rate Controls     |\n|                          |      |enforced in the PGW                        |\n\n"}, {"key": "Mobile Station mobility management data in SGSN (M-CDR)", "numbering": "6.1.4", "title_level": 2, "desc": "         6.1.4  Mobile Station mobility management data in SGSN (M-CDR)\n\nIf the collection of MS mobility management data is enabled then the SGSN\nshall start collecting the information specified in the following table\n6.1.4.1 each time the mobile is attached to the SGSN.\n\n     Table 6.1.4.1: SGSN Mobile Station mobility management data (M-CDR)\n\n|Field                     |Catego|Description                              |\n|                          |ry    |                                         |\n|Record Type               |M     |SGSN mobility management record.         |\n|Served IMSI               |M     |IMSI of the MS.                          |\n|Served IMEI               |OC    |The IMEI or IMEISV of the ME, if         |\n|                          |      |available.                               |\n|SGSN Address              |OM    |The IP address of the current SGSN.      |\n|MS Network Capability     |OM    |The mobile station network capability.   |\n|Routing Area Code         |OM    |Routing Area at the time of the Record   |\n|                          |      |Opening Time.                            |\n|Local Area Code           |OM    |Location Area Code at the time of Record |\n|                          |      |Opening Time.                            |\n|Cell Identifier           |OM    |The Cell Identity for GSM or Service Area|\n|                          |      |Code (SAC) for UMTS at the time of the   |\n|                          |      |Record Opening Time.                     |\n|Cell PLMN Id              |OM    |The MCC and MNC of the Cell at the time  |\n|                          |      |of Record Opening Time.                  |\n|Change of Location        |OC    |A list of changes in Routing Area Code   |\n|                          |      |including MCC and MNC, each with a time  |\n|                          |      |stamp. This field is not required if     |\n|                          |      |partial records are generated when the   |\n|                          |      |location changes.                        |\n|Record Opening Time       |M     |Timestamp when MS is attached to this    |\n|                          |      |SGSN or record opening time on following |\n|                          |      |partial record.                          |\n|Duration                  |OM    |Duration of this record.                 |\n|SGSN Change               |C     |Present if this is first record after    |\n|                          |      |SGSN change.                             |\n|Cause for Record Closing  |M     |The reason for the closure of the record |\n|                          |      |in this SGSN.                            |\n|Diagnostics               |OM    |A more detailed reason for the release of|\n|                          |      |the connection.                          |\n|Record Sequence Number    |C     |Partial record sequence number in this   |\n|                          |      |SGSN; only present in case of partial    |\n|                          |      |records.                                 |\n|Node ID                   |OM    |Name of the recording entity.            |\n|Local Record Sequence     |OM    |Consecutive record number created by this|\n|Number                    |      |node. The number is allocated            |\n|                          |      |sequentially including all CDR types.    |\n|Served MSISDN             |Oc    |The primary MSISDN of the subscriber, if |\n|                          |      |available.                               |\n|Charging Characteristics  |M     |The Charging Characteristics used by the |\n|                          |      |SGSN.                                    |\n|Serving Node PLMN         |Oc    |This field holds the PLMN Identifier (MCC|\n|Identifier                |      |and MNC) serving the UE during this      |\n|                          |      |record. Only one value is included in    |\n|                          |      |case multiple PLMN Ids are supported by  |\n|                          |      |the SGSN.                                |\n|CN Operator Selection     |OC    |This field indicates whether the Serving |\n|Entity                    |      |Network identified by the \"Serving Node  |\n|                          |      |PLMN Identifier\u201d has been selected by the|\n|                          |      |UE or by the network, as defined in      |\n|                          |      |TS\u00a029.060\u00a0[203] for GPRS, and in TS      |\n|                          |      |29.274 [210] for EPC, if available.      |\n|CAMEL Information         |OC    |Set of CAMEL information related to      |\n|                          |      |Attach/Detach session. For more          |\n|                          |      |information see Description of Record    |\n|                          |      |Fields. This field is present if CAMEL   |\n|                          |      |service is activated.                    |\n|RAT Type                  |OC    |This field indicates the Radio Access    |\n|                          |      |Technology (RAT) type currently used by  |\n|                          |      |the Mobile Station as defined in TS      |\n|                          |      |29.061 [205], when available.            |\n|Charging Characteristics  |OM    |Holds information about how Charging     |\n|Selection Mode            |      |Characteristics were selected.           |\n|Record Extensions         |OC    |A set of network operator/manufacturer   |\n|                          |      |specific extensions to the record.       |\n|                          |      |Conditioned upon the existence of an     |\n|                          |      |extension.                               |\n\n\n\n"}, {"key": "SMS-MO data in SGSN/MME (S-SMO-CDR)", "numbering": "6.1.5", "title_level": 2, "desc": "6.1.5  SMS-MO data in SGSN/MME (S-SMO-CDR)\n\nIf enabled, an S-SMO-CDR SGSN/MME Mobile originated SMS record shall be\nproduced for each short message sent by a mobile subscriber via the\nSGSN/via the MME to the SMSC.\nThe fields in the record are specified in table 6.1.5.1.\n\n      Table 6.1.5.1: SGSN/MME Mobile originated SMS record (S-SMO-CDR)\n\n|Field            |Category      |Description                               |\n|                 |SGSN   |MME   |                                          |\n|Record Type      |M      |M     |SGSN/MME Mobile Originated SMS.           |\n|Retransmission   |-      |OC    |This parameter, when present, indicates   |\n|                 |       |      |that information from retransmitted       |\n|                 |       |      |Charging Data Requesthas been used in this|\n|                 |       |      |CDR.                                      |\n|Served IMSI      |M      |M     |The IMSI of the subscriber.               |\n|Served IMEI      |OC     |OC    |The IMEI or IMEISV of the ME, if          |\n|                 |       |      |available.                                |\n|Served MSISDN    |OC     |OC    |The primary MSISDN of the subscriber, if  |\n|                 |       |      |available. For MSISDN-less subscription,  |\n|                 |       |      |this field holds the Dummy MSISDN as      |\n|                 |       |      |defined in TS 23.003 [103].               |\n|MS Network       |OM     |-     |The mobile station network capability.    |\n|Capability       |       |      |                                          |\n|Service Centre   |OM     |OM    |The address (E.164) of the SMS-service    |\n|                 |       |      |centre.                                   |\n|Serving Node Type|M      |M     |Type of node handling the SMS (SGSN or    |\n|                 |       |      |MME).                                     |\n|Recording Entity |OM     |OM    |The E.164 number of the SGSN/MME.         |\n|Serving Node     |-      |OM    |The address of the MME used.              |\n|Address          |       |      |                                          |\n|Serving Node IPv6|-      |OC    |The IPv6 address, in case of IPv4v6 dual  |\n|Address Address  |       |      |stack, of the MME.                        |\n|MME Name         |-      |OM    |The operation Identity of the MME.        |\n|MME Realm        |-      |OM    |The operation Realm Identity of the MME.  |\n|Location Area    |OM     |-     |The Location Area Code from which the     |\n|Code             |       |      |message originated.                       |\n|Routing Area Code|OM     |-     |The Routing Area Code from which the      |\n|                 |       |      |message originated.                       |\n|Cell Identifier  |OM     |-     |The Cell Identity for GSM or Service Area |\n|                 |       |      |Code (SAC) for UMTS from which the message|\n|                 |       |      |originated.                               |\n|User Location    |-      |OC    |This field contains the User Location     |\n|Information      |       |      |(User location Information as defined in  |\n|                 |       |      |TS 29.274 [210]) from which the message   |\n|                 |       |      |originated.                               |\n|User Location    |-      |OC    |This field contains the time at which the |\n|Information Time |       |      |user location information was acquired.   |\n|Message Reference|M      |M     |A reference provided by the MS uniquely   |\n|                 |       |      |identifying this message.                 |\n|Event Time Stamp |M      |M     |The time at which the message was received|\n|                 |       |      |by the SGSN/MME from the subscriber.      |\n|SMS Result       |C      |C     |The result of the attempted delivery if   |\n|                 |       |      |unsuccessful.                             |\n|Node ID          |OM     |OM    |Name of the recording entity.             |\n|Local Record     |OM     |OM    |Consecutive record number created by this |\n|Sequence Number  |       |      |node. The number is allocated sequentially|\n|                 |       |      |including all CDR types.                  |\n|Charging         |M      |M     |The Charging Characteristics flag set used|\n|Characteristics  |       |      |by the SGSN/MME.                          |\n|Serving Node PLMN|Oc     |Oc    |This field holds the PLMN Identifier (MCC |\n|Identifier       |       |      |and MNC) serving the UE during this       |\n|                 |       |      |record. Only one value is included in case|\n|                 |       |      |multiple PLMN Ids are supported by the    |\n|                 |       |      |SGSN/MME.                                 |\n|CN Operator      |OC     |OC    |This field indicates whether the Serving  |\n|Selection Entity |       |      |Network identified by the \"Serving Node   |\n|                 |       |      |PLMN Identifier\u201d has been selected by the |\n|                 |       |      |UE or by the network, as defined in       |\n|                 |       |      |TS\u00a029.060\u00a0[203] for GPRS, and in TS 29.274|\n|                 |       |      |[210] for EPC, if available.              |\n|RAT Type         |OC     |OC    |This field indicates the Radio Access     |\n|                 |       |      |Technology (RAT) type currently used by   |\n|                 |       |      |the Mobile Station as defined in TS 29.061|\n|                 |       |      |[205], when available.                    |\n|Destination      |OM     |OM    |The destination short message subscriber  |\n|Number           |       |      |number.                                   |\n|CAMEL Information|OC     |-     |Set of CAMEL information related to SMS   |\n|                 |       |      |session. For more information see         |\n|                 |       |      |Description of Record Fields. This field  |\n|                 |       |      |is present if CAMEL service is activated. |\n|Charging         |OM     |OM    |Holds information about how Charging      |\n|Characteristics  |       |      |Characteristics were selected.            |\n|Selection Mode   |       |      |                                          |\n|Record Extensions|OC     |OC    |A set of network operator/ manufacturer   |\n|                 |       |      |specific extensions to the record.        |\n|                 |       |      |Conditioned upon the existence of an      |\n|                 |       |      |extension.                                |\n\n\n\n"}, {"key": "SMS-MT data in SGSN/MME (S-SMT-CDR)", "numbering": "6.1.6", "title_level": 2, "desc": "6.1.6  SMS-MT data in SGSN/MME (S-SMT-CDR)\n\nIf enabled, an SGSN/MME Mobile terminated SMS record shall be produced for\neach short message received by a mobile subscriber via the SGSN/ from the\nSMSC via the MME. The fields in the record are specified in table 6.1.6.1.\n\n      Table 6.1.6.1: SGSN/MME Mobile terminated SMS record (S-SMT-CDR)\n\n|Field            |Category       |Description                              |\n|                 |SGSN   |MME    |                                         |\n|Record Type      |M      |M      |SGSN/MME Mobile Terminated SMS.          |\n|Retransmission   |-      |OC     |This parameter, when present, indicates  |\n|                 |       |       |that information from retransmitted      |\n|                 |       |       |Charging Data Request has been used in   |\n|                 |       |       |this CDR.                                |\n|Served IMSI      |M      |M      |The IMSI of the subscriber.              |\n|Served IMEI      |OC     |OC     |The IMEI or IMEISV of the ME, if         |\n|                 |       |       |available.                               |\n|Served MSISDN    |OC     |OC     |The primary MSISDN of the subscriber.    |\n|MS Network       |OM     |-      |The mobile station network capability.   |\n|Capability       |       |       |                                         |\n|Service Centre   |OM     |OM     |The address (E.164) of the SMS-service   |\n|                 |       |       |centre.                                  |\n|Serving Node Type|M      |M      |Type of node handling the SMS (SGSN or   |\n|                 |       |       |MME)                                     |\n|Recording Entity |OM     |OM     |The E.164 number of the SGSN/MME.        |\n|Serving Node     |-      |OM     |The address of the MME used              |\n|Address          |       |       |                                         |\n|Serving Node IPv6|-      |OC     |The IPv6 address, in case of IPv4v6 dual |\n|Address  Address |       |       |stack, of the MME.                       |\n|MME Name         |-      |OM     |The Diameter Identity of the MME         |\n|MME Realm        |-      |OM     |The Diameter Realm Identity of the MME   |\n|Location Area    |OM     |-      |The Location Area Code to which the      |\n|Code             |       |       |message was delivered.                   |\n|Routing Area Code|OM     |-      |The Routing Area Code to which the       |\n|                 |       |       |message was delivered.                   |\n|Cell Identifier  |OM     |-      |The Cell Identity for GSM or Service Area|\n|                 |       |       |Code (SAC) for UMTS to which the message |\n|                 |       |       |was delivered.                           |\n|User Location    |-      |OC     |This field contains the User Location    |\n|Information      |       |       |(User location Information as defined in |\n|                 |       |       |TS 29.274 [210]) to which the message was|\n|                 |       |       |delivered, if available.                 |\n|User Location    |-      |OC     |This field contains the time at which the|\n|Information Time |       |       |user location information was acquired.  |\n|Event Time Stamp |M      |M      |Delivery time stamp, time at which       |\n|                 |       |       |message was sent to the MS by the        |\n|                 |       |       |SGSN/MME.                                |\n|SMS Result       |C      |C      |The result of the attempted delivery if  |\n|                 |       |       |unsuccessful.                            |\n|Node ID          |OM     |OM     |Name of the recording entity.            |\n|Local Record     |OM     |OM     |Consecutive record number created by this|\n|Sequence Number  |       |       |node. The number is allocated            |\n|                 |       |       |sequentially including all CDR types.    |\n|Charging         |M      |M      |The Charging Characteristics flag set    |\n|Characteristics  |       |       |used by the SGSN/MME.                    |\n|Serving Node PLMN|Oc     |Oc     |This field holds the PLMN Identifier (MCC|\n|Identifier       |       |       |and MNC) serving the UE during this      |\n|                 |       |       |record. Only one value is included in    |\n|                 |       |       |case multiple PLMN Ids are supported by  |\n|                 |       |       |the SGSN/MME                             |\n|CN Operator      |OC     |OC     |This field indicates whether the Serving |\n|Selection Entity |       |       |Network identified by the \"Serving Node  |\n|                 |       |       |PLMN Identifier\u201d has been selected by the|\n|                 |       |       |UE or by the network, as defined in      |\n|                 |       |       |TS\u00a029.060\u00a0[203] for GPRS, and in TS      |\n|                 |       |       |29.274 [210] for EPC, if available.      |\n|RAT Type         |OC     |OC     |This field indicates the Radio Access    |\n|                 |       |       |Technology (RAT) type currently used by  |\n|                 |       |       |the Mobile Station as defined in TS      |\n|                 |       |       |29.061 [205], when available.            |\n|Charging         |OM     |OM     |Holds information about how Charging     |\n|Characteristics  |       |       |Characteristics were selected.           |\n|Selection Mode   |       |       |                                         |\n|CAMEL Information|OC     |-      |Set of CAMEL information related to SMS  |\n|                 |       |       |session. For more information see        |\n|                 |       |       |Description of Record Fields. This field |\n|                 |       |       |is present if CAMEL service is activated.|\n|Originating      |OC     |OC     |The address of the originating SME.      |\n|Address          |       |       |                                         |\n|Record Extensions|OC     |OC     |A set of network operator/manufacturer   |\n|                 |       |       |specific extensions to the record.       |\n|                 |       |       |Conditioned upon the existence of an     |\n|                 |       |       |extension.                               |\n\n\n\n\n"}, {"key": "Mobile Terminated location request (LCS-MT-CDR)", "numbering": "6.1.7", "title_level": 2, "desc": "         6.1.7  Mobile Terminated location request (LCS-MT-CDR)\n\nIf enabled, an SGSN Mobile terminated LCS record shall be produced for each\nmobile terminated location request that is performed via the SGSN. The\nfields in the record are specified in table 6.1.7.1.\n\n       Table 6.1.7.1: SGSN Mobile terminated LCS record (SGSN-LCS-MT)\n\n|Field                     |Catego|Description                              |\n|                          |ry    |                                         |\n|Record Type               |M     |SGSN Mobile Terminated LCS.              |\n|Recording Entity          |M     |The E.164 number of the SGSN.            |\n|LCS Client Type           |M     |The type of the LCS client that invoked  |\n|                          |      |the LR.                                  |\n|LCS Client Identity       |M     |Further identification of the LCS client.|\n|Served IMSI               |M     |The IMSI of the subscriber.              |\n|Served MSISDN             |OC    |The primary MSISDN of the subscriber, if |\n|                          |      |available.                               |\n|SGSN Address              |OM    |The IP address of the current SGSN.      |\n|Location Type             |M     |The type of the estimated location.      |\n|LCS QoS                   |C     |QoS of the LR, if available.             |\n|LCS Priority              |C     |Priority of the LR, if available.        |\n|MLC Number                |M     |The E.164 address of the requesting GMLC.|\n|Event Time stamp          |M     |The time at which the                    |\n|                          |      |Perform_Location_Request is sent by the  |\n|                          |      |SGSN.                                    |\n|Measurement Duration      |OM    |The duration of proceeding the location  |\n|                          |      |request.                                 |\n|Notification To MS User   |C     |The privacy notification to MS user that |\n|                          |      |was applicable when the LR was invoked,  |\n|                          |      |if available.                            |\n|Privacy Override          |C     |This parameter indicates the override MS |\n|                          |      |privacy by the LCS client, if available. |\n|Location                  |OM    |The LAC and CI when the LR is received.  |\n|Routing Area Code         |OM    |The Routing Area Code to which the LCS   |\n|                          |      |terminated.                              |\n|Location Estimate         |OC    |The location estimate for the subscriber |\n|                          |      |if contained in geographic position and  |\n|                          |      |the LR was successful.                   |\n|Positioning Data          |C     |The positioning method used or attempted,|\n|                          |      |if available.                            |\n|LCS Cause                 |OC    |The result of the LR if any failure or   |\n|                          |      |partial success happened as known at     |\n|                          |      |radio interface.                         |\n|Cause for Record Closing  |M     |The reason for closure of the record from|\n|                          |      |this SGSN.                               |\n|Diagnostics               |C     |A more detailed information about the    |\n|                          |      |Cause for Record Closing if any failure  |\n|                          |      |or partial success happened.             |\n|Node ID                   |OM    |Name of the recording entity.            |\n|Local Record Sequence     |OM    |Consecutive record number created by this|\n|Number                    |      |node. The number is allocated            |\n|                          |      |sequentially including all CDR types.    |\n|Charging Characteristics  |M     |The Charging Characteristics used by the |\n|                          |      |SGSN. (always use the subscribed CC).    |\n|Charging Characteristics  |OM    |Holds information about how Charging     |\n|Selection Mode            |      |Characteristics were selected.           |\n|                          |      |(only subscribed/home default/visited    |\n|                          |      |default).                                |\n|Serving Node PLMN         |Oc    |This field holds the PLMN Identifier (MCC|\n|Identifier                |      |and MNC) serving the UE during this      |\n|                          |      |record. Only one value is included in    |\n|                          |      |case multiple PLMN Ids are supported by  |\n|                          |      |the SGSN.                                |\n|CN Operator Selection     |OC    |This field indicates whether the Serving |\n|Entity                    |      |Network identified by the \"Serving Node  |\n|                          |      |PLMN Identifier\u201d has been selected by the|\n|                          |      |UE or by the network, as defined in      |\n|                          |      |TS\u00a029.060\u00a0[203] for GPRS, and in TS      |\n|                          |      |29.274 [210] for EPC, if available.      |\n|RAT Type                  |OC    |This field indicates the Radio Access    |\n|                          |      |Technology (RAT) type currently used by  |\n|                          |      |the Mobile Station as defined in TS      |\n|                          |      |29.061 [205], when available.            |\n|Record Extensions         |OC    |A set of network operator/manufacturer   |\n|                          |      |specific extensions to the record.       |\n|                          |      |Conditioned upon the existence of an     |\n|                          |      |extension.                               |\n\n\n\n\n"}, {"key": "Mobile originated Location request (LCS-MO-CDR)", "numbering": "6.1.8", "title_level": 2, "desc": "         6.1.8  Mobile originated Location request (LCS-MO-CDR)\n\nIf enabled, an SGSN Mobile originated LCS record shall be produced for each\nmobile originated location request that is performed via the SGSN. The\nfields in the record are specified in table 6.1.8.1.\n\n       Table 6.1.8.1: SGSN Mobile originated LCS record (SGSN-LCS-MO)\n\n|Field                     |Catego|Description                              |\n|                          |ry    |                                         |\n|Record Type               |M     |SGSN Mobile Originated LCS.              |\n|Recording Entity          |M     |The E.164 number of the SGSN.            |\n|LCS Client Type           |C     |The type of the LCS client that invoked  |\n|                          |      |the LR, if available.                    |\n|LCS Client Identity       |C     |Further identification of the LCS client,|\n|                          |      |if available.                            |\n|Served IMSI               |M     |The IMSI of the subscriber.              |\n|Served MSISDN             |OC    |The primary MSISDN of the subscriber, if |\n|                          |      |available.                               |\n|SGSN Address              |OM    |The IP address of the current SGSN.      |\n|Location Method           |M     |The type of the location request.        |\n|LCS QoS                   |C     |QoS of the LR, if available.             |\n|LCS Priority              |Oc    |Priority of the LR, if available.        |\n|MLC Number                |C     |The E.164 address of the involved GMLC,  |\n|                          |      |if applicable.                           |\n|Event Time stamp          |M     |The time at which the                    |\n|                          |      |Perform_Location_Request is sent by the  |\n|                          |      |SGSN.                                    |\n|Measurement Duration      |OM    |The duration of proceeding the location  |\n|                          |      |request.                                 |\n|Location                  |OM    |The LAC and CI when the LR is received.  |\n|Routing Area Code         |OM    |The Routing Area Code from which the LCS |\n|                          |      |originated.                              |\n|Location Estimate         |OC    |The location estimate for the subscriber |\n|                          |      |if contained in geographic position and  |\n|                          |      |the LR was successful.                   |\n|Positioning Data          |C     |The positioning method used or attempted,|\n|                          |      |if available.                            |\n|LCS Cause                 |OC    |The result of the LR if any failure or   |\n|                          |      |partial success happened as known at     |\n|                          |      |radio interface.                         |\n|Cause for Record Closing  |M     |The reason for closure of the record from|\n|                          |      |this SGSN.                               |\n|Diagnostics               |C     |A more detailed information about the    |\n|                          |      |Cause for Record Closing  if any failure |\n|                          |      |or partial success happened.             |\n|Node ID                   |OM    |Name of the recording entity.            |\n|Local Record Sequence     |OM    |Consecutive record number created by this|\n|Number                    |      |node. The number is allocated            |\n|                          |      |sequentially including all CDR types.    |\n|Charging Characteristics  |M     |The Charging Characteristics flag set    |\n|                          |      |used by the SGSN.                        |\n|Charging Characteristics  |OM    |Holds information about how Charging     |\n|Selection Mode            |      |Characteristics were selected.           |\n|Serving Node PLMN         |Oc    |This field holds the PLMN Identifier (MCC|\n|Identifier                |      |and MNC) serving the UE during this      |\n|                          |      |record. Only one value is included in    |\n|                          |      |case multiple PLMN Ids are supported by  |\n|                          |      |the SGSN.                                |\n|CN Operator Selection     |OC    |This field indicates whether the Serving |\n|Entity                    |      |Network identified by the \"Serving Node  |\n|                          |      |PLMN Identifier\u201d has been selected by the|\n|                          |      |UE or by the network, as defined in      |\n|                          |      |TS\u00a029.060\u00a0[203] for GPRS, and in TS      |\n|                          |      |29.274 [210] for EPC, if available.      |\n|RAT Type                  |OC    |This field indicates the Radio Access    |\n|                          |      |Technology (RAT) type currently used by  |\n|                          |      |the Mobile Station as defined in TS      |\n|                          |      |29.061 [205], when available.            |\n|Record Extensions         |OC    |A set of network operator/manufacturer   |\n|                          |      |specific extensions to the record.       |\n|                          |      |Conditioned upon the existence of an     |\n|                          |      |extension.                               |\n\n\n\n\n"}, {"key": "Network induced Location request (LCS-NI-CDR)", "numbering": "6.1.9", "title_level": 2, "desc": "         6.1.9  Network induced Location request (LCS-NI-CDR)\n\nIf enabled, an SGSN Network induced LCS record shall be produced for each\nnetwork induced location request that is performed via the SGSN. The fields\nin the record are specified in table 6.1.9.1.\n\n        Table 6.1.9.1: SGSN Network induced LCS record (SGSN-LCS-NI)\n\n|Field                     |Catego|Description                              |\n|                          |ry    |                                         |\n|Record Type               |M     |SGSN Network Induced LCS.                |\n|Recording Entity          |M     |The E.164 number of the SGSN.            |\n|LCS Client Type           |C     |The type of the LCS client that invoked  |\n|                          |      |the LR, if available.                    |\n|LCS Client Identity       |C     |Further identification of the LCS client,|\n|                          |      |if available.                            |\n|Served IMSI               |C     |The IMSI of the subscriber if supplied.  |\n|Served MSISDN             |C     |The primary MSISDN of the subscriber if  |\n|                          |      |supplied.                                |\n|SGSN Address              |OM    |The IP address of the current SGSN.      |\n|Served IMEI               |OC    |The IMEI or IMEISV of the ME, if         |\n|                          |      |available.                               |\n|LCS QoS                   |C     |QoS of the LR, if available.             |\n|LCS Priority              |C     |Priority of the LR, if available.        |\n|MLC Number                |C     |The E.164 address of the involved GMLC,  |\n|                          |      |if applicable.                           |\n|Event Time stamp          |M     |The time at which the                    |\n|                          |      |Perform_Location_Request is sent by the  |\n|                          |      |SGSN.                                    |\n|Measurement Duration      |OM    |The duration of proceeding the location  |\n|                          |      |request.                                 |\n|Location                  |OM    |The LAC and CI when the LR is received.  |\n|Routing Area Code         |OM    |The Routing Area Code from which the LCS |\n|                          |      |originated.                              |\n|Location Estimate         |OC    |The location estimate for the subscriber |\n|                          |      |if contained in geographic position and  |\n|                          |      |the LR was successful.                   |\n|Positioning Data          |C     |The positioning method used or attempted,|\n|                          |      |if available.                            |\n|LCS Cause                 |OC    |The result of the LR if any failure or   |\n|                          |      |partial success happened as known at     |\n|                          |      |radio interface.                         |\n|Cause for Record Closing  |M     |The reason for closure of the record from|\n|                          |      |this SGSN.                               |\n|Diagnostics               |C     |A more detailed information about the    |\n|                          |      |Cause for Record Closing  if any failure |\n|                          |      |or partial success happened.             |\n|Node ID                   |OM    |Name of the recording entity.            |\n|Local Record Sequence     |OM    |Consecutive record number created by this|\n|Number                    |      |node. The number is allocated            |\n|                          |      |sequentially including all CDR types.    |\n|Charging Characteristics  |M     |The Charging Characteristics flag set    |\n|                          |      |used by the SGSN.                        |\n|Charging Characteristics  |OM    |Holds information about how Charging     |\n|Selection Mode            |      |Characteristics were selected.           |\n|Serving Node PLMN         |Oc    |This field holds the PLMN Identifier (MCC|\n|Identifier                |      |and MNC) serving the UE during this      |\n|                          |      |record. Only one value is included in    |\n|                          |      |case multiple PLMN Ids are supported by  |\n|                          |      |the SGSN.                                |\n|CN Operator Selection     |OC    |This field indicates whether the Serving |\n|Entity                    |      |Network identified by the \"Serving Node  |\n|                          |      |PLMN Identifier\u201d has been selected by the|\n|                          |      |UE or by the network, as defined in      |\n|                          |      |TS\u00a029.060\u00a0[203] for GPRS, and in TS      |\n|                          |      |29.274 [210] for EPC, if available.      |\n|RAT Type                  |OC    |This field indicates the Radio Access    |\n|                          |      |Technology (RAT) type currently used by  |\n|                          |      |the Mobile Station as defined in TS      |\n|                          |      |29.061 [205], when available.            |\n|Record Extensions         |OC    |A set of network operator/manufacturer   |\n|                          |      |specific extensions to the record.       |\n|                          |      |Conditioned upon the existence of an     |\n|                          |      |extension.                               |\n\n\n\n\n"}, {"key": "MBMS bearer context charging data in SGSN (S-MB-CDR)", "numbering": "6.1.10", "title_level": 2, "desc": "         6.1.10 MBMS bearer context charging data in SGSN (S-MB-CDR)\n\nIf the collection of CDR data is enabled then the SGSN data specified in\ntable 6.1.10.1 shall be available for each MBMS bearer context.\n\n          Table 6.1.10.1: SGSN MBMS bearer context data (S-MB-CDR)\n\n|Field                   |Catego|Description                                 |\n|                        |ry    |                                            |\n|Record Type             |M     |SGSN MBMS bearer context record.            |\n|SGSN Address used       |M     |The control plane IP address of the SGSN    |\n|                        |      |used.                                       |\n|Charging ID             |M     |Bearer context identifier used to identify  |\n|                        |      |this MBMS bearer context in different       |\n|                        |      |records created by GSNs                     |\n|List of RAs             |OC    |List of routeing areas receiving data used  |\n|                        |      |during this record. equivalent to the list  |\n|                        |      |of RAs defined in TS 23.246 [207].          |\n|Access Point Name       |OM    |The logical name of the connected access    |\n|Network Identifier      |      |point to the BM-SC (network identifier part |\n|                        |      |of APN).                                    |\n|PDP Type                |OM    |This field indicates PDP type (i.e. IPv4 or |\n|                        |      |IPv6).                                      |\n|Served PDP Address      |OC    |Indicates the IP Multicast address used for |\n|                        |      |the MBMS bearer context, i.e. IPv4 or IPv6, |\n|                        |      |if available.                               |\n|List of Traffic Data    |OM    |A list of changes in charging conditions for|\n|Volumes                 |      |this MBMS bearer context, each change is    |\n|                        |      |time stamped. Charging conditions are used  |\n|                        |      |to categorize traffic volumes, such as per  |\n|                        |      |tariff period. It shall include the required|\n|                        |      |bearer capabilities (QoS Negotiated)        |\n|Record Opening Time     |M     |Time stamp when MBMS bearer context is      |\n|                        |      |activated in this SGSN or record opening    |\n|                        |      |time on subsequent partial records.         |\n|Duration                |M     |Duration of this record in the SGSN.        |\n|Cause for Record Closing|M     |The reason for the release of record from   |\n|                        |      |this SGSN.                                  |\n|Diagnostics             |OM    |A more detailed reason for the release of   |\n|                        |      |the connection.                             |\n|Record Sequence Number  |C     |Partial record sequence number, only present|\n|                        |      |in case of partial records.                 |\n|Node ID                 |OM    |Name of the recording entity.               |\n|Local Record Sequence   |OM    |Consecutive record number created by this   |\n|Number                  |      |node. The number is allocated sequentially  |\n|                        |      |including all CDR types.                    |\n|Number of receiving UEs |OC    |Indicates the number of UEs receiving the   |\n|                        |      |MBMS bearer service                         |\n|MBMS Information        |OM    |MBMS related information related to MBMS    |\n|                        |      |bearer context being charged, defined in TS |\n|                        |      |32.273 [33].                                |\n|Record Extensions       |OC    |A set of network operator/manufacturer      |\n|                        |      |specific extensions to the record.          |\n|                        |      |Conditioned upon the existence of an        |\n|                        |      |extension.                                  |\n\n\n\n\n"}, {"key": "MBMS bearer context charging data in GGSN (G-MB-CDR)", "numbering": "6.1.11", "title_level": 2, "desc": "         6.1.11 MBMS bearer context charging data in GGSN (G-MB-CDR)\n\nIf the collection of CDR data is enabled then the GGSN data specified in\ntable 6.1.11.1 shall be available for each MBMS bearer context.\n\n          Table 6.1.11.1: GGSN MBMS bearer context data (G-MB-CDR)\n\n|Field                   |Catego|Description                                 |\n|                        |ry    |                                            |\n|Record Type             |M     |GGSN MBMS bearer context record.            |\n|GGSN Address used       |M     |The control plane IP address of the GGSN    |\n|                        |      |used.                                       |\n|Charging ID             |M     |Bearer context identifier used to identify  |\n|                        |      |this MBMS bearer context in different       |\n|                        |      |records created by GSNs                     |\n|List of Downstream Nodes|M     |List of SGSN addresses used during this     |\n|                        |      |record. equivalent to the list of downstream|\n|                        |      |nodes defined in TS 23.246 [207].           |\n|Access Point Name       |OM    |The logical name of the connected access    |\n|Network Identifier      |      |point to the BM-SC (network identifier part |\n|                        |      |of APN).                                    |\n|PDP Type                |OM    |This field indicates PDP type (i.e. IPv4 or |\n|                        |      |IPv6).                                      |\n|Served PDP Address      |OC    |Indicates the IP Multicast address used for |\n|                        |      |the MBMS bearer context, i.e. IPv4 or IPv6, |\n|                        |      |if available.                               |\n|List of Traffic Data    |OM    |A list of changes in charging conditions for|\n|Volumes                 |      |this MBMS bearer context, each change is    |\n|                        |      |time stamped. Charging conditions are used  |\n|                        |      |to categorize traffic volumes, such as per  |\n|                        |      |tariff period. It shall include the required|\n|                        |      |bearer capabilities (QoS Negotiated).       |\n|Record Opening Time     |M     |Time stamp when MBMS bearer context is      |\n|                        |      |activated in this GGSN or record opening    |\n|                        |      |time on subsequent partial records.         |\n|Duration                |M     |Duration of this record in the GGSN.        |\n|Cause for Record Closing|M     |The reason for the release of record from   |\n|                        |      |this GGSN.                                  |\n|Diagnostics             |OM    |A more detailed reason for the release of   |\n|                        |      |the connection.                             |\n|Record Sequence Number  |C     |Partial record sequence number, only present|\n|                        |      |in case of partial records.                 |\n|Node ID                 |OM    |Name of the recording entity.               |\n|Local Record Sequence   |OM    |Consecutive record number created by this   |\n|Number                  |      |node. The number is allocated sequentially  |\n|                        |      |including all CDR types.                    |\n|MBMS Information        |OM    |MBMS related information related to MBMS    |\n|                        |      |bearer context being charged, defined in TS |\n|                        |      |32.273 [33].                                |\n|Record Extensions       |OC    |A set of network operator/manufacturer      |\n|                        |      |specific extensions to the record.          |\n|                        |      |Conditioned upon the existence of an        |\n|                        |      |extension.                                  |\n\n\n\n\n"}, {"key": "MBMS bearer context charging data in MBMS GW (MBMS-GW-CDR)", "numbering": "6.1.12", "title_level": 2, "desc": "         6.1.12 MBMS bearer context charging data in MBMS GW (MBMS-GW-CDR)\n\nIf the collection of CDR data is enabled then the MBMS GW data specified in\ntable 6.1.12.1 shall be available for each MBMS bearer context when MBMS GW\ndoesn't locate in MB-SC.\n\n       Table 6.1.12.1: MBMS GW MBMS bearer context data (MBMS-GW-CDR)\n\n|Field                   |Catego|Description                                 |\n|                        |ry    |                                            |\n|Record Type             |M     |MBMS GW MBMS bearer context record.         |\n|MBMS GW Address used    |M     |The control plane IP address of the MBMS GW |\n|                        |      |used.                                       |\n|Charging ID             |M     |Bearer context identifier used to identify  |\n|                        |      |this MBMS bearer context in different       |\n|                        |      |records created by Evolved Packet System    |\n|                        |      |core network elements                       |\n|List of Downstream Nodes|M     |List of SGSN/MME addresses used during this |\n|                        |      |record. equivalent to the list of downstream|\n|                        |      |nodes defined in TS 23.246 [207].           |\n|Access Point Name       |OM    |The logical name of the connected access    |\n|Network Identifier      |      |point to the BM-SC (network identifier part |\n|                        |      |of APN).                                    |\n|PDP/PDN Type            |OM    |This field indicates PDN type (i.e. IPv4 or |\n|                        |      |IPv6).                                      |\n|Served PDP/PDN Address  |OC    |Indicates the IP Multicast address used for |\n|                        |      |the MBMS bearer context. (i.e. IPv4 or      |\n|                        |      |IPv6).                                      |\n|List of Traffic Data    |OM    |A list of changes in charging conditions for|\n|Volumes                 |      |this MBMS bearer context, each change is    |\n|                        |      |time stamped. Charging conditions are used  |\n|                        |      |to categorize traffic volumes, such as per  |\n|                        |      |tariff period. It shall include the required|\n|                        |      |bearer capabilities (QoS Negotiated).       |\n|Record Opening Time     |M     |Time stamp when MBMS bearer context is      |\n|                        |      |activated in this MBMS GW or record opening |\n|                        |      |time on subsequent partial records.         |\n|Duration                |M     |Duration of this record in the MBMS GW.     |\n|Cause for Record Closing|M     |The reason for the release of record from   |\n|                        |      |this MBMS GW.                               |\n|Diagnostics             |OM    |A more detailed reason for the release of   |\n|                        |      |the connection.                             |\n|Record Sequence Number  |C     |Partial record sequence number, only present|\n|                        |      |in case of partial records.                 |\n|Node ID                 |OM    |Name of the recording entity.               |\n|Record Extensions       |OC    |A set of network operator/manufacturer      |\n|                        |      |specific extensions to the record.          |\n|                        |      |Conditioned upon the existence of an        |\n|                        |      |extension.                                  |\n|Local Record Sequence   |OM    |Consecutive record number created by this   |\n|Number                  |      |node. The number is allocated sequentially  |\n|                        |      |including all CDR types.                    |\n|MBMS Information        |OM    |MBMS related information related to MBMS    |\n|                        |      |bearer context being charged, defined in TS |\n|                        |      |32.273 [33].                                |\n|C-TEID                  |OC    |Common Tunnel Endpoint Identifier of MBMS GW|\n|                        |      |for user plane, defined in TS 23.246 [207]. |\n|IP multicast and Source |OC    |IP addresses identifying the SSM channel    |\n|address for distribution|      |used for user plane distribution on the     |\n|                        |      |backbone network defined in TS 23.246 [207].|\n\n\n\n\n"}, {"key": "IP-CAN bearer charging data in ePDG (ePDG-CDR)", "numbering": "6.1.13", "title_level": 2, "desc": "         6.1.13 IP-CAN bearer charging data in ePDG (ePDG-CDR)\n\nIf the collection of CDR data is enabled then the ePDG data specified in\ntable 6.1.13.1 shall be available for each IP-CAN bearer.\n\n             Table 6.1.13.1: ePDG IP-CAN bearer data (ePDG-CDR)\n\n|Field                     |Catego|Description                              |\n|                          |ry    |                                         |\n|Record Type               |M     |ePDG IP-CAN bearer record.               |\n|Retransmission            |OC    |This parameter, when present, indicates  |\n|                          |      |that information from retransmitted      |\n|                          |      |Charging Data Request has been used in   |\n|                          |      |this CDR.                                |\n|Served IMSI               |C     |IMSI of the served party, if available.  |\n|IMSI Unauthenticated Flag |OC    |This field indicates the provided served |\n|                          |      |IMSI is not authenticated (emergency     |\n|                          |      |bearer service situation).               |\n|Served IMEI               |OC    |The IMEI or IMEISV of the ME, if         |\n|                          |      |available.                               |\n|ePDG Address Used         |M     |The control plane IP address of the ePDG |\n|                          |      |used.                                    |\n|ePDG IPv6 Address         |OC    |The control plane IPv6 address, in case  |\n|                          |      |of IPv4v6 dual stack, of the ePDG.       |\n|Charging ID               |M     |IP-CAN bearer Charging identifier used to|\n|                          |      |identify this IP-CAN bearer in different |\n|                          |      |records created by PCNs                  |\n|PDN Connection Charging Id|OM    |This field holds the explicit Charging Id|\n|                          |      |for the PDN connection.                  |\n|                          |      |When NBIFOM is supported, the PGW will   |\n|                          |      |provide a unique PDN Connection Charging |\n|                          |      |ID for the PDN connection.               |\n|                          |      |Otherwise the field holds the Charging Id|\n|                          |      |of the EPS default bearer in GTP case, or|\n|                          |      |the unique Charging Id of the IP-CAN     |\n|                          |      |session in PMIP case.                    |\n|                          |      |This field is used to identify different |\n|                          |      |records belonging to same PDN connection.|\n|SGW Change                |OC    |Present if this is first record after a  |\n|                          |      |change from another serving node (i.e.   |\n|                          |      |SGW, ePDG).                              |\n|PGW PLMN Identifier       |Oc    |PLMN identifier (MCC MNC) of the P-GW    |\n|                          |      |used.                                    |\n|Access Point Name Network |OM    |The logical name of the connected access |\n|Identifier                |      |point to the external packet data network|\n|                          |      |(network identifier part of APN).        |\n|PDP/PDN Type              |OM    |This field indicates PDN type (i.e. IPv4,|\n|                          |      |IPv6 or IPv4v6).                         |\n|Served PDP/PDN Address    |OC    |IP address allocated for the PDP context |\n|                          |      |/ PDN connection, if available, i.e. IPv4|\n|                          |      |address when PDN Type is IPv4 or IPv6    |\n|                          |      |prefix when PDN Type is IPv6 or IPv4v6.  |\n|Served PDP/PDN Address    |OC    |PDP/PDN Address prefix length of an IPv6 |\n|prefix length             |      |typed Served PDP Address. The field needs|\n|                          |      |not available for prefix length of 64    |\n|                          |      |bits.                                    |\n|Served PDP/PDN Address    |OC    |This field holds IPv4 address of the     |\n|extension                 |      |served IMSI, if available, when PDN type |\n|                          |      |is IPv4v6.                               |\n|Dynamic Address Flag      |OC    |Indicates whether served PDP/PDN address |\n|                          |      |is dynamic, which is allocated during    |\n|                          |      |IP-CAN bearer activation, initial attach |\n|                          |      |and UE requested PDN connectivity. This  |\n|                          |      |field is missing if IPv4 address is      |\n|                          |      |static when PDN Type is IPv4, or if IPv6 |\n|                          |      |address is static when PDN Type is IPv6  |\n|                          |      |or IPv4v6.                               |\n|Dynamic Address Flag      |OC    |Indicates whether served IPv4 PDP/PDN    |\n|extension                 |      |address is dynamic, which is allocated   |\n|                          |      |during IP-CAN bearer activation, initial |\n|                          |      |attach and UE requested PDN connectivity |\n|                          |      |with PDP/PDN type IPv4v6. This field is  |\n|                          |      |missing if IPv4 address is static.       |\n|List of Traffic Data      |OM    |A list of changes in charging conditions |\n|Volumes                   |      |for this QCI/ARP pair, each change is    |\n|                          |      |time stamped. Charging conditions are    |\n|                          |      |used to categorize traffic volumes, such |\n|                          |      |as per tariff period. Initial and        |\n|                          |      |subsequently changed QoS and             |\n|                          |      |corresponding data values are also       |\n|                          |      |listed.                                  |\n|Record Opening Time       |M     |Time stamp when IP-CAN bearer is         |\n|                          |      |activated in this ePDG or record opening |\n|                          |      |time on subsequent partial records.      |\n|Duration                  |M     |Duration of this record in the ePDG.     |\n|Cause for Record Closing  |M     |The reason for the release of record from|\n|                          |      |this ePDG.                               |\n|Diagnostics               |OM    |A more detailed reason for the release of|\n|                          |      |the IP-CAN bearer, when a single cause is|\n|                          |      |applicable.                              |\n|Enhanced Diagnostics      |OC    |This field holds a more detailed reason  |\n|                          |      |for the release of the IP-CAN bearer,    |\n|                          |      |when a set of causes is applicable.      |\n|Record Sequence Number    |C     |Partial record sequence number, only     |\n|                          |      |present in case of partial records.      |\n|Node ID                   |OM    |Name of the recording entity.            |\n|Local Record Sequence     |OM    |Consecutive record number created by this|\n|Number                    |      |node. The number is allocated            |\n|                          |      |sequentially including all CDR types.    |\n|APN Selection Mode        |OM    |An index indicating how the APN was      |\n|                          |      |selected.                                |\n|Served MSISDN             |OC    |The primary MSISDN of the subscriber, if |\n|                          |      |available.                               |\n|Charging Characteristics  |M     |The Charging Characteristics applied to  |\n|                          |      |the IP-CAN bearer.                       |\n|Charging Characteristics  |OM    |Holds information about how Charging     |\n|Selection Mode            |      |Characteristics were selected.           |\n|IMS Signalling Context    |OC    |Included if the IM-CN Subsystem          |\n|                          |      |Signalling Flag is set, see TS 23.060    |\n|                          |      |[201] IP-CAN bearer is used for IMS      |\n|                          |      |signalling.                              |\n|P-GW Address used.        |OC    |This field is the P-GW IP Address for the|\n|                          |      |Control Plane                            |\n|P-GW IPv6 Address         |OC    |This field is the P-GW IPv6 Address, in  |\n|                          |      |case of IPv4v6 dual stack, for the       |\n|                          |      |Control Plane.                           |\n|RAT Type                  |OC    |This field indicates the Radio Access    |\n|                          |      |Technology (RAT) type currently used by  |\n|                          |      |the Mobile Station as defined in TS      |\n|                          |      |29.061 [205], when available.            |\n|Start Time                |OC    |This field holds the time when User      |\n|                          |      |IP-CAN session starts, available in the  |\n|                          |      |CDR for the first bearer in an IP-CAN    |\n|                          |      |session.                                 |\n|Stop Time                 |OC    |This field holds the time when User      |\n|                          |      |IP-CAN session is terminated, available  |\n|                          |      |in the CDR for the last bearer in an     |\n|                          |      |IP-CAN session.                          |\n|UWAN User Location        |OC    |This field contains the UE location in an|\n|Information               |      |Untrusted Wireless Access Network (UWAN) |\n|                          |      |which includes the UE local IP address   |\n|                          |      |and optionally UDP or TCP source port    |\n|                          |      |number (if NAT is detected) as defined in|\n|                          |      |TS 29.274 [210]. It may also include WLAN|\n|                          |      |location information  the ePDG may have  |\n|                          |      |received from the 3GPP AAA server about  |\n|                          |      |the UE as WLAN location information\"     |\n|                          |      |defined in TS 29.274[210].               |\n|User Location Info Time   |OC    |This field contains the time at which the|\n|                          |      |user location information was acquired,  |\n|                          |      |if available.                            |\n|Record Extensions         |OC    |A set of network operator/manufacturer   |\n|                          |      |specific extensions to the record.       |\n|                          |      |Conditioned upon the existence of an     |\n|                          |      |extension.                               |\n\n\n\n\n"}, {"key": "ABC data in TDF (TDF-CDR)", "numbering": "6.1.14", "title_level": 2, "desc": "         6.1.14 ABC data in TDF (TDF-CDR)\n\nIf ABC is enabled and the collection of CDR data is enabled, then the TDF\ndata specified in table 6.1.14.1 shall be available for each TDF session.\n\n  NOTE:  An indication that online charging is also active for the session\n         may be provided by using PS Furnish Charging Information.\n\n                 Table 6.1.14.1: TDF session data (TDF-CDR)\n\n|Field                     |Catego|Description                                |\n|                          |ry    |                                           |\n|Record Type               |M     |TDF session record.                        |\n|Retransmission            |OC    |This parameter, when present, indicates    |\n|                          |      |that information from retransmitted        |\n|                          |      |Charging Data Request has been used in this|\n|                          |      |CDR.                                       |\n|Served IMSI               |C     |IMSI of the served party, if available.    |\n|Served IMEI               |OC    |The IMEI or IMEISV of the ME, if available.|\n|                          |      |It is used for identifying the user in case|\n|                          |      |Served IMSI is not present during emergency|\n|                          |      |bearer service.                            |\n|Served 3GPP2 MEID         |OC    |MEID of the served party's terminal        |\n|                          |      |equipment for 3GPP2 access.                |\n|Served MN NAI             |OC    |Mobile Node Identifier in NAI format (based|\n|                          |      |on IMSI), if available.                    |\n|P-GW Address used         |M     |The control plane IP address of the P-GW   |\n|                          |      |used.                                      |\n|P-GW Address IPv6         |OC    |The control plane IPv6 address, in case of |\n|                          |      |IPv4v6 dual stack, of the P-GW used.       |\n|TDF Address used          |M     |The control plane IP address of the TDF    |\n|                          |      |used.                                      |\n|TDF Address IPv6          |OC    |The control plane IPv6 address, in case of |\n|                          |      |IPv4v6 dual stack, of the TDF used.        |\n|PDN Connection Charging ID|M     |This field is received from PCRF and holds |\n|                          |      |explicit Charging Id for the PDN connection|\n|                          |      |assigned by P-GW to identify different     |\n|                          |      |records belonging to same PDN connection.  |\n|Serving node Address      |M     |List of SGSN/S-GW/TWAG control plane IP    |\n|                          |      |addresses, or the ePDG address used during |\n|                          |      |this record.                               |\n|Serving node IPv6 Address |OC    |List of SGSN/S-GW/TWAG control plane IPv6  |\n|                          |      |addresses, in case of IPv4v6 dual stack,   |\n|                          |      |used during this record.                   |\n|Serving node Type         |M     |List of serving node types in control plane|\n|                          |      |(SGSN, SGW, ePDG, AGW, TWAG). The serving  |\n|                          |      |node types listed here map to the serving  |\n|                          |      |node addresses listed in the field \"Serving|\n|                          |      |node Address\" in sequence.                 |\n|PGW PLMN Identifier       |Oc    |PLMN identifier (MCC MNC) of the P-GW.     |\n|TDF PLMN Identifier       |Oc    |PLMN identifier (MCC MNC) of the TDF.      |\n|Access Point Name Network |OM    |The logical name of the connected access   |\n|Identifier                |      |point to the external packet data network  |\n|                          |      |(network identifier part of APN).          |\n|PDP/PDN Type              |OM    |PDP/PDN type, i.e. IPv4, IPv6, IPv4v6 , or |\n|                          |      |PDP type PPP.                              |\n|Served PDP/PDN Address    |OC    |IP address allocated for the PDP context / |\n|                          |      |PDN connection, i.e. IPv4 address when     |\n|                          |      |PDP/PDN Type is IPv4 or IPv6 prefix when   |\n|                          |      |PDP/PDN Type is IPv6 or IPv4v6. This       |\n|                          |      |parameter shall be present except when both|\n|                          |      |the PDP type is PPP and dynamic IP-CAN     |\n|                          |      |bearer address assignment is used.         |\n|Served PDP/PDN Address    |OC    |PDP/PDN Address prefix length of an IPv6   |\n|prefix length             |      |typed Served PDP Address. The field needs  |\n|                          |      |not available for prefix length of 64 bits.|\n|Served PDP/PDN Address    |OC    |This field holds IPv4 address of the served|\n|extension                 |      |IMSI, if available, when PDP/PDN type is   |\n|                          |      |IPv4v6.                                    |\n|Dynamic Address Flag      |OC    |Indicates whether served PDP/PDN address is|\n|                          |      |dynamic, which is allocated during IP-CAN  |\n|                          |      |bearer activation, initial attach (E-UTRAN |\n|                          |      |or over S2x) and UE requested PDN          |\n|                          |      |connectivity. This field is missing if IPv4|\n|                          |      |address is static when PDN Type is IPv4, or|\n|                          |      |if IPv6 address is static when PDN Type is |\n|                          |      |IPv6 or IPv4v6.                            |\n|Dynamic Address Flag      |OC    |Indicates whether served IPv4 PDP/PDN      |\n|extension                 |      |address is dynamic, which is allocated     |\n|                          |      |during IP-CAN bearer activation, initial   |\n|                          |      |attach (E-UTRAN or over S2x) and UE        |\n|                          |      |requested PDN connectivity with PDP/PDN    |\n|                          |      |type IPv4v6. This field is missing if IPv4 |\n|                          |      |address is static.                         |\n|List of Service Data      |OM    |A list of changes in charging conditions   |\n|                          |      |for application traffic within this TDF    |\n|                          |      |session categorized per rating group or per|\n|                          |      |combination of the rating group and service|\n|                          |      |id. Each change is time stamped. Charging  |\n|                          |      |conditions are used to categorize traffic  |\n|                          |      |volumes, elapsed time and number of events,|\n|                          |      |such as per tariff period and subsequently |\n|                          |      |changed maximal bandwidth limitation and   |\n|                          |      |corresponding data values are also listed. |\n|                          |      |Online charging information (PS Furnish    |\n|                          |      |Charging Information) may be added per each|\n|                          |      |service data container in case it is sent  |\n|                          |      |by the OCS.                                |\n|                          |      |Failure-Handling: This field shall be      |\n|                          |      |present in case TDF initiates an           |\n|                          |      |interaction with the PCRF in relation to   |\n|                          |      |the OCS's guidance for Failure Handling. It|\n|                          |      |shall indicate the Failure Handling        |\n|                          |      |scenario and the instant the Failure Action|\n|                          |      |is triggered (see annex B). Scenarios:     |\n|                          |      |Continue/New Session; Continue/Ongoing     |\n|                          |      |Session; Retry&Terminate/Ongoing Session;  |\n|                          |      |Terminate/Ongoing Session.                 |\n|Record Opening Time       |M     |Time stamp when TDF session is established |\n|                          |      |or record opening time on subsequent       |\n|                          |      |partial records.                           |\n|MS Time Zone              |OC    |This field contains the MS Time Zone the MS|\n|                          |      |is currently located as defined in         |\n|                          |      |TS\u00a029.060 [203], if available.             |\n|Duration                  |M     |Duration of this record in the TDF.        |\n|Cause for Record Closing  |M     |The reason for closing the record from this|\n|                          |      |TDF.                                       |\n|Diagnostics               |OM    |A more detailed reason forclosing the      |\n|                          |      |record.                                    |\n|Record Sequence Number    |C     |Partial record sequence number, only       |\n|                          |      |present in case of partial records.        |\n|Node ID                   |OM    |Name of the recording entity.              |\n|Record Extensions         |OC    |A set of network operator/manufacturer     |\n|                          |      |specific extensions to the record.         |\n|                          |      |Conditioned upon the existence of an       |\n|                          |      |extension.                                 |\n|Local Record Sequence     |OM    |Consecutive record number created by this  |\n|Number                    |      |node. The number is allocated sequentially |\n|                          |      |including all CDR types.                   |\n|APN Selection Mode        |OM    |An index indicating how the APN was        |\n|                          |      |selected.                                  |\n|Served MSISDN             |OC    |The primary MSISDN of the subscriber, if   |\n|                          |      |available.                                 |\n|User Location Information |OC    |This field contains the User Location      |\n|                          |      |Information of the MS as defined in        |\n|                          |      |TS\u00a029.060\u00a0[203] for GPRS case, and in TS   |\n|                          |      |29.274 [210] for EPC case, if available.   |\n|User CSG information      |OC    |This field contains the User CSG           |\n|                          |      |Information of the UE, if available,       |\n|                          |      |including CSG ID, access mode and CSG      |\n|                          |      |membership indication.                     |\n|3GPP2 User Location       |OC    |This field contains the User Location      |\n|information               |      |Information of the MS as defined in        |\n|                          |      |TS\u00a029.212\u00a0[216] for 3GPP2 access, if       |\n|                          |      |available.                                 |\n|TWAN User Location        |OC    |This field contains the UE location in a   |\n|Information               |      |Trusted WLAN Access Network (TWAN) , if    |\n|                          |      |available:                                 |\n|                          |      |- as \"TWAN identifier\" defined in TS 29.274|\n|                          |      |[210] for S2a GTP-based case, or,          |\n|                          |      |- as \"Access Network Identifier Option IE\" |\n|                          |      |defined in 29.275 [211] for S2a PMIP-based |\n|                          |      |case.                                      |\n|Charging Characteristics  |M     |The Charging Characteristics applied to the|\n|                          |      |TDF session.                               |\n|Charging Characteristics  |OM    |Holds information about how Charging       |\n|Selection Mode            |      |Characteristics were selected.             |\n|Serving node PLMN         |OM    |This fields holds the PLMN Identifier (MCC |\n|Identifier                |      |and MNC) serving the UE during this record.|\n|                          |      |                                           |\n|                          |      |When the Serving node is TWAG, this field  |\n|                          |      |includes the PLMN identifier used for UE   |\n|                          |      |authentication, i.e. the VPLMN in roaming  |\n|                          |      |case, and the HPLMN in non-roaming case.   |\n|PS Furnish Charging       |OC    |Online charging session specific           |\n|Information               |      |information                                |\n|RAT Type                  |OC    |This field indicates the Radio Access      |\n|                          |      |Technology (RAT) type currently used by the|\n|                          |      |Mobile Station as defined in TS 29.061     |\n|                          |      |[205], when available.                     |\n|Start Time                |OC    |This field holds the time when TDF session |\n|                          |      |starts.                                    |\n|Stop Time                 |OC    |This field holds the time when TDF session |\n|                          |      |is terminated.                             |\n\n\n\n"}, {"key": "IP-CAN bearer charging data in TWAG (TWAG-CDR)", "numbering": "6.1.15", "title_level": 2, "desc": "6.1.15 IP-CAN bearer charging data in TWAG (TWAG-CDR)\n\nIf the collection of CDR data is enabled then theTWAG data specified in\ntable 6.1.15.1 shall be available for each IP-CAN bearer.\n\n             Table 6.1.15.1: TWAG IP-CAN bearer data (TWAG-CDR)\n\n|Field                     |Catego|Description                              |\n|                          |ry    |                                         |\n|Record Type               |M     |TWAG IP-CAN bearer record.               |\n|Retransmission            |OC    |This parameter, when present, indicates  |\n|                          |      |that information from retransmitted      |\n|                          |      |Charging Data Request has been used in   |\n|                          |      |this CDR.                                |\n|Served IMSI               |C     |IMSI of the served party, if available.  |\n|IMSI Unauthenticated Flag |OC    |This field indicates the provided served |\n|                          |      |IMSI is not authenticated (emergency     |\n|                          |      |bearer service situation).               |\n|Served IMEI               |OC    |The IMEI or IMEISV of the ME, if         |\n|                          |      |available.                               |\n|TWAG Address Used         |M     |The control plane IP address of the TWAG |\n|                          |      |used.                                    |\n|TWAG IPv6 Address         |OC    |The control plane IPv6 address, in case  |\n|                          |      |of IPv4v6 dual stack, of the TWAG.       |\n|Charging ID               |M     |IP-CAN bearer Charging identifier used to|\n|                          |      |identify this IP-CAN bearer in different |\n|                          |      |records created by PCNs                  |\n|PDN Connection Charging Id|OM    |This field holds the explicit Charging Id|\n|                          |      |for the PDN connection.                  |\n|                          |      |When NBIFOM is supported, the PGW will   |\n|                          |      |provide a unique PDN Connection Charging |\n|                          |      |ID for the PDN connection.               |\n|                          |      |Otherwise the field holds the Charging Id|\n|                          |      |of the EPS default bearer in GTP case, or|\n|                          |      |the unique Charging Id of the IP-CAN     |\n|                          |      |session in PMIP case.                    |\n|                          |      |This field is used to identify different |\n|                          |      |records belonging to same PDN connection.|\n|SGW Change                |OC    |Present if this is first record after a  |\n|                          |      |change from another serving node (i.e.   |\n|                          |      |SGW, ePDG, TWAG).                        |\n|PGW PLMN Identifier       |Oc    |PLMN identifier (MCC MNC) of the P-GW    |\n|                          |      |used.                                    |\n|Access Point Name Network |OM    |The logical name of the connected access |\n|Identifier                |      |point to the external packet data network|\n|                          |      |(network identifier part of APN).        |\n|PDP/PDN Type              |OM    |This field indicates PDN type (i.e. IPv4,|\n|                          |      |IPv6 or IPv4v6).                         |\n|Served PDP/PDN Address    |OC    |IP address allocated for the PDP context |\n|                          |      |/ PDN connection, if available, i.e. IPv4|\n|                          |      |address when PDN Type is IPv4 or IPv6    |\n|                          |      |prefix when PDN Type is IPv6 or IPv4v6.  |\n|Served PDP/PDN Address    |OC    |PDP/PDN Address prefix length of an IPv6 |\n|prefix length             |      |typed Served PDP Address. The field needs|\n|                          |      |not available for prefix length of 64    |\n|                          |      |bits.                                    |\n|Served PDP/PDN Address    |OC    |This field holds IPv4 address of the     |\n|extension                 |      |served IMSI, if available, when PDN type |\n|                          |      |is IPv4v6.                               |\n|Dynamic Address Flag      |OC    |Indicates whether served PDP/PDN address |\n|                          |      |is dynamic, which is allocated during    |\n|                          |      |IP-CAN bearer activation, initial attach |\n|                          |      |and UE requested PDN connectivity. This  |\n|                          |      |field is missing if IPv4 address is      |\n|                          |      |static when PDN Type is IPv4, or if IPv6 |\n|                          |      |address is static when PDN Type is IPv6  |\n|                          |      |or IPv4v6.                               |\n|Dynamic Address Flag      |OC    |Indicates whether served IPv4 PDP/PDN    |\n|extension                 |      |address is dynamic, which is allocated   |\n|                          |      |during IP-CAN bearer activation, initial |\n|                          |      |attach and UE requested PDN connectivity |\n|                          |      |with PDP/PDN type IPv4v6. This field is  |\n|                          |      |missing if IPv4 address is static.       |\n|List of Traffic Data      |OM    |A list of changes in charging conditions |\n|Volumes                   |      |for this QCI/ARP pair, each change is    |\n|                          |      |time stamped. Charging conditions are    |\n|                          |      |used to categorize traffic volumes, such |\n|                          |      |as per tariff period. Initial and        |\n|                          |      |subsequently changed QoS and             |\n|                          |      |corresponding data values are also       |\n|                          |      |listed.                                  |\n|Record Opening Time       |M     |Time stamp when IP-CAN bearer is         |\n|                          |      |activated in this TWAG or record opening |\n|                          |      |time on subsequent partial records.      |\n|Duration                  |M     |Duration of this record in the TWAG.     |\n|Cause for Record Closing  |M     |The reason for the release of record from|\n|                          |      |this TWAG.                               |\n|Diagnostics               |OM    |A more detailed reason for the release of|\n|                          |      |the IP-CAN bearer, when a single cause is|\n|                          |      |applicable.                              |\n|Enhanced Diagnostics      |OC    |This field holds a more detailed reason  |\n|                          |      |for the release of the IP-CAN bearer,    |\n|                          |      |when a set of causes is applicable.      |\n|Record Sequence Number    |C     |Partial record sequence number, only     |\n|                          |      |present in case of partial records.      |\n|Node ID                   |OM    |Name of the recording entity.            |\n|Local Record Sequence     |OM    |Consecutive record number created by this|\n|Number                    |      |node. The number is allocated            |\n|                          |      |sequentially including all CDR types.    |\n|APN Selection Mode        |OM    |An index indicating how the APN was      |\n|                          |      |selected.                                |\n|Served MSISDN             |OC    |The primary MSISDN of the subscriber, if |\n|                          |      |available.                               |\n|TWAN User Location        |OC    |This field contains the UE location in a |\n|Information               |      |Trusted WLAN Access Network (TWAN) , if  |\n|                          |      |available:                               |\n|                          |      |- as \"TWAN identifier\" defined in TS     |\n|                          |      |29.274 [210] for S2a GTP-based case, or, |\n|                          |      |- as \"Access Network Identifier Option   |\n|                          |      |IE\" defined in 29.275 [211] for S2a      |\n|                          |      |PMIP-based case.                         |\n|Charging Characteristics  |M     |The Charging Characteristics applied to  |\n|                          |      |the IP-CAN bearer.                       |\n|Charging Characteristics  |OM    |Holds information about how Charging     |\n|Selection Mode            |      |Characteristics were selected.           |\n|P-GW Address used.        |OC    |This field is the P-GW IP Address for the|\n|                          |      |Control Plane                            |\n|P-GW IPv6 Address         |OC    |This field is the P-GW IPv6 Address, in  |\n|                          |      |case of IPv4v6 dual stack, for the       |\n|                          |      |Control Plane.                           |\n|RAT Type                  |OC    |This field indicates the Radio Access    |\n|                          |      |Technology (RAT) type currently used by  |\n|                          |      |the Mobile Station as defined in TS      |\n|                          |      |29.061 [205], when available.            |\n|Start Time                |OC    |This field holds the time when User      |\n|                          |      |IP-CAN session starts, available in the  |\n|                          |      |CDR for the first bearer in an IP-CAN    |\n|                          |      |session.                                 |\n|Stop Time                 |OC    |This field holds the time when User      |\n|                          |      |IP-CAN session is terminated, available  |\n|                          |      |in the CDR for the last bearer in an     |\n|                          |      |IP-CAN session.                          |\n|Record Extensions         |OC    |A set of network operator/manufacturer   |\n|                          |      |specific extensions to the record.       |\n|                          |      |Conditioned upon the existence of an     |\n|                          |      |extension.                               |\n\n\n\n\n"}, {"key": "Data description for PS online charging", "numbering": "6.2", "title_level": 1, "desc": "         6.2  Data description for PS online charging\n\n\n"}, {"key": "Message contents", "numbering": "6.2.1", "title_level": 2, "desc": "6.2.1  Message contents\n\n\n"}, {"key": "Summary of online charging message formats", "numbering": "6.2.1.1", "title_level": 3, "desc": "6.2.1.1  Summary of online charging message formats\n\nThe PS Online Charging uses the Debit / Reserve Units Request and Debit /\nReserve Units Response messages defined in TS\u00a032.299 [50].\n\nTable 6.2.1.1.1 describes the use of these messages for online charging.\n\n          Table 6.2.1.1.1: Online charging messages reference table\n\n|Messages        |Source    |Destina|\n|                |          |tion   |\n|Debit / Reserve |PCEF, TDF |OCS    |\n|Units Request   |          |       |\n|Debit / Reserve |OCS       |PCEF,  |\n|Units Response  |          |TDF    |\n\n\n\n"}, {"key": "Structure for the Debit / Reserve Units operation message formats", "numbering": "6.2.1.2", "title_level": 3, "desc": "6.2.1.2  Structure for the Debit / Reserve Units operation message formats\n\n\n"}, {"key": "General", "numbering": "6.2.1.2.0", "title_level": 4, "desc": "6.2.1.2.0   General\n\nThis clause describes the AVPs used in the Debit / Reserve Units operation\nmessages.\n\n\n"}, {"key": "Debit / Reserve Units Request message", "numbering": "6.2.1.2.1", "title_level": 4, "desc": "6.2.1.2.1   Debit / Reserve Units Request message\n\nTable 6.2.1.2.1.1 illustrates the basic structure of a Debit / Reserve\nUnits Request message from the PCEF and TDF as used for PS online charging.\n\n      Table 6.2.1.2.1.1: Debit / Reserve Units Request message contents\n\n|Information Element |Catego|Description                                 |\n|                    |ry    |                                            |\n|Session Identifier  |M     |Described in TS 32.299 [50]                 |\n|Originator Host     |M     |Described in TS 32.299 [50]                 |\n|Originator Domain   |M     |Described in TS 32.299 [50]                 |\n|Destination Domain  |M     |Described in TS 32.299 [50]                 |\n|Operation Identifier|M     |Described in TS 32.299 [50]                 |\n|Operation Token     |M     |Described in TS 32.299 [50]                 |\n|Operation Type      |M     |Described in TS 32.299 [50]                 |\n|Operation Number    |M     |Described in TS 32.299 [50]                 |\n|Destination Host    |OM    |Described in TS 32.299 [50]                 |\n|User Name           |OM    |The content of the field corresponds to the |\n|                    |      |Protocol Configuration Options (PCO) field  |\n|                    |      |of the Create IP-CAN bearer Request message.|\n|Origination State   |OC    |Described in TS 32.299 [50]                 |\n|Origination         |OC    |Described in TS 32.299 [50]                 |\n|Timestamp           |      |                                            |\n|Subscriber          |OM    |Described in TS 32.299 [50].                |\n|Identifier          |      |As a minimum the IMSI and the MSISDN have to|\n|                    |      |be included.                                |\n|Termination Cause   |OC    |Described in TS 32.299 [50]                 |\n|Multiple Operation  |OM    |Described in TS 32.299 [50]                 |\n|Multiple Unit       |OC    |Described in TS 32.299 [50]                 |\n|Operation           |      |                                            |\n|User-Equipment-Info |OC    |Described in TS 32.299 [50].                |\n|                    |      |Contains the identification of the terminal |\n|                    |      |(IMEI or IMEISV etc.)                       |\n|Route Information   |OC    |Described in TS 32.299 [50]                 |\n|Service Information |OM    |Described in clause 6.3.1.1                 |\n\n\n  Editor's Note: Terminal capabilities should be taken into account\n\nThe full description of the AVPs is specified in TS 32.299 [50].\n\n\n"}, {"key": "Debit / Reserve Units Response message", "numbering": "6.2.1.2.2", "title_level": 4, "desc": "6.2.1.2.2   Debit / Reserve Units Response message\n\nThe following table 6.2.1.2.2.1 llustrates the basic structure of a Debit /\nReserve Units operation message as used for the PCEF and TDF. This message\nis always used by the OCS as specified below, independent of the receiving\nPCEF/TDF and the C redit-Control type that is being replied to.\n\n     Table 6.2.1.2.2.1: Debit / Reserve Units Response message contents\n\n|Information Element      |Category |Description        |\n|Session Identifier       |M        |Described in 32.299|\n|                         |         |[50]               |\n|Operation Result         |M        |Described in 32.299|\n|                         |         |[50]               |\n|Originator Host          |M        |Described in 32.299|\n|                         |         |[50]               |\n|Originator Domain        |M        |Described in 32.299|\n|                         |         |[50]               |\n|Operation Identifier     |M        |Described in 32.299|\n|                         |         |[50]               |\n|Operation Type           |M        |Described in 32.299|\n|                         |         |[50]               |\n|Operation Number         |M        |Described in 32.299|\n|                         |         |[50]               |\n|Operation Failover       |OC       |Described in 32.299|\n|                         |         |[50]               |\n|Multiple Unit Operation  |OC       |Described in 32.299|\n|                         |         |[50]               |\n|Operation Failure Action |OC       |Described in 32.299|\n|                         |         |[50]               |\n|Operation Event Failure  |OC       |Described in 32.299|\n|Action                   |         |[50]               |\n|Redirection Host         |OC       |Described in 32.299|\n|                         |         |[50]               |\n|Redirection Host Usage   |OC       |Described in 32.299|\n|                         |         |[50]               |\n|Route Information        |OC       |Described in 32.299|\n|                         |         |[50]               |\n|Failed parameter         |OC       |Described in 32.299|\n|                         |         |[50]               |\n|Service Information      |OM       |Described in 32.299|\n|                         |         |[50]               |\n\n\n\n"}, {"key": "Void", "numbering": "6.2.2", "title_level": 2, "desc": "6.2.2  Void\n\n\n\n"}, {"key": "PS charging specific parameters", "numbering": "6.3", "title_level": 1, "desc": "         6.3  PS charging specific parameters\n\n\n"}, {"key": "Definition of PS charging information", "numbering": "6.3.1", "title_level": 2, "desc": "6.3.1  Definition of PS charging information\n\n\n"}, {"key": "General", "numbering": "6.3.1.0", "title_level": 3, "desc": "6.3.1.0  General\n\nThe PS Information parameter used for PS charging is provided in the\nService Information parameter, as defined in clause 6.3.1.1.\n\nThe PS Information parameter used for \"SMS over MME Charging\" is provided\nin the Service Information parameter as defined in 6.3.1.1a\n\n\n"}, {"key": "PS charging information assignment for Service Information", "numbering": "6.3.1.1", "title_level": 3, "desc": "6.3.1.1  PS charging information assignment for Service Information\n\nThe components in the Service Information that are use for PS charging can\nbe found in table 6.3.1.1.1.\n\n          Table 6.3.1.1.1: Service Information used for PS Charging\n\n|Information Element |Catego|Description                                 |\n|                    |ry    |                                            |\n|Service Information |OM    |This is a structured field and holds the    |\n|                    |      |3GPP specific parameter as defined in       |\n|                    |      |TS\u00a032.299 [50].                             |\n|      Subscriber    |OC    |This field contains the identification of   |\n|Identifier          |      |the user (e.g. IMSI, MSISDN, NAI) if offline|\n|                    |      |charging applies.                           |\n| PS Information     |OM    |This is a structured field and holds the PS |\n|                    |      |specific parameters.                        |\n|                    |      |The details are defined in clause 6.3.1.2.  |\n| IMS Information    |OM    |This is a structured field and holds IMS    |\n|                    |      |specific parameters.                        |\n|                    |      |The complete structure is defined in TS     |\n|                    |      |32.260 [20].                                |\n|  Node Functionality|OM    |This field contains the function of the EPC |\n|                    |      |node (SGW, ePDG, TWAG, PGW, TDF)            |\n|                                                                       |\n|NOTE:  When Node Functionality is set to \"HSGW\" the HSGW Access        |\n|specific charging information are  provided as part of the PS          |\n|Information                                                            |\n\n\n\n"}, {"key": "\"SMS over MME Charging\" information assignment for Service", "numbering": "6.3.1.1a", "title_level": 3, "desc": "6.3.1.1a \"SMS over MME Charging\" information assignment for Service\n           Information\n\nThe components in the Service Information that are used for \"SMS over MME\nCharging\"can be found in table 6.3.1.1a.1.\n\n   Table 6.3.1.1a.1: Service Information used for \"SMS over MME Charging\"\n\n|Information Element      |Catego|Description                           |\n|                         |ry    |                                      |\n|Service Information      |OM    |This is a structured field and holds  |\n|                         |      |the 3GPP specific parameter as defined|\n|                         |      |in TS\u00a032.299 [50].                    |\n|Subscriber Identifier    |OC    |This field contains the identification|\n|                         |      |of the user (e.g. IMSI, MSISDN).      |\n| IMS Information         |OM    |This is a structured field and holds  |\n|                         |      |IMS specific parameters.              |\n|                         |      |The complete structure is defined in  |\n|                         |      |TS 32.260 [20].                       |\n|  Node Functionality     |OM    |This field contains the function of   |\n|                         |      |the EPC node (i.e. MME)               |\n| PS Information          |OM    |This is a structured field and holds  |\n|                         |      |the PS specific parameters.           |\n|                         |      |The complete structure is defined in  |\n|                         |      |clause 6.3.1.2.                       |\n|Node Id                  |OC    |This fields holds the name of the Node|\n|Serving Node Type        |OC    |This field holds the type of the node |\n|                         |      |handling the SMS with the UE (i.e.    |\n|                         |      |MME)                                  |\n|Serving Node Adddress    |OC    |This field holds the IP-address of the|\n|                         |      |MME used. It may occur twice in the   |\n|                         |      |case when the MME has IPv4v6 dual     |\n|                         |      |stack control plane.                  |\n|MME Number for MT SMS    |OC    |This field holds the MME international|\n|                         |      |PSTN/ISDN number                      |\n|MME Name                 |OC    |This field holds the operation        |\n|                         |      |Identity of the MME used.             |\n|MME Realm                |OC    |This field holds the operation Realm  |\n|                         |      |Identity of the MME used.             |\n|Charging Characteristics |OM    |This field contains the Charging      |\n|                         |      |Characteristics applicable to the MME |\n|Charging Characteristics |OM    |This field holds information about how|\n|Selection Mode           |      |the Charging Characteristics were     |\n|                         |      |selected.                             |\n|3GPP User Location Info  |OC    |This field holds the information about|\n|                         |      |the location of the subscriber during |\n|                         |      |the SMS transaction.                  |\n|User Location Info Time  |OC    |This field contains the time at which |\n|                         |      |the user location information was     |\n|                         |      |acquired.                             |\n|RAT Type                 |OC    |This field indicates which Radio      |\n|                         |      |Access Technology (RAT) is currently  |\n|                         |      |serving the UE as defined in TS 29.061|\n|                         |      |[205].                                |\n|Terminal Information     |OC    |This field holds the identification of|\n|                         |      |the terminal (IMEI or IMEISV).        |\n| SMS Information         |OM    |This is a structured field and holds  |\n|                         |      |SMS specific parameters.              |\n|                         |      |The complete structure is defined in  |\n|                         |      |TS 32.274 [34].                       |\n|Recipient Info           |OM    |This field a structured field and     |\n|                         |      |holds recipient information for the   |\n|                         |      |SM. The complete structure is defined |\n|                         |      |in TS 32.274 [34].                    |\n|Recipient Address        |OM    |This field holds the address of the   |\n|                         |      |recipient of the SM.                  |\n|                         |      |This will typically be an E.164 number|\n|                         |      |or a shortcode.                       |\n|  SMSC Address           |OM    |This field holds the address of the   |\n|                         |      |SMSC to which the originating or      |\n|                         |      |terminating SM is directed to.        |\n|MMS Information          |OM    |This is a structure field and the     |\n|                         |      |following parameters are specific to  |\n|                         |      |SMS. The complete structure is defined|\n|                         |      |in TS 32.270 [30]                     |\n|Originator Address       |OC    |This field holds the address of the   |\n|                         |      |originator of the SM.                 |\n|                         |      |This will typically be an E.164 number|\n|                         |      |or a shortcode                        |\n|Submission Time          |OC    |This field holds the time the Short   |\n|                         |      |Message is received by the MME from UE|\n|                         |      |or sent by the MME to UE.             |\n|Message Id               |OM    |This field holds a reference provided |\n|                         |      |by the UE uniquely identifying this   |\n|                         |      |message. It contains the              |\n|                         |      |TP-Message-Reference (TP-MR) as       |\n|                         |      |defined in TS 23.040 [7].             |\n\n\n\n"}, {"key": "Definition of the PS information", "numbering": "6.3.1.2", "title_level": 3, "desc": ""}, {"key": "Multiple Unit Operation information when charging per IP-CAN", "numbering": "6.3.1.3", "title_level": 3, "desc": "6.3.1.2  Definition of the PS information\n\nPS specific charging information is provided within the PS Information. The\nfields of the PS Information are indicated with the node (MME, S-GW, ePDG,\nTWAG, P-GW, TDF) from which the information is sent.\n\nThe detailed structure of the PS Information can be found in table\n6.3.1.2.1.\n\n              Table 6.3.1.2.1: Structure of the PS Information\n\n|Information Element       |Catego|Description                               |\n|                          |ry    |                                          |\n|Supported Features        |OC    |This field holds the list of features     |\n|                          |      |supported by the PCN, CDF or OCF as       |\n|                          |      |defined in clause 6.3.1.x.                |\n|Charging Id               |OC    |This field holds the Charging Id for this |\n|                          |      |IP-CAN bearer (this together with the P-GW|\n|                          |      |Address constitutes a unique identifier   |\n|                          |      |for the IP-CAN bearer). This field holds  |\n|                          |      |the unique Charging Id in the PMIP case.  |\n|                          |      |When charging per IP-CAN session is       |\n|                          |      |active, PGW use this field to hold the    |\n|                          |      |Charging Id of the EPS default bearer. It |\n|                          |      |is the same as the PDN Connection Charging|\n|                          |      |Id.                                       |\n|Charging per IP-CAN       |Oc    |This field indicates whether charging per |\n|Session Indicator         |      |IP-CAN session is active. If this field is|\n|                          |      |not present, charging per IP-CAN session  |\n|                          |      |is not active.                            |\n|Node Id                   |OC    |This fields holds the name of the Node    |\n|PDN Connection Charging Id|OC    |This field holds the explicit Charging Id |\n|                          |      |for the PDN connection.                   |\n|                          |      |When NBIFOM is supported, the PGW will    |\n|                          |      |assign an explicit PDN Connection Charging|\n|                          |      |ID for the PDN connection.                |\n|                          |      |Otherwise the field holds the Charging Id |\n|                          |      |of the EPS default bearer.                |\n|                          |      |This field is used to identify different  |\n|                          |      |records belonging to same PDN connection. |\n|PDP/PDN Type              |OC    |This field holds the type of IP-CAN       |\n|                          |      |bearer, e.g. IP or PPP, or PDN type (i.e. |\n|                          |      |IPv4, IPv6 or IPv4v6, or Non-IP).         |\n|SGi PtP Tunnelling Method |OC    |This field indicates whether SGi PtP      |\n|                          |      |tunnelling method based on UDP/IP or other|\n|                          |      |methods are used for this PDN connection  |\n|                          |      |when a non-IP PDN type.                   |\n|SCS/AS Address            |OC    |This field holds the Address of SCS/AS for|\n|                          |      |SGi PtP tunnelling.                       |\n|PDP/PDN Address           |OC    |This field holds the IP address of the    |\n|                          |      |served IMSI allocated for the PDP context |\n|                          |      |/ PDN connection, i.e. IPv4 address or    |\n|                          |      |IPv6 prefix, or assigned IP address if any|\n|                          |      |when PDP/PDN Type is Non-IP. This         |\n|                          |      |parameter shall be present except:        |\n|                          |      |-  when both the PDP type is PPP and      |\n|                          |      |dynamic PDP address assignment is used or,|\n|                          |      |                                          |\n|                          |      |-  when PDP/PDN Type is Non-IP, and no IP |\n|                          |      |address has been assigned by the PGW for  |\n|                          |      |the PDN connection.                       |\n|                          |      |It may occur twice within the PS          |\n|                          |      |Information field when PDN type is IPv4v6:|\n|                          |      |first occurrence with IPv6 prefix, second |\n|                          |      |occurrence with IPv4 address.             |\n|PDP/PDN Address prefix    |OC    |PDP/PDN Address prefix length of an IPv6  |\n|length                    |      |typed Served PDP Address. The field needs |\n|                          |      |not available for prefix length of 64     |\n|                          |      |bits.                                     |\n|Dynamic Address Flag      |OC    |This field indicates whether served       |\n|                          |      |PDP/PDN address is dynamically allocated. |\n|                          |      |This field is missing if address is       |\n|                          |      |static.                                   |\n|Dynamic Address Flag      |OC    |Indicates whether served IPv4 PDP/PDN     |\n|Extension                 |      |address is dynamic, which is allocated    |\n|                          |      |during IP-CAN bearer activation, initial  |\n|                          |      |attach (E-UTRAN or over S2x) and UE       |\n|                          |      |requested PDN connectivity with PDP/PDN   |\n|                          |      |type IPv4v6. This field is missing if IPv4|\n|                          |      |address is static.                        |\n|Negotiated QoS Profile    |OC    |This field holds the authorized QoS       |\n|                          |      |applied to IP-CAN bearer. See NOTE.       |\n|                          |      |This field indicates the bandwith         |\n|                          |      |limitation, applied to TDF session in TDF |\n|                          |      |case. When charging per IP-CAN session is |\n|                          |      |active in P-GW, this field indicates the  |\n|                          |      |APN-AMBR applied to the IP-CAN session.   |\n|Serving Node Address      |OC    |This field holds the SGSN/S-GW/TWAG IP    |\n|                          |      |address that is used by the control plane |\n|                          |      |for the handling of control messages, or  |\n|                          |      |the AGW IP address, or the ePDG address,  |\n|                          |      |or the MME address. It may be used to     |\n|                          |      |identify the PLMN to which the user is    |\n|                          |      |attached. It may occur twice in the case  |\n|                          |      |when the serving node has IPv4v6 dual     |\n|                          |      |stack control plane.                      |\n|Serving Node Type         |OC    |This field holds the type of the serving  |\n|                          |      |node (SGSN/S-GW/ePDG/AGW/TWAG from        |\n|                          |      |PGW/TDF, or SGSN/MME from SGW).           |\n|SGW Change                |OC    |This field is present if this is first    |\n|                          |      |Charging Data Request after a change from |\n|                          |      |another serving node (from SGW/ePDG/      |\n|                          |      |TWAG/HSGW).                               |\n|PGW Address               |OC    |This field holds the IP-address of the    |\n|                          |      |P-GW that generated the Charging Id. It   |\n|                          |      |may occur twice in the case when the P-GW |\n|                          |      |has IPv4v6 dual stack control plane.      |\n|TDF Address               |OC    |The control plane IP address of the TDF   |\n|                          |      |used. It may occur twice in the case when |\n|                          |      |the TDF has IPv4v6 dual stack control     |\n|                          |      |plane.                                    |\n|SGW Address               |OC    |This field holds the IP-address of the    |\n|                          |      |S-GW used. It may occur twice in the case |\n|                          |      |when the P-GW has IPv4v6 dual stack       |\n|                          |      |control plane.                            |\n|ePDG Address              |OC    |This field holds the IP-address of the    |\n|                          |      |ePDG used. It may occur twice in the case |\n|                          |      |when the ePDG has IPv4v6 dual stack       |\n|                          |      |control plane.                            |\n|TWAG Address              |OC    |This field holds the IP-address of the    |\n|                          |      |TWAG used. It may occur twice in the case |\n|                          |      |when the TWAG has IPv4v6 dual stack       |\n|                          |      |control plane.                            |\n|MME Number for MT SMS     |OC    |This field holds the MME international    |\n|                          |      |PSTN/ISDN E.164 number used for \"SMS over |\n|                          |      |MME Charging\".                            |\n|MME Name                  |OC    |This field holds the operation Identity of|\n|                          |      |the MME used for \"SMS over MME Charging\". |\n|MME Realm                 |OC    |This field holds the operation Realm      |\n|                          |      |Identity of the MME used for \"SMS over MME|\n|                          |      |Charging\".                                |\n|CG Address                |OC    |This field holds the Charging Gateway IP  |\n|                          |      |address if available. Only used in EPC    |\n|                          |      |Online Charging.                          |\n|IMSI MCC MNC              |OC    |This field holds the MCC and MNC extracted|\n|                          |      |from the user's IMSI (first 5 or 6 digits,|\n|                          |      |as applicable from the presented IMSI).   |\n|IMSI Unauthenticated Flag |OC    |This field is present when IMSI is        |\n|                          |      |provided in Subscription Id and this IMSI |\n|                          |      |is unauthenticated (due to emergency      |\n|                          |      |bearer service situations).               |\n|PGW MCC MNC               |OC    |This field holds the MCC-MNC of the       |\n|                          |      |network the P-GW belongs to.              |\n|TDF MCC MNC               |OC    |PLMN identifier (MCC MNC) of the TDF.     |\n|NSAPI                     |OC    |This field Identifies a particular IP-CAN |\n|                          |      |bearer for the associated PDN and         |\n|                          |      |MSISDN/IMSI from creation to deletion. See|\n|                          |      |NOTE.                                     |\n|Called Station Id         |OC    |This field contains the identifier of the |\n|                          |      |access point (APN) the user is connected  |\n|                          |      |to.                                       |\n|Session Stop Indicator    |OC    |This field indicates to the OCS that the  |\n|                          |      |last IP-CAN bearer of a session is        |\n|                          |      |released and that the IP-CAN session has  |\n|                          |      |been terminated.                          |\n|                          |      |This field only indicates to the OCS that |\n|                          |      |the TDF session is terminated in TDF case.|\n|Selection Mode            |OC    |This field contains the Selection mode for|\n|                          |      |this APN received in the Create PDP       |\n|                          |      |context request, on E-UTRAN initial attach|\n|                          |      |and UE requested PDN connectivity, or     |\n|                          |      |Attach in WLAN on GTP S2a.                |\n|Charging Characteristics  |OC    |This field contains the Charging          |\n|                          |      |Characteristics for this IP-CAN bearer    |\n|                          |      |received in the Create IP-CAN bearer      |\n|                          |      |Request Message (only available in R99 and|\n|                          |      |later releases).                          |\n|Charging Characteristics  |OC    |This field holds information about how the|\n|Selection Mode            |      |\"Charging Characteristics\" was selected.  |\n|Serving Node MCC MNC      |OC    |This field holds the MCC and MNC serving  |\n|                          |      |the UE:  extracted from the RAI within the|\n|                          |      |IP-CAN bearer activation or Update        |\n|                          |      |messages received over Gn/Gp, or provided |\n|                          |      |by the SGW in the \"Serving Network\" IE    |\n|                          |      |over S5/S8 or by AGW/TWAG (For TWAN, PLMN |\n|                          |      |identifier used for UE authentication,    |\n|                          |      |i.e. the VPLMN in roaming case, and the   |\n|                          |      |HPLMN in non-roaming case).               |\n|CN Operator Selection     |OC    |This field indicates whether the Serving  |\n|Entity                    |      |Network identified by the \"Serving Node   |\n|                          |      |MCC MNC\" has been selected by the UE or by|\n|                          |      |the network, as defined in TS\u00a029.060\u00a0[203]|\n|                          |      |for GPRS, and in TS 29.274 [210] for EPC, |\n|                          |      |if available.                             |\n|MS Time Zone              |OC    |This field indicates the offset between   |\n|                          |      |universal time and local time in steps of |\n|                          |      |15 minutes of where the MS currently      |\n|                          |      |resides.                                  |\n|Charging Rule Base Name   |OC    |This field indicates the name of a        |\n|                          |      |pre-defined group of PCC rules residing at|\n|                          |      |the PCEF. It may occur several times      |\n|                          |      |within the PS Information field.          |\n|ADC Rule Base Name        |OC    |This field indicates the name of a        |\n|                          |      |pre-defined group of ADC rules in TDF     |\n|                          |      |case.                                     |\n|User Location Info        |OC    |This field indicates details of where the |\n|                          |      |UE is currently located (e.g. SAI, TAI,   |\n|                          |      |RAI, CGI, ECGI or access-specific user    |\n|                          |      |location information).                    |\n|User Location Info Time   |OC    |This field contains the time at which the |\n|                          |      |user location information was acquired, if|\n|                          |      |available.                                |\n|User CSG Information      |OC    |This field indicates details of the User  |\n|                          |      |CSG Information of the UE, if available,  |\n|                          |      |including CSG ID, access mode and CSG     |\n|                          |      |membership indication.                    |\n|3GPP2 User Location Info  |OC    |This field holds the 3GPP2 User Location  |\n|                          |      |Info of where the UE is currently located |\n|                          |      |(i.e. 3GPP2 BSID: Cell-Id, SID, NID), as  |\n|                          |      |defined in TS 29.212 [216]                |\n|TWAN User Location        |OC    |This field contains the UE location in a  |\n|Information               |      |Trusted WLAN Access Network (TWAN) , if   |\n|                          |      |available:                                |\n|                          |      |- as \"TWAN identifier\" defined in TS      |\n|                          |      |29.274 [210] for S2a GTP-based case, or,  |\n|                          |      |- as \"Access Network Identifier Option IE\"|\n|                          |      |defined in 29.275 [211] for S2a PMIP-based|\n|                          |      |case.                                     |\n|UWAN User Location        |OC    |This field contains the UE location in an |\n|Information               |      |Untrusted Wireless Access Network (UWAN)  |\n|                          |      |which includes the UE local IP address and|\n|                          |      |optionally UDP or TCP source port number  |\n|                          |      |(if NAT is detected) as defined in TS     |\n|                          |      |29.274 [210]. It may also include WLAN    |\n|                          |      |location information the ePDG may have    |\n|                          |      |received from the 3GPP AAA server about   |\n|                          |      |the UE as \"WLAN location information\"     |\n|                          |      |defined in TS 29.274 [210].               |\n|Presence Reporting Area   |OC    |This field contains part of the Presence  |\n|Information               |      |Reporting Area Information of UE as       |\n|                          |      |defined in TS 29.212\u00a0[216], comprising the|\n|                          |      |Presence Reporting Area identifier(s) the |\n|                          |      |Presence Reporting Area(s) status (UE     |\n|                          |      |presence or not, inactive), and which Node|\n|                          |      |subscribed-to, or the Presence Reporting  |\n|                          |      |Area is set to inactive, if available.    |\n|                          |      |It may occur several times within the PS  |\n|                          |      |Information field.                        |\n|RAT Type                  |OC    |This field indicates which Radio Access   |\n|                          |      |Technology (RAT) is currently serving the |\n|                          |      |UE as defined in TS 29.061 [205].         |\n|                          |      |When NBIFOM is accepted by PCRF, this     |\n|                          |      |field holds the first default bearer\u2019s RAT|\n|                          |      |type when charging per IP-CAN session is  |\n|                          |      |active.                                   |\n|Furnish Charging          |OC    |This field contains the PS Furnish        |\n|Information               |      |Information Elements.                     |\n|Offline Charging          |OC    |This field contains the Offline Charging  |\n|                          |      |parameters to control offline charging.   |\n|PDP Context Type          |OC    |This field indicates the type of a PDP    |\n|                          |      |context (i.e. Primary or Secondary). This |\n|                          |      |field is present when using the Gn/Gp     |\n|                          |      |reference point only.                     |\n|Traffic data volumes      |OC    |This field holds the containers associated|\n|                          |      |to a charging condition change on an      |\n|                          |      |IP-CAN bearer. This is included when      |\n|                          |      |triggers conditions are met (Qos change,  |\n|                          |      |tariff time change ...).                  |\n|                          |      |It may occur several times within the PS  |\n|                          |      |Information field.                        |\n|Service data container    |OC    |This field holds the container associated |\n|                          |      |to a service condition change on a service|\n|                          |      |data flow (categorized per rating group or|\n|                          |      |per combination of the rating group and   |\n|                          |      |service id) within this IP-CAN bearer.    |\n|                          |      |For TDF case, this field holds the        |\n|                          |      |container associated to a charging        |\n|                          |      |condition change on an application traffic|\n|                          |      |(categorized per rating group or per      |\n|                          |      |combination of the rating group and       |\n|                          |      |service id) within this TDF session.      |\n|                          |      |It may occur several times within the PS  |\n|                          |      |Information field.                        |\n|User Equipment Info       |OC    |This field holds the identification of the|\n|                          |      |terminal (IMEI or IMEISV\u2026)                |\n|                          |      |It is used for identifying the user in    |\n|                          |      |case IMSI is not present during emergency |\n|                          |      |bearer service.                           |\n|                          |      |Editor's Note: Alignement with online     |\n|                          |      |charging is needed.                       |\n|Terminal Information      |OC    |This field holds the identification of the|\n|                          |      |terminal (IMEI or IMEISV, 3GPP2-MEID..).It|\n|                          |      |is used for identifying the user in case  |\n|                          |      |IMSI is not present during emergency      |\n|                          |      |bearer service.                           |\n|                          |      |Editor's Note : this parameter is only for|\n|                          |      |offline charging and usage for online     |\n|                          |      |charging instead of User-Equipment-info is|\n|                          |      |ffs                                       |\n|Start Time                |OC    |Timestamp when User IP-CAN/TDF session    |\n|                          |      |starts.                                   |\n|Stop Time                 |OC    |Timestamp when User IP-CAN/TDF session    |\n|                          |      |terminates.                               |\n|Change Condition          |OC    |This field holds the reason for sending   |\n|                          |      |Charging Data Request from the PCN Nodes. |\n|Diagnostics               |OC    |This field holds a more detailed reason   |\n|                          |      |for the release of theIP-CAN bearer, when |\n|                          |      |a single cause is applicable, and         |\n|                          |      |complements the \"Change Condition\"        |\n|                          |      |information.                              |\n|                          |      |When charging per IP-CAN session is       |\n|                          |      |active, PGW uses this field to hold a more|\n|                          |      |detailed reason for the release of the    |\n|                          |      |IP-CAN session, when a single cause is    |\n|                          |      |applicable.                               |\n|Enhanced Diagnostics      |OC    |This field holds a more detailed reason   |\n|                          |      |for the release of the connection, when a |\n|                          |      |set of causes is applicable.              |\n|                          |      |When charging per IP-CAN session is       |\n|                          |      |active, PGW uses this field to hold a more|\n|                          |      |detailed reason for the release of the    |\n|                          |      |IP-CAN session, when a set of causes is   |\n|                          |      |applicable.                               |\n|Low Priority Indicator    |OC    |This field indicates if this IP-CAN       |\n|                          |      |session has a low priority, i.e. for      |\n|                          |      |Machine Type Communication.               |\n|NBIFOM Support            |OC    |This field indicates that NBIFOM was      |\n|                          |      |requested by the UE, supported and        |\n|                          |      |accepted by the network for the IP-CAN    |\n|                          |      |session or if NBIFOM is not supported for |\n|                          |      |the IP-CAN session.                       |\n|NBIFOM Mode               |OC    |This field indicates the NBIFOM mode      |\n|                          |      |selected for the PDN connection, when     |\n|                          |      |NBIFOM is supported for the IP-CAN        |\n|                          |      |session. This field is only present when  |\n|                          |      |NBIFOM is accepted.                       |\n|CP CIoT EPS Optimisation  |OC    |This field indicates whether CP CIoT EPS  |\n|indicator                 |      |Optimisation is used during data transfer |\n|                          |      |with the UE (i.e. Control Plane NAS PDU   |\n|                          |      |via S11-U between SGW and MME) or not     |\n|                          |      |(i.e. User Plane via S1-U between SGW and |\n|                          |      |eNB), if enabled.                         |\n|UNI PDU CP Only Flag      |OC    |This field indicates whether this PDN     |\n|                          |      |connection is applied with \"Control Plane |\n|                          |      |Only Flag\" for UNI PDU transfer, i.e.     |\n|                          |      |transfer only using Control Plane NAS PDU |\n|                          |      |(Control Plane CIoT EPS optimisation).    |\n|Serving PLMN Rate Control |Oc    |This field holds the Serving PLMN Rate    |\n|                          |      |Control used by the MME.                  |\n|MO exception data counter |Oc    |This field holds the MO exception data    |\n|                          |      |counter value with the timestamp          |\n|                          |      |indicating the time at which the counter  |\n|                          |      |value increased from 0 to 1, as defined in|\n|                          |      |TS 29.274 [210].                          |\n|APN Rate Control          |Oc    |This field holds the list of APN Rate     |\n|                          |      |Controls enforced in the PGW.             |\n|3GPP PS Data Off Status   |Oc    |This field holds the 3GPP Data off Status |\n|                          |      |when UE\u2019s 3GPP Data Off status is         |\n|                          |      |Activated or Deactivated.                 |\n|Unused Quota Timer        |Oc    |This field holds the threshold for the    |\n|                          |      |time period without any quota granted or  |\n|                          |      |any quota being consumed for any rating   |\n|                          |      |group belonging to the Gy session. It     |\n|                          |      |holds either the value configured in PCEF,|\n|                          |      |if it is supported, or the value to be    |\n|                          |      |used as received from the OCS. A value of |\n|                          |      |zero indicates that this mechanism shall  |\n|                          |      |not be used.                              |\n\n\n  NOTE:  For network requested secondary IP-CAN bearer activation, the\n         CCR[Initial] does not contain a value of NSAPI, whilst the\n         Negotiated QoS profile reflects the requested QoS profile used in\n         the activation request.\n\n  Editor\u2019s Note: The handling of  \"CP CIoT EPS Optimisation\" when charging\n         per IP-CAN session applies is FFS.\n\n\n\n\n\n\n\n           6.3.1.3  Multiple Unit Operation information when charging per\n           IP-CAN session is active\n\nThe components in the Multiple Unit Operation that are used when charging\nper IP-CAN session is active can be found in table 6.3.1.3.1.\n\n Table 6.3.1.3.1: Structure of the Multiple Unit Operation when charging per\n                          IP-CAN session is active\n\n|Information Element |Categor|Description                            |\n|                    |y      |                                       |\n|Granted Service Unit|OC     |As specified in TS 32.299 [50].        |\n| Tariff Time Change |OC     |As specified in TS 32.299 [50].        |\n| CC Time            |OC     |As specified in TS 32.299 [50].        |\n| CC Total Octets    |OC     |As specified in TS 32.299 [50].        |\n| CC Input Octets    |OC     |As specified in TS 32.299 [50].        |\n| CC Output Octets   |OC     |As specified in TS 32.299 [50].        |\n| CC Service Specific|OC     |As specified in TS 32.299 [50].        |\n|Units               |       |                                       |\n|Requested Service   |OC     |As specified in TS 32.299 [50].        |\n|Unit                |       |                                       |\n| CC Time            |OC     |As specified in TS 32.299 [50].        |\n| CC Total Octets    |OC     |As specified in TS 32.299 [50].        |\n| CC Input Octets    |OC     |As specified in TS 32.299 [50].        |\n| CC Output Octets   |OC     |As specified in TS 32.299 [50].        |\n| CC Service Specific|OC     |As specified in TS 32.299 [50].        |\n|Units               |       |                                       |\n|Used Service Unit   |OC     |As specified in TS 32.299 [50].        |\n| Reporting Reason   |OM     |As specified in TS 32.299 [50].        |\n| Tariff Change Usage|OM     |As specified in TS 32.299 [50].        |\n| CC Time            |OC     |As specified in TS 32.299 [50].        |\n| CC Total Octets    |OC     |As specified in TS 32.299 [50].        |\n| CC Input Octets    |OC     |As specified in TS 32.299 [50].        |\n| CC Output Octets   |OC     |As specified in TS 32.299 [50].        |\n| CC Service Specific|OC     |As specified in TS 32.299 [50].        |\n|Units               |       |                                       |\n| Event Charging Time|OC     |As specified in TS 32.299 [50].        |\n|Stamp               |       |                                       |\n|Service Identifier  |OC     |As specified in TS 32.299 [50].        |\n|Rating Group        |OC     |As specified in TS 32.299 [50].        |\n|Reporting Reason    |OC     |As specified in TS 32.299 [50].        |\n|Trigger             |OC     |As specified in TS 32.299 [50].        |\n|Related Trigger     |OC     |This field indicates the trigger       |\n|                    |       |condition associated with an alternate |\n|                    |       |access of a multi-access PDN connection|\n|                    |       |that indirectly triggered this multiple|\n|                    |       |unit operation.                        |\n|Refund Information  |OC     |As specified in TS 32.299 [50].        |\n|Envelope            |OC     |As specified in TS 32.299 [50].        |\n|AF Correlation      |OC     |Supported for PS domain charging, as   |\n|Information         |       |specified in TS 32.299 [50].           |\n|Service Specific    |OC     |Supported for PS domain charging, as   |\n|Info                |       |specified in TS 32.299 [50].           |\n|QoS Information     |OC     |This field contains the authorized QoS |\n|                    |       |for the first IP-CAN bearer for which  |\n|                    |       |traffic is reported for the Rating     |\n|                    |       |Group or Rating Group / Service        |\n|                    |       |Identifier. If traffic from multiple   |\n|                    |       |bearers is included in the report, only|\n|                    |       |one field is included.                 |\n|                    |       |                                       |\n|                    |       |This field includes: QCI and ARP. For  |\n|                    |       |non-GBR QCI values, this field also    |\n|                    |       |includes the MBR for the downlink and  |\n|                    |       |uplink direction. For GBR QCI values,  |\n|                    |       |this field also includes GBR for the   |\n|                    |       |downlink and uplink direction. If the  |\n|                    |       |MBR is different than the GBR, then    |\n|                    |       |this field also includes the MBR for   |\n|                    |       |the downlink and uplink direction.     |\n|                    |       |                                       |\n|                    |       |This field also includes the authorized|\n|                    |       |APN-AMBR for the IP-CAN session.       |\n|RAT Type            |OC     |This field contains the RAT Type of the|\n|                    |       |IP-CAN bearer that is first reported   |\n|                    |       |for the Rating Group or Rating Group / |\n|                    |       |Service Identifier. If traffic from    |\n|                    |       |multiple access types is included in   |\n|                    |       |this report, only one field is         |\n|                    |       |included.                              |\n|                    |       |                                       |\n|                    |       |This field is only applicable when     |\n|                    |       |NBIFOM is accepted for the IP-CAN      |\n|                    |       |session.                               |\n\n\n  Editor\u2019s Note: The handling of  \"Control Plane CIoT EPS Optimisation\"\n         when charging per IP-CAN session applies is FFS.\n\n\n"}, {"key": "Supported features", "numbering": "6.3.1.4", "title_level": 3, "desc": "6.3.1.4  Supported features\n\nThe Supported features information that is used for PS domain charging is\nbased on the information defined for the supported features mechanism\nspecified in clause 6.5.10 TS 32.299 [50].\n\nThe following table defines the features applicable for the feature lists\nwith a Feature-List-ID of 1.\n\n      Table 6.3.1.4: Features of Feature-List-ID 1 used in PS charging\n\n|Featur|Feature          |Description                              |Online|\n|e bit |                 |                                         |/Offli|\n|      |                 |                                         |ne    |\n|0     |EDCE5-CH         |This feature indicates the support of 5G |Offlin|\n|      |                 |New Radio via Dual Connectivity based on |e     |\n|      |                 |clause 5.2.1.11 Data Volume Reporting for|      |\n|      |                 |Secondary RAT usage.                     |      |\n|1     |eFMSS_CH         |This feature indicates the support of    |Both  |\n|      |                 |Flexible Mobile Service Steering based on|      |\n|      |                 |clause 5.1.6.                            |      |\n|2     |WAEPC_CH_Untruste|This feature indicates the support of    |Both  |\n|      |d                |extensions of UWAN location information  |      |\n|3     |WAEPC_CH_trusted |This feature indicates the support of    |Both  |\n|      |                 |extensions of TWAN location information  |      |\n|4     |EDCE5-CH_Extended|This feature indicates the support of 5G |Both  |\n|      |-BW-NR           |New Radio extended QoS.                  |      |\n|Feature bit: The order number of the bit within the Feature-List AVP     |\n|where the least significant bit is assigned number \"0\".                  |\n|Feature: A short name that can be used to refer to the bit and to the    |\n|feature, e.g. \"EPS\".                                                     |\n|Feature in this table is always mandatory since it relates to the        |\n|charging functionality of a network feature.                             |\n|Description: A clear textual description of the feature.                 |\n\n\n\n\n"}, {"key": "Detailed message format for offline charging", "numbering": "6.3.2", "title_level": 2, "desc": ""}, {"key": "Detailed message format for online charging", "numbering": "6.3.3", "title_level": 2, "desc": "         6.3.2  Detailed message format for offline charging\n\nThe following clause specifies per Operation Type the charging data that\nare sent by MME, S-GW, ePDG, TWAG, P-GW and TDF.\n\nThe Operation Types are listed in the following order: S (Start)/I\n(Interim)/S (Stop)/E (Event). Therefore, when all Operation Types are\npossible it is marked as SISE. If only some Operation Types are allowed for\na node, only the appropriate letters are used (i.e. SIS or E) as indicated\nin the table heading. The omission of an Operation Type for a particular\nfield is marked with \"-\" (i.e. SI-E). Also, when an entire field is not\nallowed in a node the entire cell is marked as \"-\".\n\nTable 6.3.2.1 illustrates the basic structure of the supported fields in\nthe Charging Data Request message for PS offline charging.\n\n      Table 6.3.2.1: Supported fields in Charging Data Request message\n\n|Information Element                                          |Node  |S-GW|ePDG|\n|                                                             |Type  |    |    |\n|Supported Features                                |SIS-|SIS-|SIS-  |SIS-|SIS-|\n|Charging Characteristics Selection Mode           |SIS-|SIS-|SIS-  |SIS-|SIS-|\n|Serving Node MCC MNC              |SIS-               |-   |\n|                                  |Supported Operation|S/I/|\n|                                  |Types              |S/E |\n|Session Identifier                                    |---E|\n|Originator Host                                       |---E|\n|Originator Realm                                      |---E|\n|Destination Domain                                    |---E|\n|Operation Type                                        |---E|\n|Operation Number                                      |---E|\n|Operation Identifier                                  |---E|\n|User Name                                             |---E|\n|Destination Host                                      |---E|\n|Operation Interval                                    |---E|\n|Origination State                                     |---E|\n|Origination Timestamp                                 |---E|\n|Proxy Information                                     |---E|\n|Route Information                                     |---E|\n|Operation Token                                       |---E|\n|Service Information with PS, IMS, MMS and SMS Information  |\n|Subscription Id                                       |---E|\n|Node Functionality                                    |---E|\n|Node Id                                               |---E|\n|MME Number for MT SMS                                 |---E|\n|MME Name                                              |---E|\n|MME Realm                                             |---E|\n|Serving Node Type                                     |---E|\n|SGSN Address                                          |---E|\n|Charging Characteristics                              |---E|\n|Charging Characteristics Selection Mode               |---E|\n|3GPP User Location Info                               |---E|\n|User Location Info Time                               |---E|\n|RAT Type                                              |---E|\n|Terminal Information                                  |---E|\n|Recipient Address                                     |---E|\n|SMSC Address                                          |---E|\n|Originator Address                                    |---E|\n|Submission Time                                       |---E|\n|Message Id                                            |---E|\n|CN Operator Selection Entity                          |---E|\n\n\n\nTable 6.3.2.2 illustrates the basic structure of the supported fields in\nthe Charging Data Response message for PS offline charging, and \"SMS over\nMME Charging\".\n\n      Table 6.3.2.2: Supported fields in Charging Data Response message\n\n\n\n|Information Element                                                        |\n|Supported Features             |SIS-               |SIS-       |SIS-        |\n|                               |Supported Operation|I/U/T/E    |I/U/T/E     |\n|                               |Types              |           |            |\n|Session Identifier                                |IUT-       |IUT-        |\n|Originator Host                                   |IUT-       |IUT-        |\n|Originator Domain                                 |IUT-       |IUT-        |\n|Destination Domain                                |IUT-       |IUT-        |\n|Operation Identifier                              |IUT-       |IUT-        |\n|Operation Token                                   |IUT-       |IUT-        |\n|Operation Type                                    |IUT-       |IUT-        |\n|Operation Number                                  |IUT-       |IUT-        |\n|Destination Host                                  |IUT-       |IUT-        |\n|User Name                                         |IUT-       |IUT-        |\n|Origination State                                 |IUT-       |IUT-        |\n|Origination Timestamp                             |IUT-       |IUT-        |\n|Subscriber Identifier                             |IUT-       |IUT-        |\n|Termination Cause                                 |--T-       |--T-        |\n|Requested Action                                  |IUT-       |IUT-        |\n|Multiple Operation                                |IU--       |IU--        |\n|Multiple Unit Operation                           |IUT-       |IUT-        |\n|Subscriber Equipment Number                       |IUT-       |IUT-        |\n|Route Information                                 |IUT-       |IUT-        |\n|Service Information                               |IUT-       |IUT-        |\n|Service Information with IMS and PS Information                |            |\n|Supported Features                                |IUT-       |IUT-        |\n|Node Functionality                                |IUT-       |IUT-        |\n|Charging Id                                       |IUT-       |-           |\n|Node Id                                           |IUT-       |IUT-        |\n|PDN Connection Charging Id                        |IUT-       |IUT-        |\n|PDP/PDN Type                                      |IUT-       |-           |\n|SGi PtP Tunnelling Method                         |IUT-       |-           |\n|SCS/AS Address                                    |IUT-       |-           |\n|PDP/PDN Address                                   |IUT-       |IUT-        |\n|PDP/PDN Address prefix length                     |IUT-       |IUT-        |\n|Dynamic Address Flag                              |IUT-       |IUT-        |\n|Dynamic Address Flag Extension                    |IUT-       |IUT-        |\n|QoS Information                                   |IUT-       |IUT-        |\n|Serving Node Address                              |IUT-       |IUT-        |\n|Serving Node Type                                 |IUT-       |IUT-        |\n|SGW Change                                        |-          |-           |\n|P-GW Address                                      |IUT-       |IUT-        |\n|TDF Address                                       |-          |IUT-        |\n|CG Address                                        |IUT-       |IUT-        |\n|IMSI MCC MNC                                      |IUT-       |IUT-        |\n|IMSI Unauthenticated Flag                         |IUT-       |-           |\n|PGW MCC MNC                                       |IUT-       |IUT-        |\n|TDF MCC MNC                                       |-          |IUT-        |\n|NSAPI                                             |IUT-       |-           |\n|Called Station Id                                 |IUT-       |IUT-        |\n|Session Stop Indicator                            |--T-       |--T-        |\n|Selection Mode                                    |IUT-       |IUT-        |\n|Charging Characteristics                          |IUT-       |IUT-        |\n|Charging Characteristics Selection Mode           |IUT-       |IUT-        |\n|Serving Node MCC MNC                              |IUT-       |IUT-        |\n|MS Time Zone                                      |IUT-       |IUT-        |\n|Charging Rule Base Name                           |IUT-       |-           |\n|ADC Rule Base Name                                |-          |IUT-        |\n|User Location Info                                |IUT-       |IUT-        |\n|User Location Info Time                           |IUT-       |-           |\n|User CSG Information                              |IUT-       |IUT-        |\n|3GPP2 User Location Info                          |IUT-       |IUT-        |\n|TWAN User Location Information                    |IUT-       |IUT-        |\n|UWAN User Location Information                    |IUT-       |-           |\n|Presence Reporting Area Information               |UT-        |-           |\n|RAT Type                                          |IUT-       |IUT-        |\n|Furnish Charging Information                      |-          |-           |\n|Offline Charging                                  |IUT-       |IUT-        |\n|PDP Context Type                                  |IUT-       |-           |\n|Traffic data volumes                              |-          |-           |\n|Service data container                            |-          |-           |\n|User Equipment Info                               |-          |-           |\n|Terminal-Information                              |-          |-           |\n|Start time                                        |-          |-           |\n|Stop time                                         |-          |-           |\n|Change Condition                                  |-          |-           |\n|Diagnostics                                       |--T-       |--T-        |\n|Enhanced Diagnostics                              |--T-       |-           |\n|CN Operator Selection Entity                      |-          |-           |\n|NBIFOM Support                                    |I---       |-           |\n|NBIFOM Mode                                       |I---       |-           |\n|CP CIoT EPS Optimisation Indicator                |--         |-           |\n|UNI PDU CP Only Flag                              |IUT-       |-           |\n|Serving PLMN Rate Control                         |IU--       |-           |\n|APN Rate Control                                  |IU--       |-           |\n|MO exception data counter                         |-          |-           |\n|3GPP PS Data Off Status                           |IUT-       |-           |\n|Unused Quota Timer                                |IU--       |-           |\n\n\n\nTable 6.3.3.2 illustrates the basic structure of the supported fields in\nthe Debit / Reserve Units Response for PS online charging.\n\n  Table 6.3.3.2: Supported fields in Debit / Reserve Units Response Message\n\n|Information Element             |Node Type          |P-GW|TDF |\n|                                |Supported Operation|I/U/|I/U/|\n|                                |Types              |T/E |T/E |\n|Session Identifier                                 |IUT-|IUT-|\n|Operation Result                                   |IUT-|IUT-|\n|Originator Host                                    |IUT-|IUT-|\n|Originator Domain                                  |IUT-|IUT-|\n|Operation Identifier                               |IUT-|IUT-|\n|Operation Type                                     |IUT-|IUT-|\n|Operation Number                                   |IUT-|IUT-|\n|Operation Failover                                 |IUT-|IUT-|\n|Multiple Unit Operation                            |IUT-|IUT-|\n|Operation Failure Action                           |IUT-|IUT-|\n|Redirection Host                                   |IUT-|IUT-|\n|Redirection Host Usage                             |IUT-|IUT-|\n|Redirection Cache Time                             |IUT-|IUT-|\n|Route Information                                  |IUT-|IUT-|\n|Failed parameter                                   |IUT-|IUT-|\n|Service Information                                |IUT-|IUT-|\n|Service Information with PS Information            |    |    |\n|Supported Features                                 |I---|I---|\n|Furnish Charging Information                       |IUT-|IUT-|\n|Offline Charging                                   |I---|I---|\n|                                                   |-   |-   |\n|Presence Reporting Area Information                |IU--|-   |\n|Unused Quota Timer                                 |IU--|-   |\n\n\n\n"}, {"key": "Void", "numbering": "6.4", "title_level": 1, "desc": "6.4  Void\n\n\n"}, {"key": "apply", "desc": ""}, {"key": "2G-/3G-", "desc": "prefixes 2G- and 3G- refer to functionality that supports only GSM\nor UMTS, respectively, e.g. 2G-SGSN refers only to the GSM functionality of\nan SGSN\nWhen the term/prefix is omitted, reference is made independently from the\nGSM or UMTS functionality."}, {"key": "accounting", "desc": "process of apportioning charges between the Home Environment,\nServing Network and Subscriber."}, {"key": "billing", "desc": "function whereby CDRs generated by the charging function(s) are\ntransformed into bills requiring payment."}, {"key": "Billing Domain (BD)", "desc": "Part of the operator network, which is outside the\ncore network that receives and processes CDR files from the core network\ncharging functions. It includes functions that can provide billing\nmediation and billing or other (e.g. statistical) end applications. It is\nonly applicable to offline charging (see \"Online Charging System\" for\nequivalent functionality in online charging)."}, {"key": "CAMEL", "desc": "network feature that provides the mechanisms to support operator\nspecific services even when roaming outside HPLMN."}, {"key": "CAMEL subscription information", "desc": "identifies a subscriber as having CAMEL\nservices."}, {"key": "chargeable event", "desc": "activity utilizing telecommunications network resources"}, {"key": "and related services for", "desc": "-  user to user communication (e.g. a single call, a data communication\n    session or a short message); or\n\n  -  user to network communication (e.g. service profile administration);\n    or\n\n  -  inter-network communication (e.g. transferring calls, signalling, or\n    short messages); or\n\n  -  mobility (e.g. roaming or inter-system handover); and\n\n  -  that the network operator may want to charge for.\n\nAs a minimum, a chargeable event characterises the resource / service usage\nand indicates the identity of the involved end user(s)."}, {"key": "charged party", "desc": "user involved in a chargeable event that has to pay parts or\nthe whole charges of the chargeable event, or a third party paying the\ncharges caused by one or all users involved in the chargeable event, or a\nnetwork operator."}, {"key": "charging", "desc": "a function within the telecommunications network and the\nassociated OCS/BD components whereby information related to a chargeable\nevent is collected, formatted and transferred in order to make it possible\nto determine usage for which the charged party may be billed."}, {"key": "Charging Data Record (CDR)", "desc": "A formatted collection of information about a\nchargeable event (e.g. time of call set-up, duration of the call, amount of\ndata transferred, etc) for use in billing and accounting. For each party to\nbe charged for parts of or all charges of a chargeable event a separate CDR\nis generated, i.e. more than one CDR may be generated for a single\nchargeable event, e.g. because of its long duration, or because more than\none charged party is to be charged."}, {"key": "charging event", "desc": "a set of charging information forwarded by the CTF towards\nthe CDF (offline charging) or towards the OCS (online charging). Each\ncharging event matches exactly one chargeable event."}, {"key": "charging function", "desc": "entity inside the core network domain, subsystem or\nservice that is involved in charging for that domain, subsystem or service."}, {"key": "Credit-Control", "desc": "mechanism which directly interacts in real-time with an\naccount and controls or monitors the charges, related to the service usage."}, {"key": "Credit-Control is a process of", "desc": "checking if credit is available, credit\nreservation, deduction of credit from the end user account when service is\ncompleted and refunding of reserved credit not used."}, {"key": "domain", "desc": "part of a communication network that provides network resources\nusing a certain bearer technology."}, {"key": "Fully Qualified Partial CDR (FQPC)", "desc": "partial CDR that contains a complete\nset of the fields specified in the present document. This includes all the\nmandatory and conditional fields as well as those fields that the PLMN\noperator has provisioned to be included in the CDR. The first Partial CDR\nshall be a Fully Qualified Partial CDR."}, {"key": "GPRS", "desc": "packet switched bearer and radio services for GSM and UMTS\u00a0systems."}, {"key": "GSM only", "desc": "qualifier indicating that this clause or paragraph applies only\nto a GSM system. For multi-system cases this is determined by the current\nserving radio access network."}, {"key": "in GSM,...", "desc": "qualifier indicating that this paragraph applies only to GSM\nSystem."}, {"key": "in UMTS,...", "desc": "qualifier indicating that this paragraph applies only to\nUMTS\u00a0System."}, {"key": "inter-system change", "desc": "change of radio access between different radio access\ntechnologies such as GSM and UMTS."}, {"key": "IP-CAN bearer", "desc": "An IP transmission path of defined capacity, delay and bit\nerror rate, etc. See TS\u00a021.905\u00a0[100] for the definition of bearer."}, {"key": "IP-CAN session", "desc": "The association between a UE represented by an IPv4 address\nand/or an IPv6 prefix, and UE identity information, if available, and a PDN\nrepresented by a PDN ID (e.g. an APN). An IP-CAN session incorporates one\nor more IP-CAN bearers. Support for multiple IP-CAN bearers per IP-CAN\nsession is IP-CAN specific. An IP-CAN session exists as long as UE IP\naddresses are established and announced to the IP network."}, {"key": "middle tier TS", "desc": "used for the 3GPP charging TSs that specify the domain /\nsubsystem / service specific, online and offline, charging functionality.\nThese are all the TSs in the numbering range from TS 32.250 [10] to TS\n32.271 [31], e.g.\u00a0TS\u00a032.250\u00a0[10] for the CS domain, or TS 32.270 [30] for\nthe MMS service.\nCurrently, there is only one \"tier 1\" TS in 3GPP, which is TS 32.240 [1]\nthat specifies the charging architecture and principles. Finally, there are\na number of top tier TSs in the 32.29x numbering range ([50] ff) that\nspecify common charging aspects such as parameter definitions, encoding\nrules, the common Billing Domain (BD) interface or common charging\napplications."}, {"key": "near real-time", "desc": "near real-time charging and billing information is to be\ngenerated, processed, and transported to a desired conclusion in less than\none (1) minute.\n\nNon-Seamless WLAN Offload (NSWO) is a capability of routing specific IP\nflows over the WLAN access without traversing the EPC as defined in\nclause\u00a04.1.5 of TS\u00a023.402\u00a0[209]."}, {"key": "offline charging", "desc": "charging mechanism where charging information does not\naffect, in real-time, the service rendered."}, {"key": "online charging", "desc": "charging mechanism where charging information can affect,\nin real-time, the service rendered and therefore a direct interaction of\nthe charging mechanism with bearer/session/service control is required."}, {"key": "Online Charging System (OCS)", "desc": "the entity that performs real-time Credit-\nControl. Its functionality includes transaction handling, rating, online\ncorrelation and management of subscriber account balances."}, {"key": "packet switched domain", "desc": "domain in which data is transferred between core\nnetwork elements in packet switched mode."}, {"key": "partial CDR", "desc": "CDR that provides information on part of a subscriber session.\nA long session may be covered by several partial CDRs. Two formats are\nconsidered for partial CDRs. One that contains all of the necessary fields\n(FQPC); the second has a reduced format (RPC)."}, {"key": "Presence Reporting Area", "desc": "An area defined within 3GPP Packet Domain for the\npurposes of reporting of UE presence within that area due to policy control"}, {"key": "and/or charging reasons. There are two types of Presence Reporting Area", "desc": "\"UE-dedicated Presence Reporting Area\", and \"Core Network pre-configuration\nPresence Reporting Area\"."}, {"key": "Real-time", "desc": "real-time charging and billing information is to be generated,\nprocessed, and transported to a desired conclusion in less than one (1)\nsecond."}, {"key": "Reduced Partial CDR (RPC)", "desc": "partial CDRs that only provide mandatory fields\nand information regarding changes in the session parameters relative to the\nprevious partial CDR. For example, location information is not repeated in\nthese CDRs if the subscriber did not change its location."}, {"key": "settlement", "desc": "payment of amounts resulting from the accounting process."}, {"key": "Selected IP Traffic Offload (SIPTO)", "desc": "Offload of selected types of IP\ntraffic (e.g. internet traffic) towards a defined IP network close to the\nUE's point of attachment to the access network. SIPTO is applicable to\ntraffic offload for the macro-cellular access network and for the H(e)NB\nsubsystem."}, {"key": "subscriber", "desc": "A subscriber is an entity (associated with one or more users)\nthat is engaged in a subscription with a service provider. The subscriber\nis allowed to subscribe and unsubscribe services, to register a user or a\nlist of users authorized to enjoy these services, and also to set the\nlimits relative to the use that associated users make of these services."}, {"key": "tariff period", "desc": "part of one (calendar) day during which a particular tariff\nis applied. Defined by the time at which the period commences (the switch-\nover time) and the tariff to be applied after switch-over."}, {"key": "tariff", "desc": "set of parameters defining the network utilization charges for the\nuse of a particular bearer / session / service."}, {"key": "UMTS only", "desc": "qualifier indicating that this clause or paragraph applies only\nto a UMTS system. For multi-system cases this is determined by the current\nserving radio access network."}, {"key": "Unused Quota timer", "desc": "the time period without quota granted or any quota\nbeing consumed for any rating group belonging to the Gy session."}, {"key": "  NOTE", "desc": "It is started when initial quota for the session is received from\n         the OCS and it is restarted every time there is a quota\n         consumption."}, {"key": "user", "desc": "An entity, not part of the 3GPP System that uses network resources by\nmeans of a subscription.\nThe user may or may not be identical to the subscriber holding that\nsubscription."}, {"key": "User Equipment (UE)", "desc": "A device allowing a user access to network services.\nFor the purpose of 3GPP specifications the interface between the UE and the\nnetwork is the radio interface. A UE can be subdivided into a number of\ndomains, the domains being separated by reference points. Currently defined\ndomains are the USIM and ME Domains. The ME Domain can further be\nsubdivided into several components showing the connectivity between\nmultiple functional groups. These groups can be implemented in one or more\nhardware devices. An example of such connectivity is the TE \u2013 MT interface.\nFurther, an occurrence of a User Equipment is an MS for GSM as defined in\nGSM TS 04.02 (GSM Public Land Mobile Network (PLMN) Access Reference\nConfiguration)."}]